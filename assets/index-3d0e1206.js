var xm=(o,p)=>()=>(p||o((p={exports:{}}).exports,p),p.exports);var cv=xm((Tu,Sn)=>{function Au(o,p){const m=Object.create(null),T=o.split(",");for(let u=0;u<T.length;u++)m[T[u]]=!0;return p?u=>!!m[u.toLowerCase()]:u=>!!m[u]}(function(){const o=document.createElement("link").relList;if(!(o&&o.supports&&o.supports("modulepreload"))){for(const m of document.querySelectorAll('link[rel="modulepreload"]'))p(m);new MutationObserver(m=>{for(const T of m)if(T.type==="childList")for(const u of T.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&p(u)}).observe(document,{childList:!0,subtree:!0})}function p(m){if(m.ep)return;m.ep=!0;const T=function(u){const E={};return u.integrity&&(E.integrity=u.integrity),u.referrerPolicy&&(E.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?E.credentials="include":u.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}(m);fetch(m.href,T)}})();const Ci={},Fo=[],hr=()=>{},bm=()=>!1,wm=/^on[^a-z]/,zc=o=>wm.test(o),Pu=o=>o.startsWith("onUpdate:"),on=Object.assign,Cu=(o,p)=>{const m=o.indexOf(p);m>-1&&o.splice(m,1)},Mm=Object.prototype.hasOwnProperty,si=(o,p)=>Mm.call(o,p),Yt=Array.isArray,ko=o=>kc(o)==="[object Map]",jd=o=>kc(o)==="[object Set]",Jt=o=>typeof o=="function",Yi=o=>typeof o=="string",Fc=o=>typeof o=="symbol",Di=o=>o!==null&&typeof o=="object",Wd=o=>(Di(o)||Jt(o))&&Jt(o.then)&&Jt(o.catch),Hd=Object.prototype.toString,kc=o=>Hd.call(o),Sm=o=>kc(o).slice(8,-1),Xd=o=>kc(o)==="[object Object]",Lu=o=>Yi(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,wc=Au(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bc=o=>{const p=Object.create(null);return m=>p[m]||(p[m]=o(m))},Tm=/-(\w)/g,Go=Bc(o=>o.replace(Tm,(p,m)=>m?m.toUpperCase():"")),Am=/\B([A-Z])/g,Yo=Bc(o=>o.replace(Am,"-$1").toLowerCase()),Yd=Bc(o=>o.charAt(0).toUpperCase()+o.slice(1)),ru=Bc(o=>o?`on${Yd(o)}`:""),za=(o,p)=>!Object.is(o,p),au=(o,p)=>{for(let m=0;m<o.length;m++)o[m](p)},Mc=(o,p,m)=>{Object.defineProperty(o,p,{configurable:!0,enumerable:!1,value:m})},Pm=o=>{const p=parseFloat(o);return isNaN(p)?o:p};let sd;const pu=()=>sd||(sd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $s(o){if(Yt(o)){const p={};for(let m=0;m<o.length;m++){const T=o[m],u=Yi(T)?Em(T):$s(T);if(u)for(const E in u)p[E]=u[E]}return p}if(Yi(o)||Di(o))return o}const Cm=/;(?![^(]*\))/g,Lm=/:([^]+)/,Om=/\/\*[^]*?\*\//g;function Em(o){const p={};return o.replace(Om,"").split(Cm).forEach(m=>{if(m){const T=m.split(Lm);T.length>1&&(p[T[0].trim()]=T[1].trim())}}),p}function Ou(o){let p="";if(Yi(o))p=o;else if(Yt(o))for(let m=0;m<o.length;m++){const T=Ou(o[m]);T&&(p+=T+" ")}else if(Di(o))for(const m in o)o[m]&&(p+=m+" ");return p.trim()}const Dm=Au("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function ld(o){return!!o||o===""}const Sc=o=>Yi(o)?o:o==null?"":Yt(o)||Di(o)&&(o.toString===Hd||!Jt(o.toString))?JSON.stringify(o,qd,2):String(o),qd=(o,p)=>p&&p.__v_isRef?qd(o,p.value):ko(p)?{[`Map(${p.size})`]:[...p.entries()].reduce((m,[T,u])=>(m[`${T} =>`]=u,m),{})}:jd(p)?{[`Set(${p.size})`]:[...p.values()]}:!Di(p)||Yt(p)||Xd(p)?p:String(p);let Vn;class Nm{constructor(p=!1){this.detached=p,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Vn,!p&&Vn&&(this.index=(Vn.scopes||(Vn.scopes=[])).push(this)-1)}get active(){return this._active}run(p){if(this._active){const m=Vn;try{return Vn=this,p()}finally{Vn=m}}}on(){Vn=this}off(){Vn=this.parent}stop(p){if(this._active){let m,T;for(m=0,T=this.effects.length;m<T;m++)this.effects[m].stop();for(m=0,T=this.cleanups.length;m<T;m++)this.cleanups[m]();if(this.scopes)for(m=0,T=this.scopes.length;m<T;m++)this.scopes[m].stop(!0);if(!this.detached&&this.parent&&!p){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this._active=!1}}}const Eu=o=>{const p=new Set(o);return p.w=0,p.n=0,p},Zd=o=>(o.w&Wr)>0,Jd=o=>(o.n&Wr)>0,du=new WeakMap;let Zs=0,Wr=1;const fu=30;let jn;const Ia=Symbol(""),mu=Symbol("");class Du{constructor(p,m=null,T){this.fn=p,this.scheduler=m,this.active=!0,this.deps=[],this.parent=void 0,function(u,E=Vn){E&&E.active&&E.effects.push(u)}(this,T)}run(){if(!this.active)return this.fn();let p=jn,m=Hr;for(;p;){if(p===this)return;p=p.parent}try{return this.parent=jn,jn=this,Hr=!0,Wr=1<<++Zs,Zs<=fu?(({deps:T})=>{if(T.length)for(let u=0;u<T.length;u++)T[u].w|=Wr})(this):cd(this),this.fn()}finally{Zs<=fu&&(T=>{const{deps:u}=T;if(u.length){let E=0;for(let F=0;F<u.length;F++){const R=u[F];Zd(R)&&!Jd(R)?R.delete(T):u[E++]=R,R.w&=~Wr,R.n&=~Wr}u.length=E}})(this),Wr=1<<--Zs,jn=this.parent,Hr=m,this.parent=void 0,this.deferStop&&this.stop()}}stop(){jn===this?this.deferStop=!0:this.active&&(cd(this),this.onStop&&this.onStop(),this.active=!1)}}function cd(o){const{deps:p}=o;if(p.length){for(let m=0;m<p.length;m++)p[m].delete(o);p.length=0}}let Hr=!0;const Qd=[];function Vo(){Qd.push(Hr),Hr=!1}function jo(){const o=Qd.pop();Hr=o===void 0||o}function fn(o,p,m){if(Hr&&jn){let T=du.get(o);T||du.set(o,T=new Map);let u=T.get(m);u||T.set(m,u=Eu()),$d(u)}}function $d(o,p){let m=!1;Zs<=fu?Jd(o)||(o.n|=Wr,m=!Zd(o)):m=!o.has(jn),m&&(o.add(jn),jn.deps.push(o))}function Lr(o,p,m,T,u,E){const F=du.get(o);if(!F)return;let R=[];if(p==="clear")R=[...F.values()];else if(m==="length"&&Yt(o)){const A=Number(T);F.forEach((Z,G)=>{(G==="length"||!Fc(G)&&G>=A)&&R.push(Z)})}else switch(m!==void 0&&R.push(F.get(m)),p){case"add":Yt(o)?Lu(m)&&R.push(F.get("length")):(R.push(F.get(Ia)),ko(o)&&R.push(F.get(mu)));break;case"delete":Yt(o)||(R.push(F.get(Ia)),ko(o)&&R.push(F.get(mu)));break;case"set":ko(o)&&R.push(F.get(Ia))}if(R.length===1)R[0]&&gu(R[0]);else{const A=[];for(const Z of R)Z&&A.push(...Z);gu(Eu(A))}}function gu(o,p){const m=Yt(o)?o:[...o];for(const T of m)T.computed&&hd(T);for(const T of m)T.computed||hd(T)}function hd(o,p){(o!==jn||o.allowRecurse)&&(o.scheduler?o.scheduler():o.run())}const Im=Au("__proto__,__v_isRef,__isVue"),Kd=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(Fc)),ud=Rm();function Rm(){const o={};return["includes","indexOf","lastIndexOf"].forEach(p=>{o[p]=function(...m){const T=ui(this);for(let E=0,F=this.length;E<F;E++)fn(T,0,E+"");const u=T[p](...m);return u===-1||u===!1?T[p](...m.map(ui)):u}}),["push","pop","shift","unshift","splice"].forEach(p=>{o[p]=function(...m){Vo();const T=ui(this)[p].apply(this,m);return jo(),T}}),o}function zm(o){const p=ui(this);return fn(p,0,o),p.hasOwnProperty(o)}class ef{constructor(p=!1,m=!1){this._isReadonly=p,this._shallow=m}get(p,m,T){const u=this._isReadonly,E=this._shallow;if(m==="__v_isReactive")return!u;if(m==="__v_isReadonly")return u;if(m==="__v_isShallow")return E;if(m==="__v_raw"&&T===(u?E?Zm:af:E?rf:nf).get(p))return p;const F=Yt(p);if(!u){if(F&&si(ud,m))return Reflect.get(ud,m,T);if(m==="hasOwnProperty")return zm}const R=Reflect.get(p,m,T);return(Fc(m)?Kd.has(m):Im(m))?R:(u||fn(p,0,m),E?R:an(R)?F&&Lu(m)?R:R.value:Di(R)?u?of(R):Ru(R):R)}}class tf extends ef{constructor(p=!1){super(!1,p)}set(p,m,T,u){let E=p[m];if(Wo(E)&&an(E)&&!an(T))return!1;if(!this._shallow&&(Lc(T)||Wo(T)||(E=ui(E),T=ui(T)),!Yt(p)&&an(E)&&!an(T)))return E.value=T,!0;const F=Yt(p)&&Lu(m)?Number(m)<p.length:si(p,m),R=Reflect.set(p,m,T,u);return p===ui(u)&&(F?za(T,E)&&Lr(p,"set",m,T):Lr(p,"add",m,T)),R}deleteProperty(p,m){const T=si(p,m);p[m];const u=Reflect.deleteProperty(p,m);return u&&T&&Lr(p,"delete",m,void 0),u}has(p,m){const T=Reflect.has(p,m);return Fc(m)&&Kd.has(m)||fn(p,0,m),T}ownKeys(p){return fn(p,0,Yt(p)?"length":Ia),Reflect.ownKeys(p)}}class Fm extends ef{constructor(p=!1){super(!0,p)}set(p,m){return!0}deleteProperty(p,m){return!0}}const km=new tf,Bm=new Fm,Um=new tf(!0),Nu=o=>o,Uc=o=>Reflect.getPrototypeOf(o);function mc(o,p,m=!1,T=!1){const u=ui(o=o.__v_raw),E=ui(p);m||(za(p,E)&&fn(u,0,p),fn(u,0,E));const{has:F}=Uc(u),R=T?Nu:m?Fu:Ks;return F.call(u,p)?R(o.get(p)):F.call(u,E)?R(o.get(E)):void(o!==u&&o.get(p))}function gc(o,p=!1){const m=this.__v_raw,T=ui(m),u=ui(o);return p||(za(o,u)&&fn(T,0,o),fn(T,0,u)),o===u?m.has(o):m.has(o)||m.has(u)}function vc(o,p=!1){return o=o.__v_raw,!p&&fn(ui(o),0,Ia),Reflect.get(o,"size",o)}function pd(o){o=ui(o);const p=ui(this);return Uc(p).has.call(p,o)||(p.add(o),Lr(p,"add",o,o)),this}function dd(o,p){p=ui(p);const m=ui(this),{has:T,get:u}=Uc(m);let E=T.call(m,o);E||(o=ui(o),E=T.call(m,o));const F=u.call(m,o);return m.set(o,p),E?za(p,F)&&Lr(m,"set",o,p):Lr(m,"add",o,p),this}function fd(o){const p=ui(this),{has:m,get:T}=Uc(p);let u=m.call(p,o);u||(o=ui(o),u=m.call(p,o)),T&&T.call(p,o);const E=p.delete(o);return u&&Lr(p,"delete",o,void 0),E}function md(){const o=ui(this),p=o.size!==0,m=o.clear();return p&&Lr(o,"clear",void 0,void 0),m}function yc(o,p){return function(m,T){const u=this,E=u.__v_raw,F=ui(E),R=p?Nu:o?Fu:Ks;return!o&&fn(F,0,Ia),E.forEach((A,Z)=>m.call(T,R(A),R(Z),u))}}function _c(o,p,m){return function(...T){const u=this.__v_raw,E=ui(u),F=ko(E),R=o==="entries"||o===Symbol.iterator&&F,A=o==="keys"&&F,Z=u[o](...T),G=m?Nu:p?Fu:Ks;return!p&&fn(E,0,A?mu:Ia),{next(){const{value:_e,done:be}=Z.next();return be?{value:_e,done:be}:{value:R?[G(_e[0]),G(_e[1])]:G(_e),done:be}},[Symbol.iterator](){return this}}}}function Vr(o){return function(...p){return o!=="delete"&&this}}function Gm(){const o={get(u){return mc(this,u)},get size(){return vc(this)},has:gc,add:pd,set:dd,delete:fd,clear:md,forEach:yc(!1,!1)},p={get(u){return mc(this,u,!1,!0)},get size(){return vc(this)},has:gc,add:pd,set:dd,delete:fd,clear:md,forEach:yc(!1,!0)},m={get(u){return mc(this,u,!0)},get size(){return vc(this,!0)},has(u){return gc.call(this,u,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:yc(!0,!1)},T={get(u){return mc(this,u,!0,!0)},get size(){return vc(this,!0)},has(u){return gc.call(this,u,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:yc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(u=>{o[u]=_c(u,!1,!1),m[u]=_c(u,!0,!1),p[u]=_c(u,!1,!0),T[u]=_c(u,!0,!0)}),[o,m,p,T]}const[Vm,jm,Wm,Hm]=Gm();function Iu(o,p){const m=p?o?Hm:Wm:o?jm:Vm;return(T,u,E)=>u==="__v_isReactive"?!o:u==="__v_isReadonly"?o:u==="__v_raw"?T:Reflect.get(si(m,u)&&u in T?m:T,u,E)}const Xm={get:Iu(!1,!1)},Ym={get:Iu(!1,!0)},qm={get:Iu(!0,!1)},nf=new WeakMap,rf=new WeakMap,af=new WeakMap,Zm=new WeakMap;function Ru(o){return Wo(o)?o:zu(o,!1,km,Xm,nf)}function of(o){return zu(o,!0,Bm,qm,af)}function zu(o,p,m,T,u){if(!Di(o)||o.__v_raw&&(!p||!o.__v_isReactive))return o;const E=u.get(o);if(E)return E;const F=(R=o).__v_skip||!Object.isExtensible(R)?0:function(Z){switch(Z){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(Sm(R));var R;if(F===0)return o;const A=new Proxy(o,F===2?T:m);return u.set(o,A),A}function Bo(o){return Wo(o)?Bo(o.__v_raw):!(!o||!o.__v_isReactive)}function Wo(o){return!(!o||!o.__v_isReadonly)}function Lc(o){return!(!o||!o.__v_isShallow)}function gd(o){return Bo(o)||Wo(o)}function ui(o){const p=o&&o.__v_raw;return p?ui(p):o}function sf(o){return Mc(o,"__v_skip",!0),o}const Ks=o=>Di(o)?Ru(o):o,Fu=o=>Di(o)?of(o):o;function lf(o){Hr&&jn&&$d((o=ui(o)).dep||(o.dep=Eu()))}function cf(o,p){const m=(o=ui(o)).dep;m&&gu(m)}function an(o){return!(!o||o.__v_isRef!==!0)}function fi(o){return an(p=o)?p:new Jm(p,!1);var p}class Jm{constructor(p,m){this.__v_isShallow=m,this.dep=void 0,this.__v_isRef=!0,this._rawValue=m?p:ui(p),this._value=m?p:Ks(p)}get value(){return lf(this),this._value}set value(p){const m=this.__v_isShallow||Lc(p)||Wo(p);p=m?p:ui(p),za(p,this._rawValue)&&(this._rawValue=p,this._value=m?p:Ks(p),cf(this))}}const Qm={get:(o,p,m)=>{return an(T=Reflect.get(o,p,m))?T.value:T;var T},set:(o,p,m,T)=>{const u=o[p];return an(u)&&!an(m)?(u.value=m,!0):Reflect.set(o,p,m,T)}};function hf(o){return Bo(o)?o:new Proxy(o,Qm)}class $m{constructor(p,m,T,u){this._setter=m,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Du(p,()=>{this._dirty||(this._dirty=!0,cf(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=T}get value(){const p=ui(this);return lf(p),!p._dirty&&p._cacheable||(p._dirty=!1,p._value=p.effect.run()),p._value}set value(p){this._setter(p)}}function Xr(o,p,m,T){let u;try{u=T?o(...T):o()}catch(E){Gc(E,p,m)}return u}function Hn(o,p,m,T){if(Jt(o)){const E=Xr(o,p,m,T);return E&&Wd(E)&&E.catch(F=>{Gc(F,p,m)}),E}const u=[];for(let E=0;E<o.length;E++)u.push(Hn(o[E],p,m,T));return u}function Gc(o,p,m,T=!0){if(p&&p.vnode,p){let u=p.parent;const E=p.proxy,F=m;for(;u;){const A=u.ec;if(A){for(let Z=0;Z<A.length;Z++)if(A[Z](o,E,F)===!1)return}u=u.parent}const R=p.appContext.config.errorHandler;if(R)return void Xr(R,null,10,[o,E,F])}}let el=!1,vu=!1;const nn=[];let ur=0;const Uo=[];let Pr=null,Ea=0;const uf=Promise.resolve();let ku=null;function Km(o){const p=ku||uf;return o?p.then(this?o.bind(this):o):p}function Bu(o){nn.length&&nn.includes(o,el&&o.allowRecurse?ur+1:ur)||(o.id==null?nn.push(o):nn.splice(function(p){let m=ur+1,T=nn.length;for(;m<T;){const u=m+T>>>1,E=nn[u],F=tl(E);F<p||F===p&&E.pre?m=u+1:T=u}return m}(o.id),0,o),pf())}function pf(){el||vu||(vu=!0,ku=uf.then(ff))}function vd(o,p=el?ur+1:0){for(;p<nn.length;p++){const m=nn[p];m&&m.pre&&(nn.splice(p,1),p--,m())}}function df(o){if(Uo.length){const p=[...new Set(Uo)];if(Uo.length=0,Pr)return void Pr.push(...p);for(Pr=p,Pr.sort((m,T)=>tl(m)-tl(T)),Ea=0;Ea<Pr.length;Ea++)Pr[Ea]();Pr=null,Ea=0}}const tl=o=>o.id==null?1/0:o.id,eg=(o,p)=>{const m=tl(o)-tl(p);if(m===0){if(o.pre&&!p.pre)return-1;if(p.pre&&!o.pre)return 1}return m};function ff(o){vu=!1,el=!0,nn.sort(eg);try{for(ur=0;ur<nn.length;ur++){const p=nn[ur];p&&p.active!==!1&&Xr(p,null,14)}}finally{ur=0,nn.length=0,df(),el=!1,ku=null,(nn.length||Uo.length)&&ff()}}function tg(o,p,...m){if(o.isUnmounted)return;const T=o.vnode.props||Ci;let u=m;const E=p.startsWith("update:"),F=E&&p.slice(7);if(F&&F in T){const G=`${F==="modelValue"?"model":F}Modifiers`,{number:_e,trim:be}=T[G]||Ci;be&&(u=m.map(Q=>Yi(Q)?Q.trim():Q)),_e&&(u=m.map(Pm))}let R,A=T[R=ru(p)]||T[R=ru(Go(p))];!A&&E&&(A=T[R=ru(Yo(p))]),A&&Hn(A,o,6,u);const Z=T[R+"Once"];if(Z){if(o.emitted){if(o.emitted[R])return}else o.emitted={};o.emitted[R]=!0,Hn(Z,o,6,u)}}function mf(o,p,m=!1){const T=p.emitsCache,u=T.get(o);if(u!==void 0)return u;const E=o.emits;let F={},R=!1;if(!Jt(o)){const A=Z=>{const G=mf(Z,p,!0);G&&(R=!0,on(F,G))};!m&&p.mixins.length&&p.mixins.forEach(A),o.extends&&A(o.extends),o.mixins&&o.mixins.forEach(A)}return E||R?(Yt(E)?E.forEach(A=>F[A]=null):on(F,E),Di(o)&&T.set(o,F),F):(Di(o)&&T.set(o,null),null)}function Oc(o,p){return!(!o||!zc(p))&&(p=p.slice(2).replace(/Once$/,""),si(o,p[0].toLowerCase()+p.slice(1))||si(o,Yo(p))||si(o,p))}let pr=null,Vc=null;function Ec(o){const p=pr;return pr=o,Vc=o&&o.type.__scopeId||null,p}function qo(o){Vc=o}function Zo(){Vc=null}function yd(o){const{type:p,vnode:m,proxy:T,withProxy:u,props:E,propsOptions:[F],slots:R,attrs:A,emit:Z,render:G,renderCache:_e,data:be,setupState:Q,ctx:Pe,inheritAttrs:ee}=o;let Fe,Ye;const se=Ec(o);try{if(4&m.shapeFlag){const S=u||T;Fe=cr(G.call(S,S,_e,E,Q,be,Pe)),Ye=A}else{const S=p;Fe=cr(S.length>1?S(E,{attrs:A,slots:R,emit:Z}):S(E,null)),Ye=p.props?A:ig(A)}}catch(S){Qs.length=0,Gc(S,o,1),Fe=Xn(Fa)}let Ie=Fe;if(Ye&&ee!==!1){const S=Object.keys(Ye),{shapeFlag:z}=Ie;S.length&&7&z&&(F&&S.some(Pu)&&(Ye=ng(Ye,F)),Ie=Ho(Ie,Ye))}return m.dirs&&(Ie=Ho(Ie),Ie.dirs=Ie.dirs?Ie.dirs.concat(m.dirs):m.dirs),m.transition&&(Ie.transition=m.transition),Fe=Ie,Ec(se),Fe}const ig=o=>{let p;for(const m in o)(m==="class"||m==="style"||zc(m))&&((p||(p={}))[m]=o[m]);return p},ng=(o,p)=>{const m={};for(const T in o)Pu(T)&&T.slice(9)in p||(m[T]=o[T]);return m};function _d(o,p,m){const T=Object.keys(p);if(T.length!==Object.keys(o).length)return!0;for(let u=0;u<T.length;u++){const E=T[u];if(p[E]!==o[E]&&!Oc(m,E))return!0}return!1}const xc={};function ou(o,p,m){return gf(o,p,m)}function gf(o,p,{immediate:m,deep:T,flush:u,onTrack:E,onTrigger:F}=Ci){var R;const A=Vn===((R=rn)==null?void 0:R.scope)?rn:null;let Z,G,_e=!1,be=!1;if(an(o)?(Z=()=>o.value,_e=Lc(o)):Bo(o)?(Z=()=>o,T=!0):Yt(o)?(be=!0,_e=o.some(S=>Bo(S)||Lc(S)),Z=()=>o.map(S=>an(S)?S.value:Bo(S)?Ro(S):Jt(S)?Xr(S,A,2):void 0)):Z=Jt(o)?p?()=>Xr(o,A,2):()=>{if(!A||!A.isUnmounted)return G&&G(),Hn(o,A,3,[Pe])}:hr,p&&T){const S=Z;Z=()=>Ro(S())}let Q,Pe=S=>{G=se.onStop=()=>{Xr(S,A,4)}};if(nl){if(Pe=hr,p?m&&Hn(p,A,3,[Z(),be?[]:void 0,Pe]):Z(),u!=="sync")return hr;{const S=Lg();Q=S.__watcherHandles||(S.__watcherHandles=[])}}let ee=be?new Array(o.length).fill(xc):xc;const Fe=()=>{if(se.active)if(p){const S=se.run();(T||_e||(be?S.some((z,d)=>za(z,ee[d])):za(S,ee)))&&(G&&G(),Hn(p,A,3,[S,ee===xc?void 0:be&&ee[0]===xc?[]:ee,Pe]),ee=S)}else se.run()};let Ye;Fe.allowRecurse=!!p,u==="sync"?Ye=Fe:u==="post"?Ye=()=>dn(Fe,A&&A.suspense):(Fe.pre=!0,A&&(Fe.id=A.uid),Ye=()=>Bu(Fe));const se=new Du(Z,Ye);p?m?Fe():ee=se.run():u==="post"?dn(se.run.bind(se),A&&A.suspense):se.run();const Ie=()=>{se.stop(),A&&A.scope&&Cu(A.scope.effects,se)};return Q&&Q.push(Ie),Ie}function rg(o,p,m){const T=this.proxy,u=Yi(o)?o.includes(".")?vf(T,o):()=>T[o]:o.bind(T,T);let E;Jt(p)?E=p:(E=p.handler,m=p);const F=rn;Xo(this);const R=gf(u,E.bind(T),m);return F?Xo(F):Ra(),R}function vf(o,p){const m=p.split(".");return()=>{let T=o;for(let u=0;u<m.length&&T;u++)T=T[m[u]];return T}}function Ro(o,p){if(!Di(o)||o.__v_skip||(p=p||new Set).has(o))return o;if(p.add(o),an(o))Ro(o.value,p);else if(Yt(o))for(let m=0;m<o.length;m++)Ro(o[m],p);else if(jd(o)||ko(o))o.forEach(m=>{Ro(m,p)});else if(Xd(o))for(const m in o)Ro(o[m],p);return o}function Ca(o,p,m,T){const u=o.dirs,E=p&&p.dirs;for(let F=0;F<u.length;F++){const R=u[F];E&&(R.oldValue=E[F].value);let A=R.dir[T];A&&(Vo(),Hn(A,m,8,[o.el,R,o,p]),jo())}}const Tc=o=>!!o.type.__asyncLoader,yf=o=>o.type.__isKeepAlive;function ag(o,p){_f(o,"a",p)}function og(o,p){_f(o,"da",p)}function _f(o,p,m=rn){const T=o.__wdc||(o.__wdc=()=>{let u=m;for(;u;){if(u.isDeactivated)return;u=u.parent}return o()});if(jc(p,T,m),m){let u=m.parent;for(;u&&u.parent;)yf(u.parent.vnode)&&sg(T,p,m,u),u=u.parent}}function sg(o,p,m,T){const u=jc(p,o,T,!0);xf(()=>{Cu(T[p],u)},m)}function jc(o,p,m=rn,T=!1){if(m){const u=m[o]||(m[o]=[]),E=p.__weh||(p.__weh=(...F)=>{if(m.isUnmounted)return;Vo(),Xo(m);const R=Hn(p,m,o,F);return Ra(),jo(),R});return T?u.unshift(E):u.push(E),E}}const Or=o=>(p,m=rn)=>(!nl||o==="sp")&&jc(o,(...T)=>p(...T),m),lg=Or("bm"),Wc=Or("m"),cg=Or("bu"),hg=Or("u"),ug=Or("bum"),xf=Or("um"),pg=Or("sp"),dg=Or("rtg"),fg=Or("rtc");function mg(o,p=rn){jc("ec",o,p)}const gg=Symbol.for("v-ndc"),yu=o=>o?Cf(o)?ju(o)||o.proxy:yu(o.parent):null,Js=on(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>yu(o.parent),$root:o=>yu(o.root),$emit:o=>o.emit,$options:o=>xu(o),$forceUpdate:o=>o.f||(o.f=()=>Bu(o.update)),$nextTick:o=>o.n||(o.n=Km.bind(o.proxy)),$watch:o=>rg.bind(o)}),su=(o,p)=>o!==Ci&&!o.__isScriptSetup&&si(o,p),vg={get({_:o},p){const{ctx:m,setupState:T,data:u,props:E,accessCache:F,type:R,appContext:A}=o;let Z;if(p[0]!=="$"){const Q=F[p];if(Q!==void 0)switch(Q){case 1:return T[p];case 2:return u[p];case 4:return m[p];case 3:return E[p]}else{if(su(T,p))return F[p]=1,T[p];if(u!==Ci&&si(u,p))return F[p]=2,u[p];if((Z=o.propsOptions[0])&&si(Z,p))return F[p]=3,E[p];if(m!==Ci&&si(m,p))return F[p]=4,m[p];_u&&(F[p]=0)}}const G=Js[p];let _e,be;return G?(p==="$attrs"&&fn(o,0,p),G(o)):(_e=R.__cssModules)&&(_e=_e[p])?_e:m!==Ci&&si(m,p)?(F[p]=4,m[p]):(be=A.config.globalProperties,si(be,p)?be[p]:void 0)},set({_:o},p,m){const{data:T,setupState:u,ctx:E}=o;return su(u,p)?(u[p]=m,!0):T!==Ci&&si(T,p)?(T[p]=m,!0):!(si(o.props,p)||p[0]==="$"&&p.slice(1)in o||(E[p]=m,0))},has({_:{data:o,setupState:p,accessCache:m,ctx:T,appContext:u,propsOptions:E}},F){let R;return!!m[F]||o!==Ci&&si(o,F)||su(p,F)||(R=E[0])&&si(R,F)||si(T,F)||si(Js,F)||si(u.config.globalProperties,F)},defineProperty(o,p,m){return m.get!=null?o._.accessCache[p]=0:si(m,"value")&&this.set(o,p,m.value,null),Reflect.defineProperty(o,p,m)}};function xd(o){return Yt(o)?o.reduce((p,m)=>(p[m]=null,p),{}):o}let _u=!0;function bd(o,p,m){Hn(Yt(o)?o.map(T=>T.bind(p.proxy)):o.bind(p.proxy),p,m)}function bf(o,p,m,T){const u=T.includes(".")?vf(m,T):()=>m[T];if(Yi(o)){const E=p[o];Jt(E)&&ou(u,E)}else if(Jt(o))ou(u,o.bind(m));else if(Di(o))if(Yt(o))o.forEach(E=>bf(E,p,m,T));else{const E=Jt(o.handler)?o.handler.bind(m):p[o.handler];Jt(E)&&ou(u,E,o)}}function xu(o){const p=o.type,{mixins:m,extends:T}=p,{mixins:u,optionsCache:E,config:{optionMergeStrategies:F}}=o.appContext,R=E.get(p);let A;return R?A=R:u.length||m||T?(A={},u.length&&u.forEach(Z=>Dc(A,Z,F,!0)),Dc(A,p,F)):A=p,Di(p)&&E.set(p,A),A}function Dc(o,p,m,T=!1){const{mixins:u,extends:E}=p;E&&Dc(o,E,m,!0),u&&u.forEach(F=>Dc(o,F,m,!0));for(const F in p)if(!(T&&F==="expose")){const R=yg[F]||m&&m[F];o[F]=R?R(o[F],p[F]):p[F]}return o}const yg={data:wd,props:Md,emits:Md,methods:Ys,computed:Ys,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:Ys,directives:Ys,watch:function(o,p){if(!o)return p;if(!p)return o;const m=on(Object.create(null),o);for(const T in p)m[T]=ln(o[T],p[T]);return m},provide:wd,inject:function(o,p){return Ys(bu(o),bu(p))}};function wd(o,p){return p?o?function(){return on(Jt(o)?o.call(this,this):o,Jt(p)?p.call(this,this):p)}:p:o}function bu(o){if(Yt(o)){const p={};for(let m=0;m<o.length;m++)p[o[m]]=o[m];return p}return o}function ln(o,p){return o?[...new Set([].concat(o,p))]:p}function Ys(o,p){return o?on(Object.create(null),o,p):p}function Md(o,p){return o?Yt(o)&&Yt(p)?[...new Set([...o,...p])]:on(Object.create(null),xd(o),xd(p??{})):p}function wf(){return{app:null,config:{isNativeTag:bm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _g=0;function xg(o,p){return function(m,T=null){Jt(m)||(m=on({},m)),T==null||Di(T)||(T=null);const u=wf(),E=new WeakSet;let F=!1;const R=u.app={_uid:_g++,_component:m,_props:T,_container:null,_context:u,_instance:null,version:Og,get config(){return u.config},set config(A){},use:(A,...Z)=>(E.has(A)||(A&&Jt(A.install)?(E.add(A),A.install(R,...Z)):Jt(A)&&(E.add(A),A(R,...Z))),R),mixin:A=>(u.mixins.includes(A)||u.mixins.push(A),R),component:(A,Z)=>Z?(u.components[A]=Z,R):u.components[A],directive:(A,Z)=>Z?(u.directives[A]=Z,R):u.directives[A],mount(A,Z,G){if(!F){const _e=Xn(m,T);return _e.appContext=u,Z&&p?p(_e,A):o(_e,A,G),F=!0,R._container=A,A.__vue_app__=R,ju(_e.component)||_e.component.proxy}},unmount(){F&&(o(null,R._container),delete R._container.__vue_app__)},provide:(A,Z)=>(u.provides[A]=Z,R),runWithContext(A){Nc=R;try{return A()}finally{Nc=null}}};return R}}let Nc=null;function Ac(o,p,m=!1){const T=rn||pr;if(T||Nc){const u=T?T.parent==null?T.vnode.appContext&&T.vnode.appContext.provides:T.parent.provides:Nc._context.provides;if(u&&o in u)return u[o];if(arguments.length>1)return m&&Jt(p)?p.call(T&&T.proxy):p}}function Sd(o,p,m,T){const[u,E]=o.propsOptions;let F,R=!1;if(p)for(let A in p){if(wc(A))continue;const Z=p[A];let G;u&&si(u,G=Go(A))?E&&E.includes(G)?(F||(F={}))[G]=Z:m[G]=Z:Oc(o.emitsOptions,A)||A in T&&Z===T[A]||(T[A]=Z,R=!0)}if(E){const A=ui(m),Z=F||Ci;for(let G=0;G<E.length;G++){const _e=E[G];m[_e]=wu(u,A,_e,Z[_e],o,!si(Z,_e))}}return R}function wu(o,p,m,T,u,E){const F=o[m];if(F!=null){const R=si(F,"default");if(R&&T===void 0){const A=F.default;if(F.type!==Function&&!F.skipFactory&&Jt(A)){const{propsDefaults:Z}=u;m in Z?T=Z[m]:(Xo(u),T=Z[m]=A.call(null,p),Ra())}else T=A}F[0]&&(E&&!R?T=!1:!F[1]||T!==""&&T!==Yo(m)||(T=!0))}return T}function Mf(o,p,m=!1){const T=p.propsCache,u=T.get(o);if(u)return u;const E=o.props,F={},R=[];let A=!1;if(!Jt(o)){const G=_e=>{A=!0;const[be,Q]=Mf(_e,p,!0);on(F,be),Q&&R.push(...Q)};!m&&p.mixins.length&&p.mixins.forEach(G),o.extends&&G(o.extends),o.mixins&&o.mixins.forEach(G)}if(!E&&!A)return Di(o)&&T.set(o,Fo),Fo;if(Yt(E))for(let G=0;G<E.length;G++){const _e=Go(E[G]);Td(_e)&&(F[_e]=Ci)}else if(E)for(const G in E){const _e=Go(G);if(Td(_e)){const be=E[G],Q=F[_e]=Yt(be)||Jt(be)?{type:be}:on({},be);if(Q){const Pe=Cd(Boolean,Q.type),ee=Cd(String,Q.type);Q[0]=Pe>-1,Q[1]=ee<0||Pe<ee,(Pe>-1||si(Q,"default"))&&R.push(_e)}}}const Z=[F,R];return Di(o)&&T.set(o,Z),Z}function Td(o){return o[0]!=="$"}function Ad(o){const p=o&&o.toString().match(/^\s*(function|class) (\w+)/);return p?p[2]:o===null?"null":""}function Pd(o,p){return Ad(o)===Ad(p)}function Cd(o,p){return Yt(p)?p.findIndex(m=>Pd(m,o)):Jt(p)&&Pd(p,o)?0:-1}const Sf=o=>o[0]==="_"||o==="$stable",Uu=o=>Yt(o)?o.map(cr):[cr(o)],bg=(o,p,m)=>{if(p._n)return p;const T=function(u,E=pr,F){if(!E||u._n)return u;const R=(...A)=>{R._d&&Ed(-1);const Z=Ec(E);let G;try{G=u(...A)}finally{Ec(Z),R._d&&Ed(1)}return G};return R._n=!0,R._c=!0,R._d=!0,R}((...u)=>Uu(p(...u)),m);return T._c=!1,T},Ld=(o,p,m)=>{const T=o._ctx;for(const u in o){if(Sf(u))continue;const E=o[u];if(Jt(E))p[u]=bg(0,E,T);else if(E!=null){const F=Uu(E);p[u]=()=>F}}},Od=(o,p)=>{const m=Uu(p);o.slots.default=()=>m};function Mu(o,p,m,T,u=!1){if(Yt(o))return void o.forEach((be,Q)=>Mu(be,p&&(Yt(p)?p[Q]:p),m,T,u));if(Tc(T)&&!u)return;const E=4&T.shapeFlag?ju(T.component)||T.component.proxy:T.el,F=u?null:E,{i:R,r:A}=o,Z=p&&p.r,G=R.refs===Ci?R.refs={}:R.refs,_e=R.setupState;if(Z!=null&&Z!==A&&(Yi(Z)?(G[Z]=null,si(_e,Z)&&(_e[Z]=null)):an(Z)&&(Z.value=null)),Jt(A))Xr(A,R,12,[F,G]);else{const be=Yi(A),Q=an(A);if(be||Q){const Pe=()=>{if(o.f){const ee=be?si(_e,A)?_e[A]:G[A]:A.value;u?Yt(ee)&&Cu(ee,E):Yt(ee)?ee.includes(E)||ee.push(E):be?(G[A]=[E],si(_e,A)&&(_e[A]=G[A])):(A.value=[E],o.k&&(G[o.k]=A.value))}else be?(G[A]=F,si(_e,A)&&(_e[A]=F)):Q&&(A.value=F,o.k&&(G[o.k]=F))};F?(Pe.id=-1,dn(Pe,m)):Pe()}}}const dn=function(o,p){var m;p&&p.pendingBranch?Yt(o)?p.effects.push(...o):p.effects.push(o):(Yt(m=o)?Uo.push(...m):Pr&&Pr.includes(m,m.allowRecurse?Ea+1:Ea)||Uo.push(m),pf())};function wg(o){return function(p,m){pu().__VUE__=!0;const{insert:T,remove:u,patchProp:E,createElement:F,createText:R,createComment:A,setText:Z,setElementText:G,parentNode:_e,nextSibling:be,setScopeId:Q=hr,insertStaticContent:Pe}=p,ee=(K,ue,Te,Ge=null,Oe=null,Se=null,nt=!1,He=null,ke=!!ue.dynamicChildren)=>{if(K===ue)return;K&&!qs(K,ue)&&(Ge=Tt(K),$e(K,Oe,Se,!0),K=null),ue.patchFlag===-2&&(ke=!1,ue.dynamicChildren=null);const{type:Ae,ref:rt,shapeFlag:it}=ue;switch(Ae){case Hc:Fe(K,ue,Te,Ge);break;case Fa:Ye(K,ue,Te,Ge);break;case Pc:K==null&&se(ue,Te,Ge,nt);break;case Cr:X(K,ue,Te,Ge,Oe,Se,nt,He,ke);break;default:1&it?Ie(K,ue,Te,Ge,Oe,Se,nt,He,ke):6&it?w(K,ue,Te,Ge,Oe,Se,nt,He,ke):(64&it||128&it)&&Ae.process(K,ue,Te,Ge,Oe,Se,nt,He,ke,ht)}rt!=null&&Oe&&Mu(rt,K&&K.ref,Se,ue||K,!ue)},Fe=(K,ue,Te,Ge)=>{if(K==null)T(ue.el=R(ue.children),Te,Ge);else{const Oe=ue.el=K.el;ue.children!==K.children&&Z(Oe,ue.children)}},Ye=(K,ue,Te,Ge)=>{K==null?T(ue.el=A(ue.children||""),Te,Ge):ue.el=K.el},se=(K,ue,Te,Ge)=>{[K.el,K.anchor]=Pe(K.children,ue,Te,Ge,K.el,K.anchor)},Ie=(K,ue,Te,Ge,Oe,Se,nt,He,ke)=>{nt=nt||ue.type==="svg",K==null?S(ue,Te,Ge,Oe,Se,nt,He,ke):_(K,ue,Oe,Se,nt,He,ke)},S=(K,ue,Te,Ge,Oe,Se,nt,He)=>{let ke,Ae;const{type:rt,props:it,shapeFlag:pt,transition:v,dirs:P}=K;if(ke=K.el=F(K.type,Se,it&&it.is,it),8&pt?G(ke,K.children):16&pt&&d(K.children,ke,null,Ge,Oe,Se&&rt!=="foreignObject",nt,He),P&&Ca(K,null,Ge,"created"),z(ke,K,K.scopeId,nt,Ge),it){for(const H in it)H==="value"||wc(H)||E(ke,H,null,it[H],Se,K.children,Ge,Oe,st);"value"in it&&E(ke,"value",null,it.value),(Ae=it.onVnodeBeforeMount)&&lr(Ae,Ge,K)}P&&Ca(K,null,Ge,"beforeMount");const U=function(H,re){return(!H||H&&!H.pendingBranch)&&re&&!re.persisted}(Oe,v);U&&v.beforeEnter(ke),T(ke,ue,Te),((Ae=it&&it.onVnodeMounted)||U||P)&&dn(()=>{Ae&&lr(Ae,Ge,K),U&&v.enter(ke),P&&Ca(K,null,Ge,"mounted")},Oe)},z=(K,ue,Te,Ge,Oe)=>{if(Te&&Q(K,Te),Ge)for(let Se=0;Se<Ge.length;Se++)Q(K,Ge[Se]);if(Oe&&ue===Oe.subTree){const Se=Oe.vnode;z(K,Se,Se.scopeId,Se.slotScopeIds,Oe.parent)}},d=(K,ue,Te,Ge,Oe,Se,nt,He,ke=0)=>{for(let Ae=ke;Ae<K.length;Ae++){const rt=K[Ae]=He?jr(K[Ae]):cr(K[Ae]);ee(null,rt,ue,Te,Ge,Oe,Se,nt,He)}},_=(K,ue,Te,Ge,Oe,Se,nt)=>{const He=ue.el=K.el;let{patchFlag:ke,dynamicChildren:Ae,dirs:rt}=ue;ke|=16&K.patchFlag;const it=K.props||Ci,pt=ue.props||Ci;let v;Te&&La(Te,!1),(v=pt.onVnodeBeforeUpdate)&&lr(v,Te,ue,K),rt&&Ca(ue,K,Te,"beforeUpdate"),Te&&La(Te,!0);const P=Oe&&ue.type!=="foreignObject";if(Ae?j(K.dynamicChildren,Ae,He,Te,Ge,P,Se):nt||Y(K,ue,He,null,Te,Ge,P,Se,!1),ke>0){if(16&ke)M(He,ue,it,pt,Te,Ge,Oe);else if(2&ke&&it.class!==pt.class&&E(He,"class",null,pt.class,Oe),4&ke&&E(He,"style",it.style,pt.style,Oe),8&ke){const U=ue.dynamicProps;for(let H=0;H<U.length;H++){const re=U[H],Ce=it[re],Re=pt[re];Re===Ce&&re!=="value"||E(He,re,Ce,Re,Oe,K.children,Te,Ge,st)}}1&ke&&K.children!==ue.children&&G(He,ue.children)}else nt||Ae!=null||M(He,ue,it,pt,Te,Ge,Oe);((v=pt.onVnodeUpdated)||rt)&&dn(()=>{v&&lr(v,Te,ue,K),rt&&Ca(ue,K,Te,"updated")},Ge)},j=(K,ue,Te,Ge,Oe,Se,nt)=>{for(let He=0;He<ue.length;He++){const ke=K[He],Ae=ue[He],rt=ke.el&&(ke.type===Cr||!qs(ke,Ae)||70&ke.shapeFlag)?_e(ke.el):Te;ee(ke,Ae,rt,null,Ge,Oe,Se,nt,!0)}},M=(K,ue,Te,Ge,Oe,Se,nt)=>{if(Te!==Ge){if(Te!==Ci)for(const He in Te)wc(He)||He in Ge||E(K,He,Te[He],null,nt,ue.children,Oe,Se,st);for(const He in Ge){if(wc(He))continue;const ke=Ge[He],Ae=Te[He];ke!==Ae&&He!=="value"&&E(K,He,Ae,ke,nt,ue.children,Oe,Se,st)}"value"in Ge&&E(K,"value",Te.value,Ge.value)}},X=(K,ue,Te,Ge,Oe,Se,nt,He,ke)=>{const Ae=ue.el=K?K.el:R(""),rt=ue.anchor=K?K.anchor:R("");let{patchFlag:it,dynamicChildren:pt,slotScopeIds:v}=ue;v&&(He=He?He.concat(v):v),K==null?(T(Ae,Te,Ge),T(rt,Te,Ge),d(ue.children,Te,rt,Oe,Se,nt,He,ke)):it>0&&64&it&&pt&&K.dynamicChildren?(j(K.dynamicChildren,pt,Te,Oe,Se,nt,He),(ue.key!=null||Oe&&ue===Oe.subTree)&&Tf(K,ue,!0)):Y(K,ue,Te,rt,Oe,Se,nt,He,ke)},w=(K,ue,Te,Ge,Oe,Se,nt,He,ke)=>{ue.slotScopeIds=He,K==null?512&ue.shapeFlag?Oe.ctx.activate(ue,Te,Ge,nt,ke):ge(ue,Te,Ge,Oe,Se,nt,ke):pe(K,ue,ke)},ge=(K,ue,Te,Ge,Oe,Se,nt)=>{const He=K.component=function(ke,Ae,rt){const it=ke.type,pt=(Ae?Ae.appContext:ke.appContext)||Tg,v={uid:Ag++,vnode:ke,type:it,parent:Ae,appContext:pt,root:null,next:null,subTree:null,effect:null,update:null,scope:new Nm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Ae?Ae.provides:Object.create(pt.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mf(it,pt),emitsOptions:mf(it,pt),emit:null,emitted:null,propsDefaults:Ci,inheritAttrs:it.inheritAttrs,ctx:Ci,data:Ci,props:Ci,attrs:Ci,slots:Ci,refs:Ci,setupState:Ci,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:rt,suspenseId:rt?rt.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return v.ctx={_:v},v.root=Ae?Ae.root:v,v.emit=tg.bind(null,v),ke.ce&&ke.ce(v),v}(K,Ge,Oe);if(yf(K)&&(He.ctx.renderer=ht),function(ke,Ae=!1){nl=Ae;const{props:rt,children:it}=ke.vnode,pt=Cf(ke);(function(v,P,U,H=!1){const re={},Ce={};Mc(Ce,Ic,1),v.propsDefaults=Object.create(null),Sd(v,P,re,Ce);for(const Re in v.propsOptions[0])Re in re||(re[Re]=void 0);U?v.props=H?re:zu(re,!1,Um,Ym,rf):v.type.props?v.props=re:v.props=Ce,v.attrs=Ce})(ke,rt,pt,Ae),((v,P)=>{if(32&v.vnode.shapeFlag){const U=P._;U?(v.slots=ui(P),Mc(P,"_",U)):Ld(P,v.slots={})}else v.slots={},P&&Od(v,P);Mc(v.slots,Ic,1)})(ke,it),pt&&function(v,P){const U=v.type;v.accessCache=Object.create(null),v.proxy=sf(new Proxy(v.ctx,vg));const{setup:H}=U;if(H){const re=v.setupContext=H.length>1?function(Re){return{get attrs(){return function($){return $.attrsProxy||($.attrsProxy=new Proxy($.attrs,{get:(At,_t)=>(fn($,0,"$attrs"),At[_t])}))}(Re)},slots:Re.slots,emit:Re.emit,expose:$=>{Re.exposed=$||{}}}}(v):null;Xo(v),Vo();const Ce=Xr(H,v,0,[v.props,re]);if(jo(),Ra(),Wd(Ce)){if(Ce.then(Ra,Ra),P)return Ce.then(Re=>{Id(v,Re,P)}).catch(Re=>{Gc(Re,v,0)});v.asyncDep=Ce}else Id(v,Ce,P)}else Lf(v,P)}(ke,Ae),nl=!1}(He),He.asyncDep){if(Oe&&Oe.registerDep(He,ye),!K.el){const ke=He.subTree=Xn(Fa);Ye(null,ke,ue,Te)}}else ye(He,K,ue,Te,Oe,Se,nt)},pe=(K,ue,Te)=>{const Ge=ue.component=K.component;if(function(Oe,Se,nt){const{props:He,children:ke,component:Ae}=Oe,{props:rt,children:it,patchFlag:pt}=Se,v=Ae.emitsOptions;if(Se.dirs||Se.transition)return!0;if(!(nt&&pt>=0))return!(!ke&&!it||it&&it.$stable)||He!==rt&&(He?!rt||_d(He,rt,v):!!rt);if(1024&pt)return!0;if(16&pt)return He?_d(He,rt,v):!!rt;if(8&pt){const P=Se.dynamicProps;for(let U=0;U<P.length;U++){const H=P[U];if(rt[H]!==He[H]&&!Oc(v,H))return!0}}return!1}(K,ue,Te)){if(Ge.asyncDep&&!Ge.asyncResolved)return void Le(Ge,ue,Te);Ge.next=ue,function(Oe){const Se=nn.indexOf(Oe);Se>ur&&nn.splice(Se,1)}(Ge.update),Ge.update()}else ue.el=K.el,Ge.vnode=ue},ye=(K,ue,Te,Ge,Oe,Se,nt)=>{const He=K.effect=new Du(()=>{if(K.isMounted){let Ae,{next:rt,bu:it,u:pt,parent:v,vnode:P}=K,U=rt;La(K,!1),rt?(rt.el=P.el,Le(K,rt,nt)):rt=P,it&&au(it),(Ae=rt.props&&rt.props.onVnodeBeforeUpdate)&&lr(Ae,v,rt,P),La(K,!0);const H=yd(K),re=K.subTree;K.subTree=H,ee(re,H,_e(re.el),Tt(re),K,Oe,Se),rt.el=H.el,U===null&&function({vnode:Ce,parent:Re},$){for(;Re&&Re.subTree===Ce;)(Ce=Re.vnode).el=$,Re=Re.parent}(K,H.el),pt&&dn(pt,Oe),(Ae=rt.props&&rt.props.onVnodeUpdated)&&dn(()=>lr(Ae,v,rt,P),Oe)}else{let Ae;const{el:rt,props:it}=ue,{bm:pt,m:v,parent:P}=K,U=Tc(ue);La(K,!1),pt&&au(pt),!U&&(Ae=it&&it.onVnodeBeforeMount)&&lr(Ae,P,ue),La(K,!0);{const H=K.subTree=yd(K);ee(null,H,Te,Ge,K,Oe,Se),ue.el=H.el}if(v&&dn(v,Oe),!U&&(Ae=it&&it.onVnodeMounted)){const H=ue;dn(()=>lr(Ae,P,H),Oe)}(256&ue.shapeFlag||P&&Tc(P.vnode)&&256&P.vnode.shapeFlag)&&K.a&&dn(K.a,Oe),K.isMounted=!0,ue=Te=Ge=null}},()=>Bu(ke),K.scope),ke=K.update=()=>He.run();ke.id=K.uid,La(K,!0),ke()},Le=(K,ue,Te)=>{ue.component=K;const Ge=K.vnode.props;K.vnode=ue,K.next=null,function(Oe,Se,nt,He){const{props:ke,attrs:Ae,vnode:{patchFlag:rt}}=Oe,it=ui(ke),[pt]=Oe.propsOptions;let v=!1;if(!(He||rt>0)||16&rt){let P;Sd(Oe,Se,ke,Ae)&&(v=!0);for(const U in it)Se&&(si(Se,U)||(P=Yo(U))!==U&&si(Se,P))||(pt?!nt||nt[U]===void 0&&nt[P]===void 0||(ke[U]=wu(pt,it,U,void 0,Oe,!0)):delete ke[U]);if(Ae!==it)for(const U in Ae)Se&&si(Se,U)||(delete Ae[U],v=!0)}else if(8&rt){const P=Oe.vnode.dynamicProps;for(let U=0;U<P.length;U++){let H=P[U];if(Oc(Oe.emitsOptions,H))continue;const re=Se[H];if(pt)if(si(Ae,H))re!==Ae[H]&&(Ae[H]=re,v=!0);else{const Ce=Go(H);ke[Ce]=wu(pt,it,Ce,re,Oe,!1)}else re!==Ae[H]&&(Ae[H]=re,v=!0)}}v&&Lr(Oe,"set","$attrs")}(K,ue.props,Ge,Te),((Oe,Se,nt)=>{const{vnode:He,slots:ke}=Oe;let Ae=!0,rt=Ci;if(32&He.shapeFlag){const it=Se._;it?nt&&it===1?Ae=!1:(on(ke,Se),nt||it!==1||delete ke._):(Ae=!Se.$stable,Ld(Se,ke)),rt=Se}else Se&&(Od(Oe,Se),rt={default:1});if(Ae)for(const it in ke)Sf(it)||rt[it]!=null||delete ke[it]})(K,ue.children,Te),Vo(),vd(),jo()},Y=(K,ue,Te,Ge,Oe,Se,nt,He,ke=!1)=>{const Ae=K&&K.children,rt=K?K.shapeFlag:0,it=ue.children,{patchFlag:pt,shapeFlag:v}=ue;if(pt>0){if(128&pt)return void at(Ae,it,Te,Ge,Oe,Se,nt,He,ke);if(256&pt)return void ne(Ae,it,Te,Ge,Oe,Se,nt,He,ke)}8&v?(16&rt&&st(Ae,Oe,Se),it!==Ae&&G(Te,it)):16&rt?16&v?at(Ae,it,Te,Ge,Oe,Se,nt,He,ke):st(Ae,Oe,Se,!0):(8&rt&&G(Te,""),16&v&&d(it,Te,Ge,Oe,Se,nt,He,ke))},ne=(K,ue,Te,Ge,Oe,Se,nt,He,ke)=>{ue=ue||Fo;const Ae=(K=K||Fo).length,rt=ue.length,it=Math.min(Ae,rt);let pt;for(pt=0;pt<it;pt++){const v=ue[pt]=ke?jr(ue[pt]):cr(ue[pt]);ee(K[pt],v,Te,null,Oe,Se,nt,He,ke)}Ae>rt?st(K,Oe,Se,!0,!1,it):d(ue,Te,Ge,Oe,Se,nt,He,ke,it)},at=(K,ue,Te,Ge,Oe,Se,nt,He,ke)=>{let Ae=0;const rt=ue.length;let it=K.length-1,pt=rt-1;for(;Ae<=it&&Ae<=pt;){const v=K[Ae],P=ue[Ae]=ke?jr(ue[Ae]):cr(ue[Ae]);if(!qs(v,P))break;ee(v,P,Te,null,Oe,Se,nt,He,ke),Ae++}for(;Ae<=it&&Ae<=pt;){const v=K[it],P=ue[pt]=ke?jr(ue[pt]):cr(ue[pt]);if(!qs(v,P))break;ee(v,P,Te,null,Oe,Se,nt,He,ke),it--,pt--}if(Ae>it){if(Ae<=pt){const v=pt+1,P=v<rt?ue[v].el:Ge;for(;Ae<=pt;)ee(null,ue[Ae]=ke?jr(ue[Ae]):cr(ue[Ae]),Te,P,Oe,Se,nt,He,ke),Ae++}}else if(Ae>pt)for(;Ae<=it;)$e(K[Ae],Oe,Se,!0),Ae++;else{const v=Ae,P=Ae,U=new Map;for(Ae=P;Ae<=pt;Ae++){const et=ue[Ae]=ke?jr(ue[Ae]):cr(ue[Ae]);et.key!=null&&U.set(et.key,Ae)}let H,re=0;const Ce=pt-P+1;let Re=!1,$=0;const At=new Array(Ce);for(Ae=0;Ae<Ce;Ae++)At[Ae]=0;for(Ae=v;Ae<=it;Ae++){const et=K[Ae];if(re>=Ce){$e(et,Oe,Se,!0);continue}let qe;if(et.key!=null)qe=U.get(et.key);else for(H=P;H<=pt;H++)if(At[H-P]===0&&qs(et,ue[H])){qe=H;break}qe===void 0?$e(et,Oe,Se,!0):(At[qe-P]=Ae+1,qe>=$?$=qe:Re=!0,ee(et,ue[qe],Te,null,Oe,Se,nt,He,ke),re++)}const _t=Re?function(et){const qe=et.slice(),Rt=[0];let ut,ni,xi,Oi,ci;const Fi=et.length;for(ut=0;ut<Fi;ut++){const Tn=et[ut];if(Tn!==0){if(ni=Rt[Rt.length-1],et[ni]<Tn){qe[ut]=ni,Rt.push(ut);continue}for(xi=0,Oi=Rt.length-1;xi<Oi;)ci=xi+Oi>>1,et[Rt[ci]]<Tn?xi=ci+1:Oi=ci;Tn<et[Rt[xi]]&&(xi>0&&(qe[ut]=Rt[xi-1]),Rt[xi]=ut)}}for(xi=Rt.length,Oi=Rt[xi-1];xi-- >0;)Rt[xi]=Oi,Oi=qe[Oi];return Rt}(At):Fo;for(H=_t.length-1,Ae=Ce-1;Ae>=0;Ae--){const et=P+Ae,qe=ue[et],Rt=et+1<rt?ue[et+1].el:Ge;At[Ae]===0?ee(null,qe,Te,Rt,Oe,Se,nt,He,ke):Re&&(H<0||Ae!==_t[H]?ve(qe,Te,Rt,2):H--)}}},ve=(K,ue,Te,Ge,Oe=null)=>{const{el:Se,type:nt,transition:He,children:ke,shapeFlag:Ae}=K;if(6&Ae)ve(K.component.subTree,ue,Te,Ge);else if(128&Ae)K.suspense.move(ue,Te,Ge);else if(64&Ae)nt.move(K,ue,Te,ht);else if(nt!==Cr)if(nt!==Pc)if(Ge!==2&&1&Ae&&He)if(Ge===0)He.beforeEnter(Se),T(Se,ue,Te),dn(()=>He.enter(Se),Oe);else{const{leave:rt,delayLeave:it,afterLeave:pt}=He,v=()=>T(Se,ue,Te),P=()=>{rt(Se,()=>{v(),pt&&pt()})};it?it(Se,v,P):P()}else T(Se,ue,Te);else(({el:rt,anchor:it},pt,v)=>{let P;for(;rt&&rt!==it;)P=be(rt),T(rt,pt,v),rt=P;T(it,pt,v)})(K,ue,Te);else{T(Se,ue,Te);for(let rt=0;rt<ke.length;rt++)ve(ke[rt],ue,Te,Ge);T(K.anchor,ue,Te)}},$e=(K,ue,Te,Ge=!1,Oe=!1)=>{const{type:Se,props:nt,ref:He,children:ke,dynamicChildren:Ae,shapeFlag:rt,patchFlag:it,dirs:pt}=K;if(He!=null&&Mu(He,null,Te,K,!0),256&rt)return void ue.ctx.deactivate(K);const v=1&rt&&pt,P=!Tc(K);let U;if(P&&(U=nt&&nt.onVnodeBeforeUnmount)&&lr(U,ue,K),6&rt)ze(K.component,Te,Ge);else{if(128&rt)return void K.suspense.unmount(Te,Ge);v&&Ca(K,null,ue,"beforeUnmount"),64&rt?K.type.remove(K,ue,Te,Oe,ht,Ge):Ae&&(Se!==Cr||it>0&&64&it)?st(Ae,ue,Te,!1,!0):(Se===Cr&&384&it||!Oe&&16&rt)&&st(ke,ue,Te),Ge&&Ze(K)}(P&&(U=nt&&nt.onVnodeUnmounted)||v)&&dn(()=>{U&&lr(U,ue,K),v&&Ca(K,null,ue,"unmounted")},Te)},Ze=K=>{const{type:ue,el:Te,anchor:Ge,transition:Oe}=K;if(ue===Cr)return void Lt(Te,Ge);if(ue===Pc)return void(({el:nt,anchor:He})=>{let ke;for(;nt&&nt!==He;)ke=be(nt),u(nt),nt=ke;u(He)})(K);const Se=()=>{u(Te),Oe&&!Oe.persisted&&Oe.afterLeave&&Oe.afterLeave()};if(1&K.shapeFlag&&Oe&&!Oe.persisted){const{leave:nt,delayLeave:He}=Oe,ke=()=>nt(Te,Se);He?He(K.el,Se,ke):ke()}else Se()},Lt=(K,ue)=>{let Te;for(;K!==ue;)Te=be(K),u(K),K=Te;u(ue)},ze=(K,ue,Te)=>{const{bum:Ge,scope:Oe,update:Se,subTree:nt,um:He}=K;Ge&&au(Ge),Oe.stop(),Se&&(Se.active=!1,$e(nt,K,ue,Te)),He&&dn(He,ue),dn(()=>{K.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},st=(K,ue,Te,Ge=!1,Oe=!1,Se=0)=>{for(let nt=Se;nt<K.length;nt++)$e(K[nt],ue,Te,Ge,Oe)},Tt=K=>6&K.shapeFlag?Tt(K.component.subTree):128&K.shapeFlag?K.suspense.next():be(K.anchor||K.el),It=(K,ue,Te)=>{K==null?ue._vnode&&$e(ue._vnode,null,null,!0):ee(ue._vnode||null,K,ue,null,null,null,Te),vd(),df(),ue._vnode=K},ht={p:ee,um:$e,m:ve,r:Ze,mt:ge,mc:d,pc:Y,pbc:j,n:Tt,o:p};let li;return{render:It,hydrate:li,createApp:xg(It,li)}}(o)}function La({effect:o,update:p},m){o.allowRecurse=p.allowRecurse=m}function Tf(o,p,m=!1){const T=o.children,u=p.children;if(Yt(T)&&Yt(u))for(let E=0;E<T.length;E++){const F=T[E];let R=u[E];1&R.shapeFlag&&!R.dynamicChildren&&((R.patchFlag<=0||R.patchFlag===32)&&(R=u[E]=jr(u[E]),R.el=F.el),m||Tf(F,R)),R.type===Hc&&(R.el=F.el)}}const Cr=Symbol.for("v-fgt"),Hc=Symbol.for("v-txt"),Fa=Symbol.for("v-cmt"),Pc=Symbol.for("v-stc"),Qs=[];let Wn=null;function cn(o=!1){Qs.push(Wn=o?null:[])}let il=1;function Ed(o){il+=o}function Af(o){return o.dynamicChildren=il>0?Wn||Fo:null,Qs.pop(),Wn=Qs[Qs.length-1]||null,il>0&&Wn&&Wn.push(o),o}function Yr(o,p,m,T,u,E){return Af($t(o,p,m,T,u,E,!0))}function Na(o,p,m,T,u){return Af(Xn(o,p,m,T,u,!0))}function qs(o,p){return o.type===p.type&&o.key===p.key}const Ic="__vInternal",Pf=({key:o})=>o??null,Cc=({ref:o,ref_key:p,ref_for:m})=>(typeof o=="number"&&(o=""+o),o!=null?Yi(o)||an(o)||Jt(o)?{i:pr,r:o,k:p,f:!!m}:o:null);function $t(o,p=null,m=null,T=0,u=null,E=o===Cr?0:1,F=!1,R=!1){const A={__v_isVNode:!0,__v_skip:!0,type:o,props:p,key:p&&Pf(p),ref:p&&Cc(p),scopeId:Vc,slotScopeIds:null,children:m,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:T,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:pr};return R?(Gu(A,m),128&E&&o.normalize(A)):m&&(A.shapeFlag|=Yi(m)?8:16),il>0&&!F&&Wn&&(A.patchFlag>0||6&E)&&A.patchFlag!==32&&Wn.push(A),A}const Xn=function(o,p=null,m=null,T=0,u=null,E=!1){if(o&&o!==gg||(o=Fa),(F=o)&&F.__v_isVNode===!0){const R=Ho(o,p,!0);return m&&Gu(R,m),il>0&&!E&&Wn&&(6&R.shapeFlag?Wn[Wn.indexOf(o)]=R:Wn.push(R)),R.patchFlag|=-2,R}var F;if(function(R){return Jt(R)&&"__vccOpts"in R}(o)&&(o=o.__vccOpts),p){p=function(Z){return Z?gd(Z)||Ic in Z?on({},Z):Z:null}(p);let{class:R,style:A}=p;R&&!Yi(R)&&(p.class=Ou(R)),Di(A)&&(gd(A)&&!Yt(A)&&(A=on({},A)),p.style=$s(A))}return $t(o,p,m,T,u,Yi(o)?1:(R=>R.__isSuspense)(o)?128:(R=>R.__isTeleport)(o)?64:Di(o)?4:Jt(o)?2:0,E,!0)};function Ho(o,p,m=!1){const{props:T,ref:u,patchFlag:E,children:F}=o,R=p?function(...A){const Z={};for(let G=0;G<A.length;G++){const _e=A[G];for(const be in _e)if(be==="class")Z.class!==_e.class&&(Z.class=Ou([Z.class,_e.class]));else if(be==="style")Z.style=$s([Z.style,_e.style]);else if(zc(be)){const Q=Z[be],Pe=_e[be];!Pe||Q===Pe||Yt(Q)&&Q.includes(Pe)||(Z[be]=Q?[].concat(Q,Pe):Pe)}else be!==""&&(Z[be]=_e[be])}return Z}(T||{},p):T;return{__v_isVNode:!0,__v_skip:!0,type:o.type,props:R,key:R&&Pf(R),ref:p&&p.ref?m&&u?Yt(u)?u.concat(Cc(p)):[u,Cc(p)]:Cc(p):u,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:F,target:o.target,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:p&&o.type!==Cr?E===-1?16:16|E:E,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:o.transition,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&Ho(o.ssContent),ssFallback:o.ssFallback&&Ho(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce}}function Mg(o=" ",p=0){return Xn(Hc,null,o,p)}function Sg(o,p){const m=Xn(Pc,null,o);return m.staticCount=p,m}function zo(o="",p=!1){return p?(cn(),Na(Fa,null,o)):Xn(Fa,null,o)}function cr(o){return o==null||typeof o=="boolean"?Xn(Fa):Yt(o)?Xn(Cr,null,o.slice()):typeof o=="object"?jr(o):Xn(Hc,null,String(o))}function jr(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:Ho(o)}function Gu(o,p){let m=0;const{shapeFlag:T}=o;if(p==null)p=null;else if(Yt(p))m=16;else if(typeof p=="object"){if(65&T){const u=p.default;return void(u&&(u._c&&(u._d=!1),Gu(o,u()),u._c&&(u._d=!0)))}{m=32;const u=p._;u||Ic in p?u===3&&pr&&(pr.slots._===1?p._=1:(p._=2,o.patchFlag|=1024)):p._ctx=pr}}else Jt(p)?(p={default:p,_ctx:pr},m=32):(p=String(p),64&T?(m=16,p=[Mg(p)]):m=8);o.children=p,o.shapeFlag|=m}function lr(o,p,m,T=null){Hn(o,p,7,[m,T])}const Tg=wf();let Vu,Io,Ag=0,rn=null,Dd="__VUE_INSTANCE_SETTERS__";(Io=pu()[Dd])||(Io=pu()[Dd]=[]),Io.push(o=>rn=o),Vu=o=>{Io.length>1?Io.forEach(p=>p(o)):Io[0](o)};const Xo=o=>{Vu(o),o.scope.on()},Ra=()=>{rn&&rn.scope.off(),Vu(null)};function Cf(o){return 4&o.vnode.shapeFlag}let Nd,nl=!1;function Id(o,p,m){Jt(p)?o.type.__ssrInlineRender?o.ssrRender=p:o.render=p:Di(p)&&(o.setupState=hf(p)),Lf(o,m)}function Lf(o,p,m){const T=o.type;if(!o.render){if(!p&&Nd&&!T.render){const u=T.template||xu(o).template;if(u){const{isCustomElement:E,compilerOptions:F}=o.appContext.config,{delimiters:R,compilerOptions:A}=T,Z=on(on({isCustomElement:E,delimiters:R},F),A);T.render=Nd(u,Z)}}o.render=T.render||hr}Xo(o),Vo();try{(function(u){const E=xu(u),F=u.proxy,R=u.ctx;_u=!1,E.beforeCreate&&bd(E.beforeCreate,u,"bc");const{data:A,computed:Z,methods:G,watch:_e,provide:be,inject:Q,created:Pe,beforeMount:ee,mounted:Fe,beforeUpdate:Ye,updated:se,activated:Ie,deactivated:S,beforeDestroy:z,beforeUnmount:d,destroyed:_,unmounted:j,render:M,renderTracked:X,renderTriggered:w,errorCaptured:ge,serverPrefetch:pe,expose:ye,inheritAttrs:Le,components:Y,directives:ne,filters:at}=E;if(Q&&function($e,Ze,Lt=hr){Yt($e)&&($e=bu($e));for(const ze in $e){const st=$e[ze];let Tt;Tt=Di(st)?"default"in st?Ac(st.from||ze,st.default,!0):Ac(st.from||ze):Ac(st),an(Tt)?Object.defineProperty(Ze,ze,{enumerable:!0,configurable:!0,get:()=>Tt.value,set:It=>Tt.value=It}):Ze[ze]=Tt}}(Q,R,null),G)for(const $e in G){const Ze=G[$e];Jt(Ze)&&(R[$e]=Ze.bind(F))}if(A){const $e=A.call(F,F);Di($e)&&(u.data=Ru($e))}if(_u=!0,Z)for(const $e in Z){const Ze=Z[$e],Lt=Jt(Ze)?Ze.bind(F,F):Jt(Ze.get)?Ze.get.bind(F,F):hr,ze=!Jt(Ze)&&Jt(Ze.set)?Ze.set.bind(F):hr,st=Pg({get:Lt,set:ze});Object.defineProperty(R,$e,{enumerable:!0,configurable:!0,get:()=>st.value,set:Tt=>st.value=Tt})}if(_e)for(const $e in _e)bf(_e[$e],R,F,$e);if(be){const $e=Jt(be)?be.call(F):be;Reflect.ownKeys($e).forEach(Ze=>{(function(Lt,ze){if(rn){let st=rn.provides;const Tt=rn.parent&&rn.parent.provides;Tt===st&&(st=rn.provides=Object.create(Tt)),st[Lt]=ze}})(Ze,$e[Ze])})}function ve($e,Ze){Yt(Ze)?Ze.forEach(Lt=>$e(Lt.bind(F))):Ze&&$e(Ze.bind(F))}if(Pe&&bd(Pe,u,"c"),ve(lg,ee),ve(Wc,Fe),ve(cg,Ye),ve(hg,se),ve(ag,Ie),ve(og,S),ve(mg,ge),ve(fg,X),ve(dg,w),ve(ug,d),ve(xf,j),ve(pg,pe),Yt(ye))if(ye.length){const $e=u.exposed||(u.exposed={});ye.forEach(Ze=>{Object.defineProperty($e,Ze,{get:()=>F[Ze],set:Lt=>F[Ze]=Lt})})}else u.exposed||(u.exposed={});M&&u.render===hr&&(u.render=M),Le!=null&&(u.inheritAttrs=Le),Y&&(u.components=Y),ne&&(u.directives=ne)})(o)}finally{jo(),Ra()}}function ju(o){if(o.exposed)return o.exposeProxy||(o.exposeProxy=new Proxy(hf(sf(o.exposed)),{get:(p,m)=>m in p?p[m]:m in Js?Js[m](o):void 0,has:(p,m)=>m in p||m in Js}))}const Pg=(o,p)=>function(m,T,u=!1){let E,F;const R=Jt(m);return R?(E=m,F=hr):(E=m.get,F=m.set),new $m(E,F,R||!F,u)}(o,0,nl),Cg=Symbol.for("v-scx"),Lg=()=>Ac(Cg),Og="3.3.7",Da=typeof document<"u"?document:null,Rd=Da&&Da.createElement("template"),Eg={insert:(o,p,m)=>{p.insertBefore(o,m||null)},remove:o=>{const p=o.parentNode;p&&p.removeChild(o)},createElement:(o,p,m,T)=>{const u=p?Da.createElementNS("http://www.w3.org/2000/svg",o):Da.createElement(o,m?{is:m}:void 0);return o==="select"&&T&&T.multiple!=null&&u.setAttribute("multiple",T.multiple),u},createText:o=>Da.createTextNode(o),createComment:o=>Da.createComment(o),setText:(o,p)=>{o.nodeValue=p},setElementText:(o,p)=>{o.textContent=p},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>Da.querySelector(o),setScopeId(o,p){o.setAttribute(p,"")},insertStaticContent(o,p,m,T,u,E){const F=m?m.previousSibling:p.lastChild;if(u&&(u===E||u.nextSibling))for(;p.insertBefore(u.cloneNode(!0),m),u!==E&&(u=u.nextSibling););else{Rd.innerHTML=T?`<svg>${o}</svg>`:o;const R=Rd.content;if(T){const A=R.firstChild;for(;A.firstChild;)R.appendChild(A.firstChild);R.removeChild(A)}p.insertBefore(R,m)}return[F?F.nextSibling:p.firstChild,m?m.previousSibling:p.lastChild]}},Dg=Symbol("_vtc"),Ng=Symbol("_vod"),zd=/\s*!important$/;function Su(o,p,m){if(Yt(m))m.forEach(T=>Su(o,p,T));else if(m==null&&(m=""),p.startsWith("--"))o.setProperty(p,m);else{const T=function(u,E){const F=lu[E];if(F)return F;let R=Go(E);if(R!=="filter"&&R in u)return lu[E]=R;R=Yd(R);for(let A=0;A<Fd.length;A++){const Z=Fd[A]+R;if(Z in u)return lu[E]=Z}return E}(o,p);zd.test(m)?o.setProperty(Yo(T),m.replace(zd,""),"important"):o[T]=m}}const Fd=["Webkit","Moz","ms"],lu={},kd="http://www.w3.org/1999/xlink",Bd=Symbol("_vei"),Ud=/(?:Once|Passive|Capture)$/;let cu=0;const Ig=Promise.resolve(),Gd=/^on[a-z]/,Rg=on({patchProp:(o,p,m,T,u=!1,E,F,R,A)=>{p==="class"?function(Z,G,_e){const be=Z[Dg];be&&(G=(G?[G,...be]:[...be]).join(" ")),G==null?Z.removeAttribute("class"):_e?Z.setAttribute("class",G):Z.className=G}(o,T,u):p==="style"?function(Z,G,_e){const be=Z.style,Q=Yi(_e);if(_e&&!Q){if(G&&!Yi(G))for(const Pe in G)_e[Pe]==null&&Su(be,Pe,"");for(const Pe in _e)Su(be,Pe,_e[Pe])}else{const Pe=be.display;Q?G!==_e&&(be.cssText=_e):G&&Z.removeAttribute("style"),Ng in Z&&(be.display=Pe)}}(o,m,T):zc(p)?Pu(p)||function(Z,G,_e,be,Q=null){const Pe=Z[Bd]||(Z[Bd]={}),ee=Pe[G];if(be&&ee)ee.value=be;else{const[Fe,Ye]=function(se){let Ie;if(Ud.test(se)){let S;for(Ie={};S=se.match(Ud);)se=se.slice(0,se.length-S[0].length),Ie[S[0].toLowerCase()]=!0}return[se[2]===":"?se.slice(3):Yo(se.slice(2)),Ie]}(G);if(be){const se=Pe[G]=function(Ie,S){const z=d=>{if(d._vts){if(d._vts<=z.attached)return}else d._vts=Date.now();Hn(function(_,j){if(Yt(j)){const M=_.stopImmediatePropagation;return _.stopImmediatePropagation=()=>{M.call(_),_._stopped=!0},j.map(X=>w=>!w._stopped&&X&&X(w))}return j}(d,z.value),S,5,[d])};return z.value=Ie,z.attached=cu||(Ig.then(()=>cu=0),cu=Date.now()),z}(be,Q);(function(Ie,S,z,d){Ie.addEventListener(S,z,d)})(Z,Fe,se,Ye)}else ee&&(function(se,Ie,S,z){se.removeEventListener(Ie,S,z)}(Z,Fe,ee,Ye),Pe[G]=void 0)}}(o,p,0,T,F):(p[0]==="."?(p=p.slice(1),1):p[0]==="^"?(p=p.slice(1),0):function(Z,G,_e,be){return be?G==="innerHTML"||G==="textContent"||!!(G in Z&&Gd.test(G)&&Jt(_e)):!(G==="spellcheck"||G==="draggable"||G==="translate"||G==="form"||G==="list"&&Z.tagName==="INPUT"||G==="type"&&Z.tagName==="TEXTAREA"||Gd.test(G)&&Yi(_e)||!(G in Z))}(o,p,T,u))?function(Z,G,_e,be,Q,Pe,ee){if(G==="innerHTML"||G==="textContent")return be&&ee(be,Q,Pe),void(Z[G]=_e??"");const Fe=Z.tagName;if(G==="value"&&Fe!=="PROGRESS"&&!Fe.includes("-")){Z._value=_e;const se=_e??"";return(Fe==="OPTION"?Z.getAttribute("value"):Z.value)!==se&&(Z.value=se),void(_e==null&&Z.removeAttribute(G))}let Ye=!1;if(_e===""||_e==null){const se=typeof Z[G];se==="boolean"?_e=ld(_e):_e==null&&se==="string"?(_e="",Ye=!0):se==="number"&&(_e=0,Ye=!0)}try{Z[G]=_e}catch{}Ye&&Z.removeAttribute(G)}(o,p,T,E,F,R,A):(p==="true-value"?o._trueValue=T:p==="false-value"&&(o._falseValue=T),function(Z,G,_e,be,Q){if(be&&G.startsWith("xlink:"))_e==null?Z.removeAttributeNS(kd,G.slice(6,G.length)):Z.setAttributeNS(kd,G,_e);else{const Pe=Dm(G);_e==null||Pe&&!ld(_e)?Z.removeAttribute(G):Z.setAttribute(G,Pe?"":_e)}}(o,p,T,u))}},Eg);let Vd;const zg=()=>{let o,p,m,T,u,E,F=[],R=!1,A=0;const Z=["#F73859","#14FFEC","#00E0FF","#FF99FE","#FAF15D"],G=document.createElement("canvas");document.body.appendChild(G),G.setAttribute("style","width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;");const _e=document.createElement("span");_e.classList.add("pointer"),document.body.appendChild(_e);const be=()=>{G.width=2*window.innerWidth,G.height=2*window.innerHeight,G.style.width=window.innerWidth+"px",G.style.height=window.innerHeight+"px",E.scale(2,2),p=G.width=window.innerWidth,m=G.height=window.innerHeight,T={x:p/2,y:m/2},u={x:p/2,y:m/2}};class Q{constructor(Ie=T.x,S=T.y){this.x=Ie,this.y=S,this.angle=2*Math.PI*Math.random(),this.multiplier=R==1?ee(14+A,15+A):ee(6,12),this.vx=(this.multiplier+.5*Math.random())*Math.cos(this.angle),this.vy=(this.multiplier+.5*Math.random())*Math.sin(this.angle),this.r=ee(8,12)+3*Math.random(),this.color=Z[Math.floor(Math.random()*Z.length)]}update(){this.x+=this.vx-u.x,this.y+=this.vy-u.y,u.x=-2/window.innerWidth*Math.sin(this.angle),u.y=-2/window.innerHeight*Math.cos(this.angle),this.r-=.3,this.vx*=.9,this.vy*=.9}}const Pe=(se=1,Ie=T.x,S=T.y)=>{for(let z=0;z<se;z++)F.push(new Q(Ie,S))},ee=(se,Ie)=>Math.floor(Math.random()*Ie)+se,Fe=()=>{E.fillStyle="rgba(255, 255, 255, 0)",E.clearRect(0,0,G.width,G.height);for(let se=0;se<F.length;se++){let Ie=F[se];Ie.r<0||(E.fillStyle=Ie.color,E.beginPath(),E.arc(Ie.x,Ie.y,Ie.r,0,2*Math.PI,!1),E.fill(),Ie.update())}R==1?A+=.2:!R&&A>=0&&(A-=.4),Ye(),requestAnimationFrame(Fe)},Ye=()=>{for(let se=0;se<F.length;se++){let Ie=F[se];(Ie.x+Ie.r<0||Ie.x-Ie.r>p||Ie.y+Ie.r<0||Ie.y-Ie.r>m||Ie.r<0)&&F.splice(se,1)}};G.getContext&&window.addEventListener&&(E=G.getContext("2d"),be(),window.addEventListener("resize",be,!1),Fe(),window.addEventListener("mousedown",se=>{Pe(ee(10,20),se.clientX,se.clientY),document.body.classList.add("is-pressed"),o=setTimeout(()=>{document.body.classList.add("is-longpress"),R=!0},500)},!1),window.addEventListener("mouseup",se=>{clearInterval(o),R==1&&(document.body.classList.remove("is-longpress"),Pe(ee(50+Math.ceil(A),100+Math.ceil(A)),se.clientX,se.clientY),R=!1),document.body.classList.remove("is-pressed")},!1),window.addEventListener("mousemove",se=>{let Ie=se.clientX,S=se.clientY;_e.style.top=S+"px",_e.style.left=Ie+"px"},!1))};let Rc=null;const Fg=()=>{let o,p,m,T,u,E,F,R,A,Z=[],G=2*Math.PI,_e=null,be=!1;const Q=document.createElement("canvas");Q.id="backgroundEffects",document.body.appendChild(Q);const Pe=()=>{Rc=requestAnimationFrame(Pe),Ye()};class ee{constructor(){this.deg=0,this.rad=0,this.x=0,this.y=0,this.distX=0,this.distY=0,this.color=`rgb(${Math.floor(130*Math.random())}, ${Math.floor(50*Math.random())}, ${Math.floor(100*Math.random())})`,this.size}}const Fe=()=>{let z=650;for(;z--;){let _=new ee;_.deg=Math.floor(360*Math.random()),_.rad=Math.floor(Math.random()*T*.5),_.x=_.distX=Math.floor(Math.random()*T),_.y=_.distY=Math.floor(Math.random()*u),_.size=1+Math.floor(Math.random()*(.055*_.rad)),Z[z]=_}p.onmousemove=se,p.onmousedown=be,p.onmouseup=Ie;let d=setInterval(()=>{o--,o===20&&clearInterval(d)},20)},Ye=()=>{m.globalCompositeOperation="source-over",m.fillStyle="hsla(242, 30%, 5%, .55)",m.fillRect(0,0,T,u),m.globalCompositeOperation="lighter";let z=E,d=F,_=_e;be&&(_=2*_e);let j=650;for(;j--;){let M=Z[j],X=Math.PI/180*M.deg;if(M.distX=R+M.rad*Math.cos(X),M.distY=A+M.rad*Math.sin(X)*.4,z&&d){let Le=Math.floor(.5*_+Math.random()*(.9*_));M.distX-z>0&&M.distX-z<_&&M.distY-d>0&&M.distY-d<_?(M.distX+=Le,M.distY+=Le):M.distX-z>0&&M.distX-z<_&&M.distY-d<0&&M.distY-d>-_?(M.distX+=Le,M.distY-=Le):M.distX-z<0&&M.distX-z>-_&&M.distY-d>0&&M.distY-d<_?(M.distX-=Le,M.distY+=Le):M.distX-z<0&&M.distX-z>-_&&M.distY-d<0&&M.distY-d>-_&&(M.distY-=Le,M.distY-=Le)}M.x+=(M.distX-M.x)/o,M.y+=(M.distY-M.y)/o;let w,ge=M.x,pe=M.y,ye=M.size*(1.5*M.y)/u;ye<.1&&(ye=0),m.beginPath(),m.fillStyle=M.color,m.arc(ge,pe,ye,0,G,!0),m.fill(),m.closePath(),w=M.size<2?4:M.size<3?3:M.size<4?2:1,w*=M.y/(.9*u),M.deg+=w,M.deg=M.deg%360}},se=z=>{let d=S(z.target),_=window.pageXOffset,j=window.pageYOffset;E=z.clientX-d.x+_,F=z.clientY-d.y+j};be=z=>{be=!0};const Ie=z=>{be=!1},S=z=>{let d={};for(d.x=z.offsetLeft,d.y=z.offsetTop;z.offsetParent;)z=z.offsetParent,d.x+=z.offsetLeft,d.y+=z.offsetTop;return d};return()=>{p=document.getElementById("backgroundEffects"),m=p.getContext("2d"),T=p.width=window.innerWidth,u=p.height=window.innerHeight,R=T/2,A=u/2,_e=.09*Math.max(T,u),o=50,Rc=requestAnimationFrame(Fe),Pe()}},ka=(o,p)=>{const m=o.__vccOpts||o;for(const[T,u]of p)m[T]=u;return m},Ar=o=>(qo("data-v-abcc9a34"),o=o(),Zo(),o),kg=[Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1)),Ar(()=>$t("li",null,null,-1))],Bg=ka({__name:"ConfessionLoveanimation",setup(o,{expose:p}){const m=fi(null),T=fi(null);return p({loveAnimation:()=>{const u=m.value.querySelectorAll("li");m.value.style.height="100%",m.value.style.opacity=0,u.forEach(E=>{E.style.animation="love",E.style.height="100%"}),T.value.style.opacity=0}}),(u,E)=>(cn(),Yr("div",null,[$t("div",{id:"loveEffect",ref_key:"loveEffect",ref:T},[$t("ul",{ref_key:"loveEffectUl",ref:m},kg,512)],512)]))}},[["__scopeId","data-v-abcc9a34"]]),Of=o=>(qo("data-v-3a6e1525"),o=o(),Zo(),o),Ug=Of(()=>$t("div",{class:"heal"},null,-1)),Gg=Of(()=>$t("div",{class:"text"},"LXZ&&QPY",-1)),Vg={__name:"ConfessionOpens",emits:"destroyed",setup(o,{emit:p}){const m=fi(null),T=fi(null),u=fi(null),E=p,F=()=>{T.value.style.width=2*(window.innerWidth>window.innerHeight?window.innerWidth:window.innerHeight)+"px",m.value.style.opacity=0,u.value.loveAnimation(),setTimeout(()=>{E("destroyed",!1)},500)};return(R,A)=>(cn(),Yr("div",null,[Xn(Bg,{ref_key:"loveAnimation",ref:u},null,512),$t("div",{id:"confessionLetter",ref_key:"confessionLetter",ref:m},[Ug,$t("div",{class:"switch",ref_key:"transitions",ref:T},null,512),$t("div",{class:"heart",onClickOnce:F},null,32),Gg],512)]))}},jg=ka(Vg,[["__scopeId","data-v-3a6e1525"]]);let hu=null;const Oa=(o,p)=>{clearInterval(hu),p.value="";const m=o.split("");let T=0;hu=setInterval(()=>{if(m.length==T)return clearInterval(hu);p.value+=m[T],T++},10)},Wg={id:"ConfessionElf"},Hg=(o=>(qo("data-v-60bb9b3e"),o=o(),Zo(),o))(()=>$t("div",{style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0","z-index":"11"}},null,-1)),Xg={id:"role"},Yg=Sg('<label for="mimikyu" class="mimikyu" data-v-60bb9b3e><div class="mimikyu-head" data-v-60bb9b3e><div class="mimikyu-disguise-face" data-v-60bb9b3e><div class="mimikyu-disguise-eye mimikyu-disguise-eye-left mimikyu-disguise-line" data-v-60bb9b3e><div class="mimikyu-disguise-line" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-eye mimikyu-disguise-eye-right mimikyu-disguise-line" data-v-60bb9b3e><div class="mimikyu-disguise-line mimikyu-disguise-line-1" data-v-60bb9b3e></div><div class="mimikyu-disguise-line mimikyu-disguise-line-2" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-blush mimikyu-disguise-blush-left mimikyu-disguise-line" data-v-60bb9b3e><div class="mimikyu-disguise-line" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-blush mimikyu-disguise-blush-right mimikyu-disguise-line" data-v-60bb9b3e><div class="mimikyu-disguise-line" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-1" data-v-60bb9b3e><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-2" data-v-60bb9b3e><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-3" data-v-60bb9b3e><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-4" data-v-60bb9b3e><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-5" data-v-60bb9b3e><div class="mimikyu-disguise-mouth mimikyu-disguise-mouth-6" data-v-60bb9b3e></div></div></div></div></div></div></div><div class="mimikyu-ear mimikyu-ear-left" data-v-60bb9b3e><div class="mimikyu-ear-tip" data-v-60bb9b3e></div><div class="mimikyu-ear-top" data-v-60bb9b3e></div></div><div class="mimikyu-ear mimikyu-ear-right" data-v-60bb9b3e><div class="mimikyu-ear-top" data-v-60bb9b3e></div></div></div><div class="mimikyu-body" data-v-60bb9b3e><div class="mimikyu-face" data-v-60bb9b3e><div class="mimikyu-eye mimikyu-eye-left" data-v-60bb9b3e></div><div class="mimikyu-eye mimikyu-eye-right" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-torso" data-v-60bb9b3e></div><div class="mimikyu-disguise-tail" data-v-60bb9b3e><div class="mimikyu-disguise-tail-tip" data-v-60bb9b3e></div></div><div class="mimikyu-disguise-frays" data-v-60bb9b3e><div class="mimikyu-disguise-fray mimikyu-disguise-fray-1" data-v-60bb9b3e></div><div class="mimikyu-disguise-fray mimikyu-disguise-fray-2" data-v-60bb9b3e></div><div class="mimikyu-disguise-fray mimikyu-disguise-fray-3" data-v-60bb9b3e></div><div class="mimikyu-disguise-fray mimikyu-disguise-fray-4" data-v-60bb9b3e></div><div class="mimikyu-disguise-fray mimikyu-disguise-fray-5" data-v-60bb9b3e></div><div class="mimikyu-shadow-fray mimikyu-shadow-fray-1" data-v-60bb9b3e></div><div class="mimikyu-shadow-fray mimikyu-shadow-fray-2" data-v-60bb9b3e></div><div class="mimikyu-shadow-fray mimikyu-shadow-fray-3" data-v-60bb9b3e></div><div class="mimikyu-shadow-fray mimikyu-shadow-fray-4" data-v-60bb9b3e></div></div><div class="mimikyu-shadow-clip" data-v-60bb9b3e><div class="mimikyu-shadow-rotate" data-v-60bb9b3e><div class="mimikyu-shadow-fingers" data-v-60bb9b3e><div class="mimikyu-shadow-finger mimikyu-shadow-finger-1" data-v-60bb9b3e></div><div class="mimikyu-shadow-finger mimikyu-shadow-finger-2" data-v-60bb9b3e></div><div class="mimikyu-shadow-finger mimikyu-shadow-finger-3" data-v-60bb9b3e></div></div><div class="mimikyu-shadow-claw-wrap" data-v-60bb9b3e><div class="mimikyu-shadow-claw" data-v-60bb9b3e></div></div></div></div></div><div class="mimikyu-shadow" data-v-60bb9b3e></div><div class="heart" data-v-60bb9b3e></div></label>',1),qg=ka({__name:"ConfessionElf",setup(o,{expose:p}){const m=fi(null);return p({spriteStatus:()=>{m.value.click()}}),(T,u)=>(cn(),Yr("div",Wg,[Hg,$t("div",Xg,[$t("input",{id:"mimikyu","aria-label":"Disguise is broken",class:"mimikyu-control",type:"checkbox",ref_key:"mimikyu",ref:m},null,512),Yg])]))}},[["__scopeId","data-v-60bb9b3e"]]),Zg={class:"content"},Jg={__name:"ConfessionInteraction",emits:"endConversation",setup(o,{expose:p,emit:m}){const T=document.querySelector("html"),u=fi(null),E=fi(null),F=fi(""),R=fi(null),A=fi(""),Z=fi(""),G=fi(!1),_e=fi(null),be=fi(!0),Q=fi({issue1:"Q",issue2:"Q(  )Q",issue3:"Q(*)",issue4:"Q(  `)Q",issue5:"Q(*)Q",reply1:"",reply2:"",reply3:"",reply4:"",reply5:"",reply6:"",reply7:null}),Pe=fi(""),ee=fi(""),Fe=m;return p({conversationalInteraction:()=>{u.value.style.display="block",u.value.style.opacity="0.7",E.value.style.width="250px",Oa(Q.value.issue1,F),R.value.style.display="flex",G.value=!G.value,setTimeout(()=>{A.value="10px 10px",Z.value="1",T.style.fontSize="8px"},500)}}),(Ye,se)=>(cn(),Yr("div",null,[$t("div",{id:"infobox",ref_key:"infobox",ref:E},[$t("div",Zg,Sc(F.value),1),$t("div",{class:"confirm",ref_key:"confirm",ref:R},[$t("a",{style:$s({padding:A.value,opacity:Z.value}),onClick:se[0]||(se[0]=Ie=>(()=>{const{reply1:S,reply2:z,reply3:d,reply4:_,issue1:j,issue2:M}=Q.value;if(be.value&&(_e.value.spriteStatus(),be.value=!1),Pe.value==d)return Pe.value=S,ee.value=z,Oa(j,F);Oa(M,F),Pe.value=d,ee.value=_})())},Sc(Pe.value),5),$t("a",{style:$s({padding:A.value,opacity:Z.value}),onClick:se[1]||(se[1]=Ie=>(()=>{const{reply4:S,reply5:z,reply6:d,issue3:_,issue4:j,issue5:M}=Q.value;if(be.value||(_e.value.spriteStatus(),be.value=!0),ee.value==S?(Oa(j,F),Q.value.reply7=!0):ee.value==d&&Oa(M,F),ee.value==S||ee.value==d)return R.value.style.display="none",setTimeout(()=>{F.value="",E.value.style.width="0px",T.style.fontSize="0px",Fe("endConversation",Q.value.reply7)},5e3);Oa(_,F),Pe.value=z,ee.value=d})())},Sc(ee.value),5)],512)],512),$t("div",{id:"masks",ref_key:"masks",ref:u},null,512),G.value?(cn(),Na(qg,{key:0,ref_key:"genie",ref:_e},null,512)):zo("",!0)]))}},Qg=ka(Jg,[["__scopeId","data-v-a51e6ee7"]]),$g=(o=>(qo("data-v-3628bf42"),o=o(),Zo(),o))(()=>$t("div",{class:"heal"},null,-1)),Kg={__name:"ConfessionCard",emits:"dialogue",setup(o,{emit:p}){const m=fi(null),T=fi(""),u=fi(null),E=p,F=fi(!0),R=fi(null);Rc=requestAnimationFrame(Fg());const A=Z=>{if(setTimeout(()=>{cancelAnimationFrame(Rc),F.value=!1},1e3),Z)return T.value="",m.value.style.width="0",E("dialogue",!0);E("dialogue",!1)};return Wc(()=>{setTimeout(()=>{m.value.style.width="480px",u.value.style.padding="20px",Oa("LXZ",T)},100)}),(Z,G)=>(cn(),Yr("div",null,[$t("div",{id:"confessionCard",ref_key:"confessionCard",ref:m},[$t("div",{class:"front",onClick:G[1]||(G[1]=_e=>{setTimeout(()=>{m.value.style.width="0px",u.value.style.height="0px",u.value.style.fontSize="0px",A()},2e3)})},[$g,$t("div",{class:"heart",onClickOnce:G[0]||(G[0]=(..._e)=>Z.openingAnimation&&Z.openingAnimation(..._e))},null,32),$t("p",{ref_key:"confessionCardP",ref:u},Sc(T.value),513)])],512),F.value?(cn(),Na(Qg,{key:0,ref_key:"dialogueAnimations",ref:R,onEndConversation:A},null,512)):zo("",!0)]))}},ev=ka(Kg,[["__scopeId","data-v-3628bf42"]]),tv={id:"ConfessionFailed"},iv=[(o=>(qo("data-v-28103bd4"),o=o(),Zo(),o))(()=>$t("span",null,"",-1))],nv=ka({__name:"ConfessionFailed",setup(o){const p=fi(null);return setTimeout(()=>{p.value.style.fontSize="calc(20px + 5vw)"},200),(m,T)=>(cn(),Yr("div",null,[$t("div",tv,[$t("h1",{"data-text":"",ref_key:"text",ref:p},iv,512)])]))}},[["__scopeId","data-v-28103bd4"]]);var uu,bc;uu=globalThis,bc=function(o){function p(){}function m(e,t){this.x=e||0,this.y=t||0}function T(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=n!==void 0?n:1}function u(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function E(){this.elements=[1,0,0,0,1,0,0,0,1]}function F(e,t,i,n,r,a,s,l,c,h){Object.defineProperty(this,"id",{value:zf++}),this.uuid=Ht.generateUUID(),this.name="",this.image=e!==void 0?e:F.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:F.DEFAULT_MAPPING,this.wrapS=i!==void 0?i:1001,this.wrapT=n!==void 0?n:1001,this.magFilter=r!==void 0?r:1006,this.minFilter=a!==void 0?a:1008,this.anisotropy=c!==void 0?c:1,this.format=s!==void 0?s:1023,this.type=l!==void 0?l:1009,this.offset=new m(0,0),this.repeat=new m(1,1),this.center=new m(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new E,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h!==void 0?h:3e3,this.version=0,this.onUpdate=null}function R(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=n!==void 0?n:1}function A(e,t,i){this.width=e,this.height=t,this.scissor=new R(0,0,e,t),this.scissorTest=!1,this.viewport=new R(0,0,e,t),i=i||{},this.texture=new F(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=i.generateMipmaps!==void 0&&i.generateMipmaps,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:1006,this.depthBuffer=i.depthBuffer===void 0||i.depthBuffer,this.stencilBuffer=i.stencilBuffer===void 0||i.stencilBuffer,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}function Z(e,t,i){A.call(this,e,t,i),this.samples=4}function G(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function _e(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||_e.DefaultOrder}function be(){this.mask=1}function Q(){Object.defineProperty(this,"id",{value:Bf++}),this.uuid=Ht.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Q.DefaultUp.clone();var e=new u,t=new _e,i=new T,n=new u(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new G},normalMatrix:{value:new E}}),this.matrix=new G,this.matrixWorld=new G,this.matrixAutoUpdate=Q.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new be,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Pe(){Q.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ee(e,t){this.min=e!==void 0?e:new u(1/0,1/0,1/0),this.max=t!==void 0?t:new u(-1/0,-1/0,-1/0)}function Fe(e,t,i,n,r){var a,s=0;for(a=e.length-3;s<=a;s+=3){ma.fromArray(e,s);var l=r.x*Math.abs(ma.x)+r.y*Math.abs(ma.y)+r.z*Math.abs(ma.z),c=t.dot(ma),h=i.dot(ma),f=n.dot(ma);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>l)return!1}return!0}function Ye(e,t){this.center=e!==void 0?e:new u,this.radius=t!==void 0?t:0}function se(e,t){this.origin=e!==void 0?e:new u,this.direction=t!==void 0?t:new u}function Ie(e,t,i){this.a=e!==void 0?e:new u,this.b=t!==void 0?t:new u,this.c=i!==void 0?i:new u}function S(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}function z(e,t,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:.5>i?t:i<2/3?e+6*(t-e)*(2/3-i):e}function d(e){return .04045>e?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function _(e){return .0031308>e?12.92*e:1.055*Math.pow(e,.41666)-.055}function j(e,t,i,n,r,a){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new u,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new S,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=a!==void 0?a:0}function M(){Object.defineProperty(this,"id",{value:Xf++}),this.uuid=Ht.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.vertexTangents=this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.stencilFunc=519,this.stencilRef=0,this.stencilMask=255,this.stencilZPass=this.stencilZFail=this.stencilFail=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.toneMapped=this.visible=!0,this.userData={},this.needsUpdate=!0}function X(e){M.call(this),this.type="MeshBasicMaterial",this.color=new S(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function w(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ge(e,t,i){w.call(this,new Int8Array(e),t,i)}function pe(e,t,i){w.call(this,new Uint8Array(e),t,i)}function ye(e,t,i){w.call(this,new Uint8ClampedArray(e),t,i)}function Le(e,t,i){w.call(this,new Int16Array(e),t,i)}function Y(e,t,i){w.call(this,new Uint16Array(e),t,i)}function ne(e,t,i){w.call(this,new Int32Array(e),t,i)}function at(e,t,i){w.call(this,new Uint32Array(e),t,i)}function ve(e,t,i){w.call(this,new Float32Array(e),t,i)}function $e(e,t,i){w.call(this,new Float64Array(e),t,i)}function Ze(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function Lt(e){if(e.length===0)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}function ze(){Object.defineProperty(this,"id",{value:Yf+=2}),this.uuid=Ht.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function st(e,t){Q.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new ze,this.material=t!==void 0?t:new X({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Tt(e,t,i,n,r,a,s,l){return(t.side===1?n.intersectTriangle(s,a,r,!0,l):n.intersectTriangle(r,a,s,t.side!==2,l))===null?null:(Yl.copy(l),Yl.applyMatrix4(e.matrixWorld),(t=i.ray.origin.distanceTo(Yl))<i.near||t>i.far?null:{distance:t,point:Yl.clone(),object:e})}function It(e,t,i,n,r,a,s,l,c,h,f){if(ya.fromBufferAttribute(r,c),_a.fromBufferAttribute(r,h),xa.fromBufferAttribute(r,f),r=e.morphTargetInfluences,t.morphTargets&&a&&r){zh.set(0,0,0),Fh.set(0,0,0),kh.set(0,0,0);for(var g=0,y=a.length;g<y;g++){var L=r[g],C=a[g];L!==0&&(_p.fromBufferAttribute(C,c),xp.fromBufferAttribute(C,h),bp.fromBufferAttribute(C,f),zh.addScaledVector(_p.sub(ya),L),Fh.addScaledVector(xp.sub(_a),L),kh.addScaledVector(bp.sub(xa),L))}ya.add(zh),_a.add(Fh),xa.add(kh)}return(e=Tt(e,t,i,n,ya,_a,xa,Gs))&&(s&&(Mo.fromBufferAttribute(s,c),So.fromBufferAttribute(s,h),To.fromBufferAttribute(s,f),e.uv=Ie.getUV(Gs,ya,_a,xa,Mo,So,To,new m)),l&&(Mo.fromBufferAttribute(l,c),So.fromBufferAttribute(l,h),To.fromBufferAttribute(l,f),e.uv2=Ie.getUV(Gs,ya,_a,xa,Mo,So,To,new m)),s=new j(c,h,f),Ie.getNormal(ya,_a,xa,s.normal),e.face=s),e}function ht(){Object.defineProperty(this,"id",{value:qf+=2}),this.uuid=Ht.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function li(e,t,i,n,r,a){ht.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new K(e,t,i,n,r,a)),this.mergeVertices()}function K(e,t,i,n,r,a){function s(C,I,q,de,fe,me,xe,ie,Ne,Ve,bt){var Ue=me/Ne,Me=xe/Ve,je=me/2,dt=xe/2,mt=ie/2;xe=Ne+1;var Et,V,J=Ve+1,De=me=0,tt=new u;for(V=0;V<J;V++){var ft=V*Me-dt;for(Et=0;Et<xe;Et++)tt[C]=(Et*Ue-je)*de,tt[I]=ft*fe,tt[q]=mt,h.push(tt.x,tt.y,tt.z),tt[C]=0,tt[I]=0,tt[q]=0<ie?1:-1,f.push(tt.x,tt.y,tt.z),g.push(Et/Ne),g.push(1-V/Ve),me+=1}for(V=0;V<Ve;V++)for(Et=0;Et<Ne;Et++)C=y+Et+xe*(V+1),I=y+(Et+1)+xe*(V+1),q=y+(Et+1)+xe*V,c.push(y+Et+xe*V,C,q),c.push(C,I,q),De+=6;l.addGroup(L,De,bt),L+=De,y+=me}ze.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var l=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var c=[],h=[],f=[],g=[],y=0,L=0;s("z","y","x",-1,-1,i,t,e,a,r,0),s("z","y","x",1,-1,i,t,-e,a,r,1),s("x","z","y",1,1,e,i,t,n,a,2),s("x","z","y",1,-1,e,i,-t,n,a,3),s("x","y","z",1,-1,e,t,i,n,r,4),s("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(c),this.addAttribute("position",new ve(h,3)),this.addAttribute("normal",new ve(f,3)),this.addAttribute("uv",new ve(g,2))}function ue(e){var t,i={};for(t in e)for(var n in i[t]={},e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}return i}function Te(e){for(var t={},i=0;i<e.length;i++){var n,r=ue(e[i]);for(n in r)t[n]=r[n]}return t}function Ge(e){M.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes,this.setValues(e))}function Oe(){Q.call(this),this.type="Camera",this.matrixWorldInverse=new G,this.projectionMatrix=new G,this.projectionMatrixInverse=new G}function Se(e,t,i,n){Oe.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=i!==void 0?i:.1,this.far=n!==void 0?n:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function nt(e,t,i,n){Q.call(this),this.type="CubeCamera";var r=new Se(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new u(1,0,0)),this.add(r);var a=new Se(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new u(-1,0,0)),this.add(a);var s=new Se(90,1,e,t);s.up.set(0,0,1),s.lookAt(new u(0,1,0)),this.add(s);var l=new Se(90,1,e,t);l.up.set(0,0,-1),l.lookAt(new u(0,-1,0)),this.add(l);var c=new Se(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new u(0,0,1)),this.add(c);var h=new Se(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new u(0,0,-1)),this.add(h),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new He(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(f,g){this.parent===null&&this.updateMatrixWorld();var y=f.getRenderTarget(),L=this.renderTarget,C=L.texture.generateMipmaps;L.texture.generateMipmaps=!1,f.setRenderTarget(L,0),f.render(g,r),f.setRenderTarget(L,1),f.render(g,a),f.setRenderTarget(L,2),f.render(g,s),f.setRenderTarget(L,3),f.render(g,l),f.setRenderTarget(L,4),f.render(g,c),L.texture.generateMipmaps=C,f.setRenderTarget(L,5),f.render(g,h),f.setRenderTarget(y)},this.clear=function(f,g,y,L){for(var C=f.getRenderTarget(),I=this.renderTarget,q=0;6>q;q++)f.setRenderTarget(I,q),f.clear(g,y,L);f.setRenderTarget(C)}}function He(e,t,i){A.call(this,e,t,i)}function ke(e,t,i,n,r,a,s,l,c,h,f,g){F.call(this,null,a,s,l,c,h,n,r,f,g),this.image={data:e,width:t,height:i},this.magFilter=c!==void 0?c:1003,this.minFilter=h!==void 0?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function Ae(e,t){this.normal=e!==void 0?e:new u(1,0,0),this.constant=t!==void 0?t:0}function rt(e,t,i,n,r,a){this.planes=[e!==void 0?e:new Ae,t!==void 0?t:new Ae,i!==void 0?i:new Ae,n!==void 0?n:new Ae,r!==void 0?r:new Ae,a!==void 0?a:new Ae]}function it(){function e(r,a){i!==!1&&(n(r,a),t.requestAnimationFrame(e))}var t=null,i=!1,n=null;return{start:function(){i!==!0&&n!==null&&(t.requestAnimationFrame(e),i=!0)},stop:function(){i=!1},setAnimationLoop:function(r){n=r},setContext:function(r){t=r}}}function pt(e){var t=new WeakMap;return{get:function(i){return i.isInterleavedBufferAttribute&&(i=i.data),t.get(i)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r=t.get(i);if(r===void 0)t.set(i,function(c,h){var f=c.array,g=c.dynamic?35048:35044,y=e.createBuffer();return e.bindBuffer(h,y),e.bufferData(h,f,g),c.onUploadCallback(),h=5126,f instanceof Float32Array?h=5126:f instanceof Float64Array||(f instanceof Uint16Array?h=5123:f instanceof Int16Array?h=5122:f instanceof Uint32Array?h=5125:f instanceof Int32Array?h=5124:f instanceof Int8Array?h=5120:f instanceof Uint8Array&&(h=5121)),{buffer:y,type:h,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}(i,n));else if(r.version<i.version){var a=i,s=a.array,l=a.updateRange;e.bindBuffer(n,r.buffer),a.dynamic===!1?e.bufferData(n,s,35044):l.count===-1?e.bufferSubData(n,0,s):l.count===0||(e.bufferSubData(n,l.offset*s.BYTES_PER_ELEMENT,s.subarray(l.offset,l.offset+l.count)),l.count=-1),r.version=i.version}}}}function v(e,t,i,n){ht.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new P(e,t,i,n)),this.mergeVertices()}function P(e,t,i,n){ze.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r=(e=e||1)/2,a=(t=t||1)/2,s=(i=Math.floor(i)||1)+1,l=(n=Math.floor(n)||1)+1,c=e/i,h=t/n,f=[],g=[],y=[],L=[];for(e=0;e<l;e++){var C=e*h-a;for(t=0;t<s;t++)g.push(t*c-r,-C,0),y.push(0,0,1),L.push(t/i),L.push(1-e/n)}for(e=0;e<n;e++)for(t=0;t<i;t++)r=t+s*(e+1),a=t+1+s*(e+1),l=t+1+s*e,f.push(t+s*e,r,l),f.push(r,a,l);this.setIndex(f),this.addAttribute("position",new ve(g,3)),this.addAttribute("normal",new ve(y,3)),this.addAttribute("uv",new ve(L,2))}function U(e,t,i,n){function r(g,y){t.buffers.color.setClear(g.r,g.g,g.b,y,n)}var a,s,l=new S(0),c=0,h=null,f=0;return{getClearColor:function(){return l},setClearColor:function(g,y){l.set(g),r(l,c=y!==void 0?y:1)},getClearAlpha:function(){return c},setClearAlpha:function(g){r(l,c=g)},render:function(g,y,L,C){y=y.background,(L=(L=e.vr).getSession&&L.getSession())&&L.environmentBlendMode==="additive"&&(y=null),y===null?(r(l,c),h=null,f=0):y&&y.isColor&&(r(y,1),C=!0,h=null,f=0),(e.autoClear||C)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLRenderTargetCube)?(s===void 0&&((s=new st(new K(1,1,1),new Ge({type:"BackgroundCubeMaterial",uniforms:ue(ar.cube.uniforms),vertexShader:ar.cube.vertexShader,fragmentShader:ar.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(I,q,de){this.matrixWorld.copyPosition(de.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(s)),C=y.isWebGLRenderTargetCube?y.texture:y,s.material.uniforms.tCube.value=C,s.material.uniforms.tFlip.value=y.isWebGLRenderTargetCube?1:-1,h===y&&f===C.version||(s.material.needsUpdate=!0,h=y,f=C.version),g.unshift(s,s.geometry,s.material,0,0,null)):y&&y.isTexture&&(a===void 0&&((a=new st(new P(2,2),new Ge({type:"BackgroundMaterial",uniforms:ue(ar.background.uniforms),vertexShader:ar.background.vertexShader,fragmentShader:ar.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),h===y&&f===y.version||(a.material.needsUpdate=!0,h=y,f=y.version),g.unshift(a,a.geometry,a.material,0,0,null))}}}function H(e,t,i,n){var r;this.setMode=function(a){r=a},this.render=function(a,s){e.drawArrays(r,a,s),i.update(s,r)},this.renderInstances=function(a,s,l){if(n.isWebGL2)var c=e,h="drawArraysInstanced";else if(h="drawArraysInstancedANGLE",(c=t.get("ANGLE_instanced_arrays"))===null)return;c[h](r,s,l,a.maxInstancedCount),i.update(l,r,a.maxInstancedCount)}}function re(e,t,i){function n(de){if(de==="highp"){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";de="mediump"}return de==="mediump"&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,s=i.precision!==void 0?i.precision:"highp",l=n(s);l!==s&&(s=l),i=i.logarithmicDepthBuffer===!0,l=e.getParameter(34930);var c=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),g=e.getParameter(34921),y=e.getParameter(36347),L=e.getParameter(36348),C=e.getParameter(36349),I=0<c,q=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(r!==void 0)return r;var de=t.get("EXT_texture_filter_anisotropic");return r=de!==null?e.getParameter(de.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:s,logarithmicDepthBuffer:i,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:g,maxVertexUniforms:y,maxVaryings:L,maxFragmentUniforms:C,vertexTextures:I,floatFragmentTextures:q,floatVertexTextures:I&&q,maxSamples:a?e.getParameter(36183):0}}function Ce(){function e(){h.value!==n&&(h.value=n,h.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function t(f,g,y,L){var C=f!==null?f.length:0,I=null;if(C!==0){if(I=h.value,L!==!0||I===null)for(L=y+4*C,g=g.matrixWorldInverse,c.getNormalMatrix(g),(I===null||I.length<L)&&(I=new Float32Array(L)),L=0;L!==C;++L,y+=4)l.copy(f[L]).applyMatrix4(g,c),l.normal.toArray(I,y),I[y+3]=l.constant;h.value=I,h.needsUpdate=!0}return i.numPlanes=C,I}var i=this,n=null,r=0,a=!1,s=!1,l=new Ae,c=new E,h={value:null,needsUpdate:!1};this.uniform=h,this.numIntersection=this.numPlanes=0,this.init=function(f,g,y){var L=f.length!==0||g||r!==0||a;return a=g,n=t(f,y,0),r=f.length,L},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(f,g,y,L,C,I){if(!a||f===null||f.length===0||s&&!y)s?t(null):e();else{var q=4*(y=s?0:r),de=C.clippingState||null;for(h.value=de,de=t(f,L,q,I),f=0;f!==q;++f)de[f]=n[f];C.clippingState=de,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}}}function Re(e){var t={};return{get:function(i){if(t[i]!==void 0)return t[i];switch(i){case"WEBGL_depth_texture":var n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n}}}function $(e,t,i){function n(l){var c=l.target;for(var h in(l=a.get(c)).index!==null&&t.remove(l.index),l.attributes)t.remove(l.attributes[h]);c.removeEventListener("dispose",n),a.delete(c),(h=s.get(l))&&(t.remove(h),s.delete(l)),i.memory.geometries--}function r(l){var c=[],h=l.index,f=l.attributes.position;if(h!==null){var g=h.array;h=h.version,f=0;for(var y=g.length;f<y;f+=3){var L=g[f+0],C=g[f+1],I=g[f+2];c.push(L,C,C,I,I,L)}}else for(g=f.array,h=f.version,f=0,y=g.length/3-1;f<y;f+=3)L=f+0,C=f+1,I=f+2,c.push(L,C,C,I,I,L);(c=new(65535<Lt(c)?at:Y)(c,1)).version=h,t.update(c,34963),(g=s.get(l))&&t.remove(g),s.set(l,c)}var a=new WeakMap,s=new WeakMap;return{get:function(l,c){var h=a.get(c);return h||(c.addEventListener("dispose",n),c.isBufferGeometry?h=c:c.isGeometry&&(c._bufferGeometry===void 0&&(c._bufferGeometry=new ze().setFromObject(l)),h=c._bufferGeometry),a.set(c,h),i.memory.geometries++,h)},update:function(l){var c=l.index,h=l.attributes;for(var f in c!==null&&t.update(c,34963),h)t.update(h[f],34962);for(f in l=l.morphAttributes){h=0;for(var g=(c=l[f]).length;h<g;h++)t.update(c[h],34962)}},getWireframeAttribute:function(l){var c=s.get(l);if(c){var h=l.index;h!==null&&c.version<h.version&&r(l)}else r(l);return s.get(l)}}}function At(e,t,i,n){var r,a,s;this.setMode=function(l){r=l},this.setIndex=function(l){a=l.type,s=l.bytesPerElement},this.render=function(l,c){e.drawElements(r,c,a,l*s),i.update(c,r)},this.renderInstances=function(l,c,h){if(n.isWebGL2)var f=e,g="drawElementsInstanced";else if(g="drawElementsInstancedANGLE",(f=t.get("ANGLE_instanced_arrays"))===null)return;f[g](r,h,a,c*s,l.maxInstancedCount),i.update(h,r,l.maxInstancedCount)}}function _t(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=i/3*r;break;case 5:case 6:t.triangles+=r*(i-2);break;case 1:t.lines+=i/2*r;break;case 3:t.lines+=r*(i-1);break;case 2:t.lines+=r*i;break;case 0:t.points+=r*i}}}}function et(e,t){return Math.abs(t[1])-Math.abs(e[1])}function qe(e){var t={},i=new Float32Array(8);return{update:function(n,r,a,s){var l=n.morphTargetInfluences,c=l.length;if((n=t[r.id])===void 0){n=[];for(var h=0;h<c;h++)n[h]=[h,0];t[r.id]=n}var f=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,h=0;h<c;h++){var g=n[h];g[1]!==0&&(f&&r.removeAttribute("morphTarget"+h),a&&r.removeAttribute("morphNormal"+h))}for(h=0;h<c;h++)(g=n[h])[0]=h,g[1]=l[h];for(n.sort(et),h=0;8>h;h++)(g=n[h])&&(l=g[0],c=g[1])?(f&&r.addAttribute("morphTarget"+h,f[l]),a&&r.addAttribute("morphNormal"+h,a[l]),i[h]=c):i[h]=0;s.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function Rt(e,t){var i={};return{update:function(n){var r=t.render.frame,a=n.geometry,s=e.get(n,a);return i[s.id]!==r&&(a.isGeometry&&s.updateFromObject(n),e.update(s),i[s.id]=r),s},dispose:function(){i={}}}}function ut(e,t,i,n,r,a,s,l,c,h){e=e!==void 0?e:[],F.call(this,e,t!==void 0?t:301,i,n,r,a,s!==void 0?s:1022,l,c,h),this.flipY=!1}function ni(e,t,i,n){F.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function xi(e,t,i,n){F.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.minFilter=this.magFilter=1003,this.wrapR=1001,this.flipY=this.generateMipmaps=!1}function Oi(e,t,i){var n=e[0];if(0>=n||0<n)return e;var r=t*i,a=Sp[r];if(a===void 0&&(a=new Float32Array(r),Sp[r]=a),t!==0)for(n.toArray(a,0),n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r);return a}function ci(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Fi(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function Tn(e,t){var i=Tp[t];i===void 0&&(i=new Int32Array(t),Tp[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function Jo(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Ni(e,t){var i=this.cache;t.x!==void 0?i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):ci(i,t)||(e.uniform2fv(this.addr,t),Fi(i,t))}function Ba(e,t){var i=this.cache;t.x!==void 0?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):t.r!==void 0?i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):ci(i,t)||(e.uniform3fv(this.addr,t),Fi(i,t))}function qr(e,t){var i=this.cache;t.x!==void 0?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):ci(i,t)||(e.uniform4fv(this.addr,t),Fi(i,t))}function ki(e,t){var i=this.cache,n=t.elements;n===void 0?ci(i,t)||(e.uniformMatrix2fv(this.addr,!1,t),Fi(i,t)):ci(i,n)||(Cp.set(n),e.uniformMatrix2fv(this.addr,!1,Cp),Fi(i,n))}function rl(e,t){var i=this.cache,n=t.elements;n===void 0?ci(i,t)||(e.uniformMatrix3fv(this.addr,!1,t),Fi(i,t)):ci(i,n)||(Pp.set(n),e.uniformMatrix3fv(this.addr,!1,Pp),Fi(i,n))}function bi(e,t){var i=this.cache,n=t.elements;n===void 0?ci(i,t)||(e.uniformMatrix4fv(this.addr,!1,t),Fi(i,t)):ci(i,n)||(Ap.set(n),e.uniformMatrix4fv(this.addr,!1,Ap),Fi(i,n))}function Xc(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(t||wp,r)}function Yn(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||$f,r)}function al(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||Kf,r)}function Bi(e,t,i){var n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(t||Mp,r)}function Qo(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Zr(e,t){var i=this.cache;ci(i,t)||(e.uniform2iv(this.addr,t),Fi(i,t))}function mn(e,t){var i=this.cache;ci(i,t)||(e.uniform3iv(this.addr,t),Fi(i,t))}function $o(e,t){var i=this.cache;ci(i,t)||(e.uniform4iv(this.addr,t),Fi(i,t))}function Yc(e,t){e.uniform1fv(this.addr,t)}function ol(e,t){e.uniform1iv(this.addr,t)}function qn(e,t){e.uniform2iv(this.addr,t)}function qc(e,t){e.uniform3iv(this.addr,t)}function Ko(e,t){e.uniform4iv(this.addr,t)}function sl(e,t){t=Oi(t,this.size,2),e.uniform2fv(this.addr,t)}function es(e,t){t=Oi(t,this.size,3),e.uniform3fv(this.addr,t)}function ts(e,t){t=Oi(t,this.size,4),e.uniform4fv(this.addr,t)}function is(e,t){t=Oi(t,this.size,4),e.uniformMatrix2fv(this.addr,!1,t)}function Jr(e,t){t=Oi(t,this.size,9),e.uniformMatrix3fv(this.addr,!1,t)}function Zc(e,t){t=Oi(t,this.size,16),e.uniformMatrix4fv(this.addr,!1,t)}function Jc(e,t,i){var n=t.length,r=Tn(i,n);for(e.uniform1iv(this.addr,r),e=0;e!==n;++e)i.safeSetTexture2D(t[e]||wp,r[e])}function Qc(e,t,i){var n=t.length,r=Tn(i,n);for(e.uniform1iv(this.addr,r),e=0;e!==n;++e)i.safeSetTextureCube(t[e]||Mp,r[e])}function Qr(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(n){switch(n){case 5126:return Jo;case 35664:return Ni;case 35665:return Ba;case 35666:return qr;case 35674:return ki;case 35675:return rl;case 35676:return bi;case 35678:case 36198:return Xc;case 35679:return al;case 35680:return Bi;case 36289:return Yn;case 5124:case 35670:return Qo;case 35667:case 35671:return Zr;case 35668:case 35672:return mn;case 35669:case 35673:return $o}}(t.type)}function ll(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(n){switch(n){case 5126:return Yc;case 35664:return sl;case 35665:return es;case 35666:return ts;case 35674:return is;case 35675:return Jr;case 35676:return Zc;case 35678:return Jc;case 35680:return Qc;case 5124:case 35670:return ol;case 35667:case 35671:return qn;case 35668:case 35672:return qc;case 35669:case 35673:return Ko}}(t.type)}function cl(e){this.id=e,this.seq=[],this.map={}}function Zn(e,t){this.seq=[],this.map={};for(var i=e.getProgramParameter(t,35718),n=0;n<i;++n){var r=e.getActiveUniform(t,n),a=e.getUniformLocation(t,r.name),s=this,l=r.name,c=l.length;for(Gh.lastIndex=0;;){var h=Gh.exec(l),f=Gh.lastIndex,g=h[1],y=h[3];if(h[2]==="]"&&(g|=0),y===void 0||y==="["&&f+2===c){l=s,r=y===void 0?new Qr(g,r,a):new ll(g,r,a),l.seq.push(r),l.map[r.id]=r;break}(y=s.map[g])===void 0&&(y=new cl(g),g=s,s=y,g.seq.push(s),g.map[s.id]=s),s=y}}}function $r(e,t,i){return t=e.createShader(t),e.shaderSource(t,i),e.compileShader(t),t}function x(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw Error("unsupported encoding: "+e)}}function O(e,t,i){var n=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(n&&r==="")return"";for(e=e.getShaderSource(t).split(`
`),t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+`
`+r+e.join(`
`)}function N(e,t){return"vec4 "+e+"( vec4 value ) { return "+(t=x(t))[0]+"ToLinear"+t[1]+"; }"}function D(e,t){return"vec4 "+e+"( vec4 value ) { return LinearTo"+(t=x(t))[0]+t[1]+"; }"}function b(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function te(e){return e!==""}function k(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function he(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ce(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(t,i){if((t=ti[i])===void 0)throw Error("Can not resolve #include <"+i+">");return ce(t)})}function we(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(t,i,n,r){for(t="",i=parseInt(i);i<parseInt(n);i++)t+=r.replace(/\[ i \]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return t})}function oe(e,t,i,n,r,a,s){var l=e.getContext(),c=n.defines,h=r.vertexShader,f=r.fragmentShader,g="SHADOWMAP_TYPE_BASIC";a.shadowMapType===1?g="SHADOWMAP_TYPE_PCF":a.shadowMapType===2?g="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===3&&(g="SHADOWMAP_TYPE_VSM");var y="ENVMAP_TYPE_CUBE",L="ENVMAP_MODE_REFLECTION",C="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:y="ENVMAP_TYPE_CUBE";break;case 306:case 307:y="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:y="ENVMAP_TYPE_EQUIREC";break;case 305:y="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:L="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:C="ENVMAP_BLENDING_MULTIPLY";break;case 1:C="ENVMAP_BLENDING_MIX";break;case 2:C="ENVMAP_BLENDING_ADD"}}var I,q,de=0<e.gammaFactor?e.gammaFactor:1,fe=s.isWebGL2?"":function(ie,Ne,Ve){return[(ie=ie||{}).derivatives||Ne.envMapCubeUV||Ne.bumpMap||Ne.tangentSpaceNormalMap||Ne.clearcoatNormalMap||Ne.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(ie.fragDepth||Ne.logarithmicDepthBuffer)&&Ve.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",ie.drawBuffers&&Ve.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(ie.shaderTextureLOD||Ne.envMap)&&Ve.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(te).join(`
`)}(n.extensions,a,t),me=function(ie){var Ne,Ve=[];for(Ne in ie){var bt=ie[Ne];bt!==!1&&Ve.push("#define "+Ne+" "+bt)}return Ve.join(`
`)}(c),xe=l.createProgram();return n.isRawShaderMaterial?(0<(c=[me].filter(te).join(`
`)).length&&(c+=`
`),0<(t=[fe,me].filter(te).join(`
`)).length&&(t+=`
`)):(c=["precision "+a.precision+" float;","precision "+a.precision+" int;",a.precision==="highp"?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,me,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+de,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+L:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(te).join(`
`),t=[fe,"precision "+a.precision+" float;","precision "+a.precision+" int;",a.precision==="highp"?"#define HIGH_PRECISION":"","#define SHADER_NAME "+r.name,me,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+de,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+y:"",a.envMap?"#define "+L:"",a.envMap?"#define "+C:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+g:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensions&&n.extensions.shaderTextureLOD||a.envMap)&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==0?"#define TONE_MAPPING":"",a.toneMapping!==0?ti.tonemapping_pars_fragment:"",a.toneMapping!==0?b("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?ti.encodings_pars_fragment:"",a.mapEncoding?N("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?N("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?N("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?N("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?D("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(te).join(`
`)),h=he(h=k(h=ce(h),a),a),f=he(f=k(f=ce(f),a),a),h=we(h),f=we(f),s.isWebGL2&&!n.isRawShaderMaterial&&(s=!1,g=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&h.match(g)!==null&&f.match(g)!==null&&(s=!0,h=h.replace(g,""),f=f.replace(g,"")),c=`#version 300 es

#define attribute in
#define varying out
#define texture2D texture
`+c,t=[`#version 300 es

#define varying in`,s?"":"out highp vec4 pc_fragColor;",s?"":"#define gl_FragColor pc_fragColor",`#define gl_FragDepthEXT gl_FragDepth
#define texture2D texture
#define textureCube texture
#define texture2DProj textureProj
#define texture2DLodEXT textureLod
#define texture2DProjLodEXT textureProjLod
#define textureCubeLodEXT textureLod
#define texture2DGradEXT textureGrad
#define texture2DProjGradEXT textureProjGrad
#define textureCubeGradEXT textureGrad`].join(`
`)+`
`+t),f=t+f,h=$r(l,35633,c+h),f=$r(l,35632,f),l.attachShader(xe,h),l.attachShader(xe,f),n.index0AttributeName!==void 0?l.bindAttribLocation(xe,0,n.index0AttributeName):a.morphTargets===!0&&l.bindAttribLocation(xe,0,"position"),l.linkProgram(xe),e.debug.checkShaderErrors&&(e=l.getProgramInfoLog(xe).trim(),a=l.getShaderInfoLog(h).trim(),s=l.getShaderInfoLog(f).trim(),y=g=!0,l.getProgramParameter(xe,35714)===!1?(g=!1,L=O(l,h,"vertex"),C=O(l,f,"fragment")):e!==""||a!==""&&s!==""||(y=!1),y&&(this.diagnostics={runnable:g,material:n,programLog:e,vertexShader:{log:a,prefix:c},fragmentShader:{log:s,prefix:t}})),l.deleteShader(h),l.deleteShader(f),this.getUniforms=function(){return I===void 0&&(I=new Zn(l,xe)),I},this.getAttributes=function(){if(q===void 0){for(var ie={},Ne=l.getProgramParameter(xe,35721),Ve=0;Ve<Ne;Ve++){var bt=l.getActiveAttrib(xe,Ve).name;ie[bt]=l.getAttribLocation(xe,bt)}q=ie}return q},this.destroy=function(){l.deleteProgram(xe),this.program=void 0},this.name=r.name,this.id=em++,this.code=i,this.usedTimes=1,this.program=xe,this.vertexShader=h,this.fragmentShader=f,this}function Xe(e,t,i){function n(l,c){if(l)l.isTexture?h=l.encoding:l.isWebGLRenderTarget&&(h=l.texture.encoding);else var h=3e3;return h===3e3&&c&&(h=3007),h}var r=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap tangentSpaceNormalMap clearcoatNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors vertexTangents fog useFog fogExp2 flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering sheen".split(" ");this.getParameters=function(l,c,h,f,g,y,L){var C=a[l.type];if(L.isSkinnedMesh){var I=L.skeleton.bones;if(i.floatVertexTextures)I=1024;else{var q=Math.min(Math.floor((i.maxVertexUniforms-20)/4),I.length);I=q<I.length?0:q}}else I=0;q=i.precision,l.precision!==null&&(q=i.getMaxPrecision(l.precision),l.precision);var de=e.getRenderTarget();return{shaderID:C,precision:q,supportsVertexTextures:i.vertexTextures,outputEncoding:n(de?de.texture:null,e.gammaOutput),map:!!l.map,mapEncoding:n(l.map,e.gammaInput),matcap:!!l.matcap,matcapEncoding:n(l.matcap,e.gammaInput),envMap:!!l.envMap,envMapMode:l.envMap&&l.envMap.mapping,envMapEncoding:n(l.envMap,e.gammaInput),envMapCubeUV:!!l.envMap&&(l.envMap.mapping===306||l.envMap.mapping===307),lightMap:!!l.lightMap,aoMap:!!l.aoMap,emissiveMap:!!l.emissiveMap,emissiveMapEncoding:n(l.emissiveMap,e.gammaInput),bumpMap:!!l.bumpMap,normalMap:!!l.normalMap,objectSpaceNormalMap:l.normalMapType===1,tangentSpaceNormalMap:l.normalMapType===0,clearcoatNormalMap:!!l.clearcoatNormalMap,displacementMap:!!l.displacementMap,roughnessMap:!!l.roughnessMap,metalnessMap:!!l.metalnessMap,specularMap:!!l.specularMap,alphaMap:!!l.alphaMap,gradientMap:!!l.gradientMap,sheen:!!l.sheen,combine:l.combine,vertexTangents:l.normalMap&&l.vertexTangents,vertexColors:l.vertexColors,vertexUvs:!!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatNormalMap),fog:!!f,useFog:l.fog,fogExp2:f&&f.isFogExp2,flatShading:l.flatShading,sizeAttenuation:l.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:l.skinning&&0<I,maxBones:I,useVertexTexture:i.floatVertexTextures,morphTargets:l.morphTargets,morphNormals:l.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:c.directional.length,numPointLights:c.point.length,numSpotLights:c.spot.length,numRectAreaLights:c.rectArea.length,numHemiLights:c.hemi.length,numDirLightShadows:c.directionalShadowMap.length,numPointLightShadows:c.pointShadowMap.length,numSpotLightShadows:c.spotShadowMap.length,numClippingPlanes:g,numClipIntersection:y,dithering:l.dithering,shadowMapEnabled:e.shadowMap.enabled&&L.receiveShadow&&0<h.length,shadowMapType:e.shadowMap.type,toneMapping:l.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:l.premultipliedAlpha,alphaTest:l.alphaTest,doubleSided:l.side===2,flipSided:l.side===1,depthPacking:l.depthPacking!==void 0&&l.depthPacking}},this.getProgramCode=function(l,c){var h=[];if(c.shaderID?h.push(c.shaderID):(h.push(l.fragmentShader),h.push(l.vertexShader)),l.defines!==void 0)for(var f in l.defines)h.push(f),h.push(l.defines[f]);for(f=0;f<s.length;f++)h.push(c[s[f]]);return h.push(l.onBeforeCompile.toString()),h.push(e.gammaOutput),h.push(e.gammaFactor),h.join()},this.acquireProgram=function(l,c,h,f){for(var g,y=0,L=r.length;y<L;y++){var C=r[y];if(C.code===f){++(g=C).usedTimes;break}}return g===void 0&&(g=new oe(e,t,f,l,c,h,i),r.push(g)),g},this.releaseProgram=function(l){if(--l.usedTimes==0){var c=r.indexOf(l);r[c]=r[r.length-1],r.pop(),l.destroy()}},this.programs=r}function Je(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return i===void 0&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function We(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function lt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ke(){function e(s,l,c,h,f,g){var y=t[i];return y===void 0?(y={id:s.id,object:s,geometry:l,material:c,program:c.program||a,groupOrder:h,renderOrder:s.renderOrder,z:f,group:g},t[i]=y):(y.id=s.id,y.object=s,y.geometry=l,y.material=c,y.program=c.program||a,y.groupOrder=h,y.renderOrder=s.renderOrder,y.z=f,y.group=g),i++,y}var t=[],i=0,n=[],r=[],a={id:-1};return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(s,l,c,h,f,g){s=e(s,l,c,h,f,g),(c.transparent===!0?r:n).push(s)},unshift:function(s,l,c,h,f,g){s=e(s,l,c,h,f,g),(c.transparent===!0?r:n).unshift(s)},sort:function(){1<n.length&&n.sort(We),1<r.length&&r.sort(lt)}}}function wt(){function e(i){(i=i.target).removeEventListener("dispose",e),t.delete(i)}var t=new WeakMap;return{get:function(i,n){var r=t.get(i);if(r===void 0){var a=new Ke;t.set(i,new WeakMap),t.get(i).set(n,a),i.addEventListener("dispose",e)}else(a=r.get(n))===void 0&&(a=new Ke,r.set(n,a));return a},dispose:function(){t=new WeakMap}}}function kt(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];switch(t.type){case"DirectionalLight":var i={direction:new u,color:new S,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new m};break;case"SpotLight":i={position:new u,direction:new u,color:new S,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new m};break;case"PointLight":i={position:new u,color:new S,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new m,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new u,skyColor:new S,groundColor:new S};break;case"RectAreaLight":i={color:new S,position:new u,halfWidth:new u,halfHeight:new u}}return e[t.id]=i}}}function ai(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Ot(){for(var e=new kt,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},i=0;9>i;i++)t.probe.push(new u);var n=new u,r=new G,a=new G;return{setup:function(s,l,c){for(var h=0,f=0,g=0,y=0;9>y;y++)t.probe[y].set(0,0,0);var L=l=0,C=0,I=0,q=0,de=0,fe=0,me=0;c=c.matrixWorldInverse,s.sort(ai),y=0;for(var xe=s.length;y<xe;y++){var ie=s[y],Ne=ie.color,Ve=ie.intensity,bt=ie.distance,Ue=ie.shadow&&ie.shadow.map?ie.shadow.map.texture:null;if(ie.isAmbientLight)h+=Ne.r*Ve,f+=Ne.g*Ve,g+=Ne.b*Ve;else if(ie.isLightProbe)for(Ue=0;9>Ue;Ue++)t.probe[Ue].addScaledVector(ie.sh.coefficients[Ue],Ve);else if(ie.isDirectionalLight){var Me=e.get(ie);Me.color.copy(ie.color).multiplyScalar(ie.intensity),Me.direction.setFromMatrixPosition(ie.matrixWorld),n.setFromMatrixPosition(ie.target.matrixWorld),Me.direction.sub(n),Me.direction.transformDirection(c),(Me.shadow=ie.castShadow)&&(Ve=ie.shadow,Me.shadowBias=Ve.bias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,t.directionalShadowMap[l]=Ue,t.directionalShadowMatrix[l]=ie.shadow.matrix,de++),t.directional[l]=Me,l++}else ie.isSpotLight?((Me=e.get(ie)).position.setFromMatrixPosition(ie.matrixWorld),Me.position.applyMatrix4(c),Me.color.copy(Ne).multiplyScalar(Ve),Me.distance=bt,Me.direction.setFromMatrixPosition(ie.matrixWorld),n.setFromMatrixPosition(ie.target.matrixWorld),Me.direction.sub(n),Me.direction.transformDirection(c),Me.coneCos=Math.cos(ie.angle),Me.penumbraCos=Math.cos(ie.angle*(1-ie.penumbra)),Me.decay=ie.decay,(Me.shadow=ie.castShadow)&&(Ve=ie.shadow,Me.shadowBias=Ve.bias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,t.spotShadowMap[C]=Ue,t.spotShadowMatrix[C]=ie.shadow.matrix,me++),t.spot[C]=Me,C++):ie.isRectAreaLight?((Me=e.get(ie)).color.copy(Ne).multiplyScalar(Ve),Me.position.setFromMatrixPosition(ie.matrixWorld),Me.position.applyMatrix4(c),a.identity(),r.copy(ie.matrixWorld),r.premultiply(c),a.extractRotation(r),Me.halfWidth.set(.5*ie.width,0,0),Me.halfHeight.set(0,.5*ie.height,0),Me.halfWidth.applyMatrix4(a),Me.halfHeight.applyMatrix4(a),t.rectArea[I]=Me,I++):ie.isPointLight?((Me=e.get(ie)).position.setFromMatrixPosition(ie.matrixWorld),Me.position.applyMatrix4(c),Me.color.copy(ie.color).multiplyScalar(ie.intensity),Me.distance=ie.distance,Me.decay=ie.decay,(Me.shadow=ie.castShadow)&&(Ve=ie.shadow,Me.shadowBias=Ve.bias,Me.shadowRadius=Ve.radius,Me.shadowMapSize=Ve.mapSize,Me.shadowCameraNear=Ve.camera.near,Me.shadowCameraFar=Ve.camera.far,t.pointShadowMap[L]=Ue,t.pointShadowMatrix[L]=ie.shadow.matrix,fe++),t.point[L]=Me,L++):ie.isHemisphereLight&&((Me=e.get(ie)).direction.setFromMatrixPosition(ie.matrixWorld),Me.direction.transformDirection(c),Me.direction.normalize(),Me.skyColor.copy(ie.color).multiplyScalar(Ve),Me.groundColor.copy(ie.groundColor).multiplyScalar(Ve),t.hemi[q]=Me,q++)}t.ambient[0]=h,t.ambient[1]=f,t.ambient[2]=g,(s=t.hash).directionalLength===l&&s.pointLength===L&&s.spotLength===C&&s.rectAreaLength===I&&s.hemiLength===q&&s.numDirectionalShadows===de&&s.numPointShadows===fe&&s.numSpotShadows===me||(t.directional.length=l,t.spot.length=C,t.rectArea.length=I,t.point.length=L,t.hemi.length=q,t.directionalShadowMap.length=de,t.pointShadowMap.length=fe,t.spotShadowMap.length=me,t.directionalShadowMatrix.length=de,t.pointShadowMatrix.length=fe,t.spotShadowMatrix.length=me,s.directionalLength=l,s.pointLength=L,s.spotLength=C,s.rectAreaLength=I,s.hemiLength=q,s.numDirectionalShadows=de,s.numPointShadows=fe,s.numSpotShadows=me,t.version=tm++)},state:t}}function xt(){var e=new Ot,t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:e},setupLights:function(n){e.setup(t,i,n)},pushLight:function(n){t.push(n)},pushShadow:function(n){i.push(n)}}}function Be(){function e(i){(i=i.target).removeEventListener("dispose",e),t.delete(i)}var t=new WeakMap;return{get:function(i,n){if(t.has(i)===!1){var r=new xt;t.set(i,new WeakMap),t.get(i).set(n,r),i.addEventListener("dispose",e)}else t.get(i).has(n)===!1?(r=new xt,t.get(i).set(n,r)):r=t.get(i).get(n);return r},dispose:function(){t=new WeakMap}}}function Gt(e){M.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function Vt(e){M.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new u,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function Ee(e,t,i){function n(ie,Ne,Ve,bt,Ue,Me){var je=ie.geometry,dt=h,mt=ie.customDepthMaterial;return Ve.isPointLight&&(dt=f,mt=ie.customDistanceMaterial),mt?dt=mt:(mt=!1,Ne.morphTargets&&(je&&je.isBufferGeometry?mt=je.morphAttributes&&je.morphAttributes.position&&0<je.morphAttributes.position.length:je&&je.isGeometry&&(mt=je.morphTargets&&0<je.morphTargets.length)),ie.isSkinnedMesh&&Ne.skinning,je=0,mt&&(je|=1),(ie=ie.isSkinnedMesh&&Ne.skinning)&&(je|=2),dt=dt[je]),e.localClippingEnabled&&Ne.clipShadows===!0&&Ne.clippingPlanes.length!==0&&(je=dt.uuid,mt=Ne.uuid,(ie=g[je])===void 0&&(ie={},g[je]=ie),(je=ie[mt])===void 0&&(je=dt.clone(),ie[mt]=je),dt=je),dt.visible=Ne.visible,dt.wireframe=Ne.wireframe,dt.side=Me===3?Ne.shadowSide!=null?Ne.shadowSide:Ne.side:Ne.shadowSide!=null?Ne.shadowSide:y[Ne.side],dt.clipShadows=Ne.clipShadows,dt.clippingPlanes=Ne.clippingPlanes,dt.clipIntersection=Ne.clipIntersection,dt.wireframeLinewidth=Ne.wireframeLinewidth,dt.linewidth=Ne.linewidth,Ve.isPointLight&&dt.isMeshDistanceMaterial&&(dt.referencePosition.setFromMatrixPosition(Ve.matrixWorld),dt.nearDistance=bt,dt.farDistance=Ue),dt}function r(ie,Ne,Ve,bt,Ue){if(ie.visible!==!1){if(ie.layers.test(Ne.layers)&&(ie.isMesh||ie.isLine||ie.isPoints)&&(ie.castShadow||ie.receiveShadow&&Ue===3)&&(!ie.frustumCulled||a.intersectsObject(ie))){ie.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,ie.matrixWorld);var Me=t.update(ie),je=ie.material;if(Array.isArray(je))for(var dt=Me.groups,mt=0,Et=dt.length;mt<Et;mt++){var V=dt[mt],J=je[V.materialIndex];J&&J.visible&&(J=n(ie,J,bt,Ve.near,Ve.far,Ue),e.renderBufferDirect(Ve,null,Me,J,ie,V))}else je.visible&&(J=n(ie,je,bt,Ve.near,Ve.far,Ue),e.renderBufferDirect(Ve,null,Me,J,ie,null))}for(Me=0,je=(ie=ie.children).length;Me<je;Me++)r(ie[Me],Ne,Ve,bt,Ue)}}var a=new rt,s=new m,l=new m,c=new R,h=Array(4),f=Array(4),g={},y={0:1,1:0,2:2},L=new Ge({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:.125},uniforms:{shadow_pass:{value:null},resolution:{value:new m},radius:{value:4}},vertexShader:`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragmentShader:`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
  
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = decodeHalfRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = pow( squared_mean - mean * mean, 0.5 );
  gl_FragColor = encodeHalfRGBA( vec2( mean, std_dev ) );
}`}),C=L.clone();C.defines.HORIZONAL_PASS=1;var I=new ze;I.addAttribute("position",new w(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var q=new st(I,L);for(I=0;I!==4;++I){var de=(1&I)!=0,fe=(2&I)!=0,me=new Gt({depthPacking:3201,morphTargets:de,skinning:fe});h[I]=me,de=new Vt({morphTargets:de,skinning:fe}),f[I]=de}var xe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(ie,Ne,Ve){if(xe.enabled!==!1&&(xe.autoUpdate!==!1||xe.needsUpdate!==!1)&&ie.length!==0){var bt=e.getRenderTarget(),Ue=e.getActiveCubeFace(),Me=e.getActiveMipmapLevel(),je=e.state;je.setBlending(0),je.buffers.color.setClear(1,1,1,1),je.buffers.depth.setTest(!0),je.setScissorTest(!1);for(var dt=0,mt=ie.length;dt<mt;dt++){var Et=ie[dt],V=Et.shadow;if(V!==void 0){s.copy(V.mapSize);var J=V.getFrameExtents();s.multiply(J),l.copy(V.mapSize),(s.x>i||s.y>i)&&(s.x>i&&(l.x=Math.floor(i/J.x),s.x=l.x*J.x,V.mapSize.x=l.x),s.y>i&&(l.y=Math.floor(i/J.y),s.y=l.y*J.y,V.mapSize.y=l.y)),V.map!==null||V.isPointLightShadow||this.type!==3||(J={minFilter:1006,magFilter:1006,format:1023},V.map=new A(s.x,s.y,J),V.map.texture.name=Et.name+".shadowMap",V.mapPass=new A(s.x,s.y,J),V.camera.updateProjectionMatrix()),V.map===null&&(J={minFilter:1003,magFilter:1003,format:1023},V.map=new A(s.x,s.y,J),V.map.texture.name=Et.name+".shadowMap",V.camera.updateProjectionMatrix()),e.setRenderTarget(V.map),e.clear(),J=V.getViewportCount();for(var De=0;De<J;De++){var tt=V.getViewport(De);c.set(l.x*tt.x,l.y*tt.y,l.x*tt.z,l.y*tt.w),je.viewport(c),V.updateMatrices(Et,Ve,De),a=V.getFrustum(),r(Ne,Ve,V.camera,Et,this.type)}V.isPointLightShadow||this.type!==3||(Et=V,V=Ve,J=t.update(q),L.uniforms.shadow_pass.value=Et.map.texture,L.uniforms.resolution.value=Et.mapSize,L.uniforms.radius.value=Et.radius,e.setRenderTarget(Et.mapPass),e.clear(),e.renderBufferDirect(V,null,J,L,q,null),C.uniforms.shadow_pass.value=Et.mapPass.texture,C.uniforms.resolution.value=Et.mapSize,C.uniforms.radius.value=Et.radius,e.setRenderTarget(Et.map),e.clear(),e.renderBufferDirect(V,null,J,C,q,null))}}xe.needsUpdate=!1,e.setRenderTarget(bt,Ue,Me)}}}function zt(e,t,i,n){function r(ae,St,Xt){var vi=new Uint8Array(4),Ft=e.createTexture();for(e.bindTexture(ae,Ft),e.texParameteri(ae,10241,9728),e.texParameteri(ae,10240,9728),ae=0;ae<Xt;ae++)e.texImage2D(St+ae,0,6408,1,1,0,6408,5121,vi);return Ft}function a(ae,St){de[ae]=1,fe[ae]===0&&(e.enableVertexAttribArray(ae),fe[ae]=1),me[ae]!==St&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ae,St),me[ae]=St)}function s(ae){xe[ae]!==!0&&(e.enable(ae),xe[ae]=!0)}function l(ae){xe[ae]!==!1&&(e.disable(ae),xe[ae]=!1)}function c(ae,St,Xt,vi,Ft,jt,Ct,Bt){if(ae===0)Ve&&(l(3042),Ve=!1);else if(Ve||(s(3042),Ve=!0),ae!==5){if(ae!==bt||Bt!==V){if(Ue===100&&dt===100||(e.blendEquation(32774),dt=Ue=100),Bt)switch(ae){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770)}else switch(ae){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768)}Et=mt=je=Me=null,bt=ae,V=Bt}}else Ft=Ft||St,jt=jt||Xt,Ct=Ct||vi,St===Ue&&Ft===dt||(e.blendEquationSeparate(i.convert(St),i.convert(Ft)),Ue=St,dt=Ft),Xt===Me&&vi===je&&jt===mt&&Ct===Et||(e.blendFuncSeparate(i.convert(Xt),i.convert(vi),i.convert(jt),i.convert(Ct)),Me=Xt,je=vi,mt=jt,Et=Ct),bt=ae,V=null}function h(ae){J!==ae&&(ae?e.frontFace(2304):e.frontFace(2305),J=ae)}function f(ae){ae!==0?(s(2884),ae!==De&&(ae===1?e.cullFace(1029):ae===2?e.cullFace(1028):e.cullFace(1032))):l(2884),De=ae}function g(ae,St,Xt){ae?(s(32823),(ft!==St||gt!==Xt)&&(e.polygonOffset(St,Xt),ft=St,gt=Xt)):l(32823)}function y(ae){ae===void 0&&(ae=33984+ri-1),Nt!==ae&&(e.activeTexture(ae),Nt=ae)}var L=new function(){var ae=!1,St=new R,Xt=null,vi=new R(0,0,0,0);return{setMask:function(Ft){Xt===Ft||ae||(e.colorMask(Ft,Ft,Ft,Ft),Xt=Ft)},setLocked:function(Ft){ae=Ft},setClear:function(Ft,jt,Ct,Bt,Ti){Ti===!0&&(Ft*=Bt,jt*=Bt,Ct*=Bt),St.set(Ft,jt,Ct,Bt),vi.equals(St)===!1&&(e.clearColor(Ft,jt,Ct,Bt),vi.copy(St))},reset:function(){ae=!1,Xt=null,vi.set(-1,0,0,0)}}},C=new function(){var ae=!1,St=null,Xt=null,vi=null;return{setTest:function(Ft){Ft?s(2929):l(2929)},setMask:function(Ft){St===Ft||ae||(e.depthMask(Ft),St=Ft)},setFunc:function(Ft){if(Xt!==Ft){if(Ft)switch(Ft){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);Xt=Ft}},setLocked:function(Ft){ae=Ft},setClear:function(Ft){vi!==Ft&&(e.clearDepth(Ft),vi=Ft)},reset:function(){ae=!1,vi=Xt=St=null}}},I=new function(){var ae=!1,St=null,Xt=null,vi=null,Ft=null,jt=null,Ct=null,Bt=null,Ti=null;return{setTest:function(Wt){ae||(Wt?s(2960):l(2960))},setMask:function(Wt){St===Wt||ae||(e.stencilMask(Wt),St=Wt)},setFunc:function(Wt,ei,yi){Xt===Wt&&vi===ei&&Ft===yi||(e.stencilFunc(Wt,ei,yi),Xt=Wt,vi=ei,Ft=yi)},setOp:function(Wt,ei,yi){jt===Wt&&Ct===ei&&Bt===yi||(e.stencilOp(Wt,ei,yi),jt=Wt,Ct=ei,Bt=yi)},setLocked:function(Wt){ae=Wt},setClear:function(Wt){Ti!==Wt&&(e.clearStencil(Wt),Ti=Wt)},reset:function(){ae=!1,Ti=Bt=Ct=jt=Ft=vi=Xt=St=null}}},q=e.getParameter(34921),de=new Uint8Array(q),fe=new Uint8Array(q),me=new Uint8Array(q),xe={},ie=null,Ne=null,Ve=null,bt=null,Ue=null,Me=null,je=null,dt=null,mt=null,Et=null,V=!1,J=null,De=null,tt=null,ft=null,gt=null,ri=e.getParameter(35661),Zt=!1;q=0,(q=e.getParameter(7938)).indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL ([0-9])/.exec(q)[1]),Zt=1<=q):q.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES ([0-9])/.exec(q)[1]),Zt=2<=q);var Nt=null,qt={},_i=new R,Gi=new R,ot={};return ot[3553]=r(3553,3553,1),ot[34067]=r(34067,34069,6),L.setClear(0,0,0,1),C.setClear(1),I.setClear(0),s(2929),C.setFunc(3),h(!1),f(1),s(2884),c(0),{buffers:{color:L,depth:C,stencil:I},initAttributes:function(){for(var ae=0,St=de.length;ae<St;ae++)de[ae]=0},enableAttribute:function(ae){a(ae,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var ae=0,St=fe.length;ae!==St;++ae)fe[ae]!==de[ae]&&(e.disableVertexAttribArray(ae),fe[ae]=0)},enable:s,disable:l,getCompressedTextureFormats:function(){if(ie===null&&(ie=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var ae=e.getParameter(34467),St=0;St<ae.length;St++)ie.push(ae[St]);return ie},useProgram:function(ae){return Ne!==ae&&(e.useProgram(ae),Ne=ae,!0)},setBlending:c,setMaterial:function(ae,St){ae.side===2?l(2884):s(2884);var Xt=ae.side===1;St&&(Xt=!Xt),h(Xt),ae.blending===1&&ae.transparent===!1?c(0):c(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.premultipliedAlpha),C.setFunc(ae.depthFunc),C.setTest(ae.depthTest),C.setMask(ae.depthWrite),L.setMask(ae.colorWrite),St=ae.stencilWrite,I.setTest(St),St&&(I.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilMask),I.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),g(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits)},setFlipSided:h,setCullFace:f,setLineWidth:function(ae){ae!==tt&&(Zt&&e.lineWidth(ae),tt=ae)},setPolygonOffset:g,setScissorTest:function(ae){ae?s(3089):l(3089)},activeTexture:y,bindTexture:function(ae,St){Nt===null&&y();var Xt=qt[Nt];Xt===void 0&&(Xt={type:void 0,texture:void 0},qt[Nt]=Xt),Xt.type===ae&&Xt.texture===St||(e.bindTexture(ae,St||ot[ae]),Xt.type=ae,Xt.texture=St)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch{}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch{}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch{}},scissor:function(ae){_i.equals(ae)===!1&&(e.scissor(ae.x,ae.y,ae.z,ae.w),_i.copy(ae))},viewport:function(ae){Gi.equals(ae)===!1&&(e.viewport(ae.x,ae.y,ae.z,ae.w),Gi.copy(ae))},reset:function(){for(var ae=0;ae<fe.length;ae++)fe[ae]===1&&(e.disableVertexAttribArray(ae),fe[ae]=0);xe={},Nt=ie=null,qt={},De=J=bt=Ne=null,L.reset(),C.reset(),I.reset()}}}function Kt(e,t,i,n,r,a,s){function l(V,J){return je?new OffscreenCanvas(V,J):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function c(V,J,De,tt){var ft=1;return(V.width>tt||V.height>tt)&&(ft=tt/Math.max(V.width,V.height)),(1>ft||J===!0)&&(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap)?(J=(tt=J?Ht.floorPowerOfTwo:Math.floor)(ft*V.width),ft=tt(ft*V.height),Ue===void 0&&(Ue=l(J,ft)),(De=De?l(J,ft):Ue).width=J,De.height=ft,De.getContext("2d").drawImage(V,0,0,J,ft),De):V}function h(V){return Ht.isPowerOfTwo(V.width)&&Ht.isPowerOfTwo(V.height)}function f(V,J){return V.generateMipmaps&&J&&V.minFilter!==1003&&V.minFilter!==1006}function g(V,J,De,tt){e.generateMipmap(V),n.get(J).__maxMipLevel=Math.log(Math.max(De,tt))*Math.LOG2E}function y(V,J){if(!r.isWebGL2)return V;var De=V;return V===6403&&(J===5126&&(De=33326),J===5131&&(De=33325),J===5121&&(De=33321)),V===6407&&(J===5126&&(De=34837),J===5131&&(De=34843),J===5121&&(De=32849)),V===6408&&(J===5126&&(De=34836),J===5131&&(De=34842),J===5121&&(De=32856)),(De===33325||De===33326||De===34842||De===34836)&&t.get("EXT_color_buffer_float"),De}function L(V){return V===1003||V===1004||V===1005?9728:9729}function C(V){(V=V.target).removeEventListener("dispose",C);var J=n.get(V);J.__webglInit!==void 0&&(e.deleteTexture(J.__webglTexture),n.remove(V)),V.isVideoTexture&&Me.delete(V),s.memory.textures--}function I(V){(V=V.target).removeEventListener("dispose",I);var J=n.get(V),De=n.get(V.texture);if(V){if(De.__webglTexture!==void 0&&e.deleteTexture(De.__webglTexture),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLRenderTargetCube)for(De=0;6>De;De++)e.deleteFramebuffer(J.__webglFramebuffer[De]),J.__webglDepthbuffer&&e.deleteRenderbuffer(J.__webglDepthbuffer[De]);else e.deleteFramebuffer(J.__webglFramebuffer),J.__webglDepthbuffer&&e.deleteRenderbuffer(J.__webglDepthbuffer);n.remove(V.texture),n.remove(V)}s.memory.textures--}function q(V,J){var De=n.get(V);if(V.isVideoTexture){var tt=s.render.frame;Me.get(V)!==tt&&(Me.set(V,tt),V.update())}if(0<V.version&&De.__version!==V.version&&(tt=V.image)!==void 0){if(tt.complete!==!1)return void ie(De,V,J)}i.activeTexture(33984+J),i.bindTexture(3553,De.__webglTexture)}function de(V,J){if(V.image.length===6){var De=n.get(V);if(0<V.version&&De.__version!==V.version){xe(De,V),i.activeTexture(33984+J),i.bindTexture(34067,De.__webglTexture),e.pixelStorei(37440,V.flipY);var tt=V&&V.isCompressedTexture;J=V.image[0]&&V.image[0].isDataTexture;for(var ft=[],gt=0;6>gt;gt++)ft[gt]=tt||J?J?V.image[gt].image:V.image[gt]:c(V.image[gt],!1,!0,r.maxCubemapSize);var ri=ft[0],Zt=h(ri)||r.isWebGL2,Nt=a.convert(V.format),qt=a.convert(V.type),_i=y(Nt,qt);if(me(34067,V,Zt),tt){for(gt=0;6>gt;gt++){var Gi=ft[gt].mipmaps;for(tt=0;tt<Gi.length;tt++){var ot=Gi[tt];V.format!==1023&&V.format!==1022?-1<i.getCompressedTextureFormats().indexOf(Nt)&&i.compressedTexImage2D(34069+gt,tt,_i,ot.width,ot.height,0,ot.data):i.texImage2D(34069+gt,tt,_i,ot.width,ot.height,0,Nt,qt,ot.data)}}De.__maxMipLevel=Gi.length-1}else{for(Gi=V.mipmaps,gt=0;6>gt;gt++)if(J)for(i.texImage2D(34069+gt,0,_i,ft[gt].width,ft[gt].height,0,Nt,qt,ft[gt].data),tt=0;tt<Gi.length;tt++)ot=(ot=Gi[tt]).image[gt].image,i.texImage2D(34069+gt,tt+1,_i,ot.width,ot.height,0,Nt,qt,ot.data);else for(i.texImage2D(34069+gt,0,_i,Nt,qt,ft[gt]),tt=0;tt<Gi.length;tt++)ot=Gi[tt],i.texImage2D(34069+gt,tt+1,_i,Nt,qt,ot.image[gt]);De.__maxMipLevel=Gi.length}f(V,Zt)&&g(34067,V,ri.width,ri.height),De.__version=V.version,V.onUpdate&&V.onUpdate(V)}else i.activeTexture(33984+J),i.bindTexture(34067,De.__webglTexture)}}function fe(V,J){i.activeTexture(33984+J),i.bindTexture(34067,n.get(V).__webglTexture)}function me(V,J,De){De?(e.texParameteri(V,10242,a.convert(J.wrapS)),e.texParameteri(V,10243,a.convert(J.wrapT)),V!==32879&&V!==35866||e.texParameteri(V,32882,a.convert(J.wrapR)),e.texParameteri(V,10240,a.convert(J.magFilter)),e.texParameteri(V,10241,a.convert(J.minFilter))):(e.texParameteri(V,10242,33071),e.texParameteri(V,10243,33071),V!==32879&&V!==35866||e.texParameteri(V,32882,33071),J.wrapS===1001&&J.wrapT,e.texParameteri(V,10240,L(J.magFilter)),e.texParameteri(V,10241,L(J.minFilter)),J.minFilter!==1003&&J.minFilter),!(De=t.get("EXT_texture_filter_anisotropic"))||J.type===1015&&t.get("OES_texture_float_linear")===null||J.type===1016&&(r.isWebGL2||t.get("OES_texture_half_float_linear"))===null||!(1<J.anisotropy||n.get(J).__currentAnisotropy)||(e.texParameterf(V,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy)}function xe(V,J){V.__webglInit===void 0&&(V.__webglInit=!0,J.addEventListener("dispose",C),V.__webglTexture=e.createTexture(),s.memory.textures++)}function ie(V,J,De){var tt=3553;J.isDataTexture2DArray&&(tt=35866),J.isDataTexture3D&&(tt=32879),xe(V,J),i.activeTexture(33984+De),i.bindTexture(tt,V.__webglTexture),e.pixelStorei(37440,J.flipY),e.pixelStorei(37441,J.premultiplyAlpha),e.pixelStorei(3317,J.unpackAlignment),De=(De=!r.isWebGL2&&(J.wrapS!==1001||J.wrapT!==1001||J.minFilter!==1003&&J.minFilter!==1006))&&h(J.image)===!1;var ft=h(De=c(J.image,De,!1,r.maxTextureSize))||r.isWebGL2,gt=a.convert(J.format),ri=a.convert(J.type),Zt=y(gt,ri);me(tt,J,ft);var Nt=J.mipmaps;if(J.isDepthTexture){if(Zt=6402,J.type===1015){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");Zt=36012}else r.isWebGL2&&(Zt=33189);J.format===1026&&Zt===6402&&J.type!==1012&&J.type!==1014&&(J.type=1012,ri=a.convert(J.type)),J.format===1027&&(Zt=34041,J.type!==1020&&(J.type=1020,ri=a.convert(J.type))),i.texImage2D(3553,0,Zt,De.width,De.height,0,gt,ri,null)}else if(J.isDataTexture)if(0<Nt.length&&ft){for(var qt=0,_i=Nt.length;qt<_i;qt++)tt=Nt[qt],i.texImage2D(3553,qt,Zt,tt.width,tt.height,0,gt,ri,tt.data);J.generateMipmaps=!1,V.__maxMipLevel=Nt.length-1}else i.texImage2D(3553,0,Zt,De.width,De.height,0,gt,ri,De.data),V.__maxMipLevel=0;else if(J.isCompressedTexture){for(qt=0,_i=Nt.length;qt<_i;qt++)tt=Nt[qt],J.format!==1023&&J.format!==1022?-1<i.getCompressedTextureFormats().indexOf(gt)&&i.compressedTexImage2D(3553,qt,Zt,tt.width,tt.height,0,tt.data):i.texImage2D(3553,qt,Zt,tt.width,tt.height,0,gt,ri,tt.data);V.__maxMipLevel=Nt.length-1}else if(J.isDataTexture2DArray)i.texImage3D(35866,0,Zt,De.width,De.height,De.depth,0,gt,ri,De.data),V.__maxMipLevel=0;else if(J.isDataTexture3D)i.texImage3D(32879,0,Zt,De.width,De.height,De.depth,0,gt,ri,De.data),V.__maxMipLevel=0;else if(0<Nt.length&&ft){for(qt=0,_i=Nt.length;qt<_i;qt++)tt=Nt[qt],i.texImage2D(3553,qt,Zt,gt,ri,tt);J.generateMipmaps=!1,V.__maxMipLevel=Nt.length-1}else i.texImage2D(3553,0,Zt,gt,ri,De),V.__maxMipLevel=0;f(J,ft)&&g(3553,J,De.width,De.height),V.__version=J.version,J.onUpdate&&J.onUpdate(J)}function Ne(V,J,De,tt){var ft=a.convert(J.texture.format),gt=a.convert(J.texture.type),ri=y(ft,gt);i.texImage2D(tt,0,ri,J.width,J.height,0,ft,gt,null),e.bindFramebuffer(36160,V),e.framebufferTexture2D(36160,De,tt,n.get(J.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ve(V,J,De){e.bindRenderbuffer(36161,V),J.depthBuffer&&!J.stencilBuffer?(De?(De=bt(J),e.renderbufferStorageMultisample(36161,De,33189,J.width,J.height)):e.renderbufferStorage(36161,33189,J.width,J.height),e.framebufferRenderbuffer(36160,36096,36161,V)):J.depthBuffer&&J.stencilBuffer?(De?(De=bt(J),e.renderbufferStorageMultisample(36161,De,35056,J.width,J.height)):e.renderbufferStorage(36161,34041,J.width,J.height),e.framebufferRenderbuffer(36160,33306,36161,V)):(V=y(V=a.convert(J.texture.format),a.convert(J.texture.type)),De?(De=bt(J),e.renderbufferStorageMultisample(36161,De,V,J.width,J.height)):e.renderbufferStorage(36161,V,J.width,J.height)),e.bindRenderbuffer(36161,null)}function bt(V){return r.isWebGL2&&V.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,V.samples):0}var Ue,Me=new WeakMap,je=typeof OffscreenCanvas<"u",dt=0,mt=!1,Et=!1;this.allocateTextureUnit=function(){var V=dt;return r.maxTextures,dt+=1,V},this.resetTextureUnits=function(){dt=0},this.setTexture2D=q,this.setTexture2DArray=function(V,J){var De=n.get(V);0<V.version&&De.__version!==V.version?ie(De,V,J):(i.activeTexture(33984+J),i.bindTexture(35866,De.__webglTexture))},this.setTexture3D=function(V,J){var De=n.get(V);0<V.version&&De.__version!==V.version?ie(De,V,J):(i.activeTexture(33984+J),i.bindTexture(32879,De.__webglTexture))},this.setTextureCube=de,this.setTextureCubeDynamic=fe,this.setupRenderTarget=function(V){var J=n.get(V),De=n.get(V.texture);V.addEventListener("dispose",I),De.__webglTexture=e.createTexture(),s.memory.textures++;var tt=V.isWebGLRenderTargetCube===!0,ft=V.isWebGLMultisampleRenderTarget===!0,gt=h(V)||r.isWebGL2;if(tt)for(J.__webglFramebuffer=[],ft=0;6>ft;ft++)J.__webglFramebuffer[ft]=e.createFramebuffer();else if(J.__webglFramebuffer=e.createFramebuffer(),ft&&r.isWebGL2){J.__webglMultisampledFramebuffer=e.createFramebuffer(),J.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,J.__webglColorRenderbuffer),ft=a.convert(V.texture.format);var ri=a.convert(V.texture.type);ft=y(ft,ri),ri=bt(V),e.renderbufferStorageMultisample(36161,ri,ft,V.width,V.height),e.bindFramebuffer(36160,J.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,J.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),V.depthBuffer&&(J.__webglDepthRenderbuffer=e.createRenderbuffer(),Ve(J.__webglDepthRenderbuffer,V,!0)),e.bindFramebuffer(36160,null)}if(tt){for(i.bindTexture(34067,De.__webglTexture),me(34067,V.texture,gt),ft=0;6>ft;ft++)Ne(J.__webglFramebuffer[ft],V,36064,34069+ft);f(V.texture,gt)&&g(34067,V.texture,V.width,V.height),i.bindTexture(34067,null)}else i.bindTexture(3553,De.__webglTexture),me(3553,V.texture,gt),Ne(J.__webglFramebuffer,V,36064,3553),f(V.texture,gt)&&g(3553,V.texture,V.width,V.height),i.bindTexture(3553,null);if(V.depthBuffer){if(J=n.get(V),De=V.isWebGLRenderTargetCube===!0,V.depthTexture){if(De)throw Error("target.depthTexture not supported in Cube render targets");if(V&&V.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,J.__webglFramebuffer),!V.depthTexture||!V.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(V.depthTexture).__webglTexture&&V.depthTexture.image.width===V.width&&V.depthTexture.image.height===V.height||(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),q(V.depthTexture,0),J=n.get(V.depthTexture).__webglTexture,V.depthTexture.format===1026)e.framebufferTexture2D(36160,36096,3553,J,0);else{if(V.depthTexture.format!==1027)throw Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,J,0)}}else if(De)for(J.__webglDepthbuffer=[],De=0;6>De;De++)e.bindFramebuffer(36160,J.__webglFramebuffer[De]),J.__webglDepthbuffer[De]=e.createRenderbuffer(),Ve(J.__webglDepthbuffer[De],V);else e.bindFramebuffer(36160,J.__webglFramebuffer),J.__webglDepthbuffer=e.createRenderbuffer(),Ve(J.__webglDepthbuffer,V);e.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(V){var J=V.texture,De=h(V)||r.isWebGL2;if(f(J,De)){De=V.isWebGLRenderTargetCube?34067:3553;var tt=n.get(J).__webglTexture;i.bindTexture(De,tt),g(De,J,V.width,V.height),i.bindTexture(De,null)}},this.updateMultisampleRenderTarget=function(V){if(V.isWebGLMultisampleRenderTarget&&r.isWebGL2){var J=n.get(V);e.bindFramebuffer(36008,J.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,J.__webglFramebuffer),J=V.width;var De=V.height,tt=16384;V.depthBuffer&&(tt|=256),V.stencilBuffer&&(tt|=1024),e.blitFramebuffer(0,0,J,De,0,0,J,De,tt,9728)}},this.safeSetTexture2D=function(V,J){V&&V.isWebGLRenderTarget&&(mt===!1&&(mt=!0),V=V.texture),q(V,J)},this.safeSetTextureCube=function(V,J){V&&V.isWebGLRenderTargetCube&&(Et===!1&&(Et=!0),V=V.texture),V&&V.isCubeTexture||Array.isArray(V.image)&&V.image.length===6?de(V,J):fe(V,J)}}function hn(e,t,i){return{convert:function(n){if(n===1e3)return 10497;if(n===1001)return 33071;if(n===1002)return 33648;if(n===1003)return 9728;if(n===1004)return 9984;if(n===1005)return 9986;if(n===1006)return 9729;if(n===1007)return 9985;if(n===1008)return 9987;if(n===1009)return 5121;if(n===1017)return 32819;if(n===1018)return 32820;if(n===1019)return 33635;if(n===1010)return 5120;if(n===1011)return 5122;if(n===1012)return 5123;if(n===1013)return 5124;if(n===1014)return 5125;if(n===1015)return 5126;if(n===1016){if(i.isWebGL2)return 5131;var r=t.get("OES_texture_half_float");if(r!==null)return r.HALF_FLOAT_OES}if(n===1021)return 6406;if(n===1022)return 6407;if(n===1023)return 6408;if(n===1024)return 6409;if(n===1025)return 6410;if(n===1026)return 6402;if(n===1027)return 34041;if(n===1028)return 6403;if(n===100)return 32774;if(n===101)return 32778;if(n===102)return 32779;if(n===200)return 0;if(n===201)return 1;if(n===202)return 768;if(n===203)return 769;if(n===204)return 770;if(n===205)return 771;if(n===206)return 772;if(n===207)return 773;if(n===208)return 774;if(n===209)return 775;if(n===210)return 776;if((n===33776||n===33777||n===33778||n===33779)&&(r=t.get("WEBGL_compressed_texture_s3tc"))!==null){if(n===33776)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===33777)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===33778)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===33779)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===35840||n===35841||n===35842||n===35843)&&(r=t.get("WEBGL_compressed_texture_pvrtc"))!==null){if(n===35840)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===35841)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===35842)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===35843)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===36196&&(r=t.get("WEBGL_compressed_texture_etc1"))!==null)return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===37808||n===37809||n===37810||n===37811||n===37812||n===37813||n===37814||n===37815||n===37816||n===37817||n===37818||n===37819||n===37820||n===37821)&&(r=t.get("WEBGL_compressed_texture_astc"))!==null)return n;if(n===103||n===104){if(i.isWebGL2){if(n===103)return 32775;if(n===104)return 32776}if((r=t.get("EXT_blend_minmax"))!==null){if(n===103)return r.MIN_EXT;if(n===104)return r.MAX_EXT}}if(n===1020){if(i.isWebGL2)return 34042;if((r=t.get("WEBGL_depth_texture"))!==null)return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function gn(){Q.call(this),this.type="Group"}function pi(e){Se.call(this),this.cameras=e||[]}function mi(e,t,i){Lp.setFromMatrixPosition(t.matrixWorld),Op.setFromMatrixPosition(i.matrixWorld);var n=Lp.distanceTo(Op),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],f=(a[8]+1)/a[0];r=s*h,a=s*f,h=(f=n/(-h+f))*-h,t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(h),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld),t=s+f,s=i+f,e.projectionMatrix.makePerspective(r-h,a+(n-h),l*i/s*t,c*i/s*t,t,s)}function Mi(e){function t(){return l!==null&&l.isPresenting===!0}function i(){if(t()){var Ue=l.getEyeParameters("left");r=2*Ue.renderWidth*L,a=Ue.renderHeight*L,ie=e.getPixelRatio(),e.getSize(Ne),e.setDrawingBufferSize(r,a,1),fe.viewport.set(0,0,r/2,a),me.viewport.set(r/2,0,r/2,a),bt.start(),s.dispatchEvent({type:"sessionstart"})}else s.enabled&&e.setDrawingBufferSize(Ne.width,Ne.height,ie),bt.stop(),s.dispatchEvent({type:"sessionend"})}function n(Ue,Me){Me!==null&&Me.length===4&&Ue.set(Me[0]*r,Me[1]*a,Me[2]*r,Me[3]*a)}var r,a,s=this,l=null,c=null,h=null,f=[],g=new G,y=new G,L=1,C="local-floor";typeof window<"u"&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",i,!1));var I=new G,q=new T,de=new u,fe=new Se;fe.viewport=new R,fe.layers.enable(1);var me=new Se;me.viewport=new R,me.layers.enable(2);var xe=new pi([fe,me]);xe.layers.enable(1),xe.layers.enable(2);var ie,Ne=new m,Ve=[];this.enabled=!1,this.getController=function(Ue){var Me=f[Ue];return Me===void 0&&((Me=new gn).matrixAutoUpdate=!1,Me.visible=!1,f[Ue]=Me),Me},this.getDevice=function(){return l},this.setDevice=function(Ue){Ue!==void 0&&(l=Ue),bt.setContext(Ue)},this.setFramebufferScaleFactor=function(Ue){L=Ue},this.setReferenceSpaceType=function(Ue){C=Ue},this.setPoseTarget=function(Ue){Ue!==void 0&&(h=Ue)},this.getCamera=function(Ue){var Me=C==="local-floor"?1.6:0;if(t()===!1)return Ue.position.set(0,Me,0),Ue.rotation.set(0,0,0),Ue;if(l.depthNear=Ue.near,l.depthFar=Ue.far,l.getFrameData(c),C==="local-floor"){var je=l.stageParameters;je?g.fromArray(je.sittingToStandingTransform):g.makeTranslation(0,Me,0)}Me=c.pose,(je=h!==null?h:Ue).matrix.copy(g),je.matrix.decompose(je.position,je.quaternion,je.scale),Me.orientation!==null&&(q.fromArray(Me.orientation),je.quaternion.multiply(q)),Me.position!==null&&(q.setFromRotationMatrix(g),de.fromArray(Me.position),de.applyQuaternion(q),je.position.add(de)),je.updateMatrixWorld(),fe.near=Ue.near,me.near=Ue.near,fe.far=Ue.far,me.far=Ue.far,fe.matrixWorldInverse.fromArray(c.leftViewMatrix),me.matrixWorldInverse.fromArray(c.rightViewMatrix),y.getInverse(g),C==="local-floor"&&(fe.matrixWorldInverse.multiply(y),me.matrixWorldInverse.multiply(y)),(Ue=je.parent)!==null&&(I.getInverse(Ue.matrixWorld),fe.matrixWorldInverse.multiply(I),me.matrixWorldInverse.multiply(I)),fe.matrixWorld.getInverse(fe.matrixWorldInverse),me.matrixWorld.getInverse(me.matrixWorldInverse),fe.projectionMatrix.fromArray(c.leftProjectionMatrix),me.projectionMatrix.fromArray(c.rightProjectionMatrix),mi(xe,fe,me),(Ue=l.getLayers()).length&&(Ue=Ue[0],n(fe.viewport,Ue.leftBounds),n(me.viewport,Ue.rightBounds));e:for(Ue=0;Ue<f.length;Ue++){Me=f[Ue];t:{je=Ue;for(var dt=navigator.getGamepads&&navigator.getGamepads(),mt=0,Et=0,V=dt.length;mt<V;mt++){var J=dt[mt];if(J&&(J.id==="Daydream Controller"||J.id==="Gear VR Controller"||J.id==="Oculus Go Controller"||J.id==="OpenVR Gamepad"||J.id.startsWith("Oculus Touch")||J.id.startsWith("HTC Vive Focus")||J.id.startsWith("Spatial Controller"))){if(Et===je){je=J;break t}Et++}}je=void 0}if(je!==void 0&&je.pose!==void 0){if(je.pose===null)break e;(dt=je.pose).hasPosition===!1&&Me.position.set(.2,-.6,-.05),dt.position!==null&&Me.position.fromArray(dt.position),dt.orientation!==null&&Me.quaternion.fromArray(dt.orientation),Me.matrix.compose(Me.position,Me.quaternion,Me.scale),Me.matrix.premultiply(g),Me.matrix.decompose(Me.position,Me.quaternion,Me.scale),Me.matrixWorldNeedsUpdate=!0,Me.visible=!0,dt=je.id==="Daydream Controller"?0:1,Ve[Ue]===void 0&&(Ve[Ue]=!1),Ve[Ue]!==je.buttons[dt].pressed&&(Ve[Ue]=je.buttons[dt].pressed,Ve[Ue]===!0?Me.dispatchEvent({type:"selectstart"}):(Me.dispatchEvent({type:"selectend"}),Me.dispatchEvent({type:"select"})))}else Me.visible=!1}return xe},this.getStandingMatrix=function(){return g},this.isPresenting=t;var bt=new it;this.setAnimationLoop=function(Ue){bt.setAnimationLoop(Ue),t()&&bt.start()},this.submitFrame=function(){t()&&l.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",i)},this.setFrameOfReferenceType=function(){}}function Ui(e,t){function i(){return c!==null&&h!==null}function n(me){for(var xe=0;xe<y.length;xe++)L[xe]===me.inputSource&&y[xe].dispatchEvent({type:me.type})}function r(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),fe.stop(),l.dispatchEvent({type:"sessionend"})}function a(me){h=me,fe.setContext(c),fe.start(),l.dispatchEvent({type:"sessionstart"})}function s(me,xe){xe===null?me.matrixWorld.copy(me.matrix):me.matrixWorld.multiplyMatrices(xe.matrixWorld,me.matrix),me.matrixWorldInverse.getInverse(me.matrixWorld)}var l=this,c=null,h=null,f="local-floor",g=null,y=[],L=[],C=new Se;C.layers.enable(1),C.viewport=new R;var I=new Se;I.layers.enable(2),I.viewport=new R;var q=new pi([C,I]);q.layers.enable(1),q.layers.enable(2),this.enabled=!1,this.getController=function(me){var xe=y[me];return xe===void 0&&((xe=new gn).matrixAutoUpdate=!1,xe.visible=!1,y[me]=xe),xe},this.setFramebufferScaleFactor=function(me){},this.setReferenceSpaceType=function(me){f=me},this.getSession=function(){return c},this.setSession=function(me){(c=me)!==null&&(c.addEventListener("select",n),c.addEventListener("selectstart",n),c.addEventListener("selectend",n),c.addEventListener("end",r),c.updateRenderState({baseLayer:new XRWebGLLayer(c,t)}),c.requestReferenceSpace(f).then(a),L=c.inputSources,c.addEventListener("inputsourceschange",function(){L=c.inputSources;for(var xe=0;xe<y.length;xe++)y[xe].userData.inputSource=L[xe]}))},this.getCamera=function(me){if(i()){var xe=me.parent,ie=q.cameras;s(q,xe);for(var Ne=0;Ne<ie.length;Ne++)s(ie[Ne],xe);for(me.matrixWorld.copy(q.matrixWorld),Ne=0,xe=(me=me.children).length;Ne<xe;Ne++)me[Ne].updateMatrixWorld(!0);return mi(q,C,I),q}return me},this.isPresenting=i;var de=null,fe=new it;fe.setAnimationLoop(function(me,xe){if((g=xe.getViewerPose(h))!==null){var ie=g.views,Ne=c.renderState.baseLayer;e.setFramebuffer(Ne.framebuffer);for(var Ve=0;Ve<ie.length;Ve++){var bt=ie[Ve],Ue=Ne.getViewport(bt),Me=q.cameras[Ve];Me.matrix.fromArray(bt.transform.inverse.matrix).getInverse(Me.matrix),Me.projectionMatrix.fromArray(bt.projectionMatrix),Me.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),Ve===0&&q.matrix.copy(Me.matrix)}}for(Ve=0;Ve<y.length;Ve++)ie=y[Ve],(Ne=L[Ve])&&(Ne=xe.getPose(Ne.targetRaySpace,h))!==null?(ie.matrix.fromArray(Ne.transform.matrix),ie.matrix.decompose(ie.position,ie.rotation,ie.scale),ie.visible=!0):ie.visible=!1;de&&de(me)}),this.setAnimationLoop=function(me){de=me},this.dispose=function(){},this.getStandingMatrix=function(){return new G},this.getDevice=function(){},this.setDevice=function(){},this.setFrameOfReferenceType=function(){},this.submitFrame=function(){}}function Ii(e){var t;function i(){je=new Re(yt),(dt=new re(yt,je,e)).isWebGL2||(je.get("WEBGL_depth_texture"),je.get("OES_texture_float"),je.get("OES_texture_half_float"),je.get("OES_texture_half_float_linear"),je.get("OES_standard_derivatives"),je.get("OES_element_index_uint"),je.get("ANGLE_instanced_arrays")),je.get("OES_texture_float_linear"),ot=new hn(yt,je,dt),(mt=new zt(yt,je,ot,dt)).scissor(Hi.copy(Do).multiplyScalar(en).floor()),mt.viewport(hi.copy(Eo).multiplyScalar(en).floor()),Et=new _t,V=new Je,J=new Kt(yt,je,mt,V,dt,ot,Et),De=new pt(yt),tt=new $(yt,De,Et),ft=new Rt(tt,Et),qt=new qe(yt),gt=new Xe(ae,je,dt),ri=new wt,Zt=new Be,Nt=new U(ae,mt,ft,ie),_i=new H(yt,je,Et,dt),Gi=new At(yt,je,Et,dt),Et.programs=gt.programs,ae.capabilities=dt,ae.extensions=je,ae.properties=V,ae.renderLists=ri,ae.state=mt,ae.info=Et}function n(B){B.preventDefault(),St=!0}function r(){St=!1,i()}function a(B){(B=B.target).removeEventListener("dispose",a),s(B),V.remove(B)}function s(B){var le=V.get(B).program;B.program=void 0,le!==void 0&&gt.releaseProgram(le)}function l(B,le,W,ct){if(B.visible!==!1){if(B.layers.test(le.layers)){if(B.isGroup)W=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(le);else if(B.isLight)Me.pushLight(B),B.castShadow&&Me.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||tu.intersectsSprite(B)){ct&&Ur.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Xs);var vt=ft.update(B),Qt=B.material;Qt.visible&&Ue.push(B,vt,Qt,W,Ur.z,null)}}else if(B.isImmediateRenderObject)ct&&Ur.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Xs),Ue.push(B,null,B.material,W,Ur.z,null);else if((B.isMesh||B.isLine||B.isPoints)&&(B.isSkinnedMesh&&B.skeleton.update(),!B.frustumCulled||tu.intersectsObject(B)))if(ct&&Ur.setFromMatrixPosition(B.matrixWorld).applyMatrix4(Xs),vt=ft.update(B),Qt=B.material,Array.isArray(Qt))for(var Mt=vt.groups,Ut=0,Ai=Mt.length;Ut<Ai;Ut++){var oi=Mt[Ut],Qe=Qt[oi.materialIndex];Qe&&Qe.visible&&Ue.push(B,vt,Qe,W,Ur.z,oi)}else Qt.visible&&Ue.push(B,vt,Qt,W,Ur.z,null)}for(Ut=0,Ai=(B=B.children).length;Ut<Ai;Ut++)l(B[Ut],le,W,ct)}}function c(B,le,W,ct){for(var vt=0,Qt=B.length;vt<Qt;vt++){var Mt=B[vt],Ut=Mt.object,Ai=Mt.geometry,oi=ct===void 0?Mt.material:ct;if(Mt=Mt.group,W.isArrayCamera){yi=W;for(var Qe=W.cameras,sr=0,tn=Qe.length;sr<tn;sr++){var Xi=Qe[sr];Ut.layers.test(Xi.layers)&&(mt.viewport(hi.copy(Xi.viewport)),Me.setupLights(Xi),h(Ut,le,Xi,Ai,oi,Mt))}}else yi=null,h(Ut,le,W,Ai,oi,Mt)}}function h(B,le,W,ct,vt,Qt){if(B.onBeforeRender(ae,le,W,ct,vt,Qt),Me=Zt.get(le,yi||W),B.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),B.isImmediateRenderObject){mt.setMaterial(vt);var Mt=g(W,le.fog,vt,B);Ti=t=null,Wt=!1,function(Ut,Ai){Ut.render(function(oi){ae.renderBufferImmediate(oi,Ai)})}(B,Mt)}else ae.renderBufferDirect(W,le.fog,ct,vt,B,Qt);B.onAfterRender(ae,le,W,ct,vt,Qt),Me=Zt.get(le,yi||W)}function f(B,le,W){var ct=V.get(B),vt=Me.state.lights,Qt=vt.state.version;W=gt.getParameters(B,vt.state,Me.state.shadowsArray,le,Gn.numPlanes,Gn.numIntersection,W);var Mt=gt.getProgramCode(B,W),Ut=ct.program,Ai=!0;if(Ut===void 0)B.addEventListener("dispose",a);else if(Ut.code!==Mt)s(B);else{if(ct.lightsStateVersion!==Qt)ct.lightsStateVersion=Qt;else if(W.shaderID!==void 0)return;Ai=!1}if(Ai&&(W.shaderID?(Mt=ar[W.shaderID],ct.shader={name:B.type,uniforms:ue(Mt.uniforms),vertexShader:Mt.vertexShader,fragmentShader:Mt.fragmentShader}):ct.shader={name:B.type,uniforms:B.uniforms,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader},B.onBeforeCompile(ct.shader,ae),Mt=gt.getProgramCode(B,W),Ut=gt.acquireProgram(B,ct.shader,W,Mt),ct.program=Ut,B.program=Ut),W=Ut.getAttributes(),B.morphTargets)for(Mt=B.numSupportedMorphTargets=0;Mt<ae.maxMorphTargets;Mt++)0<=W["morphTarget"+Mt]&&B.numSupportedMorphTargets++;if(B.morphNormals)for(Mt=B.numSupportedMorphNormals=0;Mt<ae.maxMorphNormals;Mt++)0<=W["morphNormal"+Mt]&&B.numSupportedMorphNormals++;W=ct.shader.uniforms,(B.isShaderMaterial||B.isRawShaderMaterial)&&B.clipping!==!0||(ct.numClippingPlanes=Gn.numPlanes,ct.numIntersection=Gn.numIntersection,W.clippingPlanes=Gn.uniform),ct.fog=le,ct.lightsStateVersion=Qt,B.lights&&(W.ambientLightColor.value=vt.state.ambient,W.lightProbe.value=vt.state.probe,W.directionalLights.value=vt.state.directional,W.spotLights.value=vt.state.spot,W.rectAreaLights.value=vt.state.rectArea,W.pointLights.value=vt.state.point,W.hemisphereLights.value=vt.state.hemi,W.directionalShadowMap.value=vt.state.directionalShadowMap,W.directionalShadowMatrix.value=vt.state.directionalShadowMatrix,W.spotShadowMap.value=vt.state.spotShadowMap,W.spotShadowMatrix.value=vt.state.spotShadowMatrix,W.pointShadowMap.value=vt.state.pointShadowMap,W.pointShadowMatrix.value=vt.state.pointShadowMatrix),B=ct.program.getUniforms(),B=Zn.seqWithValue(B.seq,W),ct.uniformsList=B}function g(B,le,W,ct){J.resetTextureUnits();var vt=V.get(W),Qt=Me.state.lights;dc&&(iu||B!==ei)&&Gn.setState(W.clippingPlanes,W.clipIntersection,W.clipShadows,B,vt,B===ei&&W.id===Bt),W.needsUpdate===!1&&(vt.program===void 0||W.fog&&vt.fog!==le||W.lights&&vt.lightsStateVersion!==Qt.state.version?W.needsUpdate=!0:vt.numClippingPlanes===void 0||vt.numClippingPlanes===Gn.numPlanes&&vt.numIntersection===Gn.numIntersection||(W.needsUpdate=!0)),W.needsUpdate&&(f(W,le,ct),W.needsUpdate=!1);var Mt=!1,Ut=!1,Ai=!1,oi=(Qt=vt.program).getUniforms(),Qe=vt.shader.uniforms;if(mt.useProgram(Qt.program)&&(Ai=Ut=Mt=!0),W.id!==Bt&&(Bt=W.id,Ut=!0),(Mt||ei!==B)&&(oi.setValue(yt,"projectionMatrix",B.projectionMatrix),dt.logarithmicDepthBuffer&&oi.setValue(yt,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),ei!==B&&(ei=B,Ai=Ut=!0),(W.isShaderMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.envMap)&&(Mt=oi.map.cameraPosition)!==void 0&&Mt.setValue(yt,Ur.setFromMatrixPosition(B.matrixWorld)),(W.isMeshPhongMaterial||W.isMeshLambertMaterial||W.isMeshBasicMaterial||W.isMeshStandardMaterial||W.isShaderMaterial||W.skinning)&&oi.setValue(yt,"viewMatrix",B.matrixWorldInverse)),W.skinning&&(oi.setOptional(yt,ct,"bindMatrix"),oi.setOptional(yt,ct,"bindMatrixInverse"),B=ct.skeleton))if(Mt=B.bones,dt.floatVertexTextures){if(B.boneTexture===void 0){Mt=Math.sqrt(4*Mt.length),Mt=Ht.ceilPowerOfTwo(Mt),Mt=Math.max(Mt,4);var sr=new Float32Array(Mt*Mt*4);sr.set(B.boneMatrices);var tn=new ke(sr,Mt,Mt,1023,1015);tn.needsUpdate=!0,B.boneMatrices=sr,B.boneTexture=tn,B.boneTextureSize=Mt}oi.setValue(yt,"boneTexture",B.boneTexture,J),oi.setValue(yt,"boneTextureSize",B.boneTextureSize)}else oi.setOptional(yt,B,"boneMatrices");return Ut&&(oi.setValue(yt,"toneMappingExposure",ae.toneMappingExposure),oi.setValue(yt,"toneMappingWhitePoint",ae.toneMappingWhitePoint),W.lights&&(Ut=Ai,Qe.ambientLightColor.needsUpdate=Ut,Qe.lightProbe.needsUpdate=Ut,Qe.directionalLights.needsUpdate=Ut,Qe.pointLights.needsUpdate=Ut,Qe.spotLights.needsUpdate=Ut,Qe.rectAreaLights.needsUpdate=Ut,Qe.hemisphereLights.needsUpdate=Ut),le&&W.fog&&(Qe.fogColor.value.copy(le.color),le.isFog?(Qe.fogNear.value=le.near,Qe.fogFar.value=le.far):le.isFogExp2&&(Qe.fogDensity.value=le.density)),W.isMeshBasicMaterial?y(Qe,W):W.isMeshLambertMaterial?(y(Qe,W),W.emissiveMap&&(Qe.emissiveMap.value=W.emissiveMap)):W.isMeshPhongMaterial?(y(Qe,W),W.isMeshToonMaterial?(L(Qe,W),W.gradientMap&&(Qe.gradientMap.value=W.gradientMap)):L(Qe,W)):W.isMeshStandardMaterial?(y(Qe,W),W.isMeshPhysicalMaterial?(C(Qe,W),Qe.reflectivity.value=W.reflectivity,Qe.clearcoat.value=W.clearcoat,Qe.clearcoatRoughness.value=W.clearcoatRoughness,W.sheen&&Qe.sheen.value.copy(W.sheen),W.clearcoatNormalMap&&(Qe.clearcoatNormalScale.value.copy(W.clearcoatNormalScale),Qe.clearcoatNormalMap.value=W.clearcoatNormalMap,W.side===1&&Qe.clearcoatNormalScale.value.negate()),Qe.transparency.value=W.transparency):C(Qe,W)):W.isMeshMatcapMaterial?(y(Qe,W),W.matcap&&(Qe.matcap.value=W.matcap),W.bumpMap&&(Qe.bumpMap.value=W.bumpMap,Qe.bumpScale.value=W.bumpScale,W.side===1&&(Qe.bumpScale.value*=-1)),W.normalMap&&(Qe.normalMap.value=W.normalMap,Qe.normalScale.value.copy(W.normalScale),W.side===1&&Qe.normalScale.value.negate()),W.displacementMap&&(Qe.displacementMap.value=W.displacementMap,Qe.displacementScale.value=W.displacementScale,Qe.displacementBias.value=W.displacementBias)):W.isMeshDepthMaterial?(y(Qe,W),W.displacementMap&&(Qe.displacementMap.value=W.displacementMap,Qe.displacementScale.value=W.displacementScale,Qe.displacementBias.value=W.displacementBias)):W.isMeshDistanceMaterial?(y(Qe,W),W.displacementMap&&(Qe.displacementMap.value=W.displacementMap,Qe.displacementScale.value=W.displacementScale,Qe.displacementBias.value=W.displacementBias),Qe.referencePosition.value.copy(W.referencePosition),Qe.nearDistance.value=W.nearDistance,Qe.farDistance.value=W.farDistance):W.isMeshNormalMaterial?(y(Qe,W),W.bumpMap&&(Qe.bumpMap.value=W.bumpMap,Qe.bumpScale.value=W.bumpScale,W.side===1&&(Qe.bumpScale.value*=-1)),W.normalMap&&(Qe.normalMap.value=W.normalMap,Qe.normalScale.value.copy(W.normalScale),W.side===1&&Qe.normalScale.value.negate()),W.displacementMap&&(Qe.displacementMap.value=W.displacementMap,Qe.displacementScale.value=W.displacementScale,Qe.displacementBias.value=W.displacementBias)):W.isLineBasicMaterial?(Qe.diffuse.value.copy(W.color),Qe.opacity.value=W.opacity,W.isLineDashedMaterial&&(Qe.dashSize.value=W.dashSize,Qe.totalSize.value=W.dashSize+W.gapSize,Qe.scale.value=W.scale)):W.isPointsMaterial?(Qe.diffuse.value.copy(W.color),Qe.opacity.value=W.opacity,Qe.size.value=W.size*en,Qe.scale.value=.5*Br,Qe.map.value=W.map,W.map!==null&&(W.map.matrixAutoUpdate===!0&&W.map.updateMatrix(),Qe.uvTransform.value.copy(W.map.matrix))):W.isSpriteMaterial?(Qe.diffuse.value.copy(W.color),Qe.opacity.value=W.opacity,Qe.rotation.value=W.rotation,Qe.map.value=W.map,W.map!==null&&(W.map.matrixAutoUpdate===!0&&W.map.updateMatrix(),Qe.uvTransform.value.copy(W.map.matrix))):W.isShadowMaterial&&(Qe.color.value.copy(W.color),Qe.opacity.value=W.opacity),Qe.ltc_1!==void 0&&(Qe.ltc_1.value=Pt.LTC_1),Qe.ltc_2!==void 0&&(Qe.ltc_2.value=Pt.LTC_2),Zn.upload(yt,vt.uniformsList,Qe,J)),W.isShaderMaterial&&W.uniformsNeedUpdate===!0&&(Zn.upload(yt,vt.uniformsList,Qe,J),W.uniformsNeedUpdate=!1),W.isSpriteMaterial&&oi.setValue(yt,"center",ct.center),oi.setValue(yt,"modelViewMatrix",ct.modelViewMatrix),oi.setValue(yt,"normalMatrix",ct.normalMatrix),oi.setValue(yt,"modelMatrix",ct.matrixWorld),Qt}function y(B,le){if(B.opacity.value=le.opacity,le.color&&B.diffuse.value.copy(le.color),le.emissive&&B.emissive.value.copy(le.emissive).multiplyScalar(le.emissiveIntensity),le.map&&(B.map.value=le.map),le.alphaMap&&(B.alphaMap.value=le.alphaMap),le.specularMap&&(B.specularMap.value=le.specularMap),le.envMap&&(B.envMap.value=le.envMap,B.flipEnvMap.value=le.envMap.isCubeTexture?-1:1,B.reflectivity.value=le.reflectivity,B.refractionRatio.value=le.refractionRatio,B.maxMipLevel.value=V.get(le.envMap).__maxMipLevel),le.lightMap&&(B.lightMap.value=le.lightMap,B.lightMapIntensity.value=le.lightMapIntensity),le.aoMap&&(B.aoMap.value=le.aoMap,B.aoMapIntensity.value=le.aoMapIntensity),le.map)var W=le.map;else le.specularMap?W=le.specularMap:le.displacementMap?W=le.displacementMap:le.normalMap?W=le.normalMap:le.bumpMap?W=le.bumpMap:le.roughnessMap?W=le.roughnessMap:le.metalnessMap?W=le.metalnessMap:le.alphaMap?W=le.alphaMap:le.emissiveMap&&(W=le.emissiveMap);W!==void 0&&(W.isWebGLRenderTarget&&(W=W.texture),W.matrixAutoUpdate===!0&&W.updateMatrix(),B.uvTransform.value.copy(W.matrix))}function L(B,le){B.specular.value.copy(le.specular),B.shininess.value=Math.max(le.shininess,1e-4),le.emissiveMap&&(B.emissiveMap.value=le.emissiveMap),le.bumpMap&&(B.bumpMap.value=le.bumpMap,B.bumpScale.value=le.bumpScale,le.side===1&&(B.bumpScale.value*=-1)),le.normalMap&&(B.normalMap.value=le.normalMap,B.normalScale.value.copy(le.normalScale),le.side===1&&B.normalScale.value.negate()),le.displacementMap&&(B.displacementMap.value=le.displacementMap,B.displacementScale.value=le.displacementScale,B.displacementBias.value=le.displacementBias)}function C(B,le){B.roughness.value=le.roughness,B.metalness.value=le.metalness,le.roughnessMap&&(B.roughnessMap.value=le.roughnessMap),le.metalnessMap&&(B.metalnessMap.value=le.metalnessMap),le.emissiveMap&&(B.emissiveMap.value=le.emissiveMap),le.bumpMap&&(B.bumpMap.value=le.bumpMap,B.bumpScale.value=le.bumpScale,le.side===1&&(B.bumpScale.value*=-1)),le.normalMap&&(B.normalMap.value=le.normalMap,B.normalScale.value.copy(le.normalScale),le.side===1&&B.normalScale.value.negate()),le.displacementMap&&(B.displacementMap.value=le.displacementMap,B.displacementScale.value=le.displacementScale,B.displacementBias.value=le.displacementBias),le.envMap&&(B.envMapIntensity.value=le.envMapIntensity)}var I=(e=e||{}).canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),q=e.context!==void 0?e.context:null,de=e.alpha!==void 0&&e.alpha,fe=e.depth===void 0||e.depth,me=e.stencil===void 0||e.stencil,xe=e.antialias!==void 0&&e.antialias,ie=e.premultipliedAlpha===void 0||e.premultipliedAlpha,Ne=e.preserveDrawingBuffer!==void 0&&e.preserveDrawingBuffer,Ve=e.powerPreference!==void 0?e.powerPreference:"default",bt=e.failIfMajorPerformanceCaveat!==void 0&&e.failIfMajorPerformanceCaveat,Ue=null,Me=null;this.domElement=I,this.debug={checkShaderErrors:!0},this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var je,dt,mt,Et,V,J,De,tt,ft,gt,ri,Zt,Nt,qt,_i,Gi,ot,ae=this,St=!1,Xt=null,vi=0,Ft=0,jt=null,Ct=null,Bt=-1,Ti=t=null,Wt=!1,ei=null,yi=null,hi=new R,Hi=new R,Sr=null,Mn=I.width,Br=I.height,en=1,Eo=new R(0,0,Mn,Br),Do=new R(0,0,Mn,Br),eu=!1,tu=new rt,Gn=new Ce,dc=!1,iu=!1,Xs=new G,Ur=new u;try{de={alpha:de,depth:fe,stencil:me,antialias:xe,premultipliedAlpha:ie,preserveDrawingBuffer:Ne,powerPreference:Ve,failIfMajorPerformanceCaveat:bt,xrCompatible:!0},I.addEventListener("webglcontextlost",n,!1),I.addEventListener("webglcontextrestored",r,!1);var yt=q||I.getContext("webgl",de)||I.getContext("experimental-webgl",de);if(yt===null)throw I.getContext("webgl")!==null?Error("Error creating WebGL context with your selected attributes."):Error("Error creating WebGL context.");yt.getShaderPrecisionFormat===void 0&&(yt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw B}i();var Tr=typeof navigator<"u"&&"xr"in navigator&&"supportsSession"in navigator.xr?new Ui(ae,yt):new Mi(ae);this.vr=Tr;var nd=new Ee(ae,ft,dt.maxTextureSize);this.shadowMap=nd,this.getContext=function(){return yt},this.getContextAttributes=function(){return yt.getContextAttributes()},this.forceContextLoss=function(){var B=je.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){var B=je.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return en},this.setPixelRatio=function(B){B!==void 0&&(en=B,this.setSize(Mn,Br,!1))},this.getSize=function(B){return B===void 0&&(B=new m),B.set(Mn,Br)},this.setSize=function(B,le,W){Tr.isPresenting()||(Mn=B,Br=le,I.width=Math.floor(B*en),I.height=Math.floor(le*en),W!==!1&&(I.style.width=B+"px",I.style.height=le+"px"),this.setViewport(0,0,B,le))},this.getDrawingBufferSize=function(B){return B===void 0&&(B=new m),B.set(Mn*en,Br*en).floor()},this.setDrawingBufferSize=function(B,le,W){Mn=B,Br=le,en=W,I.width=Math.floor(B*W),I.height=Math.floor(le*W),this.setViewport(0,0,B,le)},this.getCurrentViewport=function(B){return B===void 0&&(B=new R),B.copy(hi)},this.getViewport=function(B){return B.copy(Eo)},this.setViewport=function(B,le,W,ct){B.isVector4?Eo.set(B.x,B.y,B.z,B.w):Eo.set(B,le,W,ct),mt.viewport(hi.copy(Eo).multiplyScalar(en).floor())},this.getScissor=function(B){return B.copy(Do)},this.setScissor=function(B,le,W,ct){B.isVector4?Do.set(B.x,B.y,B.z,B.w):Do.set(B,le,W,ct),mt.scissor(Hi.copy(Do).multiplyScalar(en).floor())},this.getScissorTest=function(){return eu},this.setScissorTest=function(B){mt.setScissorTest(eu=B)},this.getClearColor=function(){return Nt.getClearColor()},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(B,le,W){var ct=0;(B===void 0||B)&&(ct|=16384),(le===void 0||le)&&(ct|=256),(W===void 0||W)&&(ct|=1024),yt.clear(ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){I.removeEventListener("webglcontextlost",n,!1),I.removeEventListener("webglcontextrestored",r,!1),ri.dispose(),Zt.dispose(),V.dispose(),ft.dispose(),Tr.dispose(),fc.stop()},this.renderBufferImmediate=function(B,le){mt.initAttributes();var W=V.get(B);B.hasPositions&&!W.position&&(W.position=yt.createBuffer()),B.hasNormals&&!W.normal&&(W.normal=yt.createBuffer()),B.hasUvs&&!W.uv&&(W.uv=yt.createBuffer()),B.hasColors&&!W.color&&(W.color=yt.createBuffer()),le=le.getAttributes(),B.hasPositions&&(yt.bindBuffer(34962,W.position),yt.bufferData(34962,B.positionArray,35048),mt.enableAttribute(le.position),yt.vertexAttribPointer(le.position,3,5126,!1,0,0)),B.hasNormals&&(yt.bindBuffer(34962,W.normal),yt.bufferData(34962,B.normalArray,35048),mt.enableAttribute(le.normal),yt.vertexAttribPointer(le.normal,3,5126,!1,0,0)),B.hasUvs&&(yt.bindBuffer(34962,W.uv),yt.bufferData(34962,B.uvArray,35048),mt.enableAttribute(le.uv),yt.vertexAttribPointer(le.uv,2,5126,!1,0,0)),B.hasColors&&(yt.bindBuffer(34962,W.color),yt.bufferData(34962,B.colorArray,35048),mt.enableAttribute(le.color),yt.vertexAttribPointer(le.color,3,5126,!1,0,0)),mt.disableUnusedAttributes(),yt.drawArrays(4,0,B.count),B.count=0},this.renderBufferDirect=function(B,le,W,ct,vt,Qt){var Mt=vt.isMesh&&0>vt.matrixWorld.determinant();mt.setMaterial(ct,Mt);var Ut=g(B,le,ct,vt),Ai=!1;t===W.id&&Ti===Ut.id&&Wt===(ct.wireframe===!0)||(t=W.id,Ti=Ut.id,Wt=ct.wireframe===!0,Ai=!0),vt.morphTargetInfluences&&(qt.update(vt,W,ct,Ut),Ai=!0),Mt=W.index;var oi=W.attributes.position;if(le=1,ct.wireframe===!0&&(Mt=tt.getWireframeAttribute(W),le=2),B=_i,Mt!==null){var Qe=De.get(Mt);(B=Gi).setIndex(Qe)}if(Ai){if(!(W&&W.isInstancedBufferGeometry&&!dt.isWebGL2&&je.get("ANGLE_instanced_arrays")===null)){mt.initAttributes(),Ai=W.attributes,Ut=Ut.getAttributes();var sr=ct.defaultAttributeValues;for(Pa in Ut){var tn=Ut[Pa];if(0<=tn){var Xi=Ai[Pa];if(Xi!==void 0){var Gr=Xi.normalized,rd=Xi.itemSize,Aa=De.get(Xi);if(Aa!==void 0){var ad=Aa.buffer,od=Aa.type;if(Aa=Aa.bytesPerElement,Xi.isInterleavedBufferAttribute){var No=Xi.data,_m=No.stride;Xi=Xi.offset,No&&No.isInstancedInterleavedBuffer?(mt.enableAttributeAndDivisor(tn,No.meshPerAttribute),W.maxInstancedCount===void 0&&(W.maxInstancedCount=No.meshPerAttribute*No.count)):mt.enableAttribute(tn),yt.bindBuffer(34962,ad),yt.vertexAttribPointer(tn,rd,od,Gr,_m*Aa,Xi*Aa)}else Xi.isInstancedBufferAttribute?(mt.enableAttributeAndDivisor(tn,Xi.meshPerAttribute),W.maxInstancedCount===void 0&&(W.maxInstancedCount=Xi.meshPerAttribute*Xi.count)):mt.enableAttribute(tn),yt.bindBuffer(34962,ad),yt.vertexAttribPointer(tn,rd,od,Gr,0,0)}}else if(sr!==void 0&&(Gr=sr[Pa])!==void 0)switch(Gr.length){case 2:yt.vertexAttrib2fv(tn,Gr);break;case 3:yt.vertexAttrib3fv(tn,Gr);break;case 4:yt.vertexAttrib4fv(tn,Gr);break;default:yt.vertexAttrib1fv(tn,Gr)}}}mt.disableUnusedAttributes()}Mt!==null&&yt.bindBuffer(34963,Qe.buffer)}Qe=1/0,Mt!==null?Qe=Mt.count:oi!==void 0&&(Qe=oi.count),Mt=W.drawRange.start*le,oi=Qt!==null?Qt.start*le:0;var Pa=Math.max(Mt,oi);if((Qt=Math.max(0,Math.min(Qe,Mt+W.drawRange.count*le,oi+(Qt!==null?Qt.count*le:1/0))-1-Pa+1))!==0){if(vt.isMesh)if(ct.wireframe===!0)mt.setLineWidth(ct.wireframeLinewidth*(jt===null?en:1)),B.setMode(1);else switch(vt.drawMode){case 0:B.setMode(4);break;case 1:B.setMode(5);break;case 2:B.setMode(6)}else vt.isLine?((ct=ct.linewidth)===void 0&&(ct=1),mt.setLineWidth(ct*(jt===null?en:1)),vt.isLineSegments?B.setMode(1):vt.isLineLoop?B.setMode(2):B.setMode(3)):vt.isPoints?B.setMode(0):vt.isSprite&&B.setMode(4);W&&W.isInstancedBufferGeometry?0<W.maxInstancedCount&&B.renderInstances(W,Pa,Qt):B.render(Pa,Qt)}},this.compile=function(B,le){(Me=Zt.get(B,le)).init(),B.traverse(function(W){W.isLight&&(Me.pushLight(W),W.castShadow&&Me.pushShadow(W))}),Me.setupLights(le),B.traverse(function(W){if(W.material)if(Array.isArray(W.material))for(var ct=0;ct<W.material.length;ct++)f(W.material[ct],B.fog,W);else f(W.material,B.fog,W)})};var nu=null,fc=new it;fc.setAnimationLoop(function(B){Tr.isPresenting()||nu&&nu(B)}),typeof window<"u"&&fc.setContext(window),this.setAnimationLoop=function(B){nu=B,Tr.setAnimationLoop(B),fc.start()},this.render=function(B,le,W,ct){if(W!==void 0)var vt=W;if(ct!==void 0)var Qt=ct;le&&le.isCamera&&(St||(Ti=t=null,Wt=!1,Bt=-1,ei=null,B.autoUpdate===!0&&B.updateMatrixWorld(),le.parent===null&&le.updateMatrixWorld(),Tr.enabled&&(le=Tr.getCamera(le)),(Me=Zt.get(B,le)).init(),B.onBeforeRender(ae,B,le,vt||jt),Xs.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),tu.setFromMatrix(Xs),iu=this.localClippingEnabled,dc=Gn.init(this.clippingPlanes,iu,le),(Ue=ri.get(B,le)).init(),l(B,le,0,ae.sortObjects),ae.sortObjects===!0&&Ue.sort(),dc&&Gn.beginShadows(),nd.render(Me.state.shadowsArray,B,le),Me.setupLights(le),dc&&Gn.endShadows(),this.info.autoReset&&this.info.reset(),vt!==void 0&&this.setRenderTarget(vt),Nt.render(Ue,B,le,Qt),W=Ue.opaque,ct=Ue.transparent,B.overrideMaterial?(vt=B.overrideMaterial,W.length&&c(W,B,le,vt),ct.length&&c(ct,B,le,vt)):(W.length&&c(W,B,le),ct.length&&c(ct,B,le)),B.onAfterRender(ae,B,le),jt!==null&&(J.updateRenderTargetMipmap(jt),J.updateMultisampleRenderTarget(jt)),mt.buffers.depth.setTest(!0),mt.buffers.depth.setMask(!0),mt.buffers.color.setMask(!0),mt.setPolygonOffset(!1),Tr.enabled&&Tr.submitFrame(),Me=Ue=null))},this.setFramebuffer=function(B){Xt!==B&&yt.bindFramebuffer(36160,B),Xt=B},this.getActiveCubeFace=function(){return vi},this.getActiveMipmapLevel=function(){return Ft},this.getRenderTarget=function(){return jt},this.setRenderTarget=function(B,le,W){jt=B,vi=le,Ft=W,B&&V.get(B).__webglFramebuffer===void 0&&J.setupRenderTarget(B);var ct=Xt,vt=!1;B?(ct=V.get(B).__webglFramebuffer,B.isWebGLRenderTargetCube?(ct=ct[le||0],vt=!0):ct=B.isWebGLMultisampleRenderTarget?V.get(B).__webglMultisampledFramebuffer:ct,hi.copy(B.viewport),Hi.copy(B.scissor),Sr=B.scissorTest):(hi.copy(Eo).multiplyScalar(en).floor(),Hi.copy(Do).multiplyScalar(en).floor(),Sr=eu),Ct!==ct&&(yt.bindFramebuffer(36160,ct),Ct=ct),mt.viewport(hi),mt.scissor(Hi),mt.setScissorTest(Sr),vt&&(B=V.get(B.texture),yt.framebufferTexture2D(36160,36064,34069+(le||0),B.__webglTexture,W||0))},this.readRenderTargetPixels=function(B,le,W,ct,vt,Qt,Mt){if(B&&B.isWebGLRenderTarget){var Ut=V.get(B).__webglFramebuffer;if(B.isWebGLRenderTargetCube&&Mt!==void 0&&(Ut=Ut[Mt]),Ut){Mt=!1,Ut!==Ct&&(yt.bindFramebuffer(36160,Ut),Mt=!0);try{var Ai=B.texture,oi=Ai.format,Qe=Ai.type;oi!==1023&&ot.convert(oi)!==yt.getParameter(35739)||(Qe===1009||ot.convert(Qe)===yt.getParameter(35738)||Qe===1015&&(dt.isWebGL2||je.get("OES_texture_float")||je.get("WEBGL_color_buffer_float"))||Qe===1016&&(dt.isWebGL2?je.get("EXT_color_buffer_float"):je.get("EXT_color_buffer_half_float")))&&yt.checkFramebufferStatus(36160)===36053&&0<=le&&le<=B.width-ct&&0<=W&&W<=B.height-vt&&yt.readPixels(le,W,ct,vt,ot.convert(oi),ot.convert(Qe),Qt)}finally{Mt&&yt.bindFramebuffer(36160,Ct)}}}},this.copyFramebufferToTexture=function(B,le,W){var ct=le.image.width,vt=le.image.height,Qt=ot.convert(le.format);J.setTexture2D(le,0),yt.copyTexImage2D(3553,W||0,Qt,B.x,B.y,ct,vt,0)},this.copyTextureToTexture=function(B,le,W,ct){var vt=le.image.width,Qt=le.image.height,Mt=ot.convert(W.format),Ut=ot.convert(W.type);J.setTexture2D(W,0),le.isDataTexture?yt.texSubImage2D(3553,ct||0,B.x,B.y,vt,Qt,Mt,Ut,le.image.data):yt.texSubImage2D(3553,ct||0,B.x,B.y,Mt,Ut,le.image)},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Vi(e,t){this.name="",this.color=new S(e),this.density=t!==void 0?t:25e-5}function Ri(e,t,i){this.name="",this.color=new S(e),this.near=t!==void 0?t:1,this.far=i!==void 0?i:1e3}function ii(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function An(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=n===!0}function Li(e){M.call(this),this.type="SpriteMaterial",this.color=new S(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function ji(e){if(Q.call(this),this.type="Sprite",Po===void 0){Po=new ze;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new ii(t,5),Po.setIndex([0,1,2,0,2,3]),Po.addAttribute("position",new An(t,3,0,!1)),Po.addAttribute("uv",new An(t,2,3,!1))}this.geometry=Po,this.material=e!==void 0?e:new Li,this.center=new m(.5,.5)}function Jn(e,t,i,n,r,a){Oo.subVectors(e,i).addScalar(.5).multiply(n),r!==void 0?(js.x=a*Oo.x-r*Oo.y,js.y=r*Oo.x+a*Oo.y):js.copy(Oo),e.copy(t),e.x+=js.x,e.y+=js.y,e.applyMatrix4(Ep)}function Pn(){Q.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function ns(e,t){e&&e.isGeometry,st.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new G,this.bindMatrixInverse=new G}function hl(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new G)}function $c(){Q.call(this),this.type="Bone"}function gi(e){M.call(this),this.type="LineBasicMaterial",this.color=new S(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function qi(e,t,i){Q.call(this),this.type="Line",this.geometry=e!==void 0?e:new ze,this.material=t!==void 0?t:new gi({color:16777215*Math.random()})}function wi(e,t){qi.call(this,e,t),this.type="LineSegments"}function ul(e,t){qi.call(this,e,t),this.type="LineLoop"}function Cn(e){M.call(this),this.type="PointsMaterial",this.color=new S(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(e)}function Ua(e,t){Q.call(this),this.type="Points",this.geometry=e!==void 0?e:new ze,this.material=t!==void 0?t:new Cn({color:16777215*Math.random()}),this.updateMorphTargets()}function Kc(e,t,i,n,r,a,s){var l=jh.distanceSqToPoint(e);l<i&&(i=new u,jh.closestPointToPoint(e,i),i.applyMatrix4(n),(e=r.ray.origin.distanceTo(i))<r.near||e>r.far||a.push({distance:e,distanceToRay:Math.sqrt(l),point:i,index:t,face:null,object:s}))}function eh(e,t,i,n,r,a,s,l,c){F.call(this,e,t,i,n,r,a,s,l,c),this.format=s!==void 0?s:1022,this.minFilter=a!==void 0?a:1006,this.magFilter=r!==void 0?r:1006,this.generateMipmaps=!1}function Ga(e,t,i,n,r,a,s,l,c,h,f,g){F.call(this,null,a,s,l,c,h,n,r,f,g),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function rs(e,t,i,n,r,a,s,l,c){F.call(this,e,t,i,n,r,a,s,l,c),this.needsUpdate=!0}function as(e,t,i,n,r,a,s,l,c,h){if((h=h!==void 0?h:1026)!==1026&&h!==1027)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===1026&&(i=1012),i===void 0&&h===1027&&(i=1020),F.call(this,null,n,r,a,s,l,h,i,c),this.image={width:e,height:t},this.magFilter=s!==void 0?s:1003,this.minFilter=l!==void 0?l:1003,this.generateMipmaps=this.flipY=!1}function Va(e){ze.call(this),this.type="WireframeGeometry";var t,i,n,r=[],a=[0,0],s={},l=["a","b","c"];if(e&&e.isGeometry){var c=e.faces,h=0;for(i=c.length;h<i;h++){var f=c[h];for(t=0;3>t;t++){var g=f[l[t]],y=f[l[(t+1)%3]];a[0]=Math.min(g,y),a[1]=Math.max(g,y),s[g=a[0]+","+a[1]]===void 0&&(s[g]={index1:a[0],index2:a[1]})}}for(g in s)h=s[g],l=e.vertices[h.index1],r.push(l.x,l.y,l.z),l=e.vertices[h.index2],r.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry)if(l=new u,e.index!==null){c=e.attributes.position,f=e.index;var L=e.groups;for(L.length===0&&(L=[{start:0,count:f.count,materialIndex:0}]),e=0,n=L.length;e<n;++e)for(t=(h=L[e]).start,i=h.count,h=t,i=t+i;h<i;h+=3)for(t=0;3>t;t++)g=f.getX(h+t),y=f.getX(h+(t+1)%3),a[0]=Math.min(g,y),a[1]=Math.max(g,y),s[g=a[0]+","+a[1]]===void 0&&(s[g]={index1:a[0],index2:a[1]});for(g in s)h=s[g],l.fromBufferAttribute(c,h.index1),r.push(l.x,l.y,l.z),l.fromBufferAttribute(c,h.index2),r.push(l.x,l.y,l.z)}else for(h=0,i=(c=e.attributes.position).count/3;h<i;h++)for(t=0;3>t;t++)s=3*h+t,l.fromBufferAttribute(c,s),r.push(l.x,l.y,l.z),s=3*h+(t+1)%3,l.fromBufferAttribute(c,s),r.push(l.x,l.y,l.z);this.addAttribute("position",new ve(r,3))}function os(e,t,i){ht.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new ja(e,t,i)),this.mergeVertices()}function ja(e,t,i){ze.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,a=[],s=[],l=[],c=[],h=new u,f=new u,g=new u,y=new u,L=new u;e.length;var C=t+1;for(n=0;n<=i;n++){var I=n/i;for(r=0;r<=t;r++){var q=r/t;e(q,I,f),s.push(f.x,f.y,f.z),0<=q-1e-5?(e(q-1e-5,I,g),y.subVectors(f,g)):(e(q+1e-5,I,g),y.subVectors(g,f)),0<=I-1e-5?(e(q,I-1e-5,g),L.subVectors(f,g)):(e(q,I+1e-5,g),L.subVectors(g,f)),h.crossVectors(y,L).normalize(),l.push(h.x,h.y,h.z),c.push(q,I)}}for(n=0;n<i;n++)for(r=0;r<t;r++)e=n*C+r+1,h=(n+1)*C+r+1,f=(n+1)*C+r,a.push(n*C+r,e,f),a.push(e,h,f);this.setIndex(a),this.addAttribute("position",new ve(s,3)),this.addAttribute("normal",new ve(l,3)),this.addAttribute("uv",new ve(c,2))}function ss(e,t,i,n){ht.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new un(e,t,i,n)),this.mergeVertices()}function un(e,t,i,n){function r(h){l.push(h.x,h.y,h.z)}function a(h,f){h*=3,f.x=e[h+0],f.y=e[h+1],f.z=e[h+2]}function s(h,f,g,y){0>y&&h.x===1&&(c[f]=h.x-1),g.x===0&&g.z===0&&(c[f]=y/2/Math.PI+.5)}ze.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1;var l=[],c=[];(function(h){for(var f=new u,g=new u,y=new u,L=0;L<t.length;L+=3){a(t[L+0],f),a(t[L+1],g),a(t[L+2],y);var C,I,q=f,de=g,fe=y,me=Math.pow(2,h),xe=[];for(I=0;I<=me;I++){xe[I]=[];var ie=q.clone().lerp(fe,I/me),Ne=de.clone().lerp(fe,I/me),Ve=me-I;for(C=0;C<=Ve;C++)xe[I][C]=C===0&&I===me?ie:ie.clone().lerp(Ne,C/Ve)}for(I=0;I<me;I++)for(C=0;C<2*(me-I)-1;C++)q=Math.floor(C/2),C%2==0?(r(xe[I][q+1]),r(xe[I+1][q]),r(xe[I][q])):(r(xe[I][q+1]),r(xe[I+1][q+1]),r(xe[I+1][q]))}})(n=n||0),function(h){for(var f=new u,g=0;g<l.length;g+=3)f.x=l[g+0],f.y=l[g+1],f.z=l[g+2],f.normalize().multiplyScalar(h),l[g+0]=f.x,l[g+1]=f.y,l[g+2]=f.z}(i),function(){for(var h=new u,f=0;f<l.length;f+=3)h.x=l[f+0],h.y=l[f+1],h.z=l[f+2],c.push(Math.atan2(h.z,-h.x)/2/Math.PI+.5,1-(Math.atan2(-h.y,Math.sqrt(h.x*h.x+h.z*h.z))/Math.PI+.5));h=new u,f=new u;for(var g=new u,y=new u,L=new m,C=new m,I=new m,q=0,de=0;q<l.length;q+=9,de+=6){h.set(l[q+0],l[q+1],l[q+2]),f.set(l[q+3],l[q+4],l[q+5]),g.set(l[q+6],l[q+7],l[q+8]),L.set(c[de+0],c[de+1]),C.set(c[de+2],c[de+3]),I.set(c[de+4],c[de+5]),y.copy(h).add(f).add(g).divideScalar(3);var fe=Math.atan2(y.z,-y.x);s(L,de+0,h,fe),s(C,de+2,f,fe),s(I,de+4,g,fe)}for(h=0;h<c.length;h+=6)f=c[h+0],g=c[h+2],y=c[h+4],L=Math.min(f,g,y),.9<Math.max(f,g,y)&&.1>L&&(.2>f&&(c[h+0]+=1),.2>g&&(c[h+2]+=1),.2>y&&(c[h+4]+=1))}(),this.addAttribute("position",new ve(l,3)),this.addAttribute("normal",new ve(l.slice(),3)),this.addAttribute("uv",new ve(c,2)),n===0?this.computeVertexNormals():this.normalizeNormals()}function ls(e,t){ht.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Wa(e,t)),this.mergeVertices()}function Wa(e,t){un.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function cs(e,t){ht.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Kr(e,t)),this.mergeVertices()}function Kr(e,t){un.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function hs(e,t){ht.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ha(e,t)),this.mergeVertices()}function Ha(e,t){var i=(1+Math.sqrt(5))/2;un.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function us(e,t){ht.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Xa(e,t)),this.mergeVertices()}function Xa(e,t){var i=(1+Math.sqrt(5))/2,n=1/i;un.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ps(e,t,i,n,r,a){ht.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},e=new ea(e,t,i,n,r),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function ea(e,t,i,n,r){function a(de){y=e.getPointAt(de/t,y);var fe=s.normals[de];for(de=s.binormals[de],c=0;c<=n;c++){var me=c/n*Math.PI*2,xe=Math.sin(me);me=-Math.cos(me),f.x=me*fe.x+xe*de.x,f.y=me*fe.y+xe*de.y,f.z=me*fe.z+xe*de.z,f.normalize(),C.push(f.x,f.y,f.z),h.x=y.x+i*f.x,h.y=y.y+i*f.y,h.z=y.z+i*f.z,L.push(h.x,h.y,h.z)}}ze.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},t=t||64,i=i||1,n=n||8,r=r||!1;var s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var l,c,h=new u,f=new u,g=new m,y=new u,L=[],C=[],I=[],q=[];for(l=0;l<t;l++)a(l);for(a(r===!1?t:0),l=0;l<=t;l++)for(c=0;c<=n;c++)g.x=l/t,g.y=c/n,I.push(g.x,g.y);(function(){for(c=1;c<=t;c++)for(l=1;l<=n;l++){var de=(n+1)*c+(l-1),fe=(n+1)*c+l,me=(n+1)*(c-1)+l;q.push((n+1)*(c-1)+(l-1),de,me),q.push(de,fe,me)}})(),this.setIndex(q),this.addAttribute("position",new ve(L,3)),this.addAttribute("normal",new ve(C,3)),this.addAttribute("uv",new ve(I,2))}function ds(e,t,i,n,r,a,s){ht.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},this.fromBufferGeometry(new Ya(e,t,i,n,r,a)),this.mergeVertices()}function Ya(e,t,i,n,r,a){function s(Ne,Ve,bt,Ue,Me){var je=Math.sin(Ne);Ve=bt/Ve*Ne,bt=Math.cos(Ve),Me.x=Ue*(2+bt)*.5*Math.cos(Ne),Me.y=Ue*(2+bt)*je*.5,Me.z=Ue*Math.sin(Ve)*.5}ze.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,a=a||3;var l,c=[],h=[],f=[],g=[],y=new u,L=new u,C=new u,I=new u,q=new u,de=new u,fe=new u;for(l=0;l<=i;++l){var me=l/i*r*Math.PI*2;for(s(me,r,a,e,C),s(me+.01,r,a,e,I),de.subVectors(I,C),fe.addVectors(I,C),q.crossVectors(de,fe),fe.crossVectors(q,de),q.normalize(),fe.normalize(),me=0;me<=n;++me){var xe=me/n*Math.PI*2,ie=-t*Math.cos(xe);xe=t*Math.sin(xe),y.x=C.x+(ie*fe.x+xe*q.x),y.y=C.y+(ie*fe.y+xe*q.y),y.z=C.z+(ie*fe.z+xe*q.z),h.push(y.x,y.y,y.z),L.subVectors(y,C).normalize(),f.push(L.x,L.y,L.z),g.push(l/i),g.push(me/n)}}for(me=1;me<=i;me++)for(l=1;l<=n;l++)e=(n+1)*me+(l-1),t=(n+1)*me+l,r=(n+1)*(me-1)+l,c.push((n+1)*(me-1)+(l-1),e,r),c.push(e,t,r);this.setIndex(c),this.addAttribute("position",new ve(h,3)),this.addAttribute("normal",new ve(f,3)),this.addAttribute("uv",new ve(g,2))}function fs(e,t,i,n,r){ht.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new qa(e,t,i,n,r)),this.mergeVertices()}function qa(e,t,i,n,r){ze.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var a,s,l=[],c=[],h=[],f=[],g=new u,y=new u,L=new u;for(a=0;a<=i;a++)for(s=0;s<=n;s++){var C=s/n*r,I=a/i*Math.PI*2;y.x=(e+t*Math.cos(I))*Math.cos(C),y.y=(e+t*Math.cos(I))*Math.sin(C),y.z=t*Math.sin(I),c.push(y.x,y.y,y.z),g.x=e*Math.cos(C),g.y=e*Math.sin(C),L.subVectors(y,g).normalize(),h.push(L.x,L.y,L.z),f.push(s/n),f.push(a/i)}for(a=1;a<=i;a++)for(s=1;s<=n;s++)e=(n+1)*(a-1)+s-1,t=(n+1)*(a-1)+s,r=(n+1)*a+s,l.push((n+1)*a+s-1,e,r),l.push(e,t,r);this.setIndex(l),this.addAttribute("position",new ve(c,3)),this.addAttribute("normal",new ve(h,3)),this.addAttribute("uv",new ve(f,2))}function Wu(e,t,i,n,r){for(var a,s=0,l=t,c=i-n;l<i;l+=n)s+=(e[c]-e[l])*(e[l+1]+e[c+1]),c=l;if(r===0<s)for(r=t;r<i;r+=n)a=Yu(r,e[r],e[r+1],a);else for(r=i-n;r>=t;r-=n)a=Yu(r,e[r],e[r+1],a);return a&&ta(a,a.next)&&(ys(a),a=a.next),a}function ms(e,t){if(!e)return e;t||(t=e);do{var i=!1;if(e.steiner||!ta(e,e.next)&&Zi(e.prev,e,e.next)!==0)e=e.next;else{if(ys(e),(e=t=e.prev)===e.next)break;i=!0}}while(i||e!==t);return t}function gs(e,t,i,n,r,a,s){if(e){if(!s&&a){var l=e,c=l;do c.z===null&&(c.z=th(c.x,c.y,n,r,a)),c.prevZ=c.prev,c=c.nextZ=c.next;while(c!==l);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,f,g,y,L=1;do{c=l;var C=l=null;for(f=0;c;){f++;var I=c;for(h=g=0;h<L&&(g++,I=I.nextZ);h++);for(y=L;0<g||0<y&&I;)g!==0&&(y===0||!I||c.z<=I.z)?(h=c,c=c.nextZ,g--):(h=I,I=I.nextZ,y--),C?C.nextZ=h:l=h,h.prevZ=C,C=h;c=I}C.nextZ=null,L*=2}while(1<f)}for(l=e;e.prev!==e.next;){if(c=e.prev,I=e.next,a)C=Ef(e,n,r,a);else e:if(C=e,f=C.prev,g=C,L=C.next,0<=Zi(f,g,L))C=!1;else{for(h=C.next.next;h!==C.prev;){if(Za(f.x,f.y,g.x,g.y,L.x,L.y,h.x,h.y)&&0<=Zi(h.prev,h,h.next)){C=!1;break e}h=h.next}C=!0}if(C)t.push(c.i/i),t.push(e.i/i),t.push(I.i/i),ys(e),l=e=I.next;else if((e=I)===l){if(s){if(s===1){s=t,l=i,c=e;do!ta(I=c.prev,C=c.next.next)&&Hu(I,c,c.next,C)&&vs(I,C)&&vs(C,I)&&(s.push(I.i/l),s.push(c.i/l),s.push(C.i/l),ys(c),ys(c.next),c=e=C),c=c.next;while(c!==e);gs(e=c,t,i,n,r,a,2)}else if(s===2)e:{s=e;do{for(l=s.next.next;l!==s.prev;){if(c=s.i!==l.i){if(I=l,C=(c=s).next.i!==I.i&&c.prev.i!==I.i){t:{C=c;do{if(C.i!==c.i&&C.next.i!==c.i&&C.i!==I.i&&C.next.i!==I.i&&Hu(C,C.next,c,I)){C=!0;break t}C=C.next}while(C!==c);C=!1}C=!C}if(C=C&&vs(c,I)&&vs(I,c)){C=c,f=!1,g=(c.x+I.x)/2,I=(c.y+I.y)/2;do C.y>I!=C.next.y>I&&C.next.y!==C.y&&g<(C.next.x-C.x)*(I-C.y)/(C.next.y-C.y)+C.x&&(f=!f),C=C.next;while(C!==c);C=f}c=C}if(c){e=Xu(s,l),s=ms(s,s.next),e=ms(e,e.next),gs(s,t,i,n,r,a),gs(e,t,i,n,r,a);break e}l=l.next}s=s.next}while(s!==e)}}else gs(ms(e),t,i,n,r,a,1);break}}}}function Ef(e,t,i,n){var r=e.prev,a=e.next;if(0<=Zi(r,e,a))return!1;var s=r.x>e.x?r.x>a.x?r.x:a.x:e.x>a.x?e.x:a.x,l=r.y>e.y?r.y>a.y?r.y:a.y:e.y>a.y?e.y:a.y,c=th(r.x<e.x?r.x<a.x?r.x:a.x:e.x<a.x?e.x:a.x,r.y<e.y?r.y<a.y?r.y:a.y:e.y<a.y?e.y:a.y,t,i,n);for(t=th(s,l,t,i,n),i=e.prevZ,n=e.nextZ;i&&i.z>=c&&n&&n.z<=t;){if(i!==e.prev&&i!==e.next&&Za(r.x,r.y,e.x,e.y,a.x,a.y,i.x,i.y)&&0<=Zi(i.prev,i,i.next)||(i=i.prevZ,n!==e.prev&&n!==e.next&&Za(r.x,r.y,e.x,e.y,a.x,a.y,n.x,n.y)&&0<=Zi(n.prev,n,n.next)))return!1;n=n.nextZ}for(;i&&i.z>=c;){if(i!==e.prev&&i!==e.next&&Za(r.x,r.y,e.x,e.y,a.x,a.y,i.x,i.y)&&0<=Zi(i.prev,i,i.next))return!1;i=i.prevZ}for(;n&&n.z<=t;){if(n!==e.prev&&n!==e.next&&Za(r.x,r.y,e.x,e.y,a.x,a.y,n.x,n.y)&&0<=Zi(n.prev,n,n.next))return!1;n=n.nextZ}return!0}function Df(e,t){return e.x-t.x}function Nf(e,t){var i=t,n=e.x,r=e.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var l=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!l)return null;if(n===a)return l.prev;t=l,s=l.x;var c=l.y,h=1/0;for(i=l.next;i!==t;){if(n>=i.x&&i.x>=s&&n!==i.x&&Za(r<c?n:a,r,s,c,r<c?a:n,r,i.x,i.y)){var f=Math.abs(r-i.y)/(n-i.x);(f<h||f===h&&i.x>l.x)&&vs(i,e)&&(l=i,h=f)}i=i.next}return l}function th(e,t,i,n,r){return 1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1)|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function If(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Za(e,t,i,n,r,a,s,l){return 0<=(r-s)*(t-l)-(e-s)*(a-l)&&0<=(e-s)*(n-l)-(i-s)*(t-l)&&0<=(i-s)*(a-l)-(r-s)*(n-l)}function Zi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function ta(e,t){return e.x===t.x&&e.y===t.y}function Hu(e,t,i,n){return!!(ta(e,i)&&ta(t,n)||ta(e,n)&&ta(i,t))||0<Zi(e,t,i)!=0<Zi(e,t,n)&&0<Zi(i,n,e)!=0<Zi(i,n,t)}function vs(e,t){return 0>Zi(e.prev,e,e.next)?0<=Zi(e,t,e.next)&&0<=Zi(e,e.prev,t):0>Zi(e,t,e.prev)||0>Zi(e,e.next,t)}function Xu(e,t){var i=new ih(e.i,e.x,e.y),n=new ih(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Yu(e,t,i,n){return e=new ih(e,t,i),n?(e.next=n.next,e.prev=n,n.next.prev=e,n.next=e):(e.prev=e,e.next=e),e}function ys(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ih(e,t,i){this.i=e,this.x=t,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function qu(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function Zu(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function ia(e,t){ht.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Qn(e,t)),this.mergeVertices()}function Qn(e,t){function i(c){function h(Ct,Bt,Ti){return Bt.clone().multiplyScalar(Ti).add(Ct)}function f(Ct,Bt,Ti){var Wt=Ct.x-Bt.x,ei=Ct.y-Bt.y,yi=Ti.x-Ct.x,hi=Ti.y-Ct.y,Hi=Wt*Wt+ei*ei;if(Math.abs(Wt*hi-ei*yi)>Number.EPSILON){var Sr=Math.sqrt(Hi),Mn=Math.sqrt(yi*yi+hi*hi);if(Hi=Bt.x-ei/Sr,Bt=Bt.y+Wt/Sr,2>=(ei=(yi=Hi+Wt*(hi=((Ti.x-hi/Mn-Hi)*hi-(Ti.y+yi/Mn-Bt)*yi)/(Wt*hi-ei*yi))-Ct.x)*yi+(Wt=Bt+ei*hi-Ct.y)*Wt))return new m(yi,Wt);ei=Math.sqrt(ei/2)}else Ct=!1,Wt>Number.EPSILON?yi>Number.EPSILON&&(Ct=!0):Wt<-Number.EPSILON?yi<-Number.EPSILON&&(Ct=!0):Math.sign(ei)===Math.sign(hi)&&(Ct=!0),Ct?(yi=-ei,ei=Math.sqrt(Hi)):(yi=Wt,Wt=ei,ei=Math.sqrt(Hi/2));return new m(yi/ei,Wt/ei)}function g(Ct,Bt){for(ot=Ct.length;0<=--ot;){var Ti=ot,Wt=ot-1;0>Wt&&(Wt=Ct.length-1);var ei,yi=fe+2*bt;for(ei=0;ei<yi;ei++){var hi=_i*ei,Hi=_i*(ei+1),Sr=Bt+Wt+hi,Mn=Bt+Wt+Hi;Hi=Bt+Ti+Hi,C(Bt+Ti+hi),C(Sr),C(Hi),C(Sr),C(Mn),C(Hi),hi=r.length/3,I((hi=Me.generateSideWallUV(n,r,hi-6,hi-3,hi-2,hi-1))[0]),I(hi[1]),I(hi[3]),I(hi[1]),I(hi[2]),I(hi[3])}}}function y(Ct,Bt,Ti){q.push(Ct),q.push(Bt),q.push(Ti)}function L(Ct,Bt,Ti){C(Ct),C(Bt),C(Ti),Ct=r.length/3,I((Ct=Me.generateTopUV(n,r,Ct-3,Ct-2,Ct-1))[0]),I(Ct[1]),I(Ct[2])}function C(Ct){r.push(q[3*Ct]),r.push(q[3*Ct+1]),r.push(q[3*Ct+2])}function I(Ct){a.push(Ct.x),a.push(Ct.y)}var q=[],de=t.curveSegments!==void 0?t.curveSegments:12,fe=t.steps!==void 0?t.steps:1,me=t.depth!==void 0?t.depth:100,xe=t.bevelEnabled===void 0||t.bevelEnabled,ie=t.bevelThickness!==void 0?t.bevelThickness:6,Ne=t.bevelSize!==void 0?t.bevelSize:ie-2,Ve=t.bevelOffset!==void 0?t.bevelOffset:0,bt=t.bevelSegments!==void 0?t.bevelSegments:3,Ue=t.extrudePath,Me=t.UVGenerator!==void 0?t.UVGenerator:rm;t.amount!==void 0&&(me=t.amount);var je,dt=!1;if(Ue){var mt=Ue.getSpacedPoints(fe);dt=!0,xe=!1;var Et=Ue.computeFrenetFrames(fe,!1),V=new u,J=new u,De=new u}xe||(Ve=Ne=ie=bt=0),de=c.extractPoints(de),c=de.shape;var tt=de.holes;if(!wr.isClockWise(c)){c=c.reverse();var ft=0;for(je=tt.length;ft<je;ft++){var gt=tt[ft];wr.isClockWise(gt)&&(tt[ft]=gt.reverse())}}var ri=wr.triangulateShape(c,tt),Zt=c;for(ft=0,je=tt.length;ft<je;ft++)gt=tt[ft],c=c.concat(gt);var Nt,qt,_i=c.length,Gi=ri.length;de=[];var ot=0,ae=Zt.length,St=ae-1;for(Nt=ot+1;ot<ae;ot++,St++,Nt++)St===ae&&(St=0),Nt===ae&&(Nt=0),de[ot]=f(Zt[ot],Zt[St],Zt[Nt]);Ue=[];var Xt=de.concat();for(ft=0,je=tt.length;ft<je;ft++){gt=tt[ft];var vi=[];for(ot=0,St=(ae=gt.length)-1,Nt=ot+1;ot<ae;ot++,St++,Nt++)St===ae&&(St=0),Nt===ae&&(Nt=0),vi[ot]=f(gt[ot],gt[St],gt[Nt]);Ue.push(vi),Xt=Xt.concat(vi)}for(St=0;St<bt;St++){ae=St/bt;var Ft=ie*Math.cos(ae*Math.PI/2);for(Nt=Ne*Math.sin(ae*Math.PI/2)+Ve,ot=0,ae=Zt.length;ot<ae;ot++){var jt=h(Zt[ot],de[ot],Nt);y(jt.x,jt.y,-Ft)}for(ft=0,je=tt.length;ft<je;ft++)for(gt=tt[ft],vi=Ue[ft],ot=0,ae=gt.length;ot<ae;ot++)y((jt=h(gt[ot],vi[ot],Nt)).x,jt.y,-Ft)}for(Nt=Ne+Ve,ot=0;ot<_i;ot++)jt=xe?h(c[ot],Xt[ot],Nt):c[ot],dt?(J.copy(Et.normals[0]).multiplyScalar(jt.x),V.copy(Et.binormals[0]).multiplyScalar(jt.y),De.copy(mt[0]).add(J).add(V),y(De.x,De.y,De.z)):y(jt.x,jt.y,0);for(ae=1;ae<=fe;ae++)for(ot=0;ot<_i;ot++)jt=xe?h(c[ot],Xt[ot],Nt):c[ot],dt?(J.copy(Et.normals[ae]).multiplyScalar(jt.x),V.copy(Et.binormals[ae]).multiplyScalar(jt.y),De.copy(mt[ae]).add(J).add(V),y(De.x,De.y,De.z)):y(jt.x,jt.y,me/fe*ae);for(St=bt-1;0<=St;St--){for(ae=St/bt,Ft=ie*Math.cos(ae*Math.PI/2),Nt=Ne*Math.sin(ae*Math.PI/2)+Ve,ot=0,ae=Zt.length;ot<ae;ot++)y((jt=h(Zt[ot],de[ot],Nt)).x,jt.y,me+Ft);for(ft=0,je=tt.length;ft<je;ft++)for(gt=tt[ft],vi=Ue[ft],ot=0,ae=gt.length;ot<ae;ot++)jt=h(gt[ot],vi[ot],Nt),dt?y(jt.x,jt.y+mt[fe-1].y,mt[fe-1].x+Ft):y(jt.x,jt.y,me+Ft)}(function(){var Ct=r.length/3;if(xe){var Bt=0*_i;for(ot=0;ot<Gi;ot++)L((qt=ri[ot])[2]+Bt,qt[1]+Bt,qt[0]+Bt);for(Bt=_i*(fe+2*bt),ot=0;ot<Gi;ot++)L((qt=ri[ot])[0]+Bt,qt[1]+Bt,qt[2]+Bt)}else{for(ot=0;ot<Gi;ot++)L((qt=ri[ot])[2],qt[1],qt[0]);for(ot=0;ot<Gi;ot++)L((qt=ri[ot])[0]+_i*fe,qt[1]+_i*fe,qt[2]+_i*fe)}n.addGroup(Ct,r.length/3-Ct,0)})(),function(){var Ct=r.length/3,Bt=0;for(g(Zt,Bt),Bt+=Zt.length,ft=0,je=tt.length;ft<je;ft++)g(gt=tt[ft],Bt),Bt+=gt.length;n.addGroup(Ct,r.length/3-Ct,1)}()}ze.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],a=[],s=0,l=e.length;s<l;s++)i(e[s]);this.addAttribute("position",new ve(r,3)),this.addAttribute("uv",new ve(a,2)),this.computeVertexNormals()}function Ju(e,t,i){if(i.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)i.shapes.push(e[n].uuid);else i.shapes.push(e.uuid);return t.extrudePath!==void 0&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function _s(e,t){ht.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ja(e,t)),this.mergeVertices()}function Ja(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return new ht;e=i.generateShapes(e,t.size),t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),Qn.call(this,e,t),this.type="TextBufferGeometry"}function xs(e,t,i,n,r,a,s){ht.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Er(e,t,i,n,r,a,s)),this.mergeVertices()}function Er(e,t,i,n,r,a,s){ze.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=n!==void 0?n:0,r=r!==void 0?r:2*Math.PI,a=a!==void 0?a:0,s=s!==void 0?s:Math.PI;var l,c,h=Math.min(a+s,Math.PI),f=0,g=[],y=new u,L=new u,C=[],I=[],q=[],de=[];for(c=0;c<=i;c++){var fe=[],me=c/i,xe=0;for(c==0&&a==0?xe=.5/t:c==i&&h==Math.PI&&(xe=-.5/t),l=0;l<=t;l++){var ie=l/t;y.x=-e*Math.cos(n+ie*r)*Math.sin(a+me*s),y.y=e*Math.cos(a+me*s),y.z=e*Math.sin(n+ie*r)*Math.sin(a+me*s),I.push(y.x,y.y,y.z),L.copy(y).normalize(),q.push(L.x,L.y,L.z),de.push(ie+xe,1-me),fe.push(f++)}g.push(fe)}for(c=0;c<i;c++)for(l=0;l<t;l++)e=g[c][l+1],n=g[c][l],r=g[c+1][l],s=g[c+1][l+1],(c!==0||0<a)&&C.push(e,n,s),(c!==i-1||h<Math.PI)&&C.push(n,r,s);this.setIndex(C),this.addAttribute("position",new ve(I,3)),this.addAttribute("normal",new ve(q,3)),this.addAttribute("uv",new ve(de,2))}function bs(e,t,i,n,r,a){ht.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Qa(e,t,i,n,r,a)),this.mergeVertices()}function Qa(e,t,i,n,r,a){ze.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=r!==void 0?r:0,a=a!==void 0?a:2*Math.PI,i=i!==void 0?Math.max(3,i):8;var s,l,c=[],h=[],f=[],g=[],y=e,L=(t-e)/(n=n!==void 0?Math.max(1,n):1),C=new u,I=new m;for(s=0;s<=n;s++){for(l=0;l<=i;l++)e=r+l/i*a,C.x=y*Math.cos(e),C.y=y*Math.sin(e),h.push(C.x,C.y,C.z),f.push(0,0,1),I.x=(C.x/t+1)/2,I.y=(C.y/t+1)/2,g.push(I.x,I.y);y+=L}for(s=0;s<n;s++)for(t=s*(i+1),l=0;l<i;l++)r=(e=l+t)+i+1,a=e+i+2,y=e+1,c.push(e,r,y),c.push(r,a,y);this.setIndex(c),this.addAttribute("position",new ve(h,3)),this.addAttribute("normal",new ve(f,3)),this.addAttribute("uv",new ve(g,2))}function ws(e,t,i,n){ht.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new $a(e,t,i,n)),this.mergeVertices()}function $a(e,t,i,n){ze.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=Ht.clamp(n,0,2*Math.PI);var r,a=[],s=[],l=[],c=1/t,h=new u,f=new m;for(r=0;r<=t;r++){var g=i+r*c*n,y=Math.sin(g),L=Math.cos(g);for(g=0;g<=e.length-1;g++)h.x=e[g].x*y,h.y=e[g].y,h.z=e[g].x*L,s.push(h.x,h.y,h.z),f.x=r/t,f.y=g/(e.length-1),l.push(f.x,f.y)}for(r=0;r<t;r++)for(g=0;g<e.length-1;g++)c=(i=g+r*e.length)+e.length,h=i+e.length+1,f=i+1,a.push(i,c,f),a.push(c,h,f);if(this.setIndex(a),this.addAttribute("position",new ve(s,3)),this.addAttribute("uv",new ve(l,2)),this.computeVertexNormals(),n===2*Math.PI)for(n=this.attributes.normal.array,a=new u,s=new u,l=new u,i=t*e.length*3,g=r=0;r<e.length;r++,g+=3)a.x=n[g+0],a.y=n[g+1],a.z=n[g+2],s.x=n[i+g+0],s.y=n[i+g+1],s.z=n[i+g+2],l.addVectors(a,s).normalize(),n[g+0]=n[i+g+0]=l.x,n[g+1]=n[i+g+1]=l.y,n[g+2]=n[i+g+2]=l.z}function na(e,t){ht.call(this),this.type="ShapeGeometry",typeof t=="object"&&(t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ra(e,t)),this.mergeVertices()}function ra(e,t){function i(f){var g,y=r.length/3,L=(f=f.extractPoints(t)).shape,C=f.holes;for(wr.isClockWise(L)===!1&&(L=L.reverse()),f=0,g=C.length;f<g;f++){var I=C[f];wr.isClockWise(I)===!0&&(C[f]=I.reverse())}var q=wr.triangulateShape(L,C);for(f=0,g=C.length;f<g;f++)I=C[f],L=L.concat(I);for(f=0,g=L.length;f<g;f++)I=L[f],r.push(I.x,I.y,0),a.push(0,0,1),s.push(I.x,I.y);for(f=0,g=q.length;f<g;f++)L=q[f],n.push(L[0]+y,L[1]+y,L[2]+y),c+=3}ze.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],a=[],s=[],l=0,c=0;if(Array.isArray(e)===!1)i(e);else for(var h=0;h<e.length;h++)i(e[h]),this.addGroup(l,c,h),l+=c,c=0;this.setIndex(n),this.addAttribute("position",new ve(r,3)),this.addAttribute("normal",new ve(a,3)),this.addAttribute("uv",new ve(s,2))}function Qu(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++)t.shapes.push(e[i].uuid);else t.shapes.push(e.uuid);return t}function Ka(e,t){ze.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var i=[];t=Math.cos(Ht.DEG2RAD*(t!==void 0?t:1));var n=[0,0],r={},a=["a","b","c"];if(e.isBufferGeometry){var s=new ht;s.fromBufferGeometry(e)}else s=e.clone();s.mergeVertices(),s.computeFaceNormals(),e=s.vertices;for(var l=0,c=(s=s.faces).length;l<c;l++)for(var h=s[l],f=0;3>f;f++){var g=h[a[f]],y=h[a[(f+1)%3]];n[0]=Math.min(g,y),n[1]=Math.max(g,y),r[g=n[0]+","+n[1]]===void 0?r[g]={index1:n[0],index2:n[1],face1:l,face2:void 0}:r[g].face2=l}for(g in r)((n=r[g]).face2===void 0||s[n.face1].normal.dot(s[n.face2].normal)<=t)&&(a=e[n.index1],i.push(a.x,a.y,a.z),a=e[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new ve(i,3))}function aa(e,t,i,n,r,a,s,l){ht.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l},this.fromBufferGeometry(new dr(e,t,i,n,r,a,s,l)),this.mergeVertices()}function dr(e,t,i,n,r,a,s,l){function c(fe){var me,xe=new m,ie=new u,Ne=0,Ve=fe===!0?e:t,bt=fe===!0?1:-1,Ue=C;for(me=1;me<=n;me++)g.push(0,q*bt,0),y.push(0,bt,0),L.push(.5,.5),C++;var Me=C;for(me=0;me<=n;me++){var je=me/n*l+s,dt=Math.cos(je);je=Math.sin(je),ie.x=Ve*je,ie.y=q*bt,ie.z=Ve*dt,g.push(ie.x,ie.y,ie.z),y.push(0,bt,0),xe.x=.5*dt+.5,xe.y=.5*je*bt+.5,L.push(xe.x,xe.y),C++}for(me=0;me<n;me++)xe=Ue+me,ie=Me+me,fe===!0?f.push(ie,ie+1,xe):f.push(ie+1,ie,xe),Ne+=3;h.addGroup(de,Ne,fe===!0?1:2),de+=Ne}ze.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:l};var h=this;e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,a=a!==void 0&&a,s=s!==void 0?s:0,l=l!==void 0?l:2*Math.PI;var f=[],g=[],y=[],L=[],C=0,I=[],q=i/2,de=0;(function(){var fe,me,xe=new u,ie=new u,Ne=0,Ve=(t-e)/i;for(me=0;me<=r;me++){var bt=[],Ue=me/r,Me=Ue*(t-e)+e;for(fe=0;fe<=n;fe++){var je=fe/n,dt=je*l+s,mt=Math.sin(dt);dt=Math.cos(dt),ie.x=Me*mt,ie.y=-Ue*i+q,ie.z=Me*dt,g.push(ie.x,ie.y,ie.z),xe.set(mt,Ve,dt).normalize(),y.push(xe.x,xe.y,xe.z),L.push(je,1-Ue),bt.push(C++)}I.push(bt)}for(fe=0;fe<n;fe++)for(me=0;me<r;me++)xe=I[me+1][fe],ie=I[me+1][fe+1],Ve=I[me][fe+1],f.push(I[me][fe],xe,Ve),f.push(xe,ie,Ve),Ne+=6;h.addGroup(de,Ne,0),de+=Ne})(),a===!1&&(0<e&&c(!0),0<t&&c(!1)),this.setIndex(f),this.addAttribute("position",new ve(g,3)),this.addAttribute("normal",new ve(y,3)),this.addAttribute("uv",new ve(L,2))}function Ms(e,t,i,n,r,a,s){aa.call(this,0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Ss(e,t,i,n,r,a,s){dr.call(this,0,e,t,i,n,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Ts(e,t,i,n){ht.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new eo(e,t,i,n)),this.mergeVertices()}function eo(e,t,i,n){ze.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||1,t=t!==void 0?Math.max(3,t):8,i=i!==void 0?i:0,n=n!==void 0?n:2*Math.PI;var r,a=[],s=[],l=[],c=[],h=new u,f=new m;s.push(0,0,0),l.push(0,0,1),c.push(.5,.5);var g=0;for(r=3;g<=t;g++,r+=3){var y=i+g/t*n;h.x=e*Math.cos(y),h.y=e*Math.sin(y),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(s[r]/e+1)/2,f.y=(s[r+1]/e+1)/2,c.push(f.x,f.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new ve(s,3)),this.addAttribute("normal",new ve(l,3)),this.addAttribute("uv",new ve(c,2))}function oa(e){M.call(this),this.type="ShadowMaterial",this.color=new S(0),this.transparent=!0,this.setValues(e)}function to(e){Ge.call(this,e),this.type="RawShaderMaterial"}function $n(e){M.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new S(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new S(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new m(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function sa(e){$n.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoatRoughness=this.clearcoat=0,this.sheen=null,this.clearcoatNormalScale=new m(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Ln(e){M.call(this),this.type="MeshPhongMaterial",this.color=new S(16777215),this.specular=new S(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new S(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new m(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function la(e){Ln.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function ca(e){M.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new m(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function ha(e){M.call(this),this.type="MeshLambertMaterial",this.color=new S(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new S(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function ua(e){M.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new S(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new m(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function pa(e){gi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function vn(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function pl(e,t,i,n){vn.call(this,e,t,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function As(e,t,i,n){vn.call(this,e,t,i,n)}function dl(e,t,i,n){vn.call(this,e,t,i,n)}function Ji(e,t,i,n){if(e===void 0)throw Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wi.convertArray(t,this.TimeBufferType),this.values=Wi.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function fl(e,t,i){Ji.call(this,e,t,i)}function ml(e,t,i,n){Ji.call(this,e,t,i,n)}function io(e,t,i,n){Ji.call(this,e,t,i,n)}function gl(e,t,i,n){vn.call(this,e,t,i,n)}function Ps(e,t,i,n){Ji.call(this,e,t,i,n)}function vl(e,t,i,n){Ji.call(this,e,t,i,n)}function no(e,t,i,n){Ji.call(this,e,t,i,n)}function bn(e,t,i){this.name=e,this.tracks=i,this.duration=t!==void 0?t:-1,this.uuid=Ht.generateUUID(),0>this.duration&&this.resetDuration()}function Rf(e){if(e.type===void 0)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return io;case"vector":case"vector2":case"vector3":case"vector4":return no;case"color":return ml;case"quaternion":return Ps;case"bool":case"boolean":return fl;case"string":return vl}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}(e.type);if(e.times===void 0){var i=[],n=[];Wi.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function nh(e,t,i){var n=this,r=!1,a=0,s=0,l=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){s++,r===!1&&n.onStart!==void 0&&n.onStart(c,a,s),r=!0},this.itemEnd=function(c){a++,n.onProgress!==void 0&&n.onProgress(c,a,s),a===s&&(r=!1,n.onLoad!==void 0)&&n.onLoad()},this.itemError=function(c){n.onError!==void 0&&n.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this}}function di(e){this.manager=e!==void 0?e:Up,this.crossOrigin="anonymous",this.resourcePath=this.path=""}function wn(e){di.call(this,e)}function rh(e){di.call(this,e)}function ah(e){di.call(this,e),this._parser=null}function yl(e){di.call(this,e),this._parser=null}function ro(e){di.call(this,e)}function _l(e){di.call(this,e)}function xl(e){di.call(this,e)}function Dt(){this.type="Curve",this.arcLengthDivisions=200}function yn(e,t,i,n,r,a,s,l){Dt.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=l||0}function ao(e,t,i,n,r,a){yn.call(this,e,t,i,i,n,r,a),this.type="ArcCurve"}function oh(){var e=0,t=0,i=0,n=0;return{initCatmullRom:function(r,a,s,l,c){e=a,t=r=c*(s-r),i=-3*a+3*s-2*r-(l=c*(l-a)),n=2*a-2*s+r+l},initNonuniformCatmullRom:function(r,a,s,l,c,h,f){e=a,t=r=((a-r)/c-(s-r)/(c+h)+(s-a)/h)*h,i=-3*a+3*s-2*r-(l=((s-a)/h-(l-a)/(h+f)+(l-s)/f)*h),n=2*a-2*s+r+l},calc:function(r){var a=r*r;return e+t*r+i*a+n*a*r}}}function $i(e,t,i,n){Dt.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function $u(e,t,i,n,r){var a=e*e;return(2*i-2*n+(t=.5*(n-t))+(r=.5*(r-i)))*e*a+(-3*i+3*n-2*t-r)*a+t*e+i}function Cs(e,t,i,n){var r=1-e;return r*r*t+2*(1-e)*e*i+e*e*n}function Ls(e,t,i,n,r){var a=1-e,s=1-e;return a*a*a*t+3*s*s*e*i+3*(1-e)*e*e*n+e*e*e*r}function On(e,t,i,n){Dt.call(this),this.type="CubicBezierCurve",this.v0=e||new m,this.v1=t||new m,this.v2=i||new m,this.v3=n||new m}function Kn(e,t,i,n){Dt.call(this),this.type="CubicBezierCurve3",this.v0=e||new u,this.v1=t||new u,this.v2=i||new u,this.v3=n||new u}function pn(e,t){Dt.call(this),this.type="LineCurve",this.v1=e||new m,this.v2=t||new m}function En(e,t){Dt.call(this),this.type="LineCurve3",this.v1=e||new u,this.v2=t||new u}function Dn(e,t,i){Dt.call(this),this.type="QuadraticBezierCurve",this.v0=e||new m,this.v1=t||new m,this.v2=i||new m}function er(e,t,i){Dt.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new u,this.v1=t||new u,this.v2=i||new u}function Nn(e){Dt.call(this),this.type="SplineCurve",this.points=e||[]}function fr(){Dt.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function In(e){fr.call(this),this.type="Path",this.currentPoint=new m,e&&this.setFromPoints(e)}function Dr(e){In.call(this,e),this.uuid=Ht.generateUUID(),this.type="Shape",this.holes=[]}function Si(e,t){Q.call(this),this.type="Light",this.color=new S(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}function bl(e,t,i){Si.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Q.DefaultUp),this.updateMatrix(),this.groundColor=new S(t)}function tr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new m(512,512),this.mapPass=this.map=null,this.matrix=new G,this._frustum=new rt,this._frameExtents=new m(1,1),this._viewportCount=1,this._viewports=[new R(0,0,1,1)]}function wl(){tr.call(this,new Se(50,1,.5,500))}function Ml(e,t,i,n,r,a){Si.call(this,e,t),this.type="SpotLight",this.position.copy(Q.DefaultUp),this.updateMatrix(),this.target=new Q,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(s){this.intensity=s/Math.PI}}),this.distance=i!==void 0?i:0,this.angle=n!==void 0?n:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=a!==void 0?a:1,this.shadow=new wl}function sh(){tr.call(this,new Se(90,1,.5,500)),this._frameExtents=new m(4,2),this._viewportCount=6,this._viewports=[new R(2,1,1,1),new R(0,1,1,1),new R(3,1,1,1),new R(1,1,1,1),new R(3,0,1,1),new R(1,0,1,1)],this._cubeDirections=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],this._cubeUps=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)]}function Sl(e,t,i,n){Si.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=i!==void 0?i:0,this.decay=n!==void 0?n:1,this.shadow=new sh}function Os(e,t,i,n,r,a){Oe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=i!==void 0?i:1,this.bottom=n!==void 0?n:-1,this.near=r!==void 0?r:.1,this.far=a!==void 0?a:2e3,this.updateProjectionMatrix()}function Tl(){tr.call(this,new Os(-5,5,5,-5,.5,500))}function Al(e,t){Si.call(this,e,t),this.type="DirectionalLight",this.position.copy(Q.DefaultUp),this.updateMatrix(),this.target=new Q,this.shadow=new Tl}function Pl(e,t){Si.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Cl(e,t,i,n){Si.call(this,e,t),this.type="RectAreaLight",this.width=i!==void 0?i:10,this.height=n!==void 0?n:10}function Ll(e){di.call(this,e),this.textures={}}function Ol(){ze.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function El(e,t,i,n){typeof i=="number"&&(n=i,i=!1),w.call(this,e,t,i),this.meshPerAttribute=n||1}function Dl(e){di.call(this,e)}function Nl(e){di.call(this,e)}function lh(e){di.call(this,e),this.options=void 0}function ch(){this.type="ShapePath",this.color=new S,this.subPaths=[],this.currentPath=null}function hh(e){this.type="Font",this.data=e}function uh(e){di.call(this,e)}function Il(e){di.call(this,e)}function Rl(){this.coefficients=[];for(var e=0;9>e;e++)this.coefficients.push(new u)}function Rn(e,t){Si.call(this,void 0,t),this.sh=e!==void 0?e:new Rl}function ph(e,t,i){Rn.call(this,void 0,i),e=new S().set(e),i=new S().set(t),t=new u(e.r,e.g,e.b),e=new u(i.r,i.g,i.b);var n=(i=Math.sqrt(Math.PI))*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(e).multiplyScalar(i),this.sh.coefficients[1].copy(t).sub(e).multiplyScalar(n)}function dh(e,t){Rn.call(this,void 0,t),e=new S().set(e),this.sh.coefficients[0].set(e.r,e.g,e.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Ku(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Se,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Se,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function fh(e){this.autoStart=e===void 0||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function mh(){Q.call(this),this.type="AudioListener",this.context=Jh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fh}function oo(e){Q.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function gh(e){oo.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function vh(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function yh(e,t,i){switch(this.binding=e,this.valueSize=i,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*i),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function ep(e,t,i){i=i||Ki.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Ki(e,t,i){this.path=t,this.parsedPath=i||Ki.parseTrackName(t),this.node=Ki.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function tp(){this.uuid=Ht.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function ip(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null,t=(e=t.tracks).length,i=Array(t);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==t;++r){var a=e[r].createInterpolant(null);i[r]=a,a.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function _h(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function zl(e,t){typeof e=="string"&&(e=t),this.value=e}function xh(e,t,i){ii.call(this,e,t),this.meshPerAttribute=i||1}function np(e,t,i,n){this.ray=new se(e,t),this.near=i||0,this.far=n||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function rp(e,t){return e.distance-t.distance}function bh(e,t,i,n){if(e.visible!==!1&&(e.raycast(t,i),n===!0)){n=0;for(var r=(e=e.children).length;n<r;n++)bh(e[n],t,i,!0)}}function ap(e,t,i){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=i!==void 0?i:0,this}function op(e,t,i){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=i!==void 0?i:0,this}function wh(e,t){this.min=e!==void 0?e:new m(1/0,1/0),this.max=t!==void 0?t:new m(-1/0,-1/0)}function Mh(e,t){this.start=e!==void 0?e:new u,this.end=t!==void 0?t:new u}function Es(e){Q.call(this),this.material=e,this.render=function(){}}function Ds(e,t,i,n){this.object=e,this.size=t!==void 0?t:1,e=i!==void 0?i:16711680,n=n!==void 0?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=3*i.faces.length:i&&i.isBufferGeometry&&(t=i.attributes.normal.count),i=new ze,t=new ve(6*t,3),i.addAttribute("position",t),wi.call(this,i,new gi({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function so(e,t){Q.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new ze,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;t.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new ve(t,3)),t=new gi({fog:!1}),this.cone=new wi(e,t),this.add(this.cone),this.update()}function sp(e){var t=[];e&&e.isBone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,sp(e.children[i]));return t}function lo(e){for(var t=sp(e),i=new ze,n=[],r=[],a=new S(0,0,1),s=new S(0,1,0),l=0;l<t.length;l++){var c=t[l];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.addAttribute("position",new ve(n,3)),i.addAttribute("color",new ve(r,3)),n=new gi({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),wi.call(this,i,n),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function co(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i,e=new Er(t,4,2),t=new X({wireframe:!0,fog:!1}),st.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ho(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t,(e=new ze).addAttribute("position",new ve([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),e.computeBoundingSphere(),t=new gi({fog:!1}),qi.call(this,e,t),(e=new ze).addAttribute("position",new ve([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),e.computeBoundingSphere(),this.add(new st(e,new X({side:1,fog:!1}))),this.update()}function uo(e,t,i){Q.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(e=new Kr(t)).rotateY(.5*Math.PI),this.material=new X({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new w(t,3)),this.add(new st(e,this.material)),this.update()}function po(e,t){this.lightProbe=e,this.size=t,e=new Ge({defines:{GAMMA_OUTPUT:""},uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:`varying vec3 vNormal;
void main() {
	vNormal = normalize( normalMatrix * normal );
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`#define RECIPROCAL_PI 0.318309886
vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {
	// matrix is assumed to be orthogonal
	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );
}
vec3 linearToOutput( in vec3 a ) {
	#ifdef GAMMA_OUTPUT
		return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );
	#else
		return a;
	#endif
}
// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	// normal is assumed to have unit length
	float x = normal.x, y = normal.y, z = normal.z;
	// band 0
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	// band 1
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	// band 2
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
uniform vec3 sh[ 9 ]; // sh coefficients
uniform float intensity; // light probe intensity
varying vec3 vNormal;
void main() {
	vec3 normal = normalize( vNormal );
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, sh );
	vec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;
	outgoingLight = linearToOutput( outgoingLight );
	gl_FragColor = vec4( outgoingLight, 1.0 );
}`}),t=new Er(1,32,16),st.call(this,t,e),this.onBeforeRender()}function Fl(e,t,i,n){e=e||10,t=t||10,i=new S(i!==void 0?i:4473924),n=new S(n!==void 0?n:8947848);var r=t/2,a=e/t,s=e/2;e=[];for(var l=[],c=0,h=0,f=-s;c<=t;c++,f+=a){e.push(-s,0,f,s,0,f),e.push(f,0,-s,f,0,s);var g=c===r?i:n;g.toArray(l,h),h+=3,g.toArray(l,h),h+=3,g.toArray(l,h),h+=3,g.toArray(l,h),h+=3}(t=new ze).addAttribute("position",new ve(e,3)),t.addAttribute("color",new ve(l,3)),i=new gi({vertexColors:2}),wi.call(this,t,i)}function kl(e,t,i,n,r,a){e=e||10,t=t||16,i=i||8,n=n||64,r=new S(r!==void 0?r:4473924),a=new S(a!==void 0?a:8947848);var s,l=[],c=[];for(s=0;s<=t;s++){var h=s/t*2*Math.PI,f=Math.sin(h)*e;h=Math.cos(h)*e,l.push(0,0,0),l.push(f,0,h);var g=1&s?r:a;c.push(g.r,g.g,g.b),c.push(g.r,g.g,g.b)}for(s=0;s<=i;s++){g=1&s?r:a;var y=e-e/i*s;for(t=0;t<n;t++)h=t/n*2*Math.PI,f=Math.sin(h)*y,h=Math.cos(h)*y,l.push(f,0,h),c.push(g.r,g.g,g.b),h=(t+1)/n*2*Math.PI,f=Math.sin(h)*y,h=Math.cos(h)*y,l.push(f,0,h),c.push(g.r,g.g,g.b)}(e=new ze).addAttribute("position",new ve(l,3)),e.addAttribute("color",new ve(c,3)),l=new gi({vertexColors:2}),wi.call(this,e,l)}function fo(e,t,i,n){this.audio=e,this.range=t||1,this.divisionsInnerAngle=i||16,this.divisionsOuterAngle=n||2,e=new ze,t=new Float32Array(3*(3*(this.divisionsInnerAngle+2*this.divisionsOuterAngle)+3)),e.addAttribute("position",new w(t,3)),t=new gi({color:65280}),i=new gi({color:16776960}),qi.call(this,e,[i,t]),this.update()}function Ns(e,t,i,n){this.object=e,this.size=t!==void 0?t:1,e=i!==void 0?i:16776960,n=n!==void 0?n:1,t=0,(i=this.object.geometry)&&i.isGeometry&&(t=i.faces.length),i=new ze,t=new ve(6*t,3),i.addAttribute("position",t),wi.call(this,i,new gi({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function mo(e,t,i){Q.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1),(e=new ze).addAttribute("position",new ve([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new gi({fog:!1}),this.lightPlane=new qi(e,t),this.add(this.lightPlane),(e=new ze).addAttribute("position",new ve([0,0,0,0,0,1],3)),this.targetLine=new qi(e,t),this.add(this.targetLine),this.update()}function Is(e){function t(L,C,I){i(L,I),i(C,I)}function i(L,C){a.push(0,0,0),s.push(C.r,C.g,C.b),l[L]===void 0&&(l[L]=[]),l[L].push(a.length/3-1)}var n=new ze,r=new gi({color:16777215,vertexColors:1}),a=[],s=[],l={},c=new S(16755200),h=new S(16711680),f=new S(43775),g=new S(16777215),y=new S(3355443);t("n1","n2",c),t("n2","n4",c),t("n4","n3",c),t("n3","n1",c),t("f1","f2",c),t("f2","f4",c),t("f4","f3",c),t("f3","f1",c),t("n1","f1",c),t("n2","f2",c),t("n3","f3",c),t("n4","f4",c),t("p","n1",h),t("p","n2",h),t("p","n3",h),t("p","n4",h),t("u1","u2",f),t("u2","u3",f),t("u3","u1",f),t("c","t",g),t("p","c",y),t("cn1","cn2",y),t("cn3","cn4",y),t("cf1","cf2",y),t("cf3","cf4",y),n.addAttribute("position",new ve(a,3)),n.addAttribute("color",new ve(s,3)),wi.call(this,n,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update()}function zi(e,t,i,n,r,a,s){if(uc.set(r,a,s).unproject(n),(e=t[e])!==void 0)for(i=i.getAttribute("position"),t=0,n=e.length;t<n;t++)i.setXYZ(e[t],uc.x,uc.y,uc.z)}function mr(e,t){this.object=e,t===void 0&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new ze;n.setIndex(new w(e,1)),n.addAttribute("position",new w(i,3)),wi.call(this,n,new gi({color:t})),this.matrixAutoUpdate=!1,this.update()}function Rs(e,t){this.type="Box3Helper",this.box=e,t=t||16776960,e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new ze;i.setIndex(new w(e,1)),i.addAttribute("position",new ve([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),wi.call(this,i,new gi({color:t})),this.geometry.computeBoundingSphere()}function zs(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=t===void 0?1:t,e=i!==void 0?i:16776960,(t=new ze).addAttribute("position",new ve([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),qi.call(this,t,new gi({color:e})),(t=new ze).addAttribute("position",new ve([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new st(t,new X({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function gr(e,t,i,n,r,a){Q.call(this),e===void 0&&(e=new u(0,0,1)),t===void 0&&(t=new u(0,0,0)),i===void 0&&(i=1),n===void 0&&(n=16776960),r===void 0&&(r=.2*i),a===void 0&&(a=.2*r),Kh===void 0&&((Kh=new ze).addAttribute("position",new ve([0,0,0,0,1,0],3)),(td=new dr(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new qi(Kh,new gi({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new st(td,new X({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}function Fs(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e];(e=new ze).addAttribute("position",new ve(t,3)),e.addAttribute("color",new ve([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new gi({vertexColors:2}),wi.call(this,e,t)}function lp(e){$i.call(this,e),this.type="catmullrom",this.closed=!0}function cp(e){$i.call(this,e),this.type="catmullrom"}function Sh(e){$i.call(this,e),this.type="catmullrom"}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}),Math.sign===void 0&&(Math.sign=function(e){return 0>e?-1:0<e?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Object.assign(p.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1},removeEventListener:function(e,t){this._listeners!==void 0&&(e=this._listeners[e])!==void 0&&(t=e.indexOf(t))!==-1&&e.splice(t,1)},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners[e.type];if(t!==void 0){e.target=this;for(var i=0,n=(t=t.slice(0)).length;i<n;i++)t[i].call(this,e)}}}});for(var Qi=[],ks=0;256>ks;ks++)Qi[ks]=(16>ks?"0":"")+ks.toString(16);var Ht={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Qi[255&e]+Qi[e>>8&255]+Qi[e>>16&255]+Qi[e>>24&255]+"-"+Qi[255&t]+Qi[t>>8&255]+"-"+Qi[t>>16&15|64]+Qi[t>>24&255]+"-"+Qi[63&i|128]+Qi[i>>8&255]+"-"+Qi[i>>16&255]+Qi[i>>24&255]+Qi[255&n]+Qi[n>>8&255]+Qi[n>>16&255]+Qi[n>>24&255]).toUpperCase()},clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ht.DEG2RAD},radToDeg:function(e){return e*Ht.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)==0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(m.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(m.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return t*t+(e=this.y-e.y)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}}),Object.assign(T,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,a,s){var l=i[n+0],c=i[n+1],h=i[n+2];i=i[n+3],n=r[a+0];var f=r[a+1],g=r[a+2];if(i!==(r=r[a+3])||l!==n||c!==f||h!==g){a=1-s;var y=l*n+c*f+h*g+i*r,L=0<=y?1:-1,C=1-y*y;C>Number.EPSILON&&(C=Math.sqrt(C),y=Math.atan2(C,y*L),a=Math.sin(a*y)/C,s=Math.sin(s*y)/C),l=l*a+n*(L*=s),c=c*a+f*L,h=h*a+g*L,i=i*a+r*L,a===1-s&&(l*=s=1/Math.sqrt(l*l+c*c+h*h+i*i),c*=s,h*=s,i*=s)}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=i}}),Object.defineProperties(T.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(T.prototype,{isQuaternion:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z;e=e.order;var a=Math.cos,s=Math.sin,l=a(i/2),c=a(n/2);return a=a(r/2),i=s(i/2),n=s(n/2),r=s(r/2),e==="XYZ"?(this._x=i*c*a+l*n*r,this._y=l*n*a-i*c*r,this._z=l*c*r+i*n*a,this._w=l*c*a-i*n*r):e==="YXZ"?(this._x=i*c*a+l*n*r,this._y=l*n*a-i*c*r,this._z=l*c*r-i*n*a,this._w=l*c*a+i*n*r):e==="ZXY"?(this._x=i*c*a-l*n*r,this._y=l*n*a+i*c*r,this._z=l*c*r+i*n*a,this._w=l*c*a-i*n*r):e==="ZYX"?(this._x=i*c*a-l*n*r,this._y=l*n*a+i*c*r,this._z=l*c*r-i*n*a,this._w=l*c*a+i*n*r):e==="YZX"?(this._x=i*c*a+l*n*r,this._y=l*n*a+i*c*r,this._z=l*c*r-i*n*a,this._w=l*c*a-i*n*r):e==="XZY"&&(this._x=i*c*a-l*n*r,this._y=l*n*a-i*c*r,this._z=l*c*r+i*n*a,this._w=l*c*a+i*n*r),t!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var n=t[8],r=t[1],a=t[5],s=t[9],l=t[2],c=t[6],h=i+a+(t=t[10]);return 0<h?(i=.5/Math.sqrt(h+1),this._w=.25/i,this._x=(c-s)*i,this._y=(n-l)*i,this._z=(r-e)*i):i>a&&i>t?(i=2*Math.sqrt(1+i-a-t),this._w=(c-s)/i,this._x=.25*i,this._y=(e+r)/i,this._z=(n+l)/i):a>t?(i=2*Math.sqrt(1+a-i-t),this._w=(n-l)/i,this._x=(e+r)/i,this._y=.25*i,this._z=(s+c)/i):(i=2*Math.sqrt(1+t-i-a),this._w=(r-e)/i,this._x=(n+l)/i,this._y=(s+c)/i,this._z=.25*i),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var i=e.dot(t)+1;return 1e-6>i?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=i,this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Ht.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var i=this.angleTo(e);return i===0||this.slerp(e,Math.min(1,t/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this._onChangeCallback(),this},multiply:function(e,t){return t!==void 0?this.multiplyQuaternions(e,t):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z;e=e._w;var a=t._x,s=t._y,l=t._z;return t=t._w,this._x=i*t+e*a+n*l-r*s,this._y=n*t+e*s+r*a-i*l,this._z=r*t+e*l+i*s-n*a,this._w=e*t-i*a-n*s-r*l,this._onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var i=this._x,n=this._y,r=this._z,a=this._w,s=a*e._w+i*e._x+n*e._y+r*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((e=1-s*s)<=Number.EPSILON)return s=1-t,this._w=s*a+t*this._w,this._x=s*i+t*this._x,this._y=s*n+t*this._y,this._z=s*r+t*this._z,this.normalize(),this._onChangeCallback(),this;e=Math.sqrt(e);var l=Math.atan2(e,s);return s=Math.sin((1-t)*l)/e,t=Math.sin(t*l)/e,this._w=a*s+this._w*t,this._x=i*s+this._x*t,this._y=n*s+this._y*t,this._z=r*s+this._z*t,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Th=new u,hp=new T;Object.assign(u.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?this.multiplyVectors(e,t):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler,this.applyQuaternion(hp.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(hp.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=1/((e=e.elements)[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,l=(e=e.w)*t+a*n-s*i,c=e*i+s*t-r*n,h=e*n+r*i-a*t;return t=-r*t-a*i-s*n,this.x=l*e+t*-r+c*-s-h*-a,this.y=c*e+t*-a+h*-r-l*-s,this.z=h*e+t*-s+l*-a-c*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return t!==void 0?this.crossVectors(e,t):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y;e=e.z;var r=t.x,a=t.y;return t=t.z,this.x=n*t-e*a,this.y=e*r-i*t,this.z=i*a-n*r,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return Th.copy(this).projectOnVector(e),this.sub(Th)},reflect:function(e){return this.sub(Th.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(Ht.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i+(e=this.z-e.z)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=i,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var da=new u;Object.assign(E.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,a,s,l,c){var h=this.elements;return h[0]=e,h[1]=n,h[2]=s,h[3]=t,h[4]=r,h[5]=l,h[6]=i,h[7]=a,h[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(e){for(var t=0,i=e.count;t<i;t++)da.x=e.getX(t),da.y=e.getY(t),da.z=e.getZ(t),da.applyMatrix3(this),e.setXYZ(t,da.x,da.y,da.z);return e},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[3],a=i[6],s=i[1],l=i[4],c=i[7],h=i[2],f=i[5];i=i[8];var g=n[0],y=n[3],L=n[6],C=n[1],I=n[4],q=n[7],de=n[2],fe=n[5];return n=n[8],t[0]=e*g+r*C+a*de,t[3]=e*y+r*I+a*fe,t[6]=e*L+r*q+a*n,t[1]=s*g+l*C+c*de,t[4]=s*y+l*I+c*fe,t[7]=s*L+l*q+c*n,t[2]=h*g+f*C+i*de,t[5]=h*y+f*I+i*fe,t[8]=h*L+f*q+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],l=e[6],c=e[7];return t*a*(e=e[8])-t*s*c-i*r*e+i*s*l+n*r*c-n*a*l},getInverse:function(e,t){e&&e.isMatrix4;var i=e.elements;e=this.elements;var n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5],h=i[6],f=i[7],g=(i=i[8])*l-c*f,y=c*h-i*s,L=f*s-l*h,C=n*g+r*y+a*L;if(C===0){if(t===!0)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}return t=1/C,e[0]=g*t,e[1]=(a*f-i*r)*t,e[2]=(c*r-a*l)*t,e[3]=y*t,e[4]=(i*n-a*h)*t,e[5]=(a*s-c*n)*t,e[6]=L*t,e[7]=(r*h-f*n)*t,e[8]=(l*n-r*s)*t,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,a,s){var l=Math.cos(r);r=Math.sin(r),this.set(i*l,i*r,-i*(l*a+r*s)+a+e,-n*r,n*l,-n*(-r*a+l*s)+s+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var i=this.elements,n=i[0],r=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*n+e*s,i[3]=t*r+e*l,i[6]=t*a+e*c,i[1]=-e*n+t*s,i[4]=-e*r+t*l,i[7]=-e*a+t*c,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;9>i;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var i=0;9>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var go,Nr={getDataURL:function(e){if(typeof HTMLCanvasElement>"u")return e.src;if(!(e instanceof HTMLCanvasElement)){go===void 0&&(go=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),go.width=e.width,go.height=e.height;var t=go.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),e=go}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},zf=0;F.DEFAULT_IMAGE=void 0,F.DEFAULT_MAPPING=300,F.prototype=Object.assign(Object.create(p.prototype),{constructor:F,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var n=this.image;if(n.uuid===void 0&&(n.uuid=Ht.generateUUID()),!t&&e.images[n.uuid]===void 0){if(Array.isArray(n))for(var r=[],a=0,s=n.length;a<s;a++)r.push(Nr.getDataURL(n[a]));else r=Nr.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==300)return e;if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=Math.abs(Math.floor(e.x)%2)===1?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=Math.abs(Math.floor(e.y)%2)===1?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(F.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.defineProperties(R.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(R.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?this.addVectors(e,t):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?this.subVectors(e,t):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=(e=e.elements)[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],l=e[2],c=e[6],h=e[10];return .01>Math.abs(i-r)&&.01>Math.abs(n-l)&&.01>Math.abs(s-c)?.1>Math.abs(i+r)&&.1>Math.abs(n+l)&&.1>Math.abs(s+c)&&.1>Math.abs(t+a+h-3)?(this.set(1,0,0,0),this):(e=Math.PI,h=(h+1)/2,i=(i+r)/4,n=(n+l)/4,s=(s+c)/4,(t=(t+1)/2)>(a=(a+1)/2)&&t>h?.01>t?(c=0,i=l=.707106781):(l=i/(c=Math.sqrt(t)),i=n/c):a>h?.01>a?(c=.707106781,l=0,i=.707106781):(c=i/(l=Math.sqrt(a)),i=s/l):.01>h?(l=c=.707106781,i=0):(c=n/(i=Math.sqrt(h)),l=s/i),this.set(c,l,i,e),this):(e=Math.sqrt((c-s)*(c-s)+(n-l)*(n-l)+(r-i)*(r-i)),.001>Math.abs(e)&&(e=1),this.x=(c-s)/e,this.y=(n-l)/e,this.z=(r-i)/e,this.w=Math.acos((t+a+h-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),A.prototype=Object.assign(Object.create(p.prototype),{constructor:A,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Z.prototype=Object.assign(Object.create(A.prototype),{constructor:Z,isWebGLMultisampleRenderTarget:!0,copy:function(e){return A.prototype.copy.call(this,e),this.samples=e.samples,this}});var _n=new u,zn=new G,Ff=new u(0,0,0),kf=new u(1,1,1),Ir=new u,Bl=new u,xn=new u;Object.assign(G.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,a,s,l,c,h,f,g,y,L,C,I){var q=this.elements;return q[0]=e,q[4]=t,q[8]=i,q[12]=n,q[1]=r,q[5]=a,q[9]=s,q[13]=l,q[2]=c,q[6]=h,q[10]=f,q[14]=g,q[3]=y,q[7]=L,q[11]=C,q[15]=I,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new G().fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,i=e.elements,n=1/_n.setFromMatrixColumn(e,0).length(),r=1/_n.setFromMatrixColumn(e,1).length();return e=1/_n.setFromMatrixColumn(e,2).length(),t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*e,t[9]=i[9]*e,t[10]=i[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler;var t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i);i=Math.sin(i);var s=Math.cos(n);n=Math.sin(n);var l=Math.cos(r);if(r=Math.sin(r),e.order==="XYZ"){e=a*l;var c=a*r,h=i*l,f=i*r;t[0]=s*l,t[4]=-s*r,t[8]=n,t[1]=c+h*n,t[5]=e-f*n,t[9]=-i*s,t[2]=f-e*n,t[6]=h+c*n,t[10]=a*s}else e.order==="YXZ"?(e=s*l,c=s*r,h=n*l,f=n*r,t[0]=e+f*i,t[4]=h*i-c,t[8]=a*n,t[1]=a*r,t[5]=a*l,t[9]=-i,t[2]=c*i-h,t[6]=f+e*i,t[10]=a*s):e.order==="ZXY"?(e=s*l,c=s*r,h=n*l,f=n*r,t[0]=e-f*i,t[4]=-a*r,t[8]=h+c*i,t[1]=c+h*i,t[5]=a*l,t[9]=f-e*i,t[2]=-a*n,t[6]=i,t[10]=a*s):e.order==="ZYX"?(e=a*l,c=a*r,h=i*l,f=i*r,t[0]=s*l,t[4]=h*n-c,t[8]=e*n+f,t[1]=s*r,t[5]=f*n+e,t[9]=c*n-h,t[2]=-n,t[6]=i*s,t[10]=a*s):e.order==="YZX"?(e=a*s,c=a*n,h=i*s,f=i*n,t[0]=s*l,t[4]=f-e*r,t[8]=h*r+c,t[1]=r,t[5]=a*l,t[9]=-i*l,t[2]=-n*l,t[6]=c*r+h,t[10]=e-f*r):e.order==="XZY"&&(e=a*s,c=a*n,h=i*s,f=i*n,t[0]=s*l,t[4]=-r,t[8]=n*l,t[1]=e*r+f,t[5]=a*l,t[9]=c*r-h,t[2]=h*r-c,t[6]=i*l,t[10]=f*r+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Ff,e,kf)},lookAt:function(e,t,i){var n=this.elements;return xn.subVectors(e,t),xn.lengthSq()===0&&(xn.z=1),xn.normalize(),Ir.crossVectors(i,xn),Ir.lengthSq()===0&&(Math.abs(i.z)===1?xn.x+=1e-4:xn.z+=1e-4,xn.normalize(),Ir.crossVectors(i,xn)),Ir.normalize(),Bl.crossVectors(xn,Ir),n[0]=Ir.x,n[4]=Bl.x,n[8]=xn.x,n[1]=Ir.y,n[5]=Bl.y,n[9]=xn.y,n[2]=Ir.z,n[6]=Bl.z,n[10]=xn.z,this},multiply:function(e,t){return t!==void 0?this.multiplyMatrices(e,t):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[4],a=i[8],s=i[12],l=i[1],c=i[5],h=i[9],f=i[13],g=i[2],y=i[6],L=i[10],C=i[14],I=i[3],q=i[7],de=i[11];i=i[15];var fe=n[0],me=n[4],xe=n[8],ie=n[12],Ne=n[1],Ve=n[5],bt=n[9],Ue=n[13],Me=n[2],je=n[6],dt=n[10],mt=n[14],Et=n[3],V=n[7],J=n[11];return n=n[15],t[0]=e*fe+r*Ne+a*Me+s*Et,t[4]=e*me+r*Ve+a*je+s*V,t[8]=e*xe+r*bt+a*dt+s*J,t[12]=e*ie+r*Ue+a*mt+s*n,t[1]=l*fe+c*Ne+h*Me+f*Et,t[5]=l*me+c*Ve+h*je+f*V,t[9]=l*xe+c*bt+h*dt+f*J,t[13]=l*ie+c*Ue+h*mt+f*n,t[2]=g*fe+y*Ne+L*Me+C*Et,t[6]=g*me+y*Ve+L*je+C*V,t[10]=g*xe+y*bt+L*dt+C*J,t[14]=g*ie+y*Ue+L*mt+C*n,t[3]=I*fe+q*Ne+de*Me+i*Et,t[7]=I*me+q*Ve+de*je+i*V,t[11]=I*xe+q*bt+de*dt+i*J,t[15]=I*ie+q*Ue+de*mt+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(e){for(var t=0,i=e.count;t<i;t++)_n.x=e.getX(t),_n.y=e.getY(t),_n.z=e.getZ(t),_n.applyMatrix4(this),e.setXYZ(t,_n.x,_n.y,_n.z);return e},determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],l=e[9],c=e[13],h=e[2],f=e[6],g=e[10],y=e[14];return e[3]*(+r*l*f-n*c*f-r*s*g+i*c*g+n*s*y-i*l*y)+e[7]*(+t*l*y-t*c*g+r*a*g-n*a*y+n*c*h-r*l*h)+e[11]*(+t*c*f-t*s*y-r*a*f+i*a*y+r*s*h-i*c*h)+e[15]*(-n*s*h-t*l*f+t*s*g+n*a*f-i*a*g+i*l*h)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,i){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this},getInverse:function(e,t){var i=this.elements,n=e.elements;e=n[0];var r=n[1],a=n[2],s=n[3],l=n[4],c=n[5],h=n[6],f=n[7],g=n[8],y=n[9],L=n[10],C=n[11],I=n[12],q=n[13],de=n[14],fe=y*de*f-q*L*f+q*h*C-c*de*C-y*h*(n=n[15])+c*L*n,me=I*L*f-g*de*f-I*h*C+l*de*C+g*h*n-l*L*n,xe=g*q*f-I*y*f+I*c*C-l*q*C-g*c*n+l*y*n,ie=I*y*h-g*q*h-I*c*L+l*q*L+g*c*de-l*y*de,Ne=e*fe+r*me+a*xe+s*ie;if(Ne===0){if(t===!0)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}return t=1/Ne,i[0]=fe*t,i[1]=(q*L*s-y*de*s-q*a*C+r*de*C+y*a*n-r*L*n)*t,i[2]=(c*de*s-q*h*s+q*a*f-r*de*f-c*a*n+r*h*n)*t,i[3]=(y*h*s-c*L*s-y*a*f+r*L*f+c*a*C-r*h*C)*t,i[4]=me*t,i[5]=(g*de*s-I*L*s+I*a*C-e*de*C-g*a*n+e*L*n)*t,i[6]=(I*h*s-l*de*s-I*a*f+e*de*f+l*a*n-e*h*n)*t,i[7]=(l*L*s-g*h*s+g*a*f-e*L*f-l*a*C+e*h*C)*t,i[8]=xe*t,i[9]=(I*y*s-g*q*s-I*r*C+e*q*C+g*r*n-e*y*n)*t,i[10]=(l*q*s-I*c*s+I*r*f-e*q*f-l*r*n+e*c*n)*t,i[11]=(g*c*s-l*y*s-g*r*f+e*y*f+l*r*C-e*c*C)*t,i[12]=ie*t,i[13]=(g*q*a-I*y*a+I*r*L-e*q*L-g*r*de+e*y*de)*t,i[14]=(I*c*a-l*q*a-I*r*h+e*q*h+l*r*de-e*c*de)*t,i[15]=(l*y*a-g*c*a+g*r*h-e*y*h-l*r*L+e*c*L)*t,this},scale:function(e){var t=this.elements,i=e.x,n=e.y;return e=e.z,t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=1-i,r=e.x,a=e.y;e=e.z;var s=n*r,l=n*a;return this.set(s*r+i,s*a-t*e,s*e+t*a,0,s*a+t*e,l*a+i,l*e-t*r,0,s*e-t*a,l*e+t*r,n*e*e+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var n=this.elements,r=t._x,a=t._y,s=t._z,l=t._w,c=r+r,h=a+a,f=s+s;t=r*c;var g=r*h;r*=f;var y=a*h;a*=f,s*=f,c*=l,h*=l,l*=f,f=i.x;var L=i.y;return i=i.z,n[0]=(1-(y+s))*f,n[1]=(g+l)*f,n[2]=(r-h)*f,n[3]=0,n[4]=(g-l)*L,n[5]=(1-(t+s))*L,n[6]=(a+c)*L,n[7]=0,n[8]=(r+h)*i,n[9]=(a-c)*i,n[10]=(1-(t+y))*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(e,t,i){var n=this.elements,r=_n.set(n[0],n[1],n[2]).length(),a=_n.set(n[4],n[5],n[6]).length(),s=_n.set(n[8],n[9],n[10]).length();0>this.determinant()&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],zn.copy(this),e=1/r,n=1/a;var l=1/s;return zn.elements[0]*=e,zn.elements[1]*=e,zn.elements[2]*=e,zn.elements[4]*=n,zn.elements[5]*=n,zn.elements[6]*=n,zn.elements[8]*=l,zn.elements[9]*=l,zn.elements[10]*=l,t.setFromRotationMatrix(zn),i.x=r,i.y=a,i.z=s,this},makePerspective:function(e,t,i,n,r,a){var s=this.elements;return s[0]=2*r/(t-e),s[4]=0,s[8]=(t+e)/(t-e),s[12]=0,s[1]=0,s[5]=2*r/(i-n),s[9]=(i+n)/(i-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(a+r)/(a-r),s[14]=-2*a*r/(a-r),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,i,n,r,a){var s=this.elements,l=1/(t-e),c=1/(i-n),h=1/(a-r);return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-(t+e)*l,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-(i+n)*c,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-(a+r)*h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;16>i;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var i=0;16>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}});var up=new G,pp=new T;_e.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),_e.DefaultOrder="XYZ",Object.defineProperties(_e.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(_e.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=Ht.clamp,r=e.elements;e=r[0];var a=r[4],s=r[8],l=r[1],c=r[5],h=r[9],f=r[2],g=r[6];return r=r[10],(t=t||this._order)==="XYZ"?(this._y=Math.asin(n(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-h,r),this._z=Math.atan2(-a,e)):(this._x=Math.atan2(g,c),this._z=0)):t==="YXZ"?(this._x=Math.asin(-n(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(s,r),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,e),this._z=0)):t==="ZXY"?(this._x=Math.asin(n(g,-1,1)),.9999999>Math.abs(g)?(this._y=Math.atan2(-f,r),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,e))):t==="ZYX"?(this._y=Math.asin(-n(f,-1,1)),.9999999>Math.abs(f)?(this._x=Math.atan2(g,r),this._z=Math.atan2(l,e)):(this._x=0,this._z=Math.atan2(-a,c))):t==="YZX"?(this._z=Math.asin(n(l,-1,1)),.9999999>Math.abs(l)?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-f,e)):(this._x=0,this._y=Math.atan2(s,r))):t==="XZY"&&(this._z=Math.asin(-n(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(g,c),this._y=Math.atan2(s,e)):(this._x=Math.atan2(-h,r),this._y=0)),this._order=t,i!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,i){return up.makeRotationFromQuaternion(e),this.setFromRotationMatrix(up,t,i)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return pp.setFromEuler(this),this.setFromQuaternion(pp,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(be.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!=0}});var Bf=0,dp=new u,vo=new T,vr=new G,Ul=new u,Bs=new u,Uf=new u,Gf=new T,fp=new u(1,0,0),mp=new u(0,1,0),gp=new u(0,0,1),Vf={type:"added"},jf={type:"removed"};Q.DefaultUp=new u(0,1,0),Q.DefaultMatrixAutoUpdate=!0,Q.prototype=Object.assign(Object.create(p.prototype),{constructor:Q,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return vo.setFromAxisAngle(e,t),this.quaternion.multiply(vo),this},rotateOnWorldAxis:function(e,t){return vo.setFromAxisAngle(e,t),this.quaternion.premultiply(vo),this},rotateX:function(e){return this.rotateOnAxis(fp,e)},rotateY:function(e){return this.rotateOnAxis(mp,e)},rotateZ:function(e){return this.rotateOnAxis(gp,e)},translateOnAxis:function(e,t){return dp.copy(e).applyQuaternion(this.quaternion),this.position.add(dp.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(fp,e)},translateY:function(e){return this.translateOnAxis(mp,e)},translateZ:function(e){return this.translateOnAxis(gp,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(vr.getInverse(this.matrixWorld))},lookAt:function(e,t,i){e.isVector3?Ul.copy(e):Ul.set(e,t,i),e=this.parent,this.updateWorldMatrix(!0,!1),Bs.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vr.lookAt(Bs,Ul,this.up):vr.lookAt(Ul,Bs,this.up),this.quaternion.setFromRotationMatrix(vr),e&&(vr.extractRotation(e.matrixWorld),vo.setFromRotationMatrix(vr),this.quaternion.premultiply(vo.inverse()))},add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this||e&&e.isObject3D&&(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Vf)),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return(t=this.children.indexOf(e))!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(jf)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),vr.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),vr.multiply(e.parent.matrixWorld)),e.applyMatrix(vr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(r!==void 0)return r}},getWorldPosition:function(e){return e===void 0&&(e=new u),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(e=new T),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Bs,e,Uf),e},getWorldScale:function(e){return e===void 0&&(e=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Bs,Gf,e),e},getWorldDirection:function(e){e===void 0&&(e=new u),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0)for(t=0,i=(e=this.children).length;t<i;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(f,g){return f[g.uuid]===void 0&&(f[g.uuid]=g.toJSON(e)),g.uuid}function i(f){var g,y=[];for(g in f){var L=f[g];delete L.metadata,y.push(L)}return y}var n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==0&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=t(e.geometries,this.geometry);var s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0)if(s=s.shapes,Array.isArray(s))for(var l=0,c=s.length;l<c;l++)t(e.shapes,s[l]);else t(e.shapes,s)}if(this.material!==void 0)if(Array.isArray(this.material)){for(s=[],l=0,c=this.material.length;l<c;l++)s.push(t(e.materials,this.material[l]));a.material=s}else a.material=t(e.materials,this.material);if(0<this.children.length)for(a.children=[],l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(e).object);if(n){n=i(e.geometries),l=i(e.materials),c=i(e.textures);var h=i(e.images);s=i(e.shapes),0<n.length&&(r.geometries=n),0<l.length&&(r.materials=l),0<c.length&&(r.textures=c),0<h.length&&(r.images=h),0<s.length&&(r.shapes=s)}return r.object=a,r},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}}),Pe.prototype=Object.assign(Object.create(Q.prototype),{constructor:Pe,isScene:!0,copy:function(e,t){return Q.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Q.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var yr=[new u,new u,new u,new u,new u,new u,new u,new u],ir=new u,yo=new u,_o=new u,xo=new u,Rr=new u,zr=new u,fa=new u,Us=new u,Gl=new u,Vl=new u,ma=new u;Object.assign(ee.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,l=0,c=e.length;l<c;l+=3){var h=e[l],f=e[l+1],g=e[l+2];h<t&&(t=h),f<i&&(i=f),g<n&&(n=g),h>r&&(r=h),f>a&&(a=f),g>s&&(s=g)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,l=0,c=e.count;l<c;l++){var h=e.getX(l),f=e.getY(l),g=e.getZ(l);h<t&&(t=h),f<i&&(i=f),g<n&&(n=g),h>r&&(r=h),f>a&&(a=f),g>s&&(s=g)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){return t=ir.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(e=new u),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(e=new u),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){var t;e.updateWorldMatrix(!1,!1);var i=e.geometry;if(i!==void 0){if(i.isGeometry){var n=i.vertices;for(i=0,t=n.length;i<t;i++)ir.copy(n[i]),ir.applyMatrix4(e.matrixWorld),this.expandByPoint(ir)}else if(i.isBufferGeometry&&(n=i.attributes.position)!==void 0)for(i=0,t=n.count;i<t;i++)ir.fromBufferAttribute(n,i).applyMatrix4(e.matrixWorld),this.expandByPoint(ir)}for(i=0,t=(e=e.children).length;i<t;i++)this.expandByObject(e[i]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return t===void 0&&(t=new u),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,ir),ir.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,i=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,i=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant},intersectsTriangle:function(e){return!this.isEmpty()&&(this.getCenter(Us),Gl.subVectors(this.max,Us),yo.subVectors(e.a,Us),_o.subVectors(e.b,Us),xo.subVectors(e.c,Us),Rr.subVectors(_o,yo),zr.subVectors(xo,_o),fa.subVectors(yo,xo),!!Fe(e=[0,-Rr.z,Rr.y,0,-zr.z,zr.y,0,-fa.z,fa.y,Rr.z,0,-Rr.x,zr.z,0,-zr.x,fa.z,0,-fa.x,-Rr.y,Rr.x,0,-zr.y,zr.x,0,-fa.y,fa.x,0],yo,_o,xo,Gl)&&!!Fe(e=[1,0,0,0,1,0,0,0,1],yo,_o,xo,Gl)&&(Vl.crossVectors(Rr,zr),Fe(e=[Vl.x,Vl.y,Vl.z],yo,_o,xo,Gl)))},clampPoint:function(e,t){return t===void 0&&(t=new u),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return ir.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ir).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()||(yr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yr)),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Wf=new ee;Object.assign(Ye.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var i=this.center;t!==void 0?i.copy(t):Wf.setFromPoints(e).getCenter(i);for(var n=t=0,r=e.length;n<r;n++)t=Math.max(t,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return t===void 0&&(t=new u),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return e===void 0&&(e=new ee),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var _r=new u,Ah=new u,jl=new u,Fr=new u,Ph=new u,Wl=new u,Ch=new u;Object.assign(se.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return t===void 0&&(t=new u),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,_r)),this},closestPointToPoint:function(e,t){return t===void 0&&(t=new u),t.subVectors(e,this.origin),0>(e=t.dot(this.direction))?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=_r.subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):(_r.copy(this.direction).multiplyScalar(t).add(this.origin),_r.distanceToSquared(e))},distanceSqToSegment:function(e,t,i,n){Ah.copy(e).add(t).multiplyScalar(.5),jl.copy(t).sub(e).normalize(),Fr.copy(this.origin).sub(Ah);var r=.5*e.distanceTo(t),a=-this.direction.dot(jl),s=Fr.dot(this.direction),l=-Fr.dot(jl),c=Fr.lengthSq(),h=Math.abs(1-a*a);if(0<h){t=a*s-l;var f=r*h;0<=(e=a*l-s)?t>=-f?t<=f?a=(e*=r=1/h)*(e+a*(t*=r)+2*s)+t*(a*e+t+2*l)+c:(t=r,a=-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*l)+c):(t=-r,a=-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*l)+c):t<=-f?a=-(e=Math.max(0,-(-a*r+s)))*e+(t=0<e?-r:Math.min(Math.max(-r,-l),r))*(t+2*l)+c:t<=f?(e=0,a=(t=Math.min(Math.max(-r,-l),r))*(t+2*l)+c):a=-(e=Math.max(0,-(a*r+s)))*e+(t=0<e?r:Math.min(Math.max(-r,-l),r))*(t+2*l)+c}else t=0<a?-r:r,a=-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(e).add(this.origin),n&&n.copy(jl).multiplyScalar(t).add(Ah),a},intersectSphere:function(e,t){_r.subVectors(e.center,this.origin);var i=_r.dot(this.direction),n=_r.dot(_r)-i*i;return n>(e=e.radius*e.radius)?null:(n=i-(e=Math.sqrt(e-n)),i+=e,0>n&&0>i?null:0>n?this.at(i,t):this.at(n,t))},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return t===0?e.distanceToPoint(this.origin)===0?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){return(e=this.distanceToPlane(e))===null?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return t===0||0>e.normal.dot(this.direction)*t},intersectBox:function(e,t){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var s=(e.min.x-a.x)*i;i*=e.max.x-a.x}else s=(e.max.x-a.x)*i,i*=e.min.x-a.x;if(0<=n){var l=(e.min.y-a.y)*n;n*=e.max.y-a.y}else l=(e.max.y-a.y)*n,n*=e.min.y-a.y;return s>n||l>i?null:((l>s||s!=s)&&(s=l),(n<i||i!=i)&&(i=n),0<=r?(l=(e.min.z-a.z)*r,e=(e.max.z-a.z)*r):(l=(e.max.z-a.z)*r,e=(e.min.z-a.z)*r),s>e||l>i?null:((l>s||s!=s)&&(s=l),(e<i||i!=i)&&(i=e),0>i?null:this.at(0<=s?s:i,t)))},intersectsBox:function(e){return this.intersectBox(e,_r)!==null},intersectTriangle:function(e,t,i,n,r){if(Ph.subVectors(t,e),Wl.subVectors(i,e),Ch.crossVectors(Ph,Wl),0<(t=this.direction.dot(Ch))){if(n)return null;n=1}else{if(!(0>t))return null;n=-1,t=-t}return Fr.subVectors(this.origin,e),0>(e=n*this.direction.dot(Wl.crossVectors(Fr,Wl)))||0>(i=n*this.direction.dot(Ph.cross(Fr)))||e+i>t||0>(e=-n*Fr.dot(Ch))?null:this.at(e/t,r)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Fn=new u,xr=new u,Lh=new u,br=new u,bo=new u,wo=new u,vp=new u,Oh=new u,Eh=new u,Dh=new u;Object.assign(Ie,{getNormal:function(e,t,i,n){return n===void 0&&(n=new u),n.subVectors(i,t),Fn.subVectors(e,t),n.cross(Fn),0<(e=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)},getBarycoord:function(e,t,i,n,r){Fn.subVectors(n,t),xr.subVectors(i,t),Lh.subVectors(e,t),e=Fn.dot(Fn),t=Fn.dot(xr),i=Fn.dot(Lh);var a=xr.dot(xr);n=xr.dot(Lh);var s=e*a-t*t;return r===void 0&&(r=new u),s===0?r.set(-2,-1,-1):(a=(a*i-t*n)*(s=1/s),e=(e*n-t*i)*s,r.set(1-a-e,e,a))},containsPoint:function(e,t,i,n){return Ie.getBarycoord(e,t,i,n,br),0<=br.x&&0<=br.y&&1>=br.x+br.y},getUV:function(e,t,i,n,r,a,s,l){return this.getBarycoord(e,t,i,n,br),l.set(0,0),l.addScaledVector(r,br.x),l.addScaledVector(a,br.y),l.addScaledVector(s,br.z),l},isFrontFacing:function(e,t,i,n){return Fn.subVectors(i,t),xr.subVectors(e,t),0>Fn.cross(xr).dot(n)}}),Object.assign(Ie.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Fn.subVectors(this.c,this.b),xr.subVectors(this.a,this.b),.5*Fn.cross(xr).length()},getMidpoint:function(e){return e===void 0&&(e=new u),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Ie.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(e=new u),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Ie.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,i,n,r){return Ie.getUV(e,this.a,this.b,this.c,t,i,n,r)},containsPoint:function(e){return Ie.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Ie.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){t===void 0&&(t=new u);var i=this.a,n=this.b,r=this.c;bo.subVectors(n,i),wo.subVectors(r,i),Oh.subVectors(e,i);var a=bo.dot(Oh),s=wo.dot(Oh);if(0>=a&&0>=s)return t.copy(i);Eh.subVectors(e,n);var l=bo.dot(Eh),c=wo.dot(Eh);if(0<=l&&c<=l)return t.copy(n);var h=a*c-l*s;if(0>=h&&0<=a&&0>=l)return n=a/(a-l),t.copy(i).addScaledVector(bo,n);Dh.subVectors(e,r),e=bo.dot(Dh);var f=wo.dot(Dh);return 0<=f&&e<=f?t.copy(r):0>=(a=e*s-a*f)&&0<=s&&0>=f?(h=s/(s-f),t.copy(i).addScaledVector(wo,h)):0>=(s=l*f-e*c)&&0<=c-l&&0<=e-f?(vp.subVectors(r,n),h=(c-l)/(c-l+(e-f)),t.copy(n).addScaledVector(vp,h)):(n=a*(r=1/(s+a+h)),h*=r,t.copy(i).addScaledVector(bo,n).addScaledVector(wo,h))},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Hf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kn={h:0,s:0,l:0},Hl={h:0,s:0,l:0};Object.assign(S.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){return e=Ht.euclideanModulo(e,1),t=Ht.clamp(t,0,1),i=Ht.clamp(i,0,1),t===0?this.r=this.g=this.b=i:(i=2*i-(t=.5>=i?i*(1+t):i+t-i*t),this.r=z(i,t,e+1/3),this.g=z(i,t,e),this.b=z(i,t,e-1/3)),this},setStyle:function(e){function t(s){s!==void 0&&parseFloat(s)}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(e)){if((n=(i=i[1]).length)===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(n===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&0<e.length&&(i=Hf[e])!==void 0&&this.setHex(i),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return t===void 0&&(t=2),t=0<t?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=d(e.r),this.g=d(e.g),this.b=d(e.b),this},copyLinearToSRGB:function(e){return this.r=_(e.r),this.g=_(e.g),this.b=_(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(e={h:0,s:0,l:0});var t,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),s=Math.min(i,n,r),l=(s+a)/2;if(s===a)s=t=0;else{var c=a-s;switch(s=.5>=l?c/(a+s):c/(2-a-s),a){case i:t=(n-r)/c+(n<r?6:0);break;case n:t=(r-i)/c+2;break;case r:t=(i-n)/c+4}t/=6}return e.h=t,e.s=s,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){return this.getHSL(kn),kn.h+=e,kn.s+=t,kn.l+=i,this.setHSL(kn.h,kn.s,kn.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(kn),e.getHSL(Hl),e=Ht.lerp(kn.h,Hl.h,t);var i=Ht.lerp(kn.s,Hl.s,t);return t=Ht.lerp(kn.l,Hl.l,t),this.setHSL(e,i,t),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(j.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Xf=0;M.prototype=Object.assign(Object.create(p.prototype),{constructor:M,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var t in e){var i=e[t];if(i!==void 0)if(t==="shading")this.flatShading=i===1;else{var n=this[t];n===void 0||(n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i)}}},toJSON:function(e){function t(r){var a,s=[];for(a in r){var l=r[a];delete l.metadata,s.push(l)}return s}var i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==1&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==0&&(n.side=this.side),this.vertexColors!==0&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilMask=this.stencilMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),i&&(i=t(e.textures),e=t(e.images),0<i.length&&(n.textures=i),0<e.length&&(n.images=e)),n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWrite=e.stencilWrite,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilMask=e.stencilMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(t!==null){var n=t.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),X.prototype=Object.create(M.prototype),X.prototype.constructor=X,X.prototype.isMeshBasicMaterial=!0,X.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(w.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(w.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=e!==void 0?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];a===void 0&&(a=new S),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];a===void 0&&(a=new m),t[i++]=a.x,t[i++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];a===void 0&&(a=new u),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];a===void 0&&(a=new R),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),ge.prototype=Object.create(w.prototype),ge.prototype.constructor=ge,pe.prototype=Object.create(w.prototype),pe.prototype.constructor=pe,ye.prototype=Object.create(w.prototype),ye.prototype.constructor=ye,Le.prototype=Object.create(w.prototype),Le.prototype.constructor=Le,Y.prototype=Object.create(w.prototype),Y.prototype.constructor=Y,ne.prototype=Object.create(w.prototype),ne.prototype.constructor=ne,at.prototype=Object.create(w.prototype),at.prototype.constructor=at,ve.prototype=Object.create(w.prototype),ve.prototype.constructor=ve,$e.prototype=Object.create(w.prototype),$e.prototype.constructor=$e,Object.assign(Ze.prototype,{computeGroups:function(e){var t=[],i=void 0;e=e.faces;for(var n=0;n<e.length;n++){var r=e[n];if(r.materialIndex!==i){i=r.materialIndex,a!==void 0&&(a.count=3*n-a.start,t.push(a));var a={start:3*n,materialIndex:i}}}a!==void 0&&(a.count=3*n-a.start,t.push(a)),this.groups=t},fromGeometry:function(e){var t=e.faces,i=e.vertices,n=e.faceVertexUvs,r=n[0]&&0<n[0].length,a=n[1]&&0<n[1].length,s=e.morphTargets,l=s.length;if(0<l){for(var c=[],h=0;h<l;h++)c[h]={name:s[h].name,data:[]};this.morphTargets.position=c}var f=e.morphNormals,g=f.length;if(0<g){var y=[];for(h=0;h<g;h++)y[h]={name:f[h].name,data:[]};this.morphTargets.normal=y}var L=e.skinIndices,C=e.skinWeights,I=L.length===i.length,q=C.length===i.length;for(0<i.length&&t.length,h=0;h<t.length;h++){var de=t[h];this.vertices.push(i[de.a],i[de.b],i[de.c]);var fe=de.vertexNormals;for(fe.length===3?this.normals.push(fe[0],fe[1],fe[2]):(fe=de.normal,this.normals.push(fe,fe,fe)),(fe=de.vertexColors).length===3?this.colors.push(fe[0],fe[1],fe[2]):(fe=de.color,this.colors.push(fe,fe,fe)),r===!0&&((fe=n[0][h])!==void 0?this.uvs.push(fe[0],fe[1],fe[2]):this.uvs.push(new m,new m,new m)),a===!0&&((fe=n[1][h])!==void 0?this.uvs2.push(fe[0],fe[1],fe[2]):this.uvs2.push(new m,new m,new m)),fe=0;fe<l;fe++){var me=s[fe].vertices;c[fe].data.push(me[de.a],me[de.b],me[de.c])}for(fe=0;fe<g;fe++)me=f[fe].vertexNormals[h],y[fe].data.push(me.a,me.b,me.c);I&&this.skinIndices.push(L[de.a],L[de.b],L[de.c]),q&&this.skinWeights.push(C[de.a],C[de.b],C[de.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});var Yf=1,nr=new G,Nh=new Q,Xl=new u,ga=new ee,Ih=new ee,Bn=new u;ze.prototype=Object.assign(Object.create(p.prototype),{constructor:ze,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<Lt(e)?at:Y)(e,1):this.index=e},addAttribute:function(e,t,i){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?e==="index"?(this.setIndex(t),this):(this.attributes[e]=t,this):this.addAttribute(e,new w(t,i))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:i!==void 0?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;return i!==void 0&&((t=new E().getNormalMatrix(e)).applyToBufferAttribute(i),i.needsUpdate=!0),(i=this.attributes.tangent)!==void 0&&((t=new E().getNormalMatrix(e)).applyToBufferAttribute(i),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return nr.makeRotationX(e),this.applyMatrix(nr),this},rotateY:function(e){return nr.makeRotationY(e),this.applyMatrix(nr),this},rotateZ:function(e){return nr.makeRotationZ(e),this.applyMatrix(nr),this},translate:function(e,t,i){return nr.makeTranslation(e,t,i),this.applyMatrix(nr),this},scale:function(e,t,i){return nr.makeScale(e,t,i),this.applyMatrix(nr),this},lookAt:function(e){return Nh.lookAt(e),Nh.updateMatrix(),this.applyMatrix(Nh.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xl).negate(),this.translate(Xl.x,Xl.y,Xl.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new ve(3*t.vertices.length,3);var i=new ve(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new ve(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new ve(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(i=void 0,t.elementsNeedUpdate=!1),i===void 0)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate,i.normalsNeedUpdate=t.normalsNeedUpdate,i.colorsNeedUpdate=t.colorsNeedUpdate,i.uvsNeedUpdate=t.uvsNeedUpdate,i.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=i}return t.verticesNeedUpdate===!0&&((i=this.attributes.position)!==void 0&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&((i=this.attributes.normal)!==void 0&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&((i=this.attributes.color)!==void 0&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&((i=this.attributes.uv)!==void 0&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&((i=this.attributes.lineDistance)!==void 0&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new Ze().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);for(var i in this.addAttribute("position",new w(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new w(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new w(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new w(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new w(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){t=[];for(var n=e.morphTargets[i],r=0,a=n.length;r<a;r++){var s=n[r],l=new ve(3*s.data.length,3);l.name=s.name,t.push(l.copyVector3sArray(s.data))}this.morphAttributes[i]=t}return 0<e.skinIndices.length&&(i=new ve(4*e.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(i=new ve(4*e.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new ee);var e=this.attributes.position,t=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t){e=0;for(var i=t.length;e<i;e++)ga.setFromBufferAttribute(t[e]),this.boundingBox.expandByPoint(ga.min),this.boundingBox.expandByPoint(ga.max)}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ye);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var i=this.boundingSphere.center;if(ga.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var a=t[n];Ih.setFromBufferAttribute(a),ga.expandByPoint(Ih.min),ga.expandByPoint(Ih.max)}ga.getCenter(i);var s=0;for(n=0,r=e.count;n<r;n++)Bn.fromBufferAttribute(e,n),s=Math.max(s,i.distanceToSquared(Bn));if(t)for(n=0,r=t.length;n<r;n++){e=0;for(var l=(a=t[n]).count;e<l;e++)Bn.fromBufferAttribute(a,e),s=Math.max(s,i.distanceToSquared(Bn))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var i=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new w(new Float32Array(i.length),3));else for(var n=t.normal.array,r=0,a=n.length;r<a;r++)n[r]=0;n=t.normal.array;var s=new u,l=new u,c=new u,h=new u,f=new u;if(e){var g=e.array;for(r=0,a=e.count;r<a;r+=3){e=3*g[r+0];var y=3*g[r+1],L=3*g[r+2];s.fromArray(i,e),l.fromArray(i,y),c.fromArray(i,L),h.subVectors(c,l),f.subVectors(s,l),h.cross(f),n[e]+=h.x,n[e+1]+=h.y,n[e+2]+=h.z,n[y]+=h.x,n[y+1]+=h.y,n[y+2]+=h.z,n[L]+=h.x,n[L+1]+=h.y,n[L+2]+=h.z}}else for(r=0,a=i.length;r<a;r+=9)s.fromArray(i,r),l.fromArray(i,r+3),c.fromArray(i,r+6),h.subVectors(c,l),f.subVectors(s,l),h.cross(f),n[r]=h.x,n[r+1]=h.y,n[r+2]=h.z,n[r+3]=h.x,n[r+4]=h.y,n[r+5]=h.z,n[r+6]=h.x,n[r+7]=h.y,n[r+8]=h.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){t===void 0&&(t=0);var i,n=this.attributes;for(i in n)if(e.attributes[i]!==void 0){var r=n[i].array,a=e.attributes[i],s=a.array,l=a.itemSize*t;a=Math.min(s.length,r.length-l);for(var c=0;c<a;c++,l++)r[l]=s[c]}return this}},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,i=e.count;t<i;t++)Bn.x=e.getX(t),Bn.y=e.getY(t),Bn.z=e.getZ(t),Bn.normalize(),e.setXYZ(t,Bn.x,Bn.y,Bn.z)},toNonIndexed:function(){function e(f,g){var y=f.array;f=f.itemSize;for(var L,C=new y.constructor(g.length*f),I=0,q=0,de=g.length;q<de;q++){L=g[q]*f;for(var fe=0;fe<f;fe++)C[I++]=y[L++]}return new w(C,f)}if(this.index===null)return this;var t,i=new ze,n=this.index.array,r=this.attributes;for(t in r){var a=r[t];a=e(a,n),i.addAttribute(t,a)}var s=this.morphAttributes;for(t in s){var l=[],c=s[t];r=0;for(var h=c.length;r<h;r++)a=e(a=c[r],n),l.push(a);i.morphAttributes[t]=l}for(r=0,t=(n=this.groups).length;r<t;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),this.parameters!==void 0){var t=this.parameters;for(h in t)t[h]!==void 0&&(e[h]=t[h]);return e}e.data={attributes:{}},(t=this.index)!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});var i=this.attributes;for(h in i){var n=(t=i[h]).toJSON();t.name!==""&&(n.name=t.name),e.data.attributes[h]=n}i={};var r=!1;for(h in this.morphAttributes){for(var a=this.morphAttributes[h],s=[],l=0,c=a.length;l<c;l++)n=(t=a[l]).toJSON(),t.name!==""&&(n.name=t.name),s.push(n);0<s.length&&(i[h]=s,r=!0)}r&&(e.data.morphAttributes=i);var h=this.groups;return 0<h.length&&(e.data.groups=JSON.parse(JSON.stringify(h))),(h=this.boundingSphere)!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e},clone:function(){return new ze().copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.index;for(s in i!==null&&this.setIndex(i.clone()),i=e.attributes)this.addAttribute(s,i[s].clone());var n=e.morphAttributes;for(s in n){var r=[],a=n[s];for(i=0,t=a.length;i<t;i++)r.push(a[i].clone());this.morphAttributes[s]=r}var s=e.groups;for(i=0,t=s.length;i<t;i++)n=s[i],this.addGroup(n.start,n.count,n.materialIndex);return(s=e.boundingBox)!==null&&(this.boundingBox=s.clone()),(s=e.boundingSphere)!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var yp=new G,va=new se,Rh=new Ye,ya=new u,_a=new u,xa=new u,_p=new u,xp=new u,bp=new u,zh=new u,Fh=new u,kh=new u,Mo=new m,So=new m,To=new m,Gs=new u,Yl=new u;st.prototype=Object.assign(Object.create(Q.prototype),{constructor:st,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Q.prototype.copy.call(this,e),this.drawMode=e.drawMode,e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(i!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;e<t;e++){var n=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else(e=e.morphTargets)!==void 0&&e.length},raycast:function(e,t){var i=this.geometry,n=this.material,r=this.matrixWorld;if(n!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Rh.copy(i.boundingSphere),Rh.applyMatrix4(r),e.ray.intersectsSphere(Rh)!==!1&&(yp.getInverse(r),va.copy(e.ray).applyMatrix4(yp),i.boundingBox===null||va.intersectsBox(i.boundingBox)!==!1))){if(i.isBufferGeometry){var a=i.index;r=i.attributes.position;var s,l,c=i.morphAttributes.position,h=i.attributes.uv,f=i.attributes.uv2,g=i.groups,y=i.drawRange;if(a!==null)if(Array.isArray(n)){var L=0;for(s=g.length;L<s;L++){var C=g[L],I=n[C.materialIndex],q=Math.max(C.start,y.start);for(l=i=Math.min(C.start+C.count,y.start+y.count);q<l;q+=3){i=a.getX(q);var de=a.getX(q+1),fe=a.getX(q+2);(i=It(this,I,e,va,r,c,h,f,i,de,fe))&&(i.faceIndex=Math.floor(q/3),i.face.materialIndex=C.materialIndex,t.push(i))}}}else for(L=q=Math.max(0,y.start),s=i=Math.min(a.count,y.start+y.count);L<s;L+=3)i=a.getX(L),de=a.getX(L+1),fe=a.getX(L+2),(i=It(this,n,e,va,r,c,h,f,i,de,fe))&&(i.faceIndex=Math.floor(L/3),t.push(i));else if(r!==void 0)if(Array.isArray(n))for(L=0,s=g.length;L<s;L++)for(I=n[(C=g[L]).materialIndex],q=Math.max(C.start,y.start),l=i=Math.min(C.start+C.count,y.start+y.count);q<l;q+=3)(i=It(this,I,e,va,r,c,h,f,i=q,de=q+1,fe=q+2))&&(i.faceIndex=Math.floor(q/3),i.face.materialIndex=C.materialIndex,t.push(i));else for(L=q=Math.max(0,y.start),s=i=Math.min(r.count,y.start+y.count);L<s;L+=3)(i=It(this,n,e,va,r,c,h,f,i=L,de=L+1,fe=L+2))&&(i.faceIndex=Math.floor(L/3),t.push(i))}else if(i.isGeometry)for(r=Array.isArray(n),c=i.vertices,h=i.faces,0<(i=i.faceVertexUvs[0]).length&&(a=i),L=0,s=h.length;L<s;L++)C=h[L],(i=r?n[C.materialIndex]:n)!==void 0&&(f=c[C.a],g=c[C.b],y=c[C.c],i=Tt(this,i,e,va,f,g,y,Gs))&&(a&&a[L]&&(I=a[L],Mo.copy(I[0]),So.copy(I[1]),To.copy(I[2]),i.uv=Ie.getUV(Gs,f,g,y,Mo,So,To,new m)),i.face=C,i.faceIndex=L,t.push(i))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var qf=0,rr=new G,Bh=new Q,ql=new u;ht.prototype=Object.assign(Object.create(p.prototype),{constructor:ht,isGeometry:!0,applyMatrix:function(e){for(var t=new E().getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);for(i=0,n=this.faces.length;i<n;i++){(e=this.faces[i]).normal.applyMatrix3(t).normalize();for(var r=0,a=e.vertexNormals.length;r<a;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(e){return rr.makeRotationX(e),this.applyMatrix(rr),this},rotateY:function(e){return rr.makeRotationY(e),this.applyMatrix(rr),this},rotateZ:function(e){return rr.makeRotationZ(e),this.applyMatrix(rr),this},translate:function(e,t,i){return rr.makeTranslation(e,t,i),this.applyMatrix(rr),this},scale:function(e,t,i){return rr.makeScale(e,t,i),this.applyMatrix(rr),this},lookAt:function(e){return Bh.lookAt(e),Bh.updateMatrix(),this.applyMatrix(Bh.matrix),this},fromBufferGeometry:function(e){function t(L,C,I,q){var de=l===void 0?[]:[i.colors[L].clone(),i.colors[C].clone(),i.colors[I].clone()];q=new j(L,C,I,s===void 0?[]:[new u().fromArray(s,3*L),new u().fromArray(s,3*C),new u().fromArray(s,3*I)],de,q),i.faces.push(q),c!==void 0&&i.faceVertexUvs[0].push([new m().fromArray(c,2*L),new m().fromArray(c,2*C),new m().fromArray(c,2*I)]),h!==void 0&&i.faceVertexUvs[1].push([new m().fromArray(h,2*L),new m().fromArray(h,2*C),new m().fromArray(h,2*I)])}var i=this,n=e.index!==null?e.index.array:void 0,r=e.attributes,a=r.position.array,s=r.normal!==void 0?r.normal.array:void 0,l=r.color!==void 0?r.color.array:void 0,c=r.uv!==void 0?r.uv.array:void 0,h=r.uv2!==void 0?r.uv2.array:void 0;for(h!==void 0&&(this.faceVertexUvs[1]=[]),r=0;r<a.length;r+=3)i.vertices.push(new u().fromArray(a,r)),l!==void 0&&i.colors.push(new S().fromArray(l,r));var f=e.groups;if(0<f.length)for(r=0;r<f.length;r++){var g=(a=f[r]).start,y=g;for(g+=a.count;y<g;y+=3)n!==void 0?t(n[y],n[y+1],n[y+2],a.materialIndex):t(y,y+1,y+2,a.materialIndex)}else if(n!==void 0)for(r=0;r<n.length;r+=3)t(n[r],n[r+1],n[r+2]);else for(r=0;r<a.length/3;r+=3)t(r,r+1,r+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ql).negate(),this.translate(ql.x,ql.y,ql.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=t===0?1:1/t;var i=new G;return i.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new u,t=new u,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],a=this.vertices[r.a],s=this.vertices[r.b];e.subVectors(this.vertices[r.c],s),t.subVectors(a,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t;e===void 0&&(e=!0);var i=Array(this.vertices.length),n=0;for(t=this.vertices.length;n<t;n++)i[n]=new u;if(e){var r=new u,a=new u;for(e=0,n=this.faces.length;e<n;e++){t=this.faces[e];var s=this.vertices[t.a],l=this.vertices[t.b],c=this.vertices[t.c];r.subVectors(c,l),a.subVectors(s,l),r.cross(a),i[t.a].add(r),i[t.b].add(r),i[t.c].add(r)}}else for(this.computeFaceNormals(),e=0,n=this.faces.length;e<n;e++)i[(t=this.faces[e]).a].add(t.normal),i[t.b].add(t.normal),i[t.c].add(t.normal);for(n=0,t=this.vertices.length;n<t;n++)i[n].normalize();for(e=0,n=this.faces.length;e<n;e++)(s=(t=this.faces[e]).vertexNormals).length===3?(s[0].copy(i[t.a]),s[1].copy(i[t.b]),s[2].copy(i[t.c])):(s[0]=i[t.a].clone(),s[1]=i[t.b].clone(),s[2]=i[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var i=this.faces[t],n=i.vertexNormals;n.length===3?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i=0;for(t=this.faces.length;i<t;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var r=0;for(e=n.vertexNormals.length;r<e;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new ht;for(a.faces=this.faces,r=0,e=this.morphTargets.length;r<e;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],n=this.morphNormals[r].faceNormals;var s=this.morphNormals[r].vertexNormals;for(i=0,t=this.faces.length;i<t;i++){var l=new u,c={a:new u,b:new u,c:new u};n.push(l),s.push(c)}}for(s=this.morphNormals[r],a.vertices=this.morphTargets[r].vertices,a.computeFaceNormals(),a.computeVertexNormals(),i=0,t=this.faces.length;i<t;i++)n=this.faces[i],l=s.faceNormals[i],c=s.vertexNormals[i],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(i=0,t=this.faces.length;i<t;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new ee),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ye),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,a=this.vertices,s=e.vertices,l=this.faces,c=e.faces,h=this.colors,f=e.colors;i===void 0&&(i=0),t!==void 0&&(n=new E().getNormalMatrix(t));for(var g=0,y=s.length;g<y;g++){var L=s[g].clone();t!==void 0&&L.applyMatrix4(t),a.push(L)}for(g=0,y=f.length;g<y;g++)h.push(f[g].clone());for(g=0,y=c.length;g<y;g++){var C=(s=c[g]).vertexNormals;for(f=s.vertexColors,(h=new j(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),n!==void 0&&h.normal.applyMatrix3(n).normalize(),t=0,a=C.length;t<a;t++)L=C[t].clone(),n!==void 0&&L.applyMatrix3(n).normalize(),h.vertexNormals.push(L);for(h.color.copy(s.color),t=0,a=f.length;t<a;t++)L=f[t],h.vertexColors.push(L.clone());h.materialIndex=s.materialIndex+i,l.push(h)}for(g=0,y=e.faceVertexUvs.length;g<y;g++)for(i=e.faceVertexUvs[g],this.faceVertexUvs[g]===void 0&&(this.faceVertexUvs[g]=[]),t=0,a=i.length;t<a;t++){for(r=[],l=0,c=(n=i[t]).length;l<c;l++)r.push(n[l].clone());this.faceVertexUvs[g].push(r)}}},mergeMesh:function(e){e&&e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t={},i=[],n=[],r=Math.pow(10,4),a=0;for(e=this.vertices.length;a<e;a++){var s=this.vertices[a];t[s=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r)]===void 0?(t[s]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[t[s]]}for(t=[],a=0,e=this.faces.length;a<e;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],s=0;3>s;s++)if(r[s]===r[(s+1)%3]){t.push(a);break}for(a=t.length-1;0<=a;a--)for(r=t[a],this.faces.splice(r,1),n=0,e=this.faceVertexUvs.length;n<e;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];this.vertices.push(new u(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(c,h){return c.materialIndex-h.materialIndex});var n,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(a&&a.length===t&&(n=[]),s&&s.length===t&&(r=[]),i=0;i<t;i++){var l=e[i]._id;n&&n.push(a[l]),r&&r.push(s[l])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function e(ie,Ne,Ve){return Ve?ie|1<<Ne:ie&~(1<<Ne)}function t(ie){var Ne=ie.x.toString()+ie.y.toString()+ie.z.toString();return h[Ne]!==void 0||(h[Ne]=c.length/3,c.push(ie.x,ie.y,ie.z)),h[Ne]}function i(ie){var Ne=ie.r.toString()+ie.g.toString()+ie.b.toString();return g[Ne]!==void 0||(g[Ne]=f.length,f.push(ie.getHex())),g[Ne]}function n(ie){var Ne=ie.x.toString()+ie.y.toString();return L[Ne]!==void 0||(L[Ne]=y.length/2,y.push(ie.x,ie.y)),L[Ne]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.parameters!==void 0){var a,s=this.parameters;for(a in s)s[a]!==void 0&&(r[a]=s[a]);return r}for(s=[],a=0;a<this.vertices.length;a++){var l=this.vertices[a];s.push(l.x,l.y,l.z)}l=[];var c=[],h={},f=[],g={},y=[],L={};for(a=0;a<this.faces.length;a++){var C=this.faces[a],I=this.faceVertexUvs[0][a]!==void 0,q=0<C.normal.length(),de=0<C.vertexNormals.length,fe=C.color.r!==1||C.color.g!==1||C.color.b!==1,me=0<C.vertexColors.length,xe=0;xe=e(xe,0,0),xe=e(xe,1,!0),xe=e(xe,2,!1),xe=e(xe,3,I),xe=e(xe,4,q),xe=e(xe,5,de),xe=e(xe,6,fe),xe=e(xe,7,me),l.push(xe),l.push(C.a,C.b,C.c),l.push(C.materialIndex),I&&(I=this.faceVertexUvs[0][a],l.push(n(I[0]),n(I[1]),n(I[2]))),q&&l.push(t(C.normal)),de&&(q=C.vertexNormals,l.push(t(q[0]),t(q[1]),t(q[2]))),fe&&l.push(i(C.color)),me&&(C=C.vertexColors,l.push(i(C[0]),i(C[1]),i(C[2])))}return r.data={},r.data.vertices=s,r.data.normals=c,0<f.length&&(r.data.colors=f),0<y.length&&(r.data.uvs=[y]),r.data.faces=l,r},clone:function(){return new ht().copy(this)},copy:function(e){var t,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var r=e.vertices,a=0;for(t=r.length;a<t;a++)this.vertices.push(r[a].clone());for(a=0,t=(r=e.colors).length;a<t;a++)this.colors.push(r[a].clone());for(a=0,t=(r=e.faces).length;a<t;a++)this.faces.push(r[a].clone());for(a=0,t=e.faceVertexUvs.length;a<t;a++){var s=e.faceVertexUvs[a];for(this.faceVertexUvs[a]===void 0&&(this.faceVertexUvs[a]=[]),r=0,i=s.length;r<i;r++){var l=s[r],c=[],h=0;for(n=l.length;h<n;h++)c.push(l[h].clone());this.faceVertexUvs[a].push(c)}}for(a=0,t=(h=e.morphTargets).length;a<t;a++){if((n={}).name=h[a].name,h[a].vertices!==void 0)for(n.vertices=[],r=0,i=h[a].vertices.length;r<i;r++)n.vertices.push(h[a].vertices[r].clone());if(h[a].normals!==void 0)for(n.normals=[],r=0,i=h[a].normals.length;r<i;r++)n.normals.push(h[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,t=(h=e.morphNormals).length;a<t;a++){if(n={},h[a].vertexNormals!==void 0)for(n.vertexNormals=[],r=0,i=h[a].vertexNormals.length;r<i;r++)s=h[a].vertexNormals[r],(l={}).a=s.a.clone(),l.b=s.b.clone(),l.c=s.c.clone(),n.vertexNormals.push(l);if(h[a].faceNormals!==void 0)for(n.faceNormals=[],r=0,i=h[a].faceNormals.length;r<i;r++)n.faceNormals.push(h[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,t=(r=e.skinWeights).length;a<t;a++)this.skinWeights.push(r[a].clone());for(a=0,t=(r=e.skinIndices).length;a<t;a++)this.skinIndices.push(r[a].clone());for(a=0,t=(r=e.lineDistances).length;a<t;a++)this.lineDistances.push(r[a]);return(a=e.boundingBox)!==null&&(this.boundingBox=a.clone()),(a=e.boundingSphere)!==null&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),li.prototype=Object.create(ht.prototype),li.prototype.constructor=li,K.prototype=Object.create(ze.prototype),K.prototype.constructor=K;var Zf={clone:ue,merge:Te};Ge.prototype=Object.create(M.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isShaderMaterial=!0,Ge.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ue(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ge.prototype.toJSON=function(e){var t=M.prototype.toJSON.call(this,e);for(var i in t.uniforms={},this.uniforms){var n=this.uniforms[i].value;t.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,e={},this.extensions)this.extensions[r]===!0&&(e[r]=!0);return 0<Object.keys(e).length&&(t.extensions=e),t},Oe.prototype=Object.assign(Object.create(Q.prototype),{constructor:Oe,isCamera:!0,copy:function(e,t){return Q.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(e=new u),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Q.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Se.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Se,isPerspectiveCamera:!0,copy:function(e,t){return Oe.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*Ht.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Ht.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Ht.RAD2DEG*Math.atan(Math.tan(.5*Ht.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Ht.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(this.view!==null&&this.view.enabled){var s=a.fullWidth,l=a.fullHeight;r+=a.offsetX*n/s,t-=a.offsetY*i/l,n*=a.width/s,i*=a.height/l}(a=this.filmOffset)!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=Q.prototype.toJSON.call(this,e)).object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),nt.prototype=Object.create(Q.prototype),nt.prototype.constructor=nt,He.prototype=Object.create(A.prototype),He.prototype.constructor=He,He.prototype.isWebGLRenderTargetCube=!0,He.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var i=new Pe,n=new Ge({type:"CubemapFromEquirect",uniforms:ue({tEquirect:{value:null}}),vertexShader:`varying vec3 vWorldDirection;
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragmentShader:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}`,side:1,blending:0});return n.uniforms.tEquirect.value=t,t=new st(new K(5,5,5),n),i.add(t),(n=new nt(1,10,1)).renderTarget=this,n.renderTarget.texture.name="CubeCameraTexture",n.update(e,i),t.geometry.dispose(),t.material.dispose(),this},ke.prototype=Object.create(F.prototype),ke.prototype.constructor=ke,ke.prototype.isDataTexture=!0;var Uh=new u,Jf=new u,Qf=new E;Object.assign(Ae.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,i){return t=Uh.subVectors(i,t).cross(Jf.subVectors(e,t)).normalize(),this.setFromNormalAndCoplanarPoint(t,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return t===void 0&&(t=new u),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){t===void 0&&(t=new u);var i=e.delta(Uh),n=this.normal.dot(i);if(n===0){if(this.distanceToPoint(e.start)===0)return t.copy(e.start)}else if(!(0>(n=-(e.start.dot(this.normal)+this.constant)/n)||1<n))return t.copy(i).multiplyScalar(n).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&0<e||0>e&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(e=new u),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){return t=t||Qf.getNormalMatrix(e),e=this.coplanarPoint(Uh).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize(),this.constant=-e.dot(t),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Ao=new Ye,Zl=new u;Object.assign(rt.prototype,{set:function(e,t,i,n,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var n=i[1],r=i[2],a=i[3],s=i[4],l=i[5],c=i[6],h=i[7],f=i[8],g=i[9],y=i[10],L=i[11],C=i[12],I=i[13],q=i[14];return i=i[15],t[0].setComponents(a-e,h-s,L-f,i-C).normalize(),t[1].setComponents(a+e,h+s,L+f,i+C).normalize(),t[2].setComponents(a+n,h+l,L+g,i+I).normalize(),t[3].setComponents(a-n,h-l,L-g,i-I).normalize(),t[4].setComponents(a-r,h-c,L-y,i-q).normalize(),t[5].setComponents(a+r,h+c,L+y,i+q).normalize(),this},intersectsObject:function(e){var t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ao.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)},intersectsSprite:function(e){return Ao.center.set(0,0,0),Ao.radius=.7071067811865476,Ao.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ao)},intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var n=0;6>n;n++)if(t[n].distanceToPoint(i)<e)return!1;return!0},intersectsBox:function(e){for(var t=this.planes,i=0;6>i;i++){var n=t[i];if(Zl.x=0<n.normal.x?e.max.x:e.min.x,Zl.y=0<n.normal.y?e.max.y:e.min.y,Zl.z=0<n.normal.z?e.max.z:e.min.z,0>n.distanceToPoint(Zl))return!1}return!0},containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(0>t[i].distanceToPoint(e))return!1;return!0}});var ti={alphamap_fragment:`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alphamap_pars_fragment:`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment:`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,aomap_fragment:`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,aomap_pars_fragment:`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs:`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,bumpmap_pars_fragment:`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment:`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment:`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	varying vec3 vViewPosition;
#endif`,clipping_planes_vertex:`#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )
	vViewPosition = - mvPosition.xyz;
#endif`,color_fragment:`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_pars_vertex:`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,color_vertex:`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,common:`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}`,cube_uv_reflection_fragment:`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif`,defaultnormal_vertex:`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = normalMatrix * objectTangent;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex:`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex:`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment:`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment:`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,envmap_fragment:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment:`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment:`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex:`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_physical_pars_fragment:`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,envmap_vertex:`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex:`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,fog_pars_vertex:`#ifdef USE_FOG
	varying float fogDepth;
#endif`,fog_fragment:`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment:`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment:`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif`,lightmap_fragment:`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif`,lightmap_pars_fragment:`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_vertex:`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif`,lights_pars_begin:`uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,lights_phong_fragment:`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment:`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lights_physical_fragment:`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = saturate( clearcoat );	material.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lights_physical_pars_fragment:`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin:`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps:`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,lights_fragment_end:`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment:`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
#endif`,logdepthbuf_pars_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex:`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
		gl_Position.z *= gl_Position.w;
	#endif
#endif`,map_fragment:`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,map_pars_fragment:`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment:`#ifdef USE_MAP
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif`,map_particle_pars_fragment:`#ifdef USE_MAP
	uniform mat3 uvTransform;
	uniform sampler2D map;
#endif`,metalnessmap_fragment:`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment:`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphnormal_vertex:`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif`,morphtarget_pars_vertex:`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,morphtarget_vertex:`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif`,normal_fragment_begin:`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps:`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	#ifdef USE_TANGENT
		mat3 vTBN = mat3( tangent, bitangent, normal );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, normalScale, normalMap );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,normalmap_pars_fragment:`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 normalScale, in sampler2D normalMap ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy *= normalScale;
		#ifdef DOUBLE_SIDED
			vec3 NfromST = cross( S, T );
			if( dot( NfromST, N ) > 0.0 ) {
				S *= -1.0;
				T *= -1.0;
			}
		#else
			mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif`,clearcoat_normal_fragment_begin:`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps:`#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 vTBN = mat3( tangent, bitangent, clearcoatNormal );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = clearcoatNormalScale * mapN.xy;
		clearcoatNormal = normalize( vTBN * mapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatNormalScale, clearcoatNormalMap );
	#endif
#endif`,clearcoat_normalmap_pars_fragment:`#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,packing:`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 encodeHalfRGBA ( vec2 v ) {
	vec4 encoded = vec4( 0.0 );
	const vec2 offset = vec2( 1.0 / 255.0, 0.0 );
	encoded.xy = vec2( v.x, fract( v.x * 255.0 ) );
	encoded.xy = encoded.xy - ( encoded.yy * offset );
	encoded.zw = vec2( v.y, fract( v.y * 255.0 ) );
	encoded.zw = encoded.zw - ( encoded.ww * offset );
	return encoded;
}
vec2 decodeHalfRGBA( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,premultiplied_alpha_fragment:`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex:`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment:`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment:`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment:`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment:`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return decodeHalfRGBA( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex:`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif`,shadowmask_pars_fragment:`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLight directionalLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLight spotLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLight pointLight;
	#pragma unroll_loop
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}`,skinbase_vertex:`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex:`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,skinning_vertex:`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex:`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment:`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment:`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment:`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment:`#ifndef saturate
	#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );
}`,uv_pars_fragment:`#ifdef USE_UV
	varying vec2 vUv;
#endif`,uv_pars_vertex:`#ifdef USE_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif`,uv_vertex:`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uv2_pars_fragment:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,uv2_pars_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,uv2_vertex:`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,worldpos_vertex:`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif`,background_frag:`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = mapTexelToLinear( texColor );
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,normal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,normal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <fog_fragment>
}`,shadow_vert:`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`},Pt={common:{diffuse:{value:new S(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new E},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new m(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new S(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new S(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new E}},sprite:{diffuse:{value:new S(15658734)},opacity:{value:1},center:{value:new m(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new E}}},ar={basic:{uniforms:Te([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.fog]),vertexShader:ti.meshbasic_vert,fragmentShader:ti.meshbasic_frag},lambert:{uniforms:Te([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.fog,Pt.lights,{emissive:{value:new S(0)}}]),vertexShader:ti.meshlambert_vert,fragmentShader:ti.meshlambert_frag},phong:{uniforms:Te([Pt.common,Pt.specularmap,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.gradientmap,Pt.fog,Pt.lights,{emissive:{value:new S(0)},specular:{value:new S(1118481)},shininess:{value:30}}]),vertexShader:ti.meshphong_vert,fragmentShader:ti.meshphong_frag},standard:{uniforms:Te([Pt.common,Pt.envmap,Pt.aomap,Pt.lightmap,Pt.emissivemap,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.roughnessmap,Pt.metalnessmap,Pt.fog,Pt.lights,{emissive:{value:new S(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ti.meshphysical_vert,fragmentShader:ti.meshphysical_frag},matcap:{uniforms:Te([Pt.common,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,Pt.fog,{matcap:{value:null}}]),vertexShader:ti.meshmatcap_vert,fragmentShader:ti.meshmatcap_frag},points:{uniforms:Te([Pt.points,Pt.fog]),vertexShader:ti.points_vert,fragmentShader:ti.points_frag},dashed:{uniforms:Te([Pt.common,Pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ti.linedashed_vert,fragmentShader:ti.linedashed_frag},depth:{uniforms:Te([Pt.common,Pt.displacementmap]),vertexShader:ti.depth_vert,fragmentShader:ti.depth_frag},normal:{uniforms:Te([Pt.common,Pt.bumpmap,Pt.normalmap,Pt.displacementmap,{opacity:{value:1}}]),vertexShader:ti.normal_vert,fragmentShader:ti.normal_frag},sprite:{uniforms:Te([Pt.sprite,Pt.fog]),vertexShader:ti.sprite_vert,fragmentShader:ti.sprite_frag},background:{uniforms:{uvTransform:{value:new E},t2D:{value:null}},vertexShader:ti.background_vert,fragmentShader:ti.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ti.cube_vert,fragmentShader:ti.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ti.equirect_vert,fragmentShader:ti.equirect_frag},distanceRGBA:{uniforms:Te([Pt.common,Pt.displacementmap,{referencePosition:{value:new u},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ti.distanceRGBA_vert,fragmentShader:ti.distanceRGBA_frag},shadow:{uniforms:Te([Pt.lights,Pt.fog,{color:{value:new S(0)},opacity:{value:1}}]),vertexShader:ti.shadow_vert,fragmentShader:ti.shadow_frag}};ar.physical={uniforms:Te([ar.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new S(0)},clearcoatNormalScale:{value:new m(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:ti.meshphysical_vert,fragmentShader:ti.meshphysical_frag},v.prototype=Object.create(ht.prototype),v.prototype.constructor=v,P.prototype=Object.create(ze.prototype),P.prototype.constructor=P,ut.prototype=Object.create(F.prototype),ut.prototype.constructor=ut,ut.prototype.isCubeTexture=!0,Object.defineProperty(ut.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),ni.prototype=Object.create(F.prototype),ni.prototype.constructor=ni,ni.prototype.isDataTexture2DArray=!0,xi.prototype=Object.create(F.prototype),xi.prototype.constructor=xi,xi.prototype.isDataTexture3D=!0;var wp=new F,$f=new ni,Kf=new xi,Mp=new ut,Sp=[],Tp=[],Ap=new Float32Array(16),Pp=new Float32Array(9),Cp=new Float32Array(4);ll.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Fi(t,e)},cl.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var s=n[r];s.setValue(e,t[s.id],i)}};var Gh=/([\w\d_]+)(\])?(\[|\.)?/g;Zn.prototype.setValue=function(e,t,i,n){(t=this.map[t])!==void 0&&t.setValue(e,i,n)},Zn.prototype.setOptional=function(e,t,i){(t=t[i])!==void 0&&this.setValue(e,i,t)},Zn.upload=function(e,t,i,n){for(var r=0,a=t.length;r!==a;++r){var s=t[r],l=i[s.id];l.needsUpdate!==!1&&s.setValue(e,l.value,n)}},Zn.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var a=e[n];a.id in t&&i.push(a)}return i};var em=0,tm=0;Gt.prototype=Object.create(M.prototype),Gt.prototype.constructor=Gt,Gt.prototype.isMeshDepthMaterial=!0,Gt.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Vt.prototype=Object.create(M.prototype),Vt.prototype.constructor=Vt,Vt.prototype.isMeshDistanceMaterial=!0,Vt.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},gn.prototype=Object.assign(Object.create(Q.prototype),{constructor:gn,isGroup:!0}),pi.prototype=Object.assign(Object.create(Se.prototype),{constructor:pi,isArrayCamera:!0});var Lp=new u,Op=new u;Object.assign(Mi.prototype,p.prototype),Object.assign(Ui.prototype,p.prototype),Object.assign(Vi.prototype,{isFogExp2:!0,clone:function(){return new Vi(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ri.prototype,{isFog:!0,clone:function(){return new Ri(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(ii.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}}),Object.assign(ii.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=e!==void 0?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(An.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(An.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),Li.prototype=Object.create(M.prototype),Li.prototype.constructor=Li,Li.prototype.isSpriteMaterial=!0,Li.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Po,Vs=new u,Co=new u,Lo=new u,Oo=new m,js=new m,Ep=new G,Jl=new u,Ws=new u,Ql=new u,Dp=new m,Vh=new m,Np=new m;ji.prototype=Object.assign(Object.create(Q.prototype),{constructor:ji,isSprite:!0,raycast:function(e,t){e.camera,Co.setFromMatrixScale(this.matrixWorld),Ep.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Co.multiplyScalar(-Lo.z);var i=this.material.rotation;if(i!==0)var n=Math.cos(i),r=Math.sin(i);i=this.center,Jn(Jl.set(-.5,-.5,0),Lo,i,Co,r,n),Jn(Ws.set(.5,-.5,0),Lo,i,Co,r,n),Jn(Ql.set(.5,.5,0),Lo,i,Co,r,n),Dp.set(0,0),Vh.set(1,0),Np.set(1,1);var a=e.ray.intersectTriangle(Jl,Ws,Ql,!1,Vs);a===null&&(Jn(Ws.set(-.5,.5,0),Lo,i,Co,r,n),Vh.set(0,1),(a=e.ray.intersectTriangle(Jl,Ql,Ws,!1,Vs))===null)||(r=e.ray.origin.distanceTo(Vs))<e.near||r>e.far||t.push({distance:r,point:Vs.clone(),uv:Ie.getUV(Vs,Jl,Ws,Ql,Dp,Vh,Np,new m),face:null,object:this})},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Q.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this}});var $l=new u,Ip=new u;Pn.prototype=Object.assign(Object.create(Q.prototype),{constructor:Pn,isLOD:!0,copy:function(e){Q.prototype.copy.call(this,e,!1);for(var t=0,i=(e=e.levels).length;t<i;t++){var n=e[t];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:function(e,t){$l.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo($l);this.getObjectForDistance(i).raycast(e,t)},update:function(e){var t=this.levels;if(1<t.length){$l.setFromMatrixPosition(e.matrixWorld),Ip.setFromMatrixPosition(this.matrixWorld),e=$l.distanceTo(Ip),t[0].object.visible=!0;for(var i=1,n=t.length;i<n&&e>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<n;i++)t[i].object.visible=!1}},toJSON:function(e){(e=Q.prototype.toJSON.call(this,e)).object.levels=[];for(var t=this.levels,i=0,n=t.length;i<n;i++){var r=t[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),ns.prototype=Object.assign(Object.create(st.prototype),{constructor:ns,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new R,t=this.geometry.attributes.skinWeight,i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);var r=1/e.manhattanLength();1/0!==r?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){st.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"&&this.bindMatrixInverse.getInverse(this.bindMatrix)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Rp=new G,im=new G;Object.assign(hl.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new G;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i=0;for(t=this.bones.length;i<t;i++)(e=this.bones[i])&&e.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,t=this.bones.length;i<t;i++)(e=this.bones[i])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=e.length;r<a;r++)Rp.multiplyMatrices(e[r]?e[r].matrixWorld:im,t[r]),Rp.toArray(i,16*r);n!==void 0&&(n.needsUpdate=!0)},clone:function(){return new hl(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}}),$c.prototype=Object.assign(Object.create(Q.prototype),{constructor:$c,isBone:!0}),gi.prototype=Object.create(M.prototype),gi.prototype.constructor=gi,gi.prototype.isLineBasicMaterial=!0,gi.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var zp=new u,Fp=new u,kp=new G,Kl=new se,ec=new Ye;qi.prototype=Object.assign(Object.create(Q.prototype),{constructor:qi,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry){if(e.index===null){for(var t=e.attributes.position,i=[0],n=1,r=t.count;n<r;n++)zp.fromBufferAttribute(t,n-1),Fp.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=zp.distanceTo(Fp);e.addAttribute("lineDistance",new ve(i,1))}}else if(e.isGeometry)for(t=e.vertices,(i=e.lineDistances)[0]=0,n=1,r=t.length;n<r;n++)i[n]=i[n-1],i[n]+=t[n-1].distanceTo(t[n]);return this},raycast:function(e,t){var i=e.linePrecision,n=this.geometry,r=this.matrixWorld;if(n.boundingSphere===null&&n.computeBoundingSphere(),ec.copy(n.boundingSphere),ec.applyMatrix4(r),ec.radius+=i,e.ray.intersectsSphere(ec)!==!1){kp.getInverse(r),Kl.copy(e.ray).applyMatrix4(kp),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i;var a=new u,s=new u;r=new u;var l=new u,c=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,f=n.attributes.position.array;if(h!==null){n=0;for(var g=(h=h.array).length-1;n<g;n+=c){var y=h[n+1];a.fromArray(f,3*h[n]),s.fromArray(f,3*y),(y=Kl.distanceSqToSegment(a,s,l,r))>i||(l.applyMatrix4(this.matrixWorld),(y=e.ray.origin.distanceTo(l))<e.near||y>e.far||t.push({distance:y,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,g=f.length/3-1;n<g;n+=c)a.fromArray(f,3*n),s.fromArray(f,3*n+3),(y=Kl.distanceSqToSegment(a,s,l,r))>i||(l.applyMatrix4(this.matrixWorld),(y=e.ray.origin.distanceTo(l))<e.near||y>e.far||t.push({distance:y,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(s=(a=n.vertices).length,n=0;n<s-1;n+=c)(y=Kl.distanceSqToSegment(a[n],a[n+1],l,r))>i||(l.applyMatrix4(this.matrixWorld),(y=e.ray.origin.distanceTo(l))<e.near||y>e.far||t.push({distance:y,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var tc=new u,ic=new u;wi.prototype=Object.assign(Object.create(qi.prototype),{constructor:wi,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry){if(e.index===null){for(var t=e.attributes.position,i=[],n=0,r=t.count;n<r;n+=2)tc.fromBufferAttribute(t,n),ic.fromBufferAttribute(t,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+tc.distanceTo(ic);e.addAttribute("lineDistance",new ve(i,1))}}else if(e.isGeometry)for(t=e.vertices,i=e.lineDistances,n=0,r=t.length;n<r;n+=2)tc.copy(t[n]),ic.copy(t[n+1]),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+tc.distanceTo(ic);return this}}),ul.prototype=Object.assign(Object.create(qi.prototype),{constructor:ul,isLineLoop:!0}),Cn.prototype=Object.create(M.prototype),Cn.prototype.constructor=Cn,Cn.prototype.isPointsMaterial=!0,Cn.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var Bp=new G,jh=new se,nc=new Ye,rc=new u;Ua.prototype=Object.assign(Object.create(Q.prototype),{constructor:Ua,isPoints:!0,raycast:function(e,t){var i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold;if(i.boundingSphere===null&&i.computeBoundingSphere(),nc.copy(i.boundingSphere),nc.applyMatrix4(n),nc.radius+=r,e.ray.intersectsSphere(nc)!==!1)if(Bp.getInverse(n),jh.copy(e.ray).applyMatrix4(Bp),r/=(this.scale.x+this.scale.y+this.scale.z)/3,r*=r,i.isBufferGeometry){var a=i.index;if(i=i.attributes.position.array,a!==null){var s=a.array;a=0;for(var l=s.length;a<l;a++){var c=s[a];rc.fromArray(i,3*c),Kc(rc,c,r,n,e,t,this)}}else for(a=0,s=i.length/3;a<s;a++)rc.fromArray(i,3*a),Kc(rc,a,r,n,e,t,this)}else for(a=0,s=(i=i.vertices).length;a<s;a++)Kc(i[a],a,r,n,e,t,this)},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(i!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;e<t;e++){var n=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else(e=e.morphTargets)!==void 0&&e.length},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),eh.prototype=Object.assign(Object.create(F.prototype),{constructor:eh,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ga.prototype=Object.create(F.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isCompressedTexture=!0,rs.prototype=Object.create(F.prototype),rs.prototype.constructor=rs,rs.prototype.isCanvasTexture=!0,as.prototype=Object.create(F.prototype),as.prototype.constructor=as,as.prototype.isDepthTexture=!0,Va.prototype=Object.create(ze.prototype),Va.prototype.constructor=Va,os.prototype=Object.create(ht.prototype),os.prototype.constructor=os,ja.prototype=Object.create(ze.prototype),ja.prototype.constructor=ja,ss.prototype=Object.create(ht.prototype),ss.prototype.constructor=ss,un.prototype=Object.create(ze.prototype),un.prototype.constructor=un,ls.prototype=Object.create(ht.prototype),ls.prototype.constructor=ls,Wa.prototype=Object.create(un.prototype),Wa.prototype.constructor=Wa,cs.prototype=Object.create(ht.prototype),cs.prototype.constructor=cs,Kr.prototype=Object.create(un.prototype),Kr.prototype.constructor=Kr,hs.prototype=Object.create(ht.prototype),hs.prototype.constructor=hs,Ha.prototype=Object.create(un.prototype),Ha.prototype.constructor=Ha,us.prototype=Object.create(ht.prototype),us.prototype.constructor=us,Xa.prototype=Object.create(un.prototype),Xa.prototype.constructor=Xa,ps.prototype=Object.create(ht.prototype),ps.prototype.constructor=ps,ea.prototype=Object.create(ze.prototype),ea.prototype.constructor=ea,ea.prototype.toJSON=function(){var e=ze.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},ds.prototype=Object.create(ht.prototype),ds.prototype.constructor=ds,Ya.prototype=Object.create(ze.prototype),Ya.prototype.constructor=Ya,fs.prototype=Object.create(ht.prototype),fs.prototype.constructor=fs,qa.prototype=Object.create(ze.prototype),qa.prototype.constructor=qa;var nm=function(e,t,i){i=i||2;var n,r=t&&t.length,a=r?t[0]*i:e.length,s=Wu(e,0,a,i,!0),l=[];if(!s||s.next===s.prev)return l;if(r){var c,h=i;r=[];var f=0;for(c=t.length;f<c;f++){var g=t[f]*h;(g=Wu(e,g,f<c-1?t[f+1]*h:e.length,h,!1))===g.next&&(g.steiner=!0),r.push(If(g))}for(r.sort(Df),f=0;f<r.length;f++)(h=Nf(t=r[f],h=s))&&ms(t=Xu(h,t),t.next),s=ms(s,s.next)}if(e.length>80*i){var y=n=e[0],L=r=e[1];for(h=i;h<a;h+=i)(f=e[h])<y&&(y=f),(t=e[h+1])<L&&(L=t),f>n&&(n=f),t>r&&(r=t);n=(n=Math.max(n-y,r-L))!==0?1/n:0}return gs(s,l,i,y,L,n),l},wr={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return .5*i},isClockWise:function(e){return 0>wr.area(e)},triangulateShape:function(e,t){var i=[],n=[],r=[];qu(e),Zu(i,e);var a=e.length;for(t.forEach(qu),e=0;e<t.length;e++)n.push(a),a+=t[e].length,Zu(i,t[e]);for(t=nm(i,n),e=0;e<t.length;e+=3)r.push(t.slice(e,e+3));return r}};ia.prototype=Object.create(ht.prototype),ia.prototype.constructor=ia,ia.prototype.toJSON=function(){var e=ht.prototype.toJSON.call(this);return Ju(this.parameters.shapes,this.parameters.options,e)},Qn.prototype=Object.create(ze.prototype),Qn.prototype.constructor=Qn,Qn.prototype.toJSON=function(){var e=ze.prototype.toJSON.call(this);return Ju(this.parameters.shapes,this.parameters.options,e)};var rm={generateTopUV:function(e,t,i,n,r){e=t[3*n],n=t[3*n+1];var a=t[3*r];return r=t[3*r+1],[new m(t[3*i],t[3*i+1]),new m(e,n),new m(a,r)]},generateSideWallUV:function(e,t,i,n,r,a){e=t[3*i];var s=t[3*i+1];i=t[3*i+2];var l=t[3*n],c=t[3*n+1];n=t[3*n+2];var h=t[3*r],f=t[3*r+1];r=t[3*r+2];var g=t[3*a],y=t[3*a+1];return t=t[3*a+2],.01>Math.abs(s-c)?[new m(e,1-i),new m(l,1-n),new m(h,1-r),new m(g,1-t)]:[new m(s,1-i),new m(c,1-n),new m(f,1-r),new m(y,1-t)]}};_s.prototype=Object.create(ht.prototype),_s.prototype.constructor=_s,Ja.prototype=Object.create(Qn.prototype),Ja.prototype.constructor=Ja,xs.prototype=Object.create(ht.prototype),xs.prototype.constructor=xs,Er.prototype=Object.create(ze.prototype),Er.prototype.constructor=Er,bs.prototype=Object.create(ht.prototype),bs.prototype.constructor=bs,Qa.prototype=Object.create(ze.prototype),Qa.prototype.constructor=Qa,ws.prototype=Object.create(ht.prototype),ws.prototype.constructor=ws,$a.prototype=Object.create(ze.prototype),$a.prototype.constructor=$a,na.prototype=Object.create(ht.prototype),na.prototype.constructor=na,na.prototype.toJSON=function(){var e=ht.prototype.toJSON.call(this);return Qu(this.parameters.shapes,e)},ra.prototype=Object.create(ze.prototype),ra.prototype.constructor=ra,ra.prototype.toJSON=function(){var e=ze.prototype.toJSON.call(this);return Qu(this.parameters.shapes,e)},Ka.prototype=Object.create(ze.prototype),Ka.prototype.constructor=Ka,aa.prototype=Object.create(ht.prototype),aa.prototype.constructor=aa,dr.prototype=Object.create(ze.prototype),dr.prototype.constructor=dr,Ms.prototype=Object.create(aa.prototype),Ms.prototype.constructor=Ms,Ss.prototype=Object.create(dr.prototype),Ss.prototype.constructor=Ss,Ts.prototype=Object.create(ht.prototype),Ts.prototype.constructor=Ts,eo.prototype=Object.create(ze.prototype),eo.prototype.constructor=eo;var sn=Object.freeze({WireframeGeometry:Va,ParametricGeometry:os,ParametricBufferGeometry:ja,TetrahedronGeometry:ls,TetrahedronBufferGeometry:Wa,OctahedronGeometry:cs,OctahedronBufferGeometry:Kr,IcosahedronGeometry:hs,IcosahedronBufferGeometry:Ha,DodecahedronGeometry:us,DodecahedronBufferGeometry:Xa,PolyhedronGeometry:ss,PolyhedronBufferGeometry:un,TubeGeometry:ps,TubeBufferGeometry:ea,TorusKnotGeometry:ds,TorusKnotBufferGeometry:Ya,TorusGeometry:fs,TorusBufferGeometry:qa,TextGeometry:_s,TextBufferGeometry:Ja,SphereGeometry:xs,SphereBufferGeometry:Er,RingGeometry:bs,RingBufferGeometry:Qa,PlaneGeometry:v,PlaneBufferGeometry:P,LatheGeometry:ws,LatheBufferGeometry:$a,ShapeGeometry:na,ShapeBufferGeometry:ra,ExtrudeGeometry:ia,ExtrudeBufferGeometry:Qn,EdgesGeometry:Ka,ConeGeometry:Ms,ConeBufferGeometry:Ss,CylinderGeometry:aa,CylinderBufferGeometry:dr,CircleGeometry:Ts,CircleBufferGeometry:eo,BoxGeometry:li,BoxBufferGeometry:K});oa.prototype=Object.create(M.prototype),oa.prototype.constructor=oa,oa.prototype.isShadowMaterial=!0,oa.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this},to.prototype=Object.create(Ge.prototype),to.prototype.constructor=to,to.prototype.isRawShaderMaterial=!0,$n.prototype=Object.create(M.prototype),$n.prototype.constructor=$n,$n.prototype.isMeshStandardMaterial=!0,$n.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},sa.prototype=Object.create($n.prototype),sa.prototype.constructor=sa,sa.prototype.isMeshPhysicalMaterial=!0,sa.prototype.copy=function(e){return $n.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,this.sheen=e.sheen?(this.sheen||new S).copy(e.sheen):null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},Ln.prototype=Object.create(M.prototype),Ln.prototype.constructor=Ln,Ln.prototype.isMeshPhongMaterial=!0,Ln.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},la.prototype=Object.create(Ln.prototype),la.prototype.constructor=la,la.prototype.isMeshToonMaterial=!0,la.prototype.copy=function(e){return Ln.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},ca.prototype=Object.create(M.prototype),ca.prototype.constructor=ca,ca.prototype.isMeshNormalMaterial=!0,ca.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ha.prototype=Object.create(M.prototype),ha.prototype.constructor=ha,ha.prototype.isMeshLambertMaterial=!0,ha.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ua.prototype=Object.create(M.prototype),ua.prototype.constructor=ua,ua.prototype.isMeshMatcapMaterial=!0,ua.prototype.copy=function(e){return M.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},pa.prototype=Object.create(gi.prototype),pa.prototype.constructor=pa,pa.prototype.isLineDashedMaterial=!0,pa.prototype.copy=function(e){return gi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var am=Object.freeze({ShadowMaterial:oa,SpriteMaterial:Li,RawShaderMaterial:to,ShaderMaterial:Ge,PointsMaterial:Cn,MeshPhysicalMaterial:sa,MeshStandardMaterial:$n,MeshPhongMaterial:Ln,MeshToonMaterial:la,MeshNormalMaterial:ca,MeshLambertMaterial:ha,MeshDepthMaterial:Gt,MeshDistanceMaterial:Vt,MeshBasicMaterial:X,MeshMatcapMaterial:ua,LineDashedMaterial:pa,LineBasicMaterial:gi,Material:M}),Wi={arraySlice:function(e,t,i){return Wi.isTypedArray(e)?new e.constructor(e.subarray(t,i!==void 0?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=Array(t),n=0;n!==t;++n)i[n]=n;return i.sort(function(r,a){return e[r]-e[a]}),i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),a=0,s=0;s!==n;++a)for(var l=i[a]*t,c=0;c!==t;++c)r[s++]=e[l+c];return r},flattenJSON:function(e,t,i,n){for(var r=1,a=e[0];a!==void 0&&a[n]===void 0;)a=e[r++];if(a!==void 0){var s=a[n];if(s!==void 0)if(Array.isArray(s))do(s=a[n])!==void 0&&(t.push(a.time),i.push.apply(i,s)),a=e[r++];while(a!==void 0);else if(s.toArray!==void 0)do(s=a[n])!==void 0&&(t.push(a.time),s.toArray(i,i.length)),a=e[r++];while(a!==void 0);else do(s=a[n])!==void 0&&(t.push(a.time),i.push(s)),a=e[r++];while(a!==void 0)}}};Object.assign(vn.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{i:{n:if(!(e<n)){for(var a=i+2;;){if(n===void 0){if(e<r)break n;return this._cachedIndex=i=t.length,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,e<(n=t[++i]))break t}n=t.length;break i}if(e>=r)break e;for(e<(a=t[1])&&(i=2,r=a),a=i-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,e>=(r=t[--i-1]))break t}n=i,i=0}for(;i<n;)e<t[r=i+n>>>1]?n=r:i=r+1;if(n=t[i],(r=t[i-1])===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(n===void 0)return this._cachedIndex=i=t.length,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize;e*=n;for(var r=0;r!==n;++r)t[r]=i[e+r];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(vn.prototype,{beforeStart_:vn.prototype.copySampleValue_,afterEnd_:vn.prototype.copySampleValue_}),pl.prototype=Object.assign(Object.create(vn.prototype),{constructor:pl,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,a=e+1,s=n[r],l=n[a];if(s===void 0)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-i;break;case 2402:s=t+n[r=n.length-2]-n[r+1];break;default:r=e,s=i}if(l===void 0)switch(this.getSettings_().endingEnd){case 2401:a=e,l=2*i-t;break;case 2402:a=1,l=i+n[1]-n[0];break;default:a=e-1,l=t}e=.5*(i-t),n=this.valueSize,this._weightPrev=e/(t-s),this._weightNext=e/(l-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(e*=s)-s,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,g=this._weightNext,y=(i-t)/(n-t);for(t=-f*(n=(i=y*y)*y)+2*f*i-f*y,f=(1+f)*n+(-1.5-2*f)*i+(-.5+f)*y+1,y=(-1-g)*n+(1.5+g)*i+.5*y,g=g*n-g*i,i=0;i!==s;++i)r[i]=t*a[c+i]+f*a[l+i]+y*a[e+i]+g*a[h+i];return r}}),As.prototype=Object.assign(Object.create(vn.prototype),{constructor:As,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=(e*=s)-s;for(i=1-(t=(i-t)/(n-t)),n=0;n!==s;++n)r[n]=a[l+n]*i+a[e+n]*t;return r}}),dl.prototype=Object.assign(Object.create(vn.prototype),{constructor:dl,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Ji,{toJSON:function(e){var t=e.constructor;if(t.toJSON!==void 0)t=t.toJSON(e);else{t={name:e.name,times:Wi.convertArray(e.times,Array),values:Wi.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(Ji.prototype,{constructor:Ji,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new dl(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new As(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new pl(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(t===void 0){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,this.createInterpolant===void 0){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<e;)++r;for(;a!==-1&&i[a]>t;)--a;return++a,r===0&&a===n||(r>=a&&(r=(a=Math.max(a,1))-1),e=this.getValueSize(),this.times=Wi.arraySlice(i,r,a),this.values=Wi.arraySlice(this.values,r*e,a*e)),this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(e=!1);var i=this.times;t=this.values;var n=i.length;n===0&&(e=!1);for(var r=null,a=0;a!==n;a++){var s=i[a];if(typeof s=="number"&&isNaN(s)){e=!1;break}if(r!==null&&r>s){e=!1;break}r=s}if(t!==void 0&&Wi.isTypedArray(t)){for(a=0,i=t.length;a!==i;++a)if(n=t[a],isNaN(n)){e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=this.getInterpolation()===2302,r=1,a=e.length-1,s=1;s<a;++s){var l=!1,c=e[s];if(c!==e[s+1]&&(s!==1||c!==c[0]))if(n)l=!0;else{var h=s*i,f=h-i,g=h+i;for(c=0;c!==i;++c){var y=t[h+c];if(y!==t[f+c]||y!==t[g+c]){l=!0;break}}}if(l){if(s!==r)for(e[r]=e[s],l=s*i,h=r*i,c=0;c!==i;++c)t[h+c]=t[l+c];++r}}if(0<a){for(e[r]=e[a],l=a*i,h=r*i,c=0;c!==i;++c)t[h+c]=t[l+c];++r}return r!==e.length&&(this.times=Wi.arraySlice(e,0,r),this.values=Wi.arraySlice(t,0,r*i)),this},clone:function(){var e=Wi.arraySlice(this.times,0),t=Wi.arraySlice(this.values,0);return(e=new this.constructor(this.name,e,t)).createInterpolant=this.createInterpolant,e}}),fl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:fl,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ml.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ml,ValueTypeName:"color"}),io.prototype=Object.assign(Object.create(Ji.prototype),{constructor:io,ValueTypeName:"number"}),gl.prototype=Object.assign(Object.create(vn.prototype),{constructor:gl,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(t=(i-t)/(n-t),i=(e*=s)+s;e!==i;e+=4)T.slerpFlat(r,0,a,e-s,a,e,t);return r}}),Ps.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Ps,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new gl(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),vl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:vl,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),no.prototype=Object.assign(Object.create(Ji.prototype),{constructor:no,ValueTypeName:"vector"}),Object.assign(bn,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,a=i.length;r!==a;++r)t.push(Rf(i[r]).scale(n));return new bn(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var n=0,r=i.length;n!==r;++n)t.push(Ji.toJSON(i[n]));return e},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,a=[],s=0;s<r;s++){var l=[],c=[];l.push((s+r-1)%r,s,(s+1)%r),c.push(0,1,0);var h=Wi.getKeyframeOrder(l);l=Wi.sortedArray(l,1,h),c=Wi.sortedArray(c,1,h),n||l[0]!==0||(l.push(r),c.push(c[0])),a.push(new io(".morphTargetInfluences["+t[s].name+"]",l,c).scale(1/i))}return new bn(e,-1,a)},findByName:function(e,t){var i=e;for(Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations),e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var l=e[a],c=l.name.match(r);if(c&&1<c.length){var h=c[1];(c=n[h])||(n[h]=c=[]),c.push(l)}}for(h in e=[],n)e.push(bn.CreateFromMorphTargetSequence(h,n[h],t,i));return e},parseAnimation:function(e,t){if(!e)return null;var i=function(I,q,de,fe,me){if(de.length!==0){var xe=[],ie=[];Wi.flattenJSON(de,xe,ie,fe),xe.length!==0&&me.push(new I(q,xe,ie))}},n=[],r=e.name||"default",a=e.length||-1,s=e.fps||30;e=e.hierarchy||[];for(var l=0;l<e.length;l++){var c=e[l].keys;if(c&&c.length!==0)if(c[0].morphTargets){a={};for(var h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)a[c[h].morphTargets[f]]=-1;for(var g in a){var y=[],L=[];for(f=0;f!==c[h].morphTargets.length;++f){var C=c[h];y.push(C.time),L.push(C.morphTarget===g?1:0)}n.push(new io(".morphTargetInfluence["+g+"]",y,L))}a=a.length*(s||1)}else i(no,(h=".bones["+t[l].name+"]")+".position",c,"pos",n),i(Ps,h+".quaternion",c,"rot",n),i(no,h+".scale",c,"scl",n)}return n.length===0?null:new bn(r,a,n)}}),Object.assign(bn.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new bn(this.name,this.duration,e)}});var ba={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Up=new nh;Object.assign(di.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}}),di.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i+1];if(t[i].test(e))return r}return null}};var Un={};wn.prototype=Object.assign(Object.create(di.prototype),{constructor:wn,load:function(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=ba.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(Un[e]===void 0){var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){i=s[1];var l=!!s[2];s=s[3],s=decodeURIComponent(s),l&&(s=atob(s));try{var c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":var h=new Uint8Array(s.length);for(l=0;l<s.length;l++)h[l]=s.charCodeAt(l);var f=c==="blob"?new Blob([h.buffer],{type:i}):h.buffer;break;case"document":f=new DOMParser().parseFromString(s,i);break;case"json":f=JSON.parse(s);break;default:f=s}setTimeout(function(){t&&t(f),r.manager.itemEnd(e)},0)}catch(y){setTimeout(function(){n&&n(y),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{Un[e]=[],Un[e].push({onLoad:t,onProgress:i,onError:n});var g=new XMLHttpRequest;for(l in g.open("GET",e,!0),g.addEventListener("load",function(y){var L=this.response;ba.add(e,L);var C=Un[e];if(delete Un[e],this.status===200||this.status===0){this.status;for(var I=0,q=C.length;I<q;I++){var de=C[I];de.onLoad&&de.onLoad(L)}}else{for(I=0,q=C.length;I<q;I++)(de=C[I]).onError&&de.onError(y);r.manager.itemError(e)}r.manager.itemEnd(e)},!1),g.addEventListener("progress",function(y){for(var L=Un[e],C=0,I=L.length;C<I;C++){var q=L[C];q.onProgress&&q.onProgress(y)}},!1),g.addEventListener("error",function(y){var L=Un[e];delete Un[e];for(var C=0,I=L.length;C<I;C++){var q=L[C];q.onError&&q.onError(y)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),g.addEventListener("abort",function(y){var L=Un[e];delete Un[e];for(var C=0,I=L.length;C<I;C++){var q=L[C];q.onError&&q.onError(y)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),this.responseType!==void 0&&(g.responseType=this.responseType),this.withCredentials!==void 0&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain"),this.requestHeader)g.setRequestHeader(l,this.requestHeader[l]);g.send(null)}return r.manager.itemStart(e),g}Un[e].push({onLoad:t,onProgress:i,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),rh.prototype=Object.assign(Object.create(di.prototype),{constructor:rh,load:function(e,t,i,n){var r=this,a=new wn(r.manager);a.setPath(r.path),a.load(e,function(s){t(r.parse(JSON.parse(s)))},i,n)},parse:function(e){for(var t=[],i=0;i<e.length;i++){var n=bn.parse(e[i]);t.push(n)}return t}}),ah.prototype=Object.assign(Object.create(di.prototype),{constructor:ah,load:function(e,t,i,n){function r(y){c.load(e[y],function(L){L=a._parser(L,!0),s[y]={width:L.width,height:L.height,format:L.format,mipmaps:L.mipmaps},(h+=1)===6&&(L.mipmapCount===1&&(l.minFilter=1006),l.format=L.format,l.needsUpdate=!0,t&&t(l))},i,n)}var a=this,s=[],l=new Ga;l.image=s;var c=new wn(this.manager);if(c.setPath(this.path),c.setResponseType("arraybuffer"),Array.isArray(e))for(var h=0,f=0,g=e.length;f<g;++f)r(f);else c.load(e,function(y){if((y=a._parser(y,!0)).isCubemap)for(var L=y.mipmaps.length/y.mipmapCount,C=0;C<L;C++){s[C]={mipmaps:[]};for(var I=0;I<y.mipmapCount;I++)s[C].mipmaps.push(y.mipmaps[C*y.mipmapCount+I]),s[C].format=y.format,s[C].width=y.width,s[C].height=y.height}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=1006),l.format=y.format,l.needsUpdate=!0,t&&t(l)},i,n);return l}}),yl.prototype=Object.assign(Object.create(di.prototype),{constructor:yl,load:function(e,t,i,n){var r=this,a=new ke,s=new wn(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,function(l){(l=r._parser(l))&&(l.image!==void 0?a.image=l.image:l.data!==void 0&&(a.image.width=l.width,a.image.height=l.height,a.image.data=l.data),a.wrapS=l.wrapS!==void 0?l.wrapS:1001,a.wrapT=l.wrapT!==void 0?l.wrapT:1001,a.magFilter=l.magFilter!==void 0?l.magFilter:1006,a.minFilter=l.minFilter!==void 0?l.minFilter:1008,a.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(a.format=l.format),l.type!==void 0&&(a.type=l.type),l.mipmaps!==void 0&&(a.mipmaps=l.mipmaps),l.mipmapCount===1&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,l))},i,n),a}}),ro.prototype=Object.assign(Object.create(di.prototype),{constructor:ro,load:function(e,t,i,n){function r(){c.removeEventListener("load",r,!1),c.removeEventListener("error",a,!1),ba.add(e,this),t&&t(this),s.manager.itemEnd(e)}function a(h){c.removeEventListener("load",r,!1),c.removeEventListener("error",a,!1),n&&n(h),s.manager.itemError(e),s.manager.itemEnd(e)}this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var s=this,l=ba.get(e);if(l!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l;var c=document.createElementNS("http://www.w3.org/1999/xhtml","img");return c.addEventListener("load",r,!1),c.addEventListener("error",a,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),s.manager.itemStart(e),c.src=e,c}}),_l.prototype=Object.assign(Object.create(di.prototype),{constructor:_l,load:function(e,t,i,n){function r(c){s.load(e[c],function(h){a.images[c]=h,++l==6&&(a.needsUpdate=!0,t&&t(a))},void 0,n)}var a=new ut,s=new ro(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var l=0;for(i=0;i<e.length;++i)r(i);return a}}),xl.prototype=Object.assign(Object.create(di.prototype),{constructor:xl,load:function(e,t,i,n){var r=new F,a=new ro(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){r.image=s,s=0<e.search(/\.jpe?g($|\?)/i)||e.search(/^data:image\/jpeg/)===0,r.format=s?1022:1023,r.needsUpdate=!0,t!==void 0&&t(r)},i,n),r}}),Object.assign(Dt.prototype,{getPoint:function(){return null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],n=this.getPoint(0),r=0;for(i.push(0),t=1;t<=e;t++){var a=this.getPoint(t/e);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths(),n=i.length;t=t||e*i[n-1];for(var r,a=0,s=n-1;a<=s;)if(0>(r=i[e=Math.floor(a+(s-a)/2)]-t))a=e+1;else{if(!(0<r)){s=e;break}s=e-1}return i[e=s]===t?e/(n-1):(e+(t-(a=i[e]))/(i[e+1]-a))/(n-1)},getTangent:function(e){var t=e-1e-4;return 0>t&&(t=0),1<(e+=1e-4)&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var i,n=new u,r=[],a=[],s=[],l=new u,c=new G;for(i=0;i<=e;i++){var h=i/e;r[i]=this.getTangentAt(h),r[i].normalize()}a[0]=new u,s[0]=new u,i=Number.MAX_VALUE,h=Math.abs(r[0].x);var f=Math.abs(r[0].y),g=Math.abs(r[0].z);for(h<=i&&(i=h,n.set(1,0,0)),f<=i&&(i=f,n.set(0,1,0)),g<=i&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],l),s[0].crossVectors(r[0],a[0]),i=1;i<=e;i++)a[i]=a[i-1].clone(),s[i]=s[i-1].clone(),l.crossVectors(r[i-1],r[i]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(Ht.clamp(r[i-1].dot(r[i]),-1,1)),a[i].applyMatrix4(c.makeRotationAxis(l,n))),s[i].crossVectors(r[i],a[i]);if(t===!0)for(n=Math.acos(Ht.clamp(a[0].dot(a[e]),-1,1)),n/=e,0<r[0].dot(l.crossVectors(a[0],a[e]))&&(n=-n),i=1;i<=e;i++)a[i].applyMatrix4(c.makeRotationAxis(r[i],n*i)),s[i].crossVectors(r[i],a[i]);return{tangents:r,normals:a,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),yn.prototype=Object.create(Dt.prototype),yn.prototype.constructor=yn,yn.prototype.isEllipseCurve=!0,yn.prototype.getPoint=function(e,t){t=t||new m;for(var i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;0>n;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=r?0:i),this.aClockwise!==!0||r||(n=n===i?-i:n-i),i=this.aStartAngle+e*n,e=this.aX+this.xRadius*Math.cos(i);var a=this.aY+this.yRadius*Math.sin(i);return this.aRotation!==0&&(i=Math.cos(this.aRotation),n=Math.sin(this.aRotation),e=(r=e-this.aX)*i-(a-=this.aY)*n+this.aX,a=r*n+a*i+this.aY),t.set(e,a)},yn.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},yn.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},yn.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ao.prototype=Object.create(yn.prototype),ao.prototype.constructor=ao,ao.prototype.isArcCurve=!0;var ac=new u,Wh=new oh,Hh=new oh,Xh=new oh;$i.prototype=Object.create(Dt.prototype),$i.prototype.constructor=$i,$i.prototype.isCatmullRomCurve3=!0,$i.prototype.getPoint=function(e,t){t=t||new u;var i=this.points,n=i.length;e*=n-(this.closed?0:1);var r=Math.floor(e);if(e-=r,this.closed?r+=0<r?0:(Math.floor(Math.abs(r)/n)+1)*n:e===0&&r===n-1&&(r=n-2,e=1),this.closed||0<r)var a=i[(r-1)%n];else ac.subVectors(i[0],i[1]).add(i[0]),a=ac;var s=i[r%n],l=i[(r+1)%n];if(this.closed||r+2<n?i=i[(r+2)%n]:(ac.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=ac),this.curveType==="centripetal"||this.curveType==="chordal"){var c=this.curveType==="chordal"?.5:.25;n=Math.pow(a.distanceToSquared(s),c),1e-4>(r=Math.pow(s.distanceToSquared(l),c))&&(r=1),1e-4>n&&(n=r),1e-4>(c=Math.pow(l.distanceToSquared(i),c))&&(c=r),Wh.initNonuniformCatmullRom(a.x,s.x,l.x,i.x,n,r,c),Hh.initNonuniformCatmullRom(a.y,s.y,l.y,i.y,n,r,c),Xh.initNonuniformCatmullRom(a.z,s.z,l.z,i.z,n,r,c)}else this.curveType==="catmullrom"&&(Wh.initCatmullRom(a.x,s.x,l.x,i.x,this.tension),Hh.initCatmullRom(a.y,s.y,l.y,i.y,this.tension),Xh.initCatmullRom(a.z,s.z,l.z,i.z,this.tension));return t.set(Wh.calc(e),Hh.calc(e),Xh.calc(e)),t},$i.prototype.copy=function(e){Dt.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},$i.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},$i.prototype.fromJSON=function(e){Dt.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(new u().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},On.prototype=Object.create(Dt.prototype),On.prototype.constructor=On,On.prototype.isCubicBezierCurve=!0,On.prototype.getPoint=function(e,t){t=t||new m;var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Ls(e,i.x,n.x,r.x,a.x),Ls(e,i.y,n.y,r.y,a.y)),t},On.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},On.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},On.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Kn.prototype=Object.create(Dt.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isCubicBezierCurve3=!0,Kn.prototype.getPoint=function(e,t){t=t||new u;var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Ls(e,i.x,n.x,r.x,a.x),Ls(e,i.y,n.y,r.y,a.y),Ls(e,i.z,n.z,r.z,a.z)),t},Kn.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Kn.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Kn.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},pn.prototype=Object.create(Dt.prototype),pn.prototype.constructor=pn,pn.prototype.isLineCurve=!0,pn.prototype.getPoint=function(e,t){return t=t||new m,e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},pn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},pn.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},pn.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},pn.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},pn.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},En.prototype=Object.create(Dt.prototype),En.prototype.constructor=En,En.prototype.isLineCurve3=!0,En.prototype.getPoint=function(e,t){return t=t||new u,e===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},En.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},En.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},En.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},En.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Dn.prototype=Object.create(Dt.prototype),Dn.prototype.constructor=Dn,Dn.prototype.isQuadraticBezierCurve=!0,Dn.prototype.getPoint=function(e,t){t=t||new m;var i=this.v0,n=this.v1,r=this.v2;return t.set(Cs(e,i.x,n.x,r.x),Cs(e,i.y,n.y,r.y)),t},Dn.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Dn.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Dn.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},er.prototype=Object.create(Dt.prototype),er.prototype.constructor=er,er.prototype.isQuadraticBezierCurve3=!0,er.prototype.getPoint=function(e,t){t=t||new u;var i=this.v0,n=this.v1,r=this.v2;return t.set(Cs(e,i.x,n.x,r.x),Cs(e,i.y,n.y,r.y),Cs(e,i.z,n.z,r.z)),t},er.prototype.copy=function(e){return Dt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},er.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},er.prototype.fromJSON=function(e){return Dt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Nn.prototype=Object.create(Dt.prototype),Nn.prototype.constructor=Nn,Nn.prototype.isSplineCurve=!0,Nn.prototype.getPoint=function(e,t){t=t||new m;var i=this.points,n=(i.length-1)*e;n-=e=Math.floor(n);var r=i[e===0?e:e-1],a=i[e],s=i[e>i.length-2?i.length-1:e+1];return i=i[e>i.length-3?i.length-1:e+2],t.set($u(n,r.x,a.x,s.x,i.x),$u(n,r.y,a.y,s.y,i.y)),t},Nn.prototype.copy=function(e){Dt.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this},Nn.prototype.toJSON=function(){var e=Dt.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e},Nn.prototype.fromJSON=function(e){Dt.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push(new m().fromArray(n))}return this};var Yh=Object.freeze({ArcCurve:ao,CatmullRomCurve3:$i,CubicBezierCurve:On,CubicBezierCurve3:Kn,EllipseCurve:yn,LineCurve:pn,LineCurve3:En,QuadraticBezierCurve:Dn,QuadraticBezierCurve3:er,SplineCurve:Nn});fr.prototype=Object.assign(Object.create(Dt.prototype),{constructor:fr,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new pn(t,e))},getPoint:function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,i=(e=this.curves[e]).getLength(),e.getPointAt(i===0?0:1-t/i);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e);for(var s=0;s<a.length;s++){var l=a[s];t&&t.equals(l)||(i.push(l),t=l)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){Dt.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Dt.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Dt.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push(new Yh[n.type]().fromJSON(n))}return this}}),In.prototype=Object.assign(Object.create(fr.prototype),{constructor:In,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new pn(this.currentPoint.clone(),new m(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){e=new Dn(this.currentPoint.clone(),new m(e,t),new m(i,n)),this.curves.push(e),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,r,a){e=new On(this.currentPoint.clone(),new m(e,t),new m(i,n),new m(r,a)),this.curves.push(e),this.currentPoint.set(r,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new Nn(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,a){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a)},absarc:function(e,t,i,n,r,a){this.absellipse(e,t,i,i,n,r,a)},ellipse:function(e,t,i,n,r,a,s,l){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a,s,l)},absellipse:function(e,t,i,n,r,a,s,l){e=new yn(e,t,i,n,r,a,s,l),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)},copy:function(e){return fr.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=fr.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return fr.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Dr.prototype=Object.assign(Object.create(In.prototype),{constructor:Dr,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){In.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=In.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){In.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push(new In().fromJSON(n))}return this}}),Si.prototype=Object.assign(Object.create(Q.prototype),{constructor:Si,isLight:!0,copy:function(e){return Q.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return(e=Q.prototype.toJSON.call(this,e)).object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}),bl.prototype=Object.assign(Object.create(Si.prototype),{constructor:bl,isHemisphereLight:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(tr.prototype,{_projScreenMatrix:new G,_lightPositionWorld:new u,_lookTarget:new u,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,i=this.matrix,n=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(e.matrixWorld),t.position.copy(a),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(n),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),this.mapSize.x===512&&this.mapSize.y===512||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),wl.prototype=Object.assign(Object.create(tr.prototype),{constructor:wl,isSpotLightShadow:!0,updateMatrices:function(e,t,i){var n=this.camera,r=2*Ht.RAD2DEG*e.angle,a=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;r===n.fov&&a===n.aspect&&s===n.far||(n.fov=r,n.aspect=a,n.far=s,n.updateProjectionMatrix()),tr.prototype.updateMatrices.call(this,e,t,i)}}),Ml.prototype=Object.assign(Object.create(Si.prototype),{constructor:Ml,isSpotLight:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),sh.prototype=Object.assign(Object.create(tr.prototype),{constructor:sh,isPointLightShadow:!0,updateMatrices:function(e,t,i){t=this.camera;var n=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),t.position.copy(r),a.copy(t.position),a.add(this._cubeDirections[i]),t.up.copy(this._cubeUps[i]),t.lookAt(a),t.updateMatrixWorld(),n.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromMatrix(s)}}),Sl.prototype=Object.assign(Object.create(Si.prototype),{constructor:Sl,isPointLight:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Os.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Os,isOrthographicCamera:!0,copy:function(e,t){return Oe.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e;if(i+=e,e=n+t,t=n-t,this.view!==null&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,t=(e-=this.view.offsetY/t*n)-this.view.height/t*n}this.projectionMatrix.makeOrthographic(r,i,e,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=Q.prototype.toJSON.call(this,e)).object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}),Tl.prototype=Object.assign(Object.create(tr.prototype),{constructor:Tl,isDirectionalLightShadow:!0,updateMatrices:function(e,t,i){tr.prototype.updateMatrices.call(this,e,t,i)}}),Al.prototype=Object.assign(Object.create(Si.prototype),{constructor:Al,isDirectionalLight:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Pl.prototype=Object.assign(Object.create(Si.prototype),{constructor:Pl,isAmbientLight:!0}),Cl.prototype=Object.assign(Object.create(Si.prototype),{constructor:Cl,isRectAreaLight:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return(e=Si.prototype.toJSON.call(this,e)).object.width=this.width,e.object.height=this.height,e}}),Ll.prototype=Object.assign(Object.create(di.prototype),{constructor:Ll,load:function(e,t,i,n){var r=this,a=new wn(r.manager);a.setPath(r.path),a.load(e,function(s){t(r.parse(JSON.parse(s)))},i,n)},parse:function(e){function t(l){return i[l],i[l]}var i=this.textures,n=new am[e.type];if(e.uuid!==void 0&&(n.uuid=e.uuid),e.name!==void 0&&(n.name=e.name),e.color!==void 0&&n.color.setHex(e.color),e.roughness!==void 0&&(n.roughness=e.roughness),e.metalness!==void 0&&(n.metalness=e.metalness),e.emissive!==void 0&&n.emissive.setHex(e.emissive),e.specular!==void 0&&n.specular.setHex(e.specular),e.shininess!==void 0&&(n.shininess=e.shininess),e.clearcoat!==void 0&&(n.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=e.clearcoatRoughness),e.vertexColors!==void 0&&(n.vertexColors=e.vertexColors),e.fog!==void 0&&(n.fog=e.fog),e.flatShading!==void 0&&(n.flatShading=e.flatShading),e.blending!==void 0&&(n.blending=e.blending),e.combine!==void 0&&(n.combine=e.combine),e.side!==void 0&&(n.side=e.side),e.opacity!==void 0&&(n.opacity=e.opacity),e.transparent!==void 0&&(n.transparent=e.transparent),e.alphaTest!==void 0&&(n.alphaTest=e.alphaTest),e.depthTest!==void 0&&(n.depthTest=e.depthTest),e.depthWrite!==void 0&&(n.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(n.colorWrite=e.colorWrite),e.wireframe!==void 0&&(n.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(n.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(n.rotation=e.rotation),e.linewidth!==1&&(n.linewidth=e.linewidth),e.dashSize!==void 0&&(n.dashSize=e.dashSize),e.gapSize!==void 0&&(n.gapSize=e.gapSize),e.scale!==void 0&&(n.scale=e.scale),e.polygonOffset!==void 0&&(n.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(n.skinning=e.skinning),e.morphTargets!==void 0&&(n.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(n.morphNormals=e.morphNormals),e.dithering!==void 0&&(n.dithering=e.dithering),e.visible!==void 0&&(n.visible=e.visible),e.toneMapped!==void 0&&(n.toneMapped=e.toneMapped),e.userData!==void 0&&(n.userData=e.userData),e.uniforms!==void 0)for(var r in e.uniforms){var a=e.uniforms[r];switch(n.uniforms[r]={},a.type){case"t":n.uniforms[r].value=t(a.value);break;case"c":n.uniforms[r].value=new S().setHex(a.value);break;case"v2":n.uniforms[r].value=new m().fromArray(a.value);break;case"v3":n.uniforms[r].value=new u().fromArray(a.value);break;case"v4":n.uniforms[r].value=new R().fromArray(a.value);break;case"m3":n.uniforms[r].value=new E().fromArray(a.value);case"m4":n.uniforms[r].value=new G().fromArray(a.value);break;default:n.uniforms[r].value=a.value}}if(e.defines!==void 0&&(n.defines=e.defines),e.vertexShader!==void 0&&(n.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(n.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(var s in e.extensions)n.extensions[s]=e.extensions[s];return e.shading!==void 0&&(n.flatShading=e.shading===1),e.size!==void 0&&(n.size=e.size),e.sizeAttenuation!==void 0&&(n.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(n.map=t(e.map)),e.matcap!==void 0&&(n.matcap=t(e.matcap)),e.alphaMap!==void 0&&(n.alphaMap=t(e.alphaMap),n.transparent=!0),e.bumpMap!==void 0&&(n.bumpMap=t(e.bumpMap)),e.bumpScale!==void 0&&(n.bumpScale=e.bumpScale),e.normalMap!==void 0&&(n.normalMap=t(e.normalMap)),e.normalMapType!==void 0&&(n.normalMapType=e.normalMapType),e.normalScale!==void 0&&(r=e.normalScale,Array.isArray(r)===!1&&(r=[r,r]),n.normalScale=new m().fromArray(r)),e.displacementMap!==void 0&&(n.displacementMap=t(e.displacementMap)),e.displacementScale!==void 0&&(n.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(n.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(n.roughnessMap=t(e.roughnessMap)),e.metalnessMap!==void 0&&(n.metalnessMap=t(e.metalnessMap)),e.emissiveMap!==void 0&&(n.emissiveMap=t(e.emissiveMap)),e.emissiveIntensity!==void 0&&(n.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(n.specularMap=t(e.specularMap)),e.envMap!==void 0&&(n.envMap=t(e.envMap)),e.envMapIntensity!==void 0&&(n.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(n.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(n.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(n.lightMap=t(e.lightMap)),e.lightMapIntensity!==void 0&&(n.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(n.aoMap=t(e.aoMap)),e.aoMapIntensity!==void 0&&(n.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(n.gradientMap=t(e.gradientMap)),e.clearcoatNormalMap!==void 0&&(n.clearcoatNormalMap=t(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(n.clearcoatNormalScale=new m().fromArray(e.clearcoatNormalScale)),n},setTextures:function(e){return this.textures=e,this}});var qh={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t="",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};Ol.prototype=Object.assign(Object.create(ze.prototype),{constructor:Ol,isInstancedBufferGeometry:!0,copy:function(e){return ze.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e=ze.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),El.prototype=Object.assign(Object.create(w.prototype),{constructor:El,isInstancedBufferAttribute:!0,copy:function(e){return w.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=w.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Dl.prototype=Object.assign(Object.create(di.prototype),{constructor:Dl,load:function(e,t,i,n){var r=this,a=new wn(r.manager);a.setPath(r.path),a.load(e,function(s){t(r.parse(JSON.parse(s)))},i,n)},parse:function(e){var t=e.isInstancedBufferGeometry?new Ol:new ze,i=e.data.index;if(i!==void 0){var n=new Zh[i.type](i.array);t.setIndex(new w(n,1))}for(var r in i=e.data.attributes){var a=i[r];n=new Zh[a.type](a.array),n=new(a.isInstancedBufferAttribute?El:w)(n,a.itemSize,a.normalized),a.name!==void 0&&(n.name=a.name),t.addAttribute(r,n)}var s=e.data.morphAttributes;if(s)for(r in s){var l=s[r],c=[];i=0;for(var h=l.length;i<h;i++)a=l[i],n=new w(n=new Zh[a.type](a.array),a.itemSize,a.normalized),a.name!==void 0&&(n.name=a.name),c.push(n);t.morphAttributes[r]=c}if((r=e.data.groups||e.data.drawcalls||e.data.offsets)!==void 0)for(i=0,a=r.length;i!==a;++i)n=r[i],t.addGroup(n.start,n.count,n.materialIndex);return(i=e.data.boundingSphere)!==void 0&&(r=new u,i.center!==void 0&&r.fromArray(i.center),t.boundingSphere=new Ye(r,i.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var Zh={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};Nl.prototype=Object.assign(Object.create(di.prototype),{constructor:Nl,load:function(e,t,i,n){var r=this,a=this.path===""?qh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a,(a=new wn(r.manager)).setPath(this.path),a.load(e,function(s){var l=null;try{l=JSON.parse(s)}catch(c){return void(n!==void 0&&n(c))}(s=l.metadata)===void 0||s.type===void 0||s.type.toLowerCase()==="geometry"||r.parse(l,t)},i,n)},parse:function(e,t){var i=this.parseShape(e.shapes);i=this.parseGeometries(e.geometries,i);var n=this.parseImages(e.images,function(){t!==void 0&&t(r)});n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n);var r=this.parseObject(e.object,i,n);return e.animations&&(r.animations=this.parseAnimations(e.animations)),e.images!==void 0&&e.images.length!==0||t===void 0||t(r),r},parseShape:function(e){var t={};if(e!==void 0)for(var i=0,n=e.length;i<n;i++){var r=new Dr().fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(e!==void 0)for(var n=new Dl,r=0,a=e.length;r<a;r++){var s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var l=new sn[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new sn[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new sn[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new sn[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new sn[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new sn[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new sn[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new sn[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new sn[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new sn[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":l=new sn[s.type](new Yh[s.path.type]().fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":l=new sn[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new sn[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(var c=0,h=s.shapes.length;c<h;c++){var f=t[s.shapes[c]];l.push(f)}l=new sn[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,h=s.shapes.length;c<h;c++)f=t[s.shapes[c]],l.push(f);(c=s.options.extrudePath)!==void 0&&(s.options.extrudePath=new Yh[c.type]().fromJSON(c)),l=new sn[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":l=n.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE&&(l=new THREE.LegacyJSONLoader().parse(s,this.resourcePath).geometry);break;default:continue}l.uuid=s.uuid,s.name!==void 0&&(l.name=s.name),l.isBufferGeometry===!0&&s.userData!==void 0&&(l.userData=s.userData),i[s.uuid]=l}return i},parseMaterials:function(e,t){var i={},n={};if(e!==void 0){var r=new Ll;r.setTextures(t),t=0;for(var a=e.length;t<a;t++){var s=e[t];if(s.type==="MultiMaterial"){for(var l=[],c=0;c<s.materials.length;c++){var h=s.materials[c];i[h.uuid]===void 0&&(i[h.uuid]=r.parse(h)),l.push(i[h.uuid])}n[s.uuid]=l}else i[s.uuid]===void 0&&(i[s.uuid]=r.parse(s)),n[s.uuid]=i[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=bn.parse(n);n.uuid!==void 0&&(r.uuid=n.uuid),t.push(r)}return t},parseImages:function(e,t){function i(y){return n.manager.itemStart(y),a.load(y,function(){n.manager.itemEnd(y)},void 0,function(){n.manager.itemError(y),n.manager.itemEnd(y)})}var n=this,r={};if(e!==void 0&&0<e.length){var a=new ro(t=new nh(t));a.setCrossOrigin(this.crossOrigin),t=0;for(var s=e.length;t<s;t++){var l=e[t],c=l.url;if(Array.isArray(c)){r[l.uuid]=[];for(var h=0,f=c.length;h<f;h++){var g=c[h];g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(g)?g:n.resourcePath+g,r[l.uuid].push(i(g))}}else g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url,r[l.uuid]=i(g)}}return r},parseTextures:function(e,t){function i(c,h){return typeof c=="number"?c:h[c]}var n={};if(e!==void 0)for(var r=0,a=e.length;r<a;r++){var s=e[r];s.image,t[s.image];var l=Array.isArray(t[s.image])?new ut(t[s.image]):new F(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,s.name!==void 0&&(l.name=s.name),s.mapping!==void 0&&(l.mapping=i(s.mapping,om)),s.offset!==void 0&&l.offset.fromArray(s.offset),s.repeat!==void 0&&l.repeat.fromArray(s.repeat),s.center!==void 0&&l.center.fromArray(s.center),s.rotation!==void 0&&(l.rotation=s.rotation),s.wrap!==void 0&&(l.wrapS=i(s.wrap[0],Gp),l.wrapT=i(s.wrap[1],Gp)),s.format!==void 0&&(l.format=s.format),s.type!==void 0&&(l.type=s.type),s.encoding!==void 0&&(l.encoding=s.encoding),s.minFilter!==void 0&&(l.minFilter=i(s.minFilter,Vp)),s.magFilter!==void 0&&(l.magFilter=i(s.magFilter,Vp)),s.anisotropy!==void 0&&(l.anisotropy=s.anisotropy),s.flipY!==void 0&&(l.flipY=s.flipY),s.premultiplyAlpha!==void 0&&(l.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(l.unpackAlignment=s.unpackAlignment),n[s.uuid]=l}return n},parseObject:function(e,t,i){function n(h){return t[h],t[h]}function r(h){if(h!==void 0){if(Array.isArray(h)){for(var f=[],g=0,y=h.length;g<y;g++){var L=h[g];i[L],f.push(i[L])}return f}return i[h],i[h]}}switch(e.type){case"Scene":var a=new Pe;e.background!==void 0&&Number.isInteger(e.background)&&(a.background=new S(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Ri(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Vi(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Se(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Os(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Pl(e.color,e.intensity);break;case"DirectionalLight":a=new Al(e.color,e.intensity);break;case"PointLight":a=new Sl(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Cl(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ml(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new bl(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":case"Mesh":a=n(e.geometry);var s=r(e.material);a=a.bones&&0<a.bones.length?new ns(a,s):new st(a,s),e.drawMode!==void 0&&a.setDrawMode(e.drawMode);break;case"LOD":a=new Pn;break;case"Line":a=new qi(n(e.geometry),r(e.material),e.mode);break;case"LineLoop":a=new ul(n(e.geometry),r(e.material));break;case"LineSegments":a=new wi(n(e.geometry),r(e.material));break;case"PointCloud":case"Points":a=new Ua(n(e.geometry),r(e.material));break;case"Sprite":a=new ji(r(e.material));break;case"Group":a=new gn;break;default:a=new Q}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){s=e.children;for(var l=0;l<s.length;l++)a.add(this.parseObject(s[l],t,i))}if(e.type==="LOD")for(e=e.levels,s=0;s<e.length;s++){l=e[s];var c=a.getObjectByProperty("uuid",l.object);c!==void 0&&a.addLevel(c,l.distance)}return a}});var om={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Gp={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Vp={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};lh.prototype=Object.assign(Object.create(di.prototype),{constructor:lh,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=ba.get(e);if(a!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;fetch(e).then(function(s){return s.blob()}).then(function(s){return r.options===void 0?createImageBitmap(s):createImageBitmap(s,r.options)}).then(function(s){ba.add(e,s),t&&t(s),r.manager.itemEnd(e)}).catch(function(s){n&&n(s),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}),Object.assign(ch.prototype,{moveTo:function(e,t){this.currentPath=new In,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,a){this.currentPath.bezierCurveTo(e,t,i,n,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(q){for(var de=[],fe=0,me=q.length;fe<me;fe++){var xe=q[fe],ie=new Dr;ie.curves=xe.curves,de.push(ie)}return de}function n(q,de){for(var fe=de.length,me=!1,xe=fe-1,ie=0;ie<fe;xe=ie++){var Ne=de[xe],Ve=de[ie],bt=Ve.x-Ne.x,Ue=Ve.y-Ne.y;if(Math.abs(Ue)>Number.EPSILON){if(0>Ue&&(Ne=de[ie],bt=-bt,Ve=de[xe],Ue=-Ue),!(q.y<Ne.y||q.y>Ve.y))if(q.y===Ne.y){if(q.x===Ne.x)return!0}else{if((xe=Ue*(q.x-Ne.x)-bt*(q.y-Ne.y))==0)return!0;0>xe||(me=!me)}}else if(q.y===Ne.y&&(Ve.x<=q.x&&q.x<=Ne.x||Ne.x<=q.x&&q.x<=Ve.x))return!0}return me}var r=wr.isClockWise,a=this.subPaths;if(a.length===0)return[];if(t===!0)return i(a);if(t=[],a.length===1){var s=a[0],l=new Dr;return l.curves=s.curves,t.push(l),t}var c=!r(a[0].getPoints());c=e?!c:c,l=[];var h=[],f=[],g=0;h[g]=void 0,f[g]=[];for(var y=0,L=a.length;y<L;y++){var C=(s=a[y]).getPoints(),I=r(C);(I=e?!I:I)?(!c&&h[g]&&g++,h[g]={s:new Dr,p:C},h[g].s.curves=s.curves,c&&g++,f[g]=[]):f[g].push({h:s,p:C[0]})}if(!h[0])return i(a);if(1<h.length){for(y=!1,e=[],r=0,a=h.length;r<a;r++)l[r]=[];for(r=0,a=h.length;r<a;r++)for(s=f[r],I=0;I<s.length;I++){for(c=s[I],g=!0,C=0;C<h.length;C++)n(c.p,h[C].p)&&(r!==C&&e.push({froms:r,tos:C,hole:I}),g?(g=!1,l[C].push(c)):y=!0);g&&l[r].push(c)}0<e.length&&(y||(f=l))}for(y=0,r=h.length;y<r;y++)for(l=h[y].s,t.push(l),a=0,s=(e=f[y]).length;a<s;a++)l.holes.push(e[a].h);return t}}),Object.assign(hh.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);var i=[],n=t;t=this.data;var r=Array.from?Array.from(e):String(e).split("");n/=t.resolution;var a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n;e=[];for(var s=0,l=0,c=0;c<r.length;c++){var h=r[c];if(h===`
`)s=0,l-=a;else{var f=h;h=n;var g=s,y=l,L=t,C=L.glyphs[f]||L.glyphs["?"];if(C){if(f=new ch,C.o)for(var I=0,q=(L=C._cachedOutline||(C._cachedOutline=C.o.split(" "))).length;I<q;)switch(L[I++]){case"m":var de=L[I++]*h+g,fe=L[I++]*h+y;f.moveTo(de,fe);break;case"l":de=L[I++]*h+g,fe=L[I++]*h+y,f.lineTo(de,fe);break;case"q":var me=L[I++]*h+g,xe=L[I++]*h+y,ie=L[I++]*h+g,Ne=L[I++]*h+y;f.quadraticCurveTo(ie,Ne,me,xe);break;case"b":me=L[I++]*h+g,xe=L[I++]*h+y,ie=L[I++]*h+g,Ne=L[I++]*h+y,de=L[I++]*h+g,fe=L[I++]*h+y,f.bezierCurveTo(ie,Ne,de,fe,me,xe)}h={offsetX:C.ha*h,path:f}}else h=void 0;s+=h.offsetX,e.push(h.path)}}for(t=0,r=e.length;t<r;t++)Array.prototype.push.apply(i,e[t].toShapes());return i}}),uh.prototype=Object.assign(Object.create(di.prototype),{constructor:uh,load:function(e,t,i,n){var r=this,a=new wn(this.manager);a.setPath(this.path),a.load(e,function(s){try{var l=JSON.parse(s)}catch{l=JSON.parse(s.substring(65,s.length-2))}s=r.parse(l),t&&t(s)},i,n)},parse:function(e){return new hh(e)}});var oc,Jh={getContext:function(){return oc===void 0&&(oc=new(window.AudioContext||window.webkitAudioContext)),oc},setContext:function(e){oc=e}};Il.prototype=Object.assign(Object.create(di.prototype),{constructor:Il,load:function(e,t,i,n){var r=new wn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(a){a=a.slice(0),Jh.getContext().decodeAudioData(a,function(s){t(s)})},i,n)}}),Object.assign(Rl.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;9>t;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;9>e;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var i=e.x,n=e.y;e=e.z;var r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScale(r[1],.488603*n),t.addScale(r[2],.488603*e),t.addScale(r[3],.488603*i),t.addScale(r[4],1.092548*i*n),t.addScale(r[5],1.092548*n*e),t.addScale(r[6],.315392*(3*e*e-1)),t.addScale(r[7],1.092548*i*e),t.addScale(r[8],.546274*(i*i-n*n)),t},getIrradianceAt:function(e,t){var i=e.x,n=e.y;e=e.z;var r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScale(r[1],1.023328*n),t.addScale(r[2],1.023328*e),t.addScale(r[3],1.023328*i),t.addScale(r[4],.858086*i*n),t.addScale(r[5],.858086*n*e),t.addScale(r[6],.743125*e*e-.247708),t.addScale(r[7],.858086*i*e),t.addScale(r[8],.429043*(i*i-n*n)),t},add:function(e){for(var t=0;9>t;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;9>t;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var i=0;9>i;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this},equals:function(e){for(var t=0;9>t;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,t){t===void 0&&(t=0);for(var i=this.coefficients,n=0;9>n;n++)i[n].fromArray(e,t+3*n);return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);for(var i=this.coefficients,n=0;9>n;n++)i[n].toArray(e,t+3*n);return e}}),Object.assign(Rl,{getBasisAt:function(e,t){var i=e.x,n=e.y;e=e.z,t[0]=.282095,t[1]=.488603*n,t[2]=.488603*e,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*e,t[6]=.315392*(3*e*e-1),t[7]=1.092548*i*e,t[8]=.546274*(i*i-n*n)}}),Rn.prototype=Object.assign(Object.create(Si.prototype),{constructor:Rn,isLightProbe:!0,copy:function(e){return Si.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Si.prototype.toJSON.call(this,e)}}),ph.prototype=Object.assign(Object.create(Rn.prototype),{constructor:ph,isHemisphereLightProbe:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this},toJSON:function(e){return Rn.prototype.toJSON.call(this,e)}}),dh.prototype=Object.assign(Object.create(Rn.prototype),{constructor:dh,isAmbientLightProbe:!0,copy:function(e){return Rn.prototype.copy.call(this,e),this},toJSON:function(e){return Rn.prototype.toJSON.call(this,e)}});var jp=new G,Wp=new G;Object.assign(Ku.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var i=e.projectionMatrix.clone(),n=t.eyeSep/2,r=n*t.near/t.focus,a=t.near*Math.tan(Ht.DEG2RAD*t.fov*.5)/t.zoom;Wp.elements[12]=-n,jp.elements[12]=n,n=-a*t.aspect+r;var s=a*t.aspect+r;i.elements[0]=2*t.near/(s-n),i.elements[8]=(s+n)/(s-n),this.cameraL.projectionMatrix.copy(i),n=-a*t.aspect-r,s=a*t.aspect-r,i.elements[0]=2*t.near/(s-n),i.elements[8]=(s+n)/(s-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Wp),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jp)}}),Object.assign(fh.prototype,{start:function(){this.oldTime=this.startTime=(typeof performance>"u"?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var wa=new u,Hp=new T,sm=new u,Ma=new u;mh.prototype=Object.assign(Object.create(Q.prototype),{constructor:mh,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Q.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var t=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wa,Hp,sm),Ma.set(0,0,-1).applyQuaternion(Hp),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(wa.x,i),e.positionY.linearRampToValueAtTime(wa.y,i),e.positionZ.linearRampToValueAtTime(wa.z,i),e.forwardX.linearRampToValueAtTime(Ma.x,i),e.forwardY.linearRampToValueAtTime(Ma.y,i),e.forwardZ.linearRampToValueAtTime(Ma.z,i),e.upX.linearRampToValueAtTime(t.x,i),e.upY.linearRampToValueAtTime(t.y,i),e.upZ.linearRampToValueAtTime(t.z,i)}else e.setPosition(wa.x,wa.y,wa.z),e.setOrientation(Ma.x,Ma.y,Ma.z,t.x,t.y,t.z)}}),oo.prototype=Object.assign(Object.create(Q.prototype),{constructor:oo,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying!==!0){if(this.hasPlaybackControl!==!1){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}}},pause:function(){if(this.hasPlaybackControl!==!1)return this.isPlaying===!0&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl!==!1)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl!==!1)return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl!==!1&&this.loop},setLoop:function(e){if(this.hasPlaybackControl!==!1)return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Sa=new u,Xp=new T,lm=new u,Ta=new u;gh.prototype=Object.assign(Object.create(oo.prototype),{constructor:gh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:function(e){if(Q.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl!==!0||this.isPlaying!==!1)if(this.matrixWorld.decompose(Sa,Xp,lm),Ta.set(0,0,1).applyQuaternion(Xp),(e=this.panner).positionX){var t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Sa.x,t),e.positionY.linearRampToValueAtTime(Sa.y,t),e.positionZ.linearRampToValueAtTime(Sa.z,t),e.orientationX.linearRampToValueAtTime(Ta.x,t),e.orientationY.linearRampToValueAtTime(Ta.y,t),e.orientationZ.linearRampToValueAtTime(Ta.z,t)}else e.setPosition(Sa.x,Sa.y,Sa.z),e.setOrientation(Ta.x,Ta.y,Ta.z)}}),Object.assign(vh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(yh.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize;e=e*n+n;var r=this.cumulativeWeight;if(r===0){for(r=0;r!==n;++r)i[e+r]=i[r];r=t}else r+=t,this._mixBufferRegion(i,e,0,t/r,n);this.cumulativeWeight=r},apply:function(e){var t=this.valueSize,i=this.buffer;e=e*t+t;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,e,3*t,1-n,t),n=t;for(var a=t+t;n!==a;++n)if(i[n]!==i[n+t]){r.setValue(i,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,i=3*t;this.binding.getValue(e,i);for(var n=t;n!==i;++n)e[n]=e[i+n%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,i,n,r){if(.5<=n)for(n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n){T.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var a=1-n,s=0;s!==r;++s){var l=t+s;e[l]=e[l]*a+e[i+s]*n}}});var cm=/[\[\]\.:\/]/g,hm="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",um=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),pm=/(WCOD+)?/.source.replace("WCOD",hm),dm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),fm=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),mm=new RegExp("^"+um+pm+dm+fm+"$"),gm=["material","materials","bones"];Object.assign(ep.prototype,{getValue:function(e,t){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];i!==void 0&&i.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(Ki,{Composite:ep,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new Ki.Composite(e,t,i):new Ki(e,t,i)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(cm,"")},parseTrackName:function(e){var t=mm.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);var i=(t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]}).nodeName&&t.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){var n=t.nodeName.substring(i+1);gm.indexOf(n)!==-1&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=n)}if(t.propertyName===null||t.propertyName.length===0)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t},findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){var n=function(r){for(var a=0;a<r.length;a++){var s=r[a];if(s.name===t||s.uuid===t||(s=n(s.children)))return s}return null};if(e=n(e.children))return e}return null}}),Object.assign(Ki.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(this.node=e=Ki.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material||!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;for(e=e.skeleton.bones,i=0;i<e.length;i++)if(e[i].name===a){a=i;break}break;default:if(e[i]===void 0)return;e=e[i]}if(a!==void 0){if(e[a]===void 0)return;e=e[a]}}if((a=e[n])!==void 0){if(t=this.Versioning.None,this.targetObject=e,e.needsUpdate!==void 0?t=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(t=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,r!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry)return;if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return;for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(e.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!e.geometry.morphTargets)return;for(i=0;i<this.node.geometry.morphTargets.length;i++)if(e.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else a.fromArray!==void 0&&a.toArray!==void 0?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][t]}}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ki.prototype,{_getValue_unbound:Ki.prototype.getValue,_setValue_unbound:Ki.prototype.setValue}),Object.assign(tp.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length,c=0,h=arguments.length;c!==h;++c){var f=arguments[c],g=f.uuid,y=n[g];if(y===void 0){y=t++,n[g]=y,e.push(f),g=0;for(var L=l;g!==L;++g)s[g].push(new Ki(f,r[g],a[g]))}else if(y<i){e[y];var C=--i;for(n[(L=e[C]).uuid]=y,e[y]=L,n[g]=C,e[C]=f,g=0,L=l;g!==L;++g){var I=s[g],q=I[y];I[y]=I[C],q===void 0&&(q=new Ki(f,r[g],a[g])),I[C]=q}}else e[y]}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],c=l.uuid,h=i[c];if(h!==void 0&&h>=t){var f=t++,g=e[f];for(i[g.uuid]=h,e[h]=g,i[c]=f,e[f]=l,l=0,c=r;l!==c;++l){var y=(g=n[l])[h];g[h]=g[f],g[f]=y}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,s=0,l=arguments.length;s!==l;++s){var c=arguments[s].uuid,h=n[c];if(h!==void 0)if(delete n[c],h<i){var f=e[c=--i],g=--t,y=e[g];for(n[f.uuid]=h,e[h]=f,n[y.uuid]=c,e[c]=y,e.pop(),f=0,y=a;f!==y;++f){var L=r[f],C=L[g];L[h]=L[c],L[c]=C,L.pop()}}else for(n[(y=e[g=--t]).uuid]=h,e[h]=y,e.pop(),f=0,y=a;f!==y;++f)(L=r[f])[h]=L[g],L.pop()}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(n!==void 0)return r[n];var a=this._paths,s=this._parsedPaths,l=this._objects,c=this.nCachedObjects_,h=Array(l.length);for(n=r.length,i[e]=n,a.push(e),s.push(t),r.push(h),i=c,n=l.length;i!==n;++i)h[i]=new Ki(l[i],e,t);return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){var n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,l=a[s];t[e[s]]=i,a[i]=l,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}}),Object.assign(ip.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){i=this._clip.duration;var n=e._clip.duration,r=i/n;e.warp(1,n/i,t),this.warp(r,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,s=this.timeScale;return a===null&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=e/s,a[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(r!==null){if(0>(t=(e-r)*i)||i===0)return;this._startTime=null,t*=i}if(t*=this._updateTimeScale(e),i=this._updateTime(t),0<(e=this._updateWeight(e))){t=this._interpolants,r=this._propertyBindings;for(var a=0,s=t.length;a!==s;++a)t[a].evaluate(i),r[a].accumulate(n,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(i!==null){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,i=this._clip.duration,n=this.loop,r=this._loopCount,a=n===2202;if(e===0)return r===-1?t:a&&(1&r)==1?i-t:t;if(n===2200)e:{if(r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=i)t=i;else{if(!(0>t)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(r===-1&&(0<=e?(r=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),t>=i||0>t){t-=i*(n=Math.floor(t/i)),r+=Math.abs(n);var s=this.repetitions-r;0>=s?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t=0<e?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(s===1?(e=0>e,this._setEndings(e,!e,a)):this._setEndings(!1,!1,a),this._loopCount=r,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}else this.time=t;if(a&&(1&r)==1)return i-t}return t},_setEndings:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return a===null&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=t,n[1]=r+e,a[1]=i,this}}),_h.prototype=Object.assign(Object.create(p.prototype),{constructor:_h,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings;e=e._interpolants;var s=i.uuid,l=this._bindingsByRootAndName,c=l[s];for(c===void 0&&(c={},l[s]=c),l=0;l!==r;++l){var h=n[l],f=h.name,g=c[f];if(g===void 0){if((g=a[l])!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,s,f));continue}++(g=new yh(Ki.create(i,f,t&&t._propertyBindings[l].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(g,s,f)}a[l]=g,e[l].resultBuffer=g.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(i=0,n=(t=e._propertyBindings).length;i!==n;++i){var r=t[i];r.useCount++==0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];--r.useCount==0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return(e=e._cacheIndex)!==null&&e<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,a=r[t];a===void 0?(a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a):(t=a.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null,t=e._clip.uuid;var r=(n=(i=this._actionsByClip)[t]).knownActions,a=r[r.length-1],s=e._byClipCacheIndex;a._byClipCacheIndex=s,r[s]=a,r.pop(),e._byClipCacheIndex=null,delete n.actionByRoot[(e._localRoot||this._root).uuid],r.length===0&&delete i[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=0,i=(e=e._propertyBindings).length;t!==i;++t){var n=e[t];--n.referenceCount==0&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],a=this._bindings;r===void 0&&(r={},n[t]=r),r[i]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],s=t[t.length-1];e=e._cacheIndex,s._cacheIndex=e,t[e]=s,t.pop(),delete a[i],Object.keys(a).length===0&&delete r[n]},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&((i=new As(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid;e=(i=typeof e=="string"?bn.findByName(i,e):e)!==null?i.uuid:e;var r=this._actionsByClip[e],a=null;if(r!==void 0){if((a=r.actionByRoot[n])!==void 0)return a;a=r.knownActions[0],i===null&&(i=a._clip)}return i===null?null:(t=new ip(this,i,t),this._bindAction(t,a),this._addInactiveAction(t,e,n),t)},existingAction:function(e,t){var i=t||this._root;return t=i.uuid,i=typeof e=="string"?bn.findByName(i,e):e,(e=this._actionsByClip[i?i.uuid:e])!==void 0&&e.actionByRoot[t]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==i;++s)t[s]._update(n,e,r,a);for(e=this._bindings,t=this._nActiveBindings,s=0;s!==t;++s)e[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var i=this._actionsByClip,n=i[e];if(n!==void 0){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var s=n[r];this._deactivateAction(s);var l=s._cacheIndex,c=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(s)}delete i[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(n in t){var i=t[n].actionByRoot[e];i!==void 0&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[e];if(n!==void 0)for(var r in n)(e=n[r]).restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){(e=this.existingAction(e,t))!==null&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),zl.prototype.clone=function(){return new zl(this.value.clone===void 0?this.value:this.value.clone())},xh.prototype=Object.assign(Object.create(ii.prototype),{constructor:xh,isInstancedInterleavedBuffer:!0,copy:function(e){return ii.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(np.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)},intersectObject:function(e,t,i){return bh(e,this,i=i||[],t),i.sort(rp),i},intersectObjects:function(e,t,i){if(i=i||[],Array.isArray(e)===!1)return i;for(var n=0,r=e.length;n<r;n++)bh(e[n],this,i,t);return i.sort(rp),i}}),Object.assign(ap.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?this.phi=this.theta=0:(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ht.clamp(t/this.radius,-1,1))),this}}),Object.assign(op.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}});var Yp=new m;Object.assign(wh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){return t=Yp.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(e=new m),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(e=new m),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return t===void 0&&(t=new m),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return t===void 0&&(t=new m),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Yp.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var qp=new u,sc=new u;Object.assign(Mh.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(e=new u),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(e=new u),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return t===void 0&&(t=new u),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){return qp.subVectors(e,this.start),sc.subVectors(this.end,this.start),e=sc.dot(sc),e=sc.dot(qp)/e,t&&(e=Ht.clamp(e,0,1)),e},closestPointToPoint:function(e,t,i){return e=this.closestPointToPointParameter(e,t),i===void 0&&(i=new u),this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Es.prototype=Object.create(Q.prototype),Es.prototype.constructor=Es,Es.prototype.isImmediateRenderObject=!0;var or=new u,Mr=new u,Qh=new E,vm=["a","b","c"];Ds.prototype=Object.create(wi.prototype),Ds.prototype.constructor=Ds,Ds.prototype.update=function(){this.object.updateMatrixWorld(!0),Qh.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,i=this.object.geometry;if(i&&i.isGeometry)for(var n=i.vertices,r=i.faces,a=i=0,s=r.length;a<s;a++)for(var l=r[a],c=0,h=l.vertexNormals.length;c<h;c++){var f=l.vertexNormals[c];or.copy(n[l[vm[c]]]).applyMatrix4(e),Mr.copy(f).applyMatrix3(Qh).normalize().multiplyScalar(this.size).add(or),t.setXYZ(i,or.x,or.y,or.z),i+=1,t.setXYZ(i,Mr.x,Mr.y,Mr.z),i+=1}else if(i&&i.isBufferGeometry)for(n=i.attributes.position,r=i.attributes.normal,c=i=0,h=n.count;c<h;c++)or.set(n.getX(c),n.getY(c),n.getZ(c)).applyMatrix4(e),Mr.set(r.getX(c),r.getY(c),r.getZ(c)),Mr.applyMatrix3(Qh).normalize().multiplyScalar(this.size).add(or),t.setXYZ(i,or.x,or.y,or.z),i+=1,t.setXYZ(i,Mr.x,Mr.y,Mr.z),i+=1;t.needsUpdate=!0};var Zp=new u;so.prototype=Object.create(Q.prototype),so.prototype.constructor=so,so.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},so.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Zp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zp),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var kr=new u,lc=new G,$h=new G;lo.prototype=Object.create(wi.prototype),lo.prototype.constructor=lo,lo.prototype.updateMatrixWorld=function(e){var t=this.bones,i=this.geometry,n=i.getAttribute("position");$h.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<t.length;r++){var s=t[r];s.parent&&s.parent.isBone&&(lc.multiplyMatrices($h,s.matrixWorld),kr.setFromMatrixPosition(lc),n.setXYZ(a,kr.x,kr.y,kr.z),lc.multiplyMatrices($h,s.parent.matrixWorld),kr.setFromMatrixPosition(lc),n.setXYZ(a+1,kr.x,kr.y,kr.z),a+=2)}i.getAttribute("position").needsUpdate=!0,Q.prototype.updateMatrixWorld.call(this,e)},co.prototype=Object.create(st.prototype),co.prototype.constructor=co,co.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},co.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ho.prototype=Object.create(qi.prototype),ho.prototype.constructor=ho,ho.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),this.color!==void 0)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);1<t&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},ho.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var ym=new u,Jp=new S,Qp=new S;uo.prototype=Object.create(Q.prototype),uo.prototype.constructor=uo,uo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},uo.prototype.update=function(){var e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Jp.copy(this.light.color),Qp.copy(this.light.groundColor);for(var i=0,n=t.count;i<n;i++){var r=i<n/2?Jp:Qp;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(ym.setFromMatrixPosition(this.light.matrixWorld).negate())},po.prototype=Object.create(st.prototype),po.prototype.constructor=po,po.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},po.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},Fl.prototype=Object.assign(Object.create(wi.prototype),{constructor:Fl,copy:function(e){return wi.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}}),kl.prototype=Object.create(wi.prototype),kl.prototype.constructor=kl,fo.prototype=Object.create(qi.prototype),fo.prototype.constructor=fo,fo.prototype.update=function(){function e(C,I,q,de){for(q=(I-C)/q,L.setXYZ(f,0,0,0),g++,t=C;t<I;t+=q)i=f+g,L.setXYZ(i,Math.sin(t)*r,0,Math.cos(t)*r),L.setXYZ(i+1,Math.sin(Math.min(t+q,I))*r,0,Math.cos(Math.min(t+q,I))*r),L.setXYZ(i+2,0,0,0),g+=3;y.addGroup(f,g,de),f+=g,g=0}var t,i,n=this.audio,r=this.range,a=this.divisionsInnerAngle,s=this.divisionsOuterAngle,l=Ht.degToRad(n.panner.coneInnerAngle),c=l/2,h=(n=Ht.degToRad(n.panner.coneOuterAngle))/2,f=0,g=0,y=this.geometry,L=y.attributes.position;y.clearGroups(),e(-h,-c,s,0),e(-c,c,a,1),e(c,h,s,0),L.needsUpdate=!0,l===n&&(this.material[0].visible=!1)},fo.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var Hs=new u,cc=new u,$p=new E;Ns.prototype=Object.create(wi.prototype),Ns.prototype.constructor=Ns,Ns.prototype.update=function(){this.object.updateMatrixWorld(!0),$p.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,r=0,a=0,s=(i=i.faces).length;a<s;a++){var l=i[a],c=l.normal;Hs.copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(e),cc.copy(c).applyMatrix3($p).normalize().multiplyScalar(this.size).add(Hs),t.setXYZ(r,Hs.x,Hs.y,Hs.z),r+=1,t.setXYZ(r,cc.x,cc.y,cc.z),r+=1}t.needsUpdate=!0};var Kp=new u,hc=new u,ed=new u;mo.prototype=Object.create(Q.prototype),mo.prototype.constructor=mo,mo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},mo.prototype.update=function(){Kp.setFromMatrixPosition(this.light.matrixWorld),hc.setFromMatrixPosition(this.light.target.matrixWorld),ed.subVectors(hc,Kp),this.lightPlane.lookAt(hc),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(hc),this.targetLine.scale.z=ed.length()};var uc=new u,Ei=new Oe;Is.prototype=Object.create(wi.prototype),Is.prototype.constructor=Is,Is.prototype.update=function(){var e=this.geometry,t=this.pointMap;Ei.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),zi("c",t,e,Ei,0,0,-1),zi("t",t,e,Ei,0,0,1),zi("n1",t,e,Ei,-1,-1,-1),zi("n2",t,e,Ei,1,-1,-1),zi("n3",t,e,Ei,-1,1,-1),zi("n4",t,e,Ei,1,1,-1),zi("f1",t,e,Ei,-1,-1,1),zi("f2",t,e,Ei,1,-1,1),zi("f3",t,e,Ei,-1,1,1),zi("f4",t,e,Ei,1,1,1),zi("u1",t,e,Ei,.7,1.1,-1),zi("u2",t,e,Ei,-.7,1.1,-1),zi("u3",t,e,Ei,0,2,-1),zi("cf1",t,e,Ei,-1,0,1),zi("cf2",t,e,Ei,1,0,1),zi("cf3",t,e,Ei,0,-1,1),zi("cf4",t,e,Ei,0,1,1),zi("cn1",t,e,Ei,-1,0,-1),zi("cn2",t,e,Ei,1,0,-1),zi("cn3",t,e,Ei,0,-1,-1),zi("cn4",t,e,Ei,0,1,-1),e.getAttribute("position").needsUpdate=!0};var pc=new ee;mr.prototype=Object.create(wi.prototype),mr.prototype.constructor=mr,mr.prototype.update=function(e){if(this.object!==void 0&&pc.setFromObject(this.object),!pc.isEmpty()){e=pc.min;var t=pc.max,i=this.geometry.attributes.position,n=i.array;n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=t.y,n[5]=t.z,n[6]=e.x,n[7]=e.y,n[8]=t.z,n[9]=t.x,n[10]=e.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=e.z,n[15]=e.x,n[16]=t.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=t.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},mr.prototype.setFromObject=function(e){return this.object=e,this.update(),this},mr.prototype.copy=function(e){return wi.prototype.copy.call(this,e),this.object=e.object,this},mr.prototype.clone=function(){return new this.constructor().copy(this)},Rs.prototype=Object.create(wi.prototype),Rs.prototype.constructor=Rs,Rs.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Q.prototype.updateMatrixWorld.call(this,e))},zs.prototype=Object.create(qi.prototype),zs.prototype.constructor=zs,zs.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=0>t?1:0,this.lookAt(this.plane.normal),Q.prototype.updateMatrixWorld.call(this,e)};var Kh,td,id=new u;gr.prototype=Object.create(Q.prototype),gr.prototype.constructor=gr,gr.prototype.setDirection=function(e){.99999<e.y?this.quaternion.set(0,0,0,1):-.99999>e.y?this.quaternion.set(1,0,0,0):(id.set(e.z,0,-e.x).normalize(),this.quaternion.setFromAxisAngle(id,Math.acos(e.y)))},gr.prototype.setLength=function(e,t,i){t===void 0&&(t=.2*e),i===void 0&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},gr.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},gr.prototype.copy=function(e){return Q.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},gr.prototype.clone=function(){return new this.constructor().copy(this)},Fs.prototype=Object.create(wi.prototype),Fs.prototype.constructor=Fs,Dt.create=function(e,t){return e.prototype=Object.create(Dt.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(fr.prototype,{createPointsGeometry:function(e){return e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){for(var t=new ht,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new u(r.x,r.y,r.z||0))}return t}}),Object.assign(In.prototype,{fromPoints:function(e){this.setFromPoints(e)}}),lp.prototype=Object.create($i.prototype),cp.prototype=Object.create($i.prototype),Sh.prototype=Object.create($i.prototype),Object.assign(Sh.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),Fl.prototype.setColors=function(){},lo.prototype.update=function(){},Object.assign(di.prototype,{extractUrlBase:function(e){return qh.extractUrlBase(e)}}),Object.assign(Nl.prototype,{setTexturePath:function(e){return this.setResourcePath(e)}}),Object.assign(wh.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},size:function(e){return this.getSize(e)}}),Object.assign(ee.prototype,{center:function(e){return this.getCenter(e)},empty:function(){return this.isEmpty()},isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)},size:function(e){return this.getSize(e)}}),Mh.prototype.center=function(e){return this.getCenter(e)},Object.assign(Ht,{random16:function(){return Math.random()},nearestPowerOfTwo:function(e){return Ht.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return Ht.ceilPowerOfTwo(e)}}),Object.assign(E.prototype,{flattenToArrayOffset:function(e,t){return this.toArray(e,t)},multiplyVector3:function(e){return e.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){}}),Object.assign(G.prototype,{extractPosition:function(e){return this.copyPosition(e)},flattenToArrayOffset:function(e,t){return this.toArray(e,t)},getPosition:function(){return new u().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return this.makeRotationFromQuaternion(e)},multiplyToArray:function(){},multiplyVector3:function(e){return e.applyMatrix4(this)},multiplyVector4:function(e){return e.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(e){e.transformDirection(this)},crossVector:function(e){return e.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(e){return this.applyToBufferAttribute(e)},applyToVector3Array:function(){},makeFrustum:function(e,t,i,n,r,a){return this.makePerspective(e,t,n,i,r,a)}}),Ae.prototype.isIntersectionLine=function(e){return this.intersectsLine(e)},T.prototype.multiplyVector3=function(e){return e.applyQuaternion(this)},Object.assign(se.prototype,{isIntersectionBox:function(e){return this.intersectsBox(e)},isIntersectionPlane:function(e){return this.intersectsPlane(e)},isIntersectionSphere:function(e){return this.intersectsSphere(e)}}),Object.assign(Ie.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(e,t){return this.getBarycoord(e,t)},midpoint:function(e){return this.getMidpoint(e)},normal:function(e){return this.getNormal(e)},plane:function(e){return this.getPlane(e)}}),Object.assign(Ie,{barycoordFromPoint:function(e,t,i,n,r){return Ie.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return Ie.getNormal(e,t,i,n)}}),Object.assign(Dr.prototype,{extractAllPoints:function(e){return this.extractPoints(e)},extrude:function(e){return new ia(this,e)},makeGeometry:function(e){return new na(this,e)}}),Object.assign(m.prototype,{fromAttribute:function(e,t,i){return this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(e){return this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return this.setFromMatrixColumn(t,e)},applyProjection:function(e){return this.applyMatrix4(e)},fromAttribute:function(e,t,i){return this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return this.manhattanDistanceTo(e)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(R.prototype,{fromAttribute:function(e,t,i){return this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(ht.prototype,{computeTangents:function(){},computeLineDistances:function(){}}),Object.assign(Q.prototype,{getChildByName:function(e){return this.getObjectByName(e)},renderDepth:function(){},translate:function(e,t){return this.translateOnAxis(t,e)},getWorldRotation:function(){}}),Object.defineProperties(Q.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(e){this.rotation.order=e}},useQuaternion:{get:function(){},set:function(){}}}),Object.defineProperties(Pn.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(hl.prototype,"useVertexTexture",{get:function(){},set:function(){}}),ns.prototype.initBones=function(){},Object.defineProperty(Dt.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(e){this.arcLengthDivisions=e}}),Se.prototype.setLens=function(e,t){t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Si.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(e){this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(e){this.shadow.bias=e}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(e){this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){this.shadow.mapSize.height=e}}}),Object.defineProperties(w.prototype,{length:{get:function(){return this.array.length}},copyIndicesArray:function(){}}),Object.assign(ze.prototype,{addIndex:function(e){this.setIndex(e)},addDrawCall:function(e,t,i){this.addGroup(e,t)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(ze.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.assign(Qn.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.defineProperties(zl.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(M.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new S}},shading:{get:function(){},set:function(e){this.flatShading=e===1}}}),Object.defineProperties(Ln.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Ge.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(e){this.extensions.derivatives=e}}}),Object.assign(Ii.prototype,{clearTarget:function(e,t,i,n){this.setRenderTarget(e),this.clear(t,i,n)},animate:function(e){this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){this.setScissorTest(e)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(Ii.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){this.shadowMap.type=e}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}}}),Object.defineProperties(Ee.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(He.prototype,{activeCubeFace:{set:function(){}},activeMipMapLevel:{set:function(){}}}),Object.defineProperties(A.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(e){this.texture.wrapS=e}},wrapT:{get:function(){return this.texture.wrapT},set:function(e){this.texture.wrapT=e}},magFilter:{get:function(){return this.texture.magFilter},set:function(e){this.texture.magFilter=e}},minFilter:{get:function(){return this.texture.minFilter},set:function(e){this.texture.minFilter=e}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(e){this.texture.anisotropy=e}},offset:{get:function(){return this.texture.offset},set:function(e){this.texture.offset=e}},repeat:{get:function(){return this.texture.repeat},set:function(e){this.texture.repeat=e}},format:{get:function(){return this.texture.format},set:function(e){this.texture.format=e}},type:{get:function(){return this.texture.type},set:function(e){this.texture.type=e}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(e){this.texture.generateMipmaps=e}}}),Object.defineProperties(Mi.prototype,{standing:{set:function(){}},userHeight:{set:function(){}}}),oo.prototype.load=function(e){var t=this;return new Il().load(e,function(i){t.setBuffer(i)}),this},vh.prototype.getData=function(){return this.getFrequencyData()},nt.prototype.updateCubeMap=function(e,t){return this.update(e,t)},Nr.crossOrigin=void 0,Nr.loadTexture=function(e,t,i,n){var r=new xl;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Nr.loadTextureCube=function(e,t,i,n){var r=new _l;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Nr.loadCompressedTexture=function(){},Nr.loadCompressedTextureCube=function(){},o.ACESFilmicToneMapping=5,o.AddEquation=100,o.AddOperation=2,o.AdditiveBlending=2,o.AlphaFormat=1021,o.AlwaysDepth=1,o.AlwaysStencilFunc=519,o.AmbientLight=Pl,o.AmbientLightProbe=dh,o.AnimationClip=bn,o.AnimationLoader=rh,o.AnimationMixer=_h,o.AnimationObjectGroup=tp,o.AnimationUtils=Wi,o.ArcCurve=ao,o.ArrayCamera=pi,o.ArrowHelper=gr,o.Audio=oo,o.AudioAnalyser=vh,o.AudioContext=Jh,o.AudioListener=mh,o.AudioLoader=Il,o.AxesHelper=Fs,o.AxisHelper=function(e){return new Fs(e)},o.BackSide=1,o.BasicDepthPacking=3200,o.BasicShadowMap=0,o.BinaryTextureLoader=function(e){return new yl(e)},o.Bone=$c,o.BooleanKeyframeTrack=fl,o.BoundingBoxHelper=function(e,t){return new mr(e,t)},o.Box2=wh,o.Box3=ee,o.Box3Helper=Rs,o.BoxBufferGeometry=K,o.BoxGeometry=li,o.BoxHelper=mr,o.BufferAttribute=w,o.BufferGeometry=ze,o.BufferGeometryLoader=Dl,o.ByteType=1010,o.Cache=ba,o.Camera=Oe,o.CameraHelper=Is,o.CanvasRenderer=function(){},o.CanvasTexture=rs,o.CatmullRomCurve3=$i,o.CineonToneMapping=4,o.CircleBufferGeometry=eo,o.CircleGeometry=Ts,o.ClampToEdgeWrapping=1001,o.Clock=fh,o.ClosedSplineCurve3=lp,o.Color=S,o.ColorKeyframeTrack=ml,o.CompressedTexture=Ga,o.CompressedTextureLoader=ah,o.ConeBufferGeometry=Ss,o.ConeGeometry=Ms,o.CubeCamera=nt,o.CubeGeometry=li,o.CubeReflectionMapping=301,o.CubeRefractionMapping=302,o.CubeTexture=ut,o.CubeTextureLoader=_l,o.CubeUVReflectionMapping=306,o.CubeUVRefractionMapping=307,o.CubicBezierCurve=On,o.CubicBezierCurve3=Kn,o.CubicInterpolant=pl,o.CullFaceBack=1,o.CullFaceFront=2,o.CullFaceFrontBack=3,o.CullFaceNone=0,o.Curve=Dt,o.CurvePath=fr,o.CustomBlending=5,o.CylinderBufferGeometry=dr,o.CylinderGeometry=aa,o.Cylindrical=op,o.DataTexture=ke,o.DataTexture2DArray=ni,o.DataTexture3D=xi,o.DataTextureLoader=yl,o.DecrementStencilOp=7683,o.DecrementWrapStencilOp=34056,o.DefaultLoadingManager=Up,o.DepthFormat=1026,o.DepthStencilFormat=1027,o.DepthTexture=as,o.DirectionalLight=Al,o.DirectionalLightHelper=mo,o.DirectionalLightShadow=Tl,o.DiscreteInterpolant=dl,o.DodecahedronBufferGeometry=Xa,o.DodecahedronGeometry=us,o.DoubleSide=2,o.DstAlphaFactor=206,o.DstColorFactor=208,o.DynamicBufferAttribute=function(e,t){return new w(e,t).setDynamic(!0)},o.EdgesGeometry=Ka,o.EdgesHelper=function(e,t){return new wi(new Ka(e.geometry),new gi({color:t!==void 0?t:16777215}))},o.EllipseCurve=yn,o.EqualDepth=4,o.EqualStencilFunc=514,o.EquirectangularReflectionMapping=303,o.EquirectangularRefractionMapping=304,o.Euler=_e,o.EventDispatcher=p,o.ExtrudeBufferGeometry=Qn,o.ExtrudeGeometry=ia,o.Face3=j,o.Face4=function(e,t,i,n,r,a,s){return new j(e,t,i,r,a,s)},o.FaceColors=1,o.FaceNormalsHelper=Ns,o.FileLoader=wn,o.FlatShading=1,o.Float32Attribute=function(e,t){return new ve(e,t)},o.Float32BufferAttribute=ve,o.Float64Attribute=function(e,t){return new $e(e,t)},o.Float64BufferAttribute=$e,o.FloatType=1015,o.Fog=Ri,o.FogExp2=Vi,o.Font=hh,o.FontLoader=uh,o.FrontFaceDirectionCCW=1,o.FrontFaceDirectionCW=0,o.FrontSide=0,o.Frustum=rt,o.GammaEncoding=3007,o.Geometry=ht,o.GeometryUtils={merge:function(e,t,i){if(t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var n=t.matrix;t=t.geometry}e.merge(t,n,i)},center:function(e){return e.center()}},o.GreaterDepth=6,o.GreaterEqualDepth=5,o.GreaterEqualStencilFunc=518,o.GreaterStencilFunc=516,o.GridHelper=Fl,o.Group=gn,o.HalfFloatType=1016,o.HemisphereLight=bl,o.HemisphereLightHelper=uo,o.HemisphereLightProbe=ph,o.IcosahedronBufferGeometry=Ha,o.IcosahedronGeometry=hs,o.ImageBitmapLoader=lh,o.ImageLoader=ro,o.ImageUtils=Nr,o.ImmediateRenderObject=Es,o.IncrementStencilOp=7682,o.IncrementWrapStencilOp=34055,o.InstancedBufferAttribute=El,o.InstancedBufferGeometry=Ol,o.InstancedInterleavedBuffer=xh,o.Int16Attribute=function(e,t){return new Le(e,t)},o.Int16BufferAttribute=Le,o.Int32Attribute=function(e,t){return new ne(e,t)},o.Int32BufferAttribute=ne,o.Int8Attribute=function(e,t){return new ge(e,t)},o.Int8BufferAttribute=ge,o.IntType=1013,o.InterleavedBuffer=ii,o.InterleavedBufferAttribute=An,o.Interpolant=vn,o.InterpolateDiscrete=2300,o.InterpolateLinear=2301,o.InterpolateSmooth=2302,o.InvertStencilOp=5386,o.JSONLoader=function(){},o.KeepStencilOp=7680,o.KeyframeTrack=Ji,o.LOD=Pn,o.LatheBufferGeometry=$a,o.LatheGeometry=ws,o.Layers=be,o.LensFlare=function(){},o.LessDepth=2,o.LessEqualDepth=3,o.LessEqualStencilFunc=515,o.LessStencilFunc=513,o.Light=Si,o.LightProbe=Rn,o.LightProbeHelper=po,o.LightShadow=tr,o.Line=qi,o.Line3=Mh,o.LineBasicMaterial=gi,o.LineCurve=pn,o.LineCurve3=En,o.LineDashedMaterial=pa,o.LineLoop=ul,o.LinePieces=1,o.LineSegments=wi,o.LineStrip=0,o.LinearEncoding=3e3,o.LinearFilter=1006,o.LinearInterpolant=As,o.LinearMipMapLinearFilter=1008,o.LinearMipMapNearestFilter=1007,o.LinearMipmapLinearFilter=1008,o.LinearMipmapNearestFilter=1007,o.LinearToneMapping=1,o.Loader=di,o.LoaderUtils=qh,o.LoadingManager=nh,o.LogLuvEncoding=3003,o.LoopOnce=2200,o.LoopPingPong=2202,o.LoopRepeat=2201,o.LuminanceAlphaFormat=1025,o.LuminanceFormat=1024,o.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o.Material=M,o.MaterialLoader=Ll,o.Math=Ht,o.Matrix3=E,o.Matrix4=G,o.MaxEquation=104,o.Mesh=st,o.MeshBasicMaterial=X,o.MeshDepthMaterial=Gt,o.MeshDistanceMaterial=Vt,o.MeshFaceMaterial=function(e){return e},o.MeshLambertMaterial=ha,o.MeshMatcapMaterial=ua,o.MeshNormalMaterial=ca,o.MeshPhongMaterial=Ln,o.MeshPhysicalMaterial=sa,o.MeshStandardMaterial=$n,o.MeshToonMaterial=la,o.MinEquation=103,o.MirroredRepeatWrapping=1002,o.MixOperation=1,o.MultiMaterial=function(e){return e===void 0&&(e=[]),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},o.MultiplyBlending=4,o.MultiplyOperation=0,o.NearestFilter=1003,o.NearestMipMapLinearFilter=1005,o.NearestMipMapNearestFilter=1004,o.NearestMipmapLinearFilter=1005,o.NearestMipmapNearestFilter=1004,o.NeverDepth=0,o.NeverStencilFunc=512,o.NoBlending=0,o.NoColors=0,o.NoToneMapping=0,o.NormalBlending=1,o.NotEqualDepth=7,o.NotEqualStencilFunc=517,o.NumberKeyframeTrack=io,o.Object3D=Q,o.ObjectLoader=Nl,o.ObjectSpaceNormalMap=1,o.OctahedronBufferGeometry=Kr,o.OctahedronGeometry=cs,o.OneFactor=201,o.OneMinusDstAlphaFactor=207,o.OneMinusDstColorFactor=209,o.OneMinusSrcAlphaFactor=205,o.OneMinusSrcColorFactor=203,o.OrthographicCamera=Os,o.PCFShadowMap=1,o.PCFSoftShadowMap=2,o.ParametricBufferGeometry=ja,o.ParametricGeometry=os,o.Particle=function(e){return new ji(e)},o.ParticleBasicMaterial=function(e){return new Cn(e)},o.ParticleSystem=function(e,t){return new Ua(e,t)},o.ParticleSystemMaterial=function(e){return new Cn(e)},o.Path=In,o.PerspectiveCamera=Se,o.Plane=Ae,o.PlaneBufferGeometry=P,o.PlaneGeometry=v,o.PlaneHelper=zs,o.PointCloud=function(e,t){return new Ua(e,t)},o.PointCloudMaterial=function(e){return new Cn(e)},o.PointLight=Sl,o.PointLightHelper=co,o.Points=Ua,o.PointsMaterial=Cn,o.PolarGridHelper=kl,o.PolyhedronBufferGeometry=un,o.PolyhedronGeometry=ss,o.PositionalAudio=gh,o.PositionalAudioHelper=fo,o.PropertyBinding=Ki,o.PropertyMixer=yh,o.QuadraticBezierCurve=Dn,o.QuadraticBezierCurve3=er,o.Quaternion=T,o.QuaternionKeyframeTrack=Ps,o.QuaternionLinearInterpolant=gl,o.REVISION="108",o.RGBADepthPacking=3201,o.RGBAFormat=1023,o.RGBA_ASTC_10x10_Format=37819,o.RGBA_ASTC_10x5_Format=37816,o.RGBA_ASTC_10x6_Format=37817,o.RGBA_ASTC_10x8_Format=37818,o.RGBA_ASTC_12x10_Format=37820,o.RGBA_ASTC_12x12_Format=37821,o.RGBA_ASTC_4x4_Format=37808,o.RGBA_ASTC_5x4_Format=37809,o.RGBA_ASTC_5x5_Format=37810,o.RGBA_ASTC_6x5_Format=37811,o.RGBA_ASTC_6x6_Format=37812,o.RGBA_ASTC_8x5_Format=37813,o.RGBA_ASTC_8x6_Format=37814,o.RGBA_ASTC_8x8_Format=37815,o.RGBA_PVRTC_2BPPV1_Format=35843,o.RGBA_PVRTC_4BPPV1_Format=35842,o.RGBA_S3TC_DXT1_Format=33777,o.RGBA_S3TC_DXT3_Format=33778,o.RGBA_S3TC_DXT5_Format=33779,o.RGBDEncoding=3006,o.RGBEEncoding=3002,o.RGBEFormat=1023,o.RGBFormat=1022,o.RGBM16Encoding=3005,o.RGBM7Encoding=3004,o.RGB_ETC1_Format=36196,o.RGB_PVRTC_2BPPV1_Format=35841,o.RGB_PVRTC_4BPPV1_Format=35840,o.RGB_S3TC_DXT1_Format=33776,o.RawShaderMaterial=to,o.Ray=se,o.Raycaster=np,o.RectAreaLight=Cl,o.RectAreaLightHelper=ho,o.RedFormat=1028,o.ReinhardToneMapping=2,o.RepeatWrapping=1e3,o.ReplaceStencilOp=7681,o.ReverseSubtractEquation=102,o.RingBufferGeometry=Qa,o.RingGeometry=bs,o.Scene=Pe,o.SceneUtils={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}},o.ShaderChunk=ti,o.ShaderLib=ar,o.ShaderMaterial=Ge,o.ShadowMaterial=oa,o.Shape=Dr,o.ShapeBufferGeometry=ra,o.ShapeGeometry=na,o.ShapePath=ch,o.ShapeUtils=wr,o.ShortType=1011,o.Skeleton=hl,o.SkeletonHelper=lo,o.SkinnedMesh=ns,o.SmoothShading=2,o.Sphere=Ye,o.SphereBufferGeometry=Er,o.SphereGeometry=xs,o.Spherical=ap,o.SphericalHarmonics3=Rl,o.SphericalReflectionMapping=305,o.Spline=Sh,o.SplineCurve=Nn,o.SplineCurve3=cp,o.SpotLight=Ml,o.SpotLightHelper=so,o.SpotLightShadow=wl,o.Sprite=ji,o.SpriteMaterial=Li,o.SrcAlphaFactor=204,o.SrcAlphaSaturateFactor=210,o.SrcColorFactor=202,o.StereoCamera=Ku,o.StringKeyframeTrack=vl,o.SubtractEquation=101,o.SubtractiveBlending=3,o.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o.TangentSpaceNormalMap=0,o.TetrahedronBufferGeometry=Wa,o.TetrahedronGeometry=ls,o.TextBufferGeometry=Ja,o.TextGeometry=_s,o.Texture=F,o.TextureLoader=xl,o.TorusBufferGeometry=qa,o.TorusGeometry=fs,o.TorusKnotBufferGeometry=Ya,o.TorusKnotGeometry=ds,o.Triangle=Ie,o.TriangleFanDrawMode=2,o.TriangleStripDrawMode=1,o.TrianglesDrawMode=0,o.TubeBufferGeometry=ea,o.TubeGeometry=ps,o.UVMapping=300,o.Uint16Attribute=function(e,t){return new Y(e,t)},o.Uint16BufferAttribute=Y,o.Uint32Attribute=function(e,t){return new at(e,t)},o.Uint32BufferAttribute=at,o.Uint8Attribute=function(e,t){return new pe(e,t)},o.Uint8BufferAttribute=pe,o.Uint8ClampedAttribute=function(e,t){return new ye(e,t)},o.Uint8ClampedBufferAttribute=ye,o.Uncharted2ToneMapping=3,o.Uniform=zl,o.UniformsLib=Pt,o.UniformsUtils=Zf,o.UnsignedByteType=1009,o.UnsignedInt248Type=1020,o.UnsignedIntType=1014,o.UnsignedShort4444Type=1017,o.UnsignedShort5551Type=1018,o.UnsignedShort565Type=1019,o.UnsignedShortType=1012,o.VSMShadowMap=3,o.Vector2=m,o.Vector3=u,o.Vector4=R,o.VectorKeyframeTrack=no,o.Vertex=function(e,t,i){return new u(e,t,i)},o.VertexColors=2,o.VertexNormalsHelper=Ds,o.VideoTexture=eh,o.WebGLMultisampleRenderTarget=Z,o.WebGLRenderTarget=A,o.WebGLRenderTargetCube=He,o.WebGLRenderer=Ii,o.WebGLUtils=hn,o.WireframeGeometry=Va,o.WireframeHelper=function(e,t){return new wi(new Va(e.geometry),new gi({color:t!==void 0?t:16777215}))},o.WrapAroundEnding=2402,o.XHRLoader=function(e){return new wn(e)},o.ZeroCurvatureEnding=2400,o.ZeroFactor=200,o.ZeroSlopeEnding=2401,o.ZeroStencilOp=0,o.sRGBEncoding=3001,Object.defineProperty(o,"__esModule",{value:!0})},typeof Tu=="object"&&typeof Sn<"u"?bc(Tu):typeof define=="function"&&define.amd?define(["exports"],bc):bc((uu=uu||self).THREE={});var Pi=typeof Sn<"u"&&Sn.exports&&typeof global<"u"?global:globalThis||window;(Pi._gsQueue||(Pi._gsQueue=[])).push(function(){var o,p,m,T;Pi._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(u,E,F){var R=function(S){var z,d=[],_=S.length;for(z=0;z!==_;d.push(S[z++]));return d},A=function(S,z,d){var _,j,M=S.cycle;for(_ in M)j=M[_],S[_]=typeof j=="function"?j(d,z[d],z):j[d%j.length];delete S.cycle},Z=function(S){if(typeof S=="function")return S;var z=typeof S=="object"?S:{each:S},d=z.ease,_=z.from||0,j=z.base||0,M={},X=isNaN(_),w=z.axis,ge={center:.5,end:1}[_]||0;return function(pe,ye,Le){var Y,ne,at,ve,$e,Ze,Lt,ze,st,Tt=(Le||z).length,It=M[Tt];if(!It){if(!(st=z.grid==="auto"?0:(z.grid||[1/0])[0])){for(Lt=-1/0;Lt<(Lt=Le[st++].getBoundingClientRect().left)&&Tt>st;);st--}for(It=M[Tt]=[],Y=X?Math.min(st,Tt)*ge-.5:_%st,ne=X?Tt*ge/st-.5:_/st|0,Lt=0,ze=1/0,Ze=0;Tt>Ze;Ze++)at=Ze%st-Y,ve=ne-(Ze/st|0),It[Ze]=$e=w?Math.abs(w==="y"?ve:at):Math.sqrt(at*at+ve*ve),$e>Lt&&(Lt=$e),ze>$e&&(ze=$e);It.max=Lt-ze,It.min=ze,It.v=Tt=z.amount||z.each*(st>Tt?Tt-1:w?w==="y"?Tt/st:st:Math.max(st,Tt/st))||0,It.b=0>Tt?j-Tt:j}return Tt=(It[pe]-It.min)/It.max,It.b+(d?d.getRatio(Tt):Tt)*It.v}},G=function(S,z,d){F.call(this,S,z,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=G.prototype.render},_e=1e-8,be=F._internals,Q=be.isSelector,Pe=be.isArray,ee=G.prototype=F.to({},.1,{}),Fe=[];G.version="2.1.3",ee.constructor=G,ee.kill()._gc=!1,G.killTweensOf=G.killDelayedCallsTo=F.killTweensOf,G.getTweensOf=F.getTweensOf,G.lagSmoothing=F.lagSmoothing,G.ticker=F.ticker,G.render=F.render,G.distribute=Z,ee.invalidate=function(){return this._yoyo=this.vars.yoyo===!0||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),F.prototype.invalidate.call(this)},ee.updateTo=function(S,z){var d,_=this,j=_.ratio,M=_.vars.immediateRender||S.immediateRender;for(d in z&&_._startTime<_._timeline._time&&(_._startTime=_._timeline._time,_._uncache(!1),_._gc?_._enabled(!0,!1):_._timeline.insert(_,_._startTime-_._delay)),S)_.vars[d]=S[d];if(_._initted||M){if(z)_._initted=!1,M&&_.render(0,!0,!0);else if(_._gc&&_._enabled(!0,!1),_._notifyPluginsOfEnabled&&_._firstPT&&F._onPluginEvent("_onDisable",_),_._time/_._duration>.998){var X=_._totalTime;_.render(0,!0,!1),_._initted=!1,_.render(X,!0,!1)}else if(_._initted=!1,_._init(),_._time>0||M)for(var w,ge=1/(1-j),pe=_._firstPT;pe;)w=pe.s+pe.c,pe.c*=ge,pe.s=w-pe.c,pe=pe._next}return _},ee.render=function(S,z,d){this._initted||this._duration===0&&this.vars.repeat&&this.invalidate();var _,j,M,X,w,ge,pe,ye,Le,Y=this,ne=Y._dirty?Y.totalDuration():Y._totalDuration,at=Y._time,ve=Y._totalTime,$e=Y._cycle,Ze=Y._duration,Lt=Y._rawPrevTime;if(S>=ne-_e&&S>=0?(Y._totalTime=ne,Y._cycle=Y._repeat,Y._yoyo&&1&Y._cycle?(Y._time=0,Y.ratio=Y._ease._calcEnd?Y._ease.getRatio(0):0):(Y._time=Ze,Y.ratio=Y._ease._calcEnd?Y._ease.getRatio(1):1),Y._reversed||(_=!0,j="onComplete",d=d||Y._timeline.autoRemoveChildren),Ze===0&&(Y._initted||!Y.vars.lazy||d)&&(Y._startTime===Y._timeline._duration&&(S=0),(0>Lt||0>=S&&S>=-_e||Lt===_e&&Y.data!=="isPause")&&Lt!==S&&(d=!0,Lt>_e&&(j="onReverseComplete")),Y._rawPrevTime=ye=!z||S||Lt===S?S:_e)):_e>S?(Y._totalTime=Y._time=Y._cycle=0,Y.ratio=Y._ease._calcEnd?Y._ease.getRatio(0):0,(ve!==0||Ze===0&&Lt>0)&&(j="onReverseComplete",_=Y._reversed),S>-_e?S=0:0>S&&(Y._active=!1,Ze===0&&(Y._initted||!Y.vars.lazy||d)&&(Lt>=0&&(d=!0),Y._rawPrevTime=ye=!z||S||Lt===S?S:_e)),Y._initted||(d=!0)):(Y._totalTime=Y._time=S,Y._repeat!==0&&(X=Ze+Y._repeatDelay,Y._cycle=Y._totalTime/X>>0,Y._cycle!==0&&Y._cycle===Y._totalTime/X&&S>=ve&&Y._cycle--,Y._time=Y._totalTime-Y._cycle*X,Y._yoyo&&1&Y._cycle&&(Y._time=Ze-Y._time,(Le=Y._yoyoEase||Y.vars.yoyoEase)&&(Y._yoyoEase||(Le!==!0||Y._initted?Y._yoyoEase=Le=Le===!0?Y._ease:Le instanceof Ease?Le:Ease.map[Le]:(Le=Y.vars.ease,Y._yoyoEase=Le=Le?Le instanceof Ease?Le:typeof Le=="function"?new Ease(Le,Y.vars.easeParams):Ease.map[Le]||F.defaultEase:F.defaultEase)),Y.ratio=Le?1-Le.getRatio((Ze-Y._time)/Ze):0)),Y._time>Ze?Y._time=Ze:Y._time<0&&(Y._time=0)),Y._easeType&&!Le?(w=Y._time/Ze,((ge=Y._easeType)===1||ge===3&&w>=.5)&&(w=1-w),ge===3&&(w*=2),(pe=Y._easePower)===1?w*=w:pe===2?w*=w*w:pe===3?w*=w*w*w:pe===4&&(w*=w*w*w*w),Y.ratio=ge===1?1-w:ge===2?w:Y._time/Ze<.5?w/2:1-w/2):Le||(Y.ratio=Y._ease.getRatio(Y._time/Ze))),at!==Y._time||d||$e!==Y._cycle){if(!Y._initted){if(Y._init(),!Y._initted||Y._gc)return;if(!d&&Y._firstPT&&(Y.vars.lazy!==!1&&Y._duration||Y.vars.lazy&&!Y._duration))return Y._time=at,Y._totalTime=ve,Y._rawPrevTime=Lt,Y._cycle=$e,be.lazyTweens.push(Y),void(Y._lazy=[S,z]);!Y._time||_||Le?_&&this._ease._calcEnd&&!Le&&(Y.ratio=Y._ease.getRatio(Y._time===0?0:1)):Y.ratio=Y._ease.getRatio(Y._time/Ze)}for(Y._lazy!==!1&&(Y._lazy=!1),Y._active||!Y._paused&&Y._time!==at&&S>=0&&(Y._active=!0),ve===0&&(Y._initted===2&&S>0&&Y._init(),Y._startAt&&(S>=0?Y._startAt.render(S,!0,d):j||(j="_dummyGS")),Y.vars.onStart&&(Y._totalTime!==0||Ze===0)&&(z||Y._callback("onStart"))),M=Y._firstPT;M;)M.f?M.t[M.p](M.c*Y.ratio+M.s):M.t[M.p]=M.c*Y.ratio+M.s,M=M._next;Y._onUpdate&&(0>S&&Y._startAt&&Y._startTime&&Y._startAt.render(S,!0,d),z||(Y._totalTime!==ve||j)&&Y._callback("onUpdate")),Y._cycle!==$e&&(z||Y._gc||Y.vars.onRepeat&&Y._callback("onRepeat")),j&&(!Y._gc||d)&&(0>S&&Y._startAt&&!Y._onUpdate&&Y._startTime&&Y._startAt.render(S,!0,d),_&&(Y._timeline.autoRemoveChildren&&Y._enabled(!1,!1),Y._active=!1),!z&&Y.vars[j]&&Y._callback(j),Ze===0&&Y._rawPrevTime===_e&&ye!==_e&&(Y._rawPrevTime=0))}else ve!==Y._totalTime&&Y._onUpdate&&(z||Y._callback("onUpdate"))},G.to=function(S,z,d){return new G(S,z,d)},G.from=function(S,z,d){return d.runBackwards=!0,d.immediateRender=d.immediateRender!=0,new G(S,z,d)},G.fromTo=function(S,z,d,_){return _.startAt=d,_.immediateRender=_.immediateRender!=0&&d.immediateRender!=0,new G(S,z,_)},G.staggerTo=G.allTo=function(S,z,d,_,j,M,X){var w,ge,pe,ye,Le=[],Y=Z(d.stagger||_),ne=d.cycle,at=(d.startAt||Fe).cycle;for(Pe(S)||(typeof S=="string"&&(S=F.selector(S)||S),Q(S)&&(S=R(S))),w=(S=S||[]).length-1,pe=0;w>=pe;pe++){for(ye in ge={},d)ge[ye]=d[ye];if(ne&&(A(ge,S,pe),ge.duration!=null&&(z=ge.duration,delete ge.duration)),at){for(ye in at=ge.startAt={},d.startAt)at[ye]=d.startAt[ye];A(ge.startAt,S,pe)}ge.delay=Y(pe,S[pe],S)+(ge.delay||0),pe===w&&j&&(ge.onComplete=function(){d.onComplete&&d.onComplete.apply(d.onCompleteScope||this,arguments),j.apply(X||d.callbackScope||this,M||Fe)}),Le[pe]=new G(S[pe],z,ge)}return Le},G.staggerFrom=G.allFrom=function(S,z,d,_,j,M,X){return d.runBackwards=!0,d.immediateRender=d.immediateRender!=0,G.staggerTo(S,z,d,_,j,M,X)},G.staggerFromTo=G.allFromTo=function(S,z,d,_,j,M,X,w){return _.startAt=d,_.immediateRender=_.immediateRender!=0&&d.immediateRender!=0,G.staggerTo(S,z,_,j,M,X,w)},G.delayedCall=function(S,z,d,_,j){return new G(z,0,{delay:S,onComplete:z,onCompleteParams:d,callbackScope:_,onReverseComplete:z,onReverseCompleteParams:d,immediateRender:!1,useFrames:j,overwrite:0})},G.set=function(S,z){return new G(S,0,z)},G.isTweening=function(S){return F.getTweensOf(S,!0).length>0};var Ye=function(S,z){for(var d=[],_=0,j=S._first;j;)j instanceof F?d[_++]=j:(z&&(d[_++]=j),_=(d=d.concat(Ye(j,z))).length),j=j._next;return d},se=G.getAllTweens=function(S){return Ye(u._rootTimeline,S).concat(Ye(u._rootFramesTimeline,S))};G.killAll=function(S,z,d,_){z==null&&(z=!0),d==null&&(d=!0);var j,M,X,w=se(_!=0),ge=w.length,pe=z&&d&&_;for(X=0;ge>X;X++)M=w[X],(pe||M instanceof E||(j=M.target===M.vars.onComplete)&&d||z&&!j)&&(S?M.totalTime(M._reversed?0:M.totalDuration()):M._enabled(!1,!1))},G.killChildTweensOf=function(S,z){if(S!=null){var d,_,j,M,X,w=be.tweenLookup;if(typeof S=="string"&&(S=F.selector(S)||S),Q(S)&&(S=R(S)),Pe(S))for(M=S.length;--M>-1;)G.killChildTweensOf(S[M],z);else{for(j in d=[],w)for(_=w[j].target.parentNode;_;)_===S&&(d=d.concat(w[j].tweens)),_=_.parentNode;for(X=d.length,M=0;X>M;M++)z&&d[M].totalTime(d[M].totalDuration()),d[M]._enabled(!1,!1)}}};var Ie=function(S,z,d,_){z=z!==!1,d=d!==!1;for(var j,M,X=se(_=_!==!1),w=z&&d&&_,ge=X.length;--ge>-1;)M=X[ge],(w||M instanceof E||(j=M.target===M.vars.onComplete)&&d||z&&!j)&&M.paused(S)};return G.pauseAll=function(S,z,d){Ie(!0,S,z,d)},G.resumeAll=function(S,z,d){Ie(!1,S,z,d)},G.globalTimeScale=function(S){var z=u._rootTimeline,d=F.ticker.time;return arguments.length?(S=S||_e,z._startTime=d-(d-z._startTime)*z._timeScale/S,z=u._rootFramesTimeline,d=F.ticker.frame,z._startTime=d-(d-z._startTime)*z._timeScale/S,z._timeScale=u._rootTimeline._timeScale=S,S):z._timeScale},ee.progress=function(S,z){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&1&this._cycle?1-S:S)+this._cycle*(this._duration+this._repeatDelay),z):this.duration()?this._time/this._duration:this.ratio},ee.totalProgress=function(S,z){return arguments.length?this.totalTime(this.totalDuration()*S,z):this._totalTime/this.totalDuration()},ee.time=function(S,z){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var d=this._duration,_=this._cycle,j=_*(d+this._repeatDelay);return S>d&&(S=d),this.totalTime(this._yoyo&&1&_?d-S+j:this._repeat?S+j:S,z)},ee.duration=function(S){return arguments.length?u.prototype.duration.call(this,S):this._duration},ee.totalDuration=function(S){return arguments.length?this._repeat===-1?this:this.duration((S-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},ee.repeat=function(S){return arguments.length?(this._repeat=S,this._uncache(!0)):this._repeat},ee.repeatDelay=function(S){return arguments.length?(this._repeatDelay=S,this._uncache(!0)):this._repeatDelay},ee.yoyo=function(S){return arguments.length?(this._yoyo=S,this):this._yoyo},G},!0),Pi._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(u,E,F){var R=function(d){E.call(this,d);var _,j,M=this,X=M.vars;for(j in M._labels={},M.autoRemoveChildren=!!X.autoRemoveChildren,M.smoothChildTiming=!!X.smoothChildTiming,M._sortChildren=!0,M._onUpdate=X.onUpdate,X)_=X[j],be(_)&&_.join("").indexOf("{self}")!==-1&&(X[j]=M._swapSelfInParams(_));be(X.tweens)&&M.add(X.tweens,0,X.align,X.stagger)},A=1e-8,Z=F._internals,G=R._internals={},_e=Z.isSelector,be=Z.isArray,Q=Z.lazyTweens,Pe=Z.lazyRender,ee=Pi._gsDefine.globals,Fe=function(d){var _,j={};for(_ in d)j[_]=d[_];return j},Ye=function(d,_,j){var M,X,w=d.cycle;for(M in w)X=w[M],d[M]=typeof X=="function"?X(j,_[j],_):X[j%X.length];delete d.cycle},se=G.pauseCallback=function(){},Ie=function(d,_,j,M){var X="immediateRender";return X in _||(_[X]=!(j&&j[X]===!1||M)),_},S=function(d){if(typeof d=="function")return d;var _=typeof d=="object"?d:{each:d},j=_.ease,M=_.from||0,X=_.base||0,w={},ge=isNaN(M),pe=_.axis,ye={center:.5,end:1}[M]||0;return function(Le,Y,ne){var at,ve,$e,Ze,Lt,ze,st,Tt,It,ht=(ne||_).length,li=w[ht];if(!li){if(!(It=_.grid==="auto"?0:(_.grid||[1/0])[0])){for(st=-1/0;st<(st=ne[It++].getBoundingClientRect().left)&&ht>It;);It--}for(li=w[ht]=[],at=ge?Math.min(It,ht)*ye-.5:M%It,ve=ge?ht*ye/It-.5:M/It|0,st=0,Tt=1/0,ze=0;ht>ze;ze++)$e=ze%It-at,Ze=ve-(ze/It|0),li[ze]=Lt=pe?Math.abs(pe==="y"?Ze:$e):Math.sqrt($e*$e+Ze*Ze),Lt>st&&(st=Lt),Tt>Lt&&(Tt=Lt);li.max=st-Tt,li.min=Tt,li.v=ht=_.amount||_.each*(It>ht?ht-1:pe?pe==="y"?ht/It:It:Math.max(It,ht/It))||0,li.b=0>ht?X-ht:X}return ht=(li[Le]-li.min)/li.max,li.b+(j?j.getRatio(ht):ht)*li.v}},z=R.prototype=new E;return R.version="2.1.3",R.distribute=S,z.constructor=R,z.kill()._gc=z._forcingPlayhead=z._hasPause=!1,z.to=function(d,_,j,M){var X=j.repeat&&ee.TweenMax||F;return _?this.add(new X(d,_,j),M):this.set(d,j,M)},z.from=function(d,_,j,M){return this.add((j.repeat&&ee.TweenMax||F).from(d,_,Ie(0,j)),M)},z.fromTo=function(d,_,j,M,X){var w=M.repeat&&ee.TweenMax||F;return M=Ie(0,M,j),_?this.add(w.fromTo(d,_,j,M),X):this.set(d,M,X)},z.staggerTo=function(d,_,j,M,X,w,ge,pe){var ye,Le,Y=new R({onComplete:w,onCompleteParams:ge,callbackScope:pe,smoothChildTiming:this.smoothChildTiming}),ne=S(j.stagger||M),at=j.startAt,ve=j.cycle;for(typeof d=="string"&&(d=F.selector(d)||d),_e(d=d||[])&&(d=function($e){var Ze,Lt=[],ze=$e.length;for(Ze=0;Ze!==ze;Lt.push($e[Ze++]));return Lt}(d)),Le=0;Le<d.length;Le++)ye=Fe(j),at&&(ye.startAt=Fe(at),at.cycle&&Ye(ye.startAt,d,Le)),ve&&(Ye(ye,d,Le),ye.duration!=null&&(_=ye.duration,delete ye.duration)),Y.to(d[Le],_,ye,ne(Le,d[Le],d));return this.add(Y,X)},z.staggerFrom=function(d,_,j,M,X,w,ge,pe){return j.runBackwards=!0,this.staggerTo(d,_,Ie(0,j),M,X,w,ge,pe)},z.staggerFromTo=function(d,_,j,M,X,w,ge,pe,ye){return M.startAt=j,this.staggerTo(d,_,Ie(0,M,j),X,w,ge,pe,ye)},z.call=function(d,_,j,M){return this.add(F.delayedCall(0,d,_,j),M)},z.set=function(d,_,j){return this.add(new F(d,0,Ie(0,_,null,!0)),j)},R.exportRoot=function(d,_){(d=d||{}).smoothChildTiming==null&&(d.smoothChildTiming=!0);var j,M,X,w,ge=new R(d),pe=ge._timeline;for(_==null&&(_=!0),pe._remove(ge,!0),ge._startTime=0,ge._rawPrevTime=ge._time=ge._totalTime=pe._time,X=pe._first;X;)w=X._next,_&&X instanceof F&&X.target===X.vars.onComplete||(0>(M=X._startTime-X._delay)&&(j=1),ge.add(X,M)),X=w;return pe.add(ge,0),j&&ge.totalDuration(),ge},z.add=function(d,_,j,M){var X,w,ge,pe,ye,Le,Y=this;if(typeof _!="number"&&(_=Y._parseTimeOrLabel(_,0,!0,d)),!(d instanceof u)){if(d instanceof Array||d&&d.push&&be(d)){for(j=j||"normal",M=M||0,X=_,w=d.length,ge=0;w>ge;ge++)be(pe=d[ge])&&(pe=new R({tweens:pe})),Y.add(pe,X),typeof pe!="string"&&typeof pe!="function"&&(j==="sequence"?X=pe._startTime+pe.totalDuration()/pe._timeScale:j==="start"&&(pe._startTime-=pe.delay())),X+=M;return Y._uncache(!0)}if(typeof d=="string")return Y.addLabel(d,_);if(typeof d!="function")throw"Cannot add "+d+" into the timeline; it is not a tween, timeline, function, or string.";d=F.delayedCall(0,d)}if(E.prototype.add.call(Y,d,_),(d._time||!d._duration&&d._initted)&&(X=(Y.rawTime()-d._startTime)*d._timeScale,(!d._duration||Math.abs(Math.max(0,Math.min(d.totalDuration(),X)))-d._totalTime>1e-5)&&d.render(X,!1,!1)),(Y._gc||Y._time===Y._duration)&&!Y._paused&&Y._duration<Y.duration())for(Le=(ye=Y).rawTime()>d._startTime;ye._timeline;)Le&&ye._timeline.smoothChildTiming?ye.totalTime(ye._totalTime,!0):ye._gc&&ye._enabled(!0,!1),ye=ye._timeline;return Y},z.remove=function(d){if(d instanceof u){this._remove(d,!1);var _=d._timeline=d.vars.useFrames?u._rootFramesTimeline:u._rootTimeline;return d._startTime=(d._paused?d._pauseTime:_._time)-(d._reversed?d.totalDuration()-d._totalTime:d._totalTime)/d._timeScale,this}if(d instanceof Array||d&&d.push&&be(d)){for(var j=d.length;--j>-1;)this.remove(d[j]);return this}return typeof d=="string"?this.removeLabel(d):this.kill(null,d)},z._remove=function(d,_){return E.prototype._remove.call(this,d,_),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},z.append=function(d,_){return this.add(d,this._parseTimeOrLabel(null,_,!0,d))},z.insert=z.insertMultiple=function(d,_,j,M){return this.add(d,_||0,j,M)},z.appendMultiple=function(d,_,j,M){return this.add(d,this._parseTimeOrLabel(null,_,!0,d),j,M)},z.addLabel=function(d,_){return this._labels[d]=this._parseTimeOrLabel(_),this},z.addPause=function(d,_,j,M){var X=F.delayedCall(0,se,j,M||this);return X.vars.onComplete=X.vars.onReverseComplete=_,X.data="isPause",this._hasPause=!0,this.add(X,d)},z.removeLabel=function(d){return delete this._labels[d],this},z.getLabelTime=function(d){return this._labels[d]!=null?this._labels[d]:-1},z._parseTimeOrLabel=function(d,_,j,M){var X,w;if(M instanceof u&&M.timeline===this)this.remove(M);else if(M&&(M instanceof Array||M.push&&be(M)))for(w=M.length;--w>-1;)M[w]instanceof u&&M[w].timeline===this&&this.remove(M[w]);if(X=typeof d!="number"||_?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,typeof _=="string")return this._parseTimeOrLabel(_,j&&typeof d=="number"&&this._labels[_]==null?d-X:0,j);if(_=_||0,typeof d!="string"||!isNaN(d)&&this._labels[d]==null)d==null&&(d=X);else{if((w=d.indexOf("="))===-1)return this._labels[d]==null?j?this._labels[d]=X+_:_:this._labels[d]+_;_=parseInt(d.charAt(w-1)+"1",10)*Number(d.substr(w+1)),d=w>1?this._parseTimeOrLabel(d.substr(0,w-1),0,j):X}return Number(d)+_},z.seek=function(d,_){return this.totalTime(typeof d=="number"?d:this._parseTimeOrLabel(d),_!==!1)},z.stop=function(){return this.paused(!0)},z.gotoAndPlay=function(d,_){return this.play(d,_)},z.gotoAndStop=function(d,_){return this.pause(d,_)},z.render=function(d,_,j){this._gc&&this._enabled(!0,!1);var M,X,w,ge,pe,ye,Le,Y,ne=this,at=ne._time,ve=ne._dirty?ne.totalDuration():ne._totalDuration,$e=ne._startTime,Ze=ne._timeScale,Lt=ne._paused;if(at!==ne._time&&(d+=ne._time-at),ne._hasPause&&!ne._forcingPlayhead&&!_){if(d>at)for(M=ne._first;M&&M._startTime<=d&&!ye;)M._duration||M.data!=="isPause"||M.ratio||M._startTime===0&&ne._rawPrevTime===0||(ye=M),M=M._next;else for(M=ne._last;M&&M._startTime>=d&&!ye;)M._duration||M.data==="isPause"&&M._rawPrevTime>0&&(ye=M),M=M._prev;ye&&(ne._time=ne._totalTime=d=ye._startTime,Y=ne._startTime+(ne._reversed?ne._duration-d:d)/ne._timeScale)}if(d>=ve-A&&d>=0)ne._totalTime=ne._time=ve,ne._reversed||ne._hasPausedChild()||(X=!0,ge="onComplete",pe=!!ne._timeline.autoRemoveChildren,ne._duration===0&&(0>=d&&d>=-A||ne._rawPrevTime<0||ne._rawPrevTime===A)&&ne._rawPrevTime!==d&&ne._first&&(pe=!0,ne._rawPrevTime>A&&(ge="onReverseComplete"))),ne._rawPrevTime=ne._duration||!_||d||ne._rawPrevTime===d?d:A,d=ve+1e-4;else if(A>d)if(ne._totalTime=ne._time=0,d>-A&&(d=0),(at!==0||ne._duration===0&&ne._rawPrevTime!==A&&(ne._rawPrevTime>0||0>d&&ne._rawPrevTime>=0))&&(ge="onReverseComplete",X=ne._reversed),0>d)ne._active=!1,ne._timeline.autoRemoveChildren&&ne._reversed?(pe=X=!0,ge="onReverseComplete"):ne._rawPrevTime>=0&&ne._first&&(pe=!0),ne._rawPrevTime=d;else{if(ne._rawPrevTime=ne._duration||!_||d||ne._rawPrevTime===d?d:A,d===0&&X)for(M=ne._first;M&&M._startTime===0;)M._duration||(X=!1),M=M._next;d=0,ne._initted||(pe=!0)}else ne._totalTime=ne._time=ne._rawPrevTime=d;if(ne._time!==at&&ne._first||j||pe||ye){if(ne._initted||(ne._initted=!0),ne._active||!ne._paused&&ne._time!==at&&d>0&&(ne._active=!0),at===0&&ne.vars.onStart&&(ne._time===0&&ne._duration||_||ne._callback("onStart")),(Le=ne._time)>=at)for(M=ne._first;M&&(w=M._next,Le===ne._time&&(!ne._paused||Lt));)(M._active||M._startTime<=Le&&!M._paused&&!M._gc)&&(ye===M&&(ne.pause(),ne._pauseTime=Y),M._reversed?M.render((M._dirty?M.totalDuration():M._totalDuration)-(d-M._startTime)*M._timeScale,_,j):M.render((d-M._startTime)*M._timeScale,_,j)),M=w;else for(M=ne._last;M&&(w=M._prev,Le===ne._time&&(!ne._paused||Lt));){if(M._active||M._startTime<=at&&!M._paused&&!M._gc){if(ye===M){for(ye=M._prev;ye&&ye.endTime()>ne._time;)ye.render(ye._reversed?ye.totalDuration()-(d-ye._startTime)*ye._timeScale:(d-ye._startTime)*ye._timeScale,_,j),ye=ye._prev;ye=null,ne.pause(),ne._pauseTime=Y}M._reversed?M.render((M._dirty?M.totalDuration():M._totalDuration)-(d-M._startTime)*M._timeScale,_,j):M.render((d-M._startTime)*M._timeScale,_,j)}M=w}ne._onUpdate&&(_||(Q.length&&Pe(),ne._callback("onUpdate"))),ge&&(ne._gc||($e===ne._startTime||Ze!==ne._timeScale)&&(ne._time===0||ve>=ne.totalDuration())&&(X&&(Q.length&&Pe(),ne._timeline.autoRemoveChildren&&ne._enabled(!1,!1),ne._active=!1),!_&&ne.vars[ge]&&ne._callback(ge)))}},z._hasPausedChild=function(){for(var d=this._first;d;){if(d._paused||d instanceof R&&d._hasPausedChild())return!0;d=d._next}return!1},z.getChildren=function(d,_,j,M){M=M||-9999999999;for(var X=[],w=this._first,ge=0;w;)w._startTime<M||(w instanceof F?_!==!1&&(X[ge++]=w):(j!==!1&&(X[ge++]=w),d!==!1&&(ge=(X=X.concat(w.getChildren(!0,_,j))).length))),w=w._next;return X},z.getTweensOf=function(d,_){var j,M,X=this._gc,w=[],ge=0;for(X&&this._enabled(!0,!0),M=(j=F.getTweensOf(d)).length;--M>-1;)(j[M].timeline===this||_&&this._contains(j[M]))&&(w[ge++]=j[M]);return X&&this._enabled(!1,!0),w},z.recent=function(){return this._recent},z._contains=function(d){for(var _=d.timeline;_;){if(_===this)return!0;_=_.timeline}return!1},z.shiftChildren=function(d,_,j){j=j||0;for(var M,X=this._first,w=this._labels;X;)X._startTime>=j&&(X._startTime+=d),X=X._next;if(_)for(M in w)w[M]>=j&&(w[M]+=d);return this._uncache(!0)},z._kill=function(d,_){if(!d&&!_)return this._enabled(!1,!1);for(var j=_?this.getTweensOf(_):this.getChildren(!0,!0,!1),M=j.length,X=!1;--M>-1;)j[M]._kill(d,_)&&(X=!0);return X},z.clear=function(d){var _=this.getChildren(!1,!0,!0),j=_.length;for(this._time=this._totalTime=0;--j>-1;)_[j]._enabled(!1,!1);return d!==!1&&(this._labels={}),this._uncache(!0)},z.invalidate=function(){for(var d=this._first;d;)d.invalidate(),d=d._next;return u.prototype.invalidate.call(this)},z._enabled=function(d,_){if(d===this._gc)for(var j=this._first;j;)j._enabled(d,!0),j=j._next;return E.prototype._enabled.call(this,d,_)},z.totalTime=function(d,_,j){this._forcingPlayhead=!0;var M=u.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,M},z.duration=function(d){return arguments.length?(this.duration()!==0&&d!==0&&this.timeScale(this._duration/d),this):(this._dirty&&this.totalDuration(),this._duration)},z.totalDuration=function(d){if(!arguments.length){if(this._dirty){for(var _,j,M=0,X=this,w=X._last,ge=999999999999;w;)_=w._prev,w._dirty&&w.totalDuration(),w._startTime>ge&&X._sortChildren&&!w._paused&&!X._calculatingDuration?(X._calculatingDuration=1,X.add(w,w._startTime-w._delay),X._calculatingDuration=0):ge=w._startTime,w._startTime<0&&!w._paused&&(M-=w._startTime,X._timeline.smoothChildTiming&&(X._startTime+=w._startTime/X._timeScale,X._time-=w._startTime,X._totalTime-=w._startTime,X._rawPrevTime-=w._startTime),X.shiftChildren(-w._startTime,!1,-9999999999),ge=0),(j=w._startTime+w._totalDuration/w._timeScale)>M&&(M=j),w=_;X._duration=X._totalDuration=M,X._dirty=!1}return this._totalDuration}return d&&this.totalDuration()?this.timeScale(this._totalDuration/d):this},z.paused=function(d){if(d===!1&&this._paused)for(var _=this._first;_;)_._startTime===this._time&&_.data==="isPause"&&(_._rawPrevTime=0),_=_._next;return u.prototype.paused.apply(this,arguments)},z.usesFrames=function(){for(var d=this._timeline;d._timeline;)d=d._timeline;return d===u._rootFramesTimeline},z.rawTime=function(d){return d&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(d)-this._startTime)*this._timeScale},R},!0),Pi._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(u,E,F){var R=function(ee){u.call(this,ee),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},A=1e-8,Z=E._internals,G=Z.lazyTweens,_e=Z.lazyRender,be=Pi._gsDefine.globals,Q=new F(null,null,1,0),Pe=R.prototype=new u;return Pe.constructor=R,Pe.kill()._gc=!1,R.version="2.1.3",Pe.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),u.prototype.invalidate.call(this)},Pe.addCallback=function(ee,Fe,Ye,se){return this.add(E.delayedCall(0,ee,Ye,se),Fe)},Pe.removeCallback=function(ee,Fe){if(ee)if(Fe==null)this._kill(null,ee);else for(var Ye=this.getTweensOf(ee,!1),se=Ye.length,Ie=this._parseTimeOrLabel(Fe);--se>-1;)Ye[se]._startTime===Ie&&Ye[se]._enabled(!1,!1);return this},Pe.removePause=function(ee){return this.removeCallback(u._internals.pauseCallback,ee)},Pe.tweenTo=function(ee,Fe){Fe=Fe||{};var Ye,se,Ie,S={ease:Q,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},z=Fe.repeat&&be.TweenMax||E;for(se in Fe)S[se]=Fe[se];return S.time=this._parseTimeOrLabel(ee),Ye=Math.abs(Number(S.time)-this._time)/this._timeScale||.001,Ie=new z(this,Ye,S),S.onStart=function(){Ie.target.paused(!0),Ie.vars.time===Ie.target.time()||Ye!==Ie.duration()||Ie.isFromTo||Ie.duration(Math.abs(Ie.vars.time-Ie.target.time())/Ie.target._timeScale).render(Ie.time(),!0,!0),Fe.onStart&&Fe.onStart.apply(Fe.onStartScope||Fe.callbackScope||Ie,Fe.onStartParams||[])},Ie},Pe.tweenFromTo=function(ee,Fe,Ye){Ye=Ye||{},ee=this._parseTimeOrLabel(ee),Ye.startAt={onComplete:this.seek,onCompleteParams:[ee],callbackScope:this},Ye.immediateRender=Ye.immediateRender!==!1;var se=this.tweenTo(Fe,Ye);return se.isFromTo=1,se.duration(Math.abs(se.vars.time-ee)/this._timeScale||.001)},Pe.render=function(ee,Fe,Ye){this._gc&&this._enabled(!0,!1);var se,Ie,S,z,d,_,j,M,X,w=this,ge=w._time,pe=w._dirty?w.totalDuration():w._totalDuration,ye=w._duration,Le=w._totalTime,Y=w._startTime,ne=w._timeScale,at=w._rawPrevTime,ve=w._paused,$e=w._cycle;if(ge!==w._time&&(ee+=w._time-ge),ee>=pe-A&&ee>=0)w._locked||(w._totalTime=pe,w._cycle=w._repeat),w._reversed||w._hasPausedChild()||(Ie=!0,z="onComplete",d=!!w._timeline.autoRemoveChildren,w._duration===0&&(0>=ee&&ee>=-A||0>at||at===A)&&at!==ee&&w._first&&(d=!0,at>A&&(z="onReverseComplete"))),w._rawPrevTime=w._duration||!Fe||ee||w._rawPrevTime===ee?ee:A,w._yoyo&&1&w._cycle?w._time=ee=0:(w._time=ye,ee=ye+1e-4);else if(A>ee)if(w._locked||(w._totalTime=w._cycle=0),w._time=0,ee>-A&&(ee=0),(ge!==0||ye===0&&at!==A&&(at>0||0>ee&&at>=0)&&!w._locked)&&(z="onReverseComplete",Ie=w._reversed),0>ee)w._active=!1,w._timeline.autoRemoveChildren&&w._reversed?(d=Ie=!0,z="onReverseComplete"):at>=0&&w._first&&(d=!0),w._rawPrevTime=ee;else{if(w._rawPrevTime=ye||!Fe||ee||w._rawPrevTime===ee?ee:A,ee===0&&Ie)for(se=w._first;se&&se._startTime===0;)se._duration||(Ie=!1),se=se._next;ee=0,w._initted||(d=!0)}else ye===0&&0>at&&(d=!0),w._time=w._rawPrevTime=ee,w._locked||(w._totalTime=ee,w._repeat!==0&&(_=ye+w._repeatDelay,w._cycle=w._totalTime/_>>0,w._cycle&&w._cycle===w._totalTime/_&&ee>=Le&&w._cycle--,w._time=w._totalTime-w._cycle*_,w._yoyo&&1&w._cycle&&(w._time=ye-w._time),w._time>ye?(w._time=ye,ee=ye+1e-4):w._time<0?w._time=ee=0:ee=w._time));if(w._hasPause&&!w._forcingPlayhead&&!Fe){if((ee=w._time)>ge||w._repeat&&$e!==w._cycle)for(se=w._first;se&&se._startTime<=ee&&!j;)se._duration||se.data!=="isPause"||se.ratio||se._startTime===0&&w._rawPrevTime===0||(j=se),se=se._next;else for(se=w._last;se&&se._startTime>=ee&&!j;)se._duration||se.data==="isPause"&&se._rawPrevTime>0&&(j=se),se=se._prev;j&&(X=w._startTime+(w._reversed?w._duration-j._startTime:j._startTime)/w._timeScale,j._startTime<ye&&(w._time=w._rawPrevTime=ee=j._startTime,w._totalTime=ee+w._cycle*(w._totalDuration+w._repeatDelay)))}if(w._cycle!==$e&&!w._locked){var Ze=w._yoyo&&(1&$e)!=0,Lt=Ze===(w._yoyo&&(1&w._cycle)!=0),ze=w._totalTime,st=w._cycle,Tt=w._rawPrevTime,It=w._time;if(w._totalTime=$e*ye,w._cycle<$e?Ze=!Ze:w._totalTime+=ye,w._time=ge,w._rawPrevTime=ye===0?at-1e-4:at,w._cycle=$e,w._locked=!0,ge=Ze?0:ye,w.render(ge,Fe,ye===0),Fe||w._gc||w.vars.onRepeat&&(w._cycle=st,w._locked=!1,w._callback("onRepeat")),ge!==w._time||(Lt&&(w._cycle=$e,w._locked=!0,ge=Ze?ye+1e-4:-1e-4,w.render(ge,!0,!1)),w._locked=!1,w._paused&&!ve))return;w._time=It,w._totalTime=ze,w._cycle=st,w._rawPrevTime=Tt}if(w._time!==ge&&w._first||Ye||d||j){if(w._initted||(w._initted=!0),w._active||!w._paused&&w._totalTime!==Le&&ee>0&&(w._active=!0),Le===0&&w.vars.onStart&&(w._totalTime===0&&w._totalDuration||Fe||w._callback("onStart")),(M=w._time)>=ge)for(se=w._first;se&&(S=se._next,M===w._time&&(!w._paused||ve));)(se._active||se._startTime<=w._time&&!se._paused&&!se._gc)&&(j===se&&(w.pause(),w._pauseTime=X),se._reversed?se.render((se._dirty?se.totalDuration():se._totalDuration)-(ee-se._startTime)*se._timeScale,Fe,Ye):se.render((ee-se._startTime)*se._timeScale,Fe,Ye)),se=S;else for(se=w._last;se&&(S=se._prev,M===w._time&&(!w._paused||ve));){if(se._active||se._startTime<=ge&&!se._paused&&!se._gc){if(j===se){for(j=se._prev;j&&j.endTime()>w._time;)j.render(j._reversed?j.totalDuration()-(ee-j._startTime)*j._timeScale:(ee-j._startTime)*j._timeScale,Fe,Ye),j=j._prev;j=null,w.pause(),w._pauseTime=X}se._reversed?se.render((se._dirty?se.totalDuration():se._totalDuration)-(ee-se._startTime)*se._timeScale,Fe,Ye):se.render((ee-se._startTime)*se._timeScale,Fe,Ye)}se=S}w._onUpdate&&(Fe||(G.length&&_e(),w._callback("onUpdate"))),z&&(w._locked||w._gc||(Y===w._startTime||ne!==w._timeScale)&&(w._time===0||pe>=w.totalDuration())&&(Ie&&(G.length&&_e(),w._timeline.autoRemoveChildren&&w._enabled(!1,!1),w._active=!1),!Fe&&w.vars[z]&&w._callback(z)))}else Le!==w._totalTime&&w._onUpdate&&(Fe||w._callback("onUpdate"))},Pe.getActive=function(ee,Fe,Ye){var se,Ie,S=[],z=this.getChildren(ee||ee==null,Fe||ee==null,!!Ye),d=0,_=z.length;for(se=0;_>se;se++)(Ie=z[se]).isActive()&&(S[d++]=Ie);return S},Pe.getLabelAfter=function(ee){ee||ee!==0&&(ee=this._time);var Fe,Ye=this.getLabelsArray(),se=Ye.length;for(Fe=0;se>Fe;Fe++)if(Ye[Fe].time>ee)return Ye[Fe].name;return null},Pe.getLabelBefore=function(ee){ee==null&&(ee=this._time);for(var Fe=this.getLabelsArray(),Ye=Fe.length;--Ye>-1;)if(Fe[Ye].time<ee)return Fe[Ye].name;return null},Pe.getLabelsArray=function(){var ee,Fe=[],Ye=0;for(ee in this._labels)Fe[Ye++]={time:this._labels[ee],name:ee};return Fe.sort(function(se,Ie){return se.time-Ie.time}),Fe},Pe.invalidate=function(){return this._locked=!1,u.prototype.invalidate.call(this)},Pe.progress=function(ee,Fe){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&1&this._cycle?1-ee:ee)+this._cycle*(this._duration+this._repeatDelay),Fe):this._time/this.duration()||0},Pe.totalProgress=function(ee,Fe){return arguments.length?this.totalTime(this.totalDuration()*ee,Fe):this._totalTime/this.totalDuration()||0},Pe.totalDuration=function(ee){return arguments.length?this._repeat!==-1&&ee?this.timeScale(this.totalDuration()/ee):this:(this._dirty&&(u.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},Pe.time=function(ee,Fe){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var Ye=this._duration,se=this._cycle,Ie=se*(Ye+this._repeatDelay);return ee>Ye&&(ee=Ye),this.totalTime(this._yoyo&&1&se?Ye-ee+Ie:this._repeat?ee+Ie:ee,Fe)},Pe.repeat=function(ee){return arguments.length?(this._repeat=ee,this._uncache(!0)):this._repeat},Pe.repeatDelay=function(ee){return arguments.length?(this._repeatDelay=ee,this._uncache(!0)):this._repeatDelay},Pe.yoyo=function(ee){return arguments.length?(this._yoyo=ee,this):this._yoyo},Pe.currentLabel=function(ee){return arguments.length?this.seek(ee,!0):this.getLabelBefore(this._time+A)},R},!0),function(){var u=180/Math.PI,E=[],F=[],R=[],A={},Z=Pi._gsDefine.globals,G=function(S,z,d,_){d===_&&(d=_-(_-z)/1e6),S===z&&(z=S+(d-S)/1e6),this.a=S,this.b=z,this.c=d,this.d=_,this.da=_-S,this.ca=d-S,this.ba=z-S},_e=function(S,z,d,_){var j={a:S},M={},X={},w={c:_},ge=(S+z)/2,pe=(z+d)/2,ye=(d+_)/2,Le=(ge+pe)/2,Y=(pe+ye)/2,ne=(Y-Le)/8;return j.b=ge+(S-ge)/4,M.b=Le+ne,j.c=M.a=(j.b+M.b)/2,M.c=X.a=(Le+Y)/2,X.b=Y-ne,w.b=ye+(_-ye)/4,X.c=w.a=(X.b+w.b)/2,[j,M,X,w]},be=function(S,z,d,_,j){var M,X,w,ge,pe,ye,Le,Y,ne,at,ve,$e,Ze,Lt=S.length-1,ze=0,st=S[0].a;for(M=0;Lt>M;M++)X=(pe=S[ze]).a,w=pe.d,ge=S[ze+1].d,j?(ve=E[M],Ze=(($e=F[M])+ve)*z*.25/(_?.5:R[M]||.5),Y=w-((ye=w-(w-X)*(_?.5*z:ve!==0?Ze/ve:0))+(((Le=w+(ge-w)*(_?.5*z:$e!==0?Ze/$e:0))-ye)*(3*ve/(ve+$e)+.5)/4||0))):Y=w-((ye=w-(w-X)*z*.5)+(Le=w+(ge-w)*z*.5))/2,ye+=Y,Le+=Y,pe.c=ne=ye,pe.b=M!==0?st:st=pe.a+.6*(pe.c-pe.a),pe.da=w-X,pe.ca=ne-X,pe.ba=st-X,d?(at=_e(X,st,ne,w),S.splice(ze,1,at[0],at[1],at[2],at[3]),ze+=4):ze++,st=Le;(pe=S[ze]).b=st,pe.c=st+.4*(pe.d-st),pe.da=pe.d-pe.a,pe.ca=pe.c-pe.a,pe.ba=st-pe.a,d&&(at=_e(pe.a,st,pe.c,pe.d),S.splice(ze,1,at[0],at[1],at[2],at[3]))},Q=function(S,z,d,_){var j,M,X,w,ge,pe,ye=[];if(_)for(M=(S=[_].concat(S)).length;--M>-1;)typeof(pe=S[M][z])=="string"&&pe.charAt(1)==="="&&(S[M][z]=_[z]+Number(pe.charAt(0)+pe.substr(2)));if(0>(j=S.length-2))return ye[0]=new G(S[0][z],0,0,S[0][z]),ye;for(M=0;j>M;M++)X=S[M][z],w=S[M+1][z],ye[M]=new G(X,0,0,w),d&&(ge=S[M+2][z],E[M]=(E[M]||0)+(w-X)*(w-X),F[M]=(F[M]||0)+(ge-w)*(ge-w));return ye[M]=new G(S[M][z],0,0,S[M+1][z]),ye},Pe=function(S,z,d,_,j,M){var X,w,ge,pe,ye,Le,Y,ne,at={},ve=[],$e=M||S[0];for(w in j=typeof j=="string"?","+j+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",z==null&&(z=1),S[0])ve.push(w);if(S.length>1){for(ne=S[S.length-1],Y=!0,X=ve.length;--X>-1;)if(w=ve[X],Math.abs($e[w]-ne[w])>.05){Y=!1;break}Y&&(S=S.concat(),M&&S.unshift(M),S.push(S[1]),M=S[S.length-3])}for(E.length=F.length=R.length=0,X=ve.length;--X>-1;)w=ve[X],A[w]=j.indexOf(","+w+",")!==-1,at[w]=Q(S,w,A[w],M);for(X=E.length;--X>-1;)E[X]=Math.sqrt(E[X]),F[X]=Math.sqrt(F[X]);if(!_){for(X=ve.length;--X>-1;)if(A[w])for(Le=(ge=at[ve[X]]).length-1,pe=0;Le>pe;pe++)ye=ge[pe+1].da/F[pe]+ge[pe].da/E[pe]||0,R[pe]=(R[pe]||0)+ye*ye;for(X=R.length;--X>-1;)R[X]=Math.sqrt(R[X])}for(X=ve.length,pe=d?4:1;--X>-1;)ge=at[w=ve[X]],be(ge,z,d,_,A[w]),Y&&(ge.splice(0,pe),ge.splice(ge.length-pe,pe));return at},ee=function(S,z,d){var _,j,M,X,w,ge,pe,ye,Le,Y,ne,at={},ve=(z=z||"soft")==="cubic"?3:2,$e=z==="soft",Ze=[];if($e&&d&&(S=[d].concat(S)),S==null||S.length<ve+1)throw"invalid Bezier data";for(Le in S[0])Ze.push(Le);for(ge=Ze.length;--ge>-1;){for(at[Le=Ze[ge]]=w=[],Y=0,ye=S.length,pe=0;ye>pe;pe++)_=d==null?S[pe][Le]:typeof(ne=S[pe][Le])=="string"&&ne.charAt(1)==="="?d[Le]+Number(ne.charAt(0)+ne.substr(2)):Number(ne),$e&&pe>1&&ye-1>pe&&(w[Y++]=(_+w[Y-2])/2),w[Y++]=_;for(ye=Y-ve+1,Y=0,pe=0;ye>pe;pe+=ve)_=w[pe],j=w[pe+1],M=w[pe+2],X=ve===2?0:w[pe+3],w[Y++]=ne=ve===3?new G(_,j,M,X):new G(_,(2*j+_)/3,(2*j+M)/3,M);w.length=Y}return at},Fe=function(S,z,d){for(var _,j,M,X,w,ge,pe,ye,Le,Y,ne,at=1/d,ve=S.length;--ve>-1;)for(M=(Y=S[ve]).a,X=Y.d-M,w=Y.c-M,ge=Y.b-M,_=j=0,ye=1;d>=ye;ye++)_=j-(j=((pe=at*ye)*pe*X+3*(Le=1-pe)*(pe*w+Le*ge))*pe),z[ne=ve*d+ye-1]=(z[ne]||0)+_*_},Ye=function(S,z){var d,_,j,M,X=[],w=[],ge=0,pe=0,ye=(z=z>>0||6)-1,Le=[],Y=[];for(d in S)Fe(S[d],X,z);for(j=X.length,_=0;j>_;_++)ge+=Math.sqrt(X[_]),Y[M=_%z]=ge,M===ye&&(pe+=ge,Le[M=_/z>>0]=Y,w[M]=pe,ge=0,Y=[]);return{length:pe,lengths:w,segments:Le}},se=Pi._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(S,z,d){this._target=S,z instanceof Array&&(z={values:z}),this._func={},this._mod={},this._props=[],this._timeRes=z.timeResolution==null?6:parseInt(z.timeResolution,10);var _,j,M,X,w,ge=z.values||[],pe={},ye=ge[0],Le=z.autoRotate||d.vars.orientToBezier;for(_ in this._autoRotate=Le?Le instanceof Array?Le:[["x","y","rotation",Le===!0?0:Number(Le)||0]]:null,ye)this._props.push(_);for(M=this._props.length;--M>-1;)_=this._props[M],this._overwriteProps.push(_),j=this._func[_]=typeof S[_]=="function",pe[_]=j?S[_.indexOf("set")||typeof S["get"+_.substr(3)]!="function"?_:"get"+_.substr(3)]():parseFloat(S[_]),w||pe[_]!==ge[0][_]&&(w=pe);if(this._beziers=z.type!=="cubic"&&z.type!=="quadratic"&&z.type!=="soft"?Pe(ge,isNaN(z.curviness)?1:z.curviness,!1,z.type==="thruBasic",z.correlate,w):ee(ge,z.type,pe),this._segCount=this._beziers[_].length,this._timeRes){var Y=Ye(this._beziers,this._timeRes);this._length=Y.length,this._lengths=Y.lengths,this._segments=Y.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(Le=this._autoRotate)for(this._initialRotations=[],Le[0]instanceof Array||(this._autoRotate=Le=[Le]),M=Le.length;--M>-1;){for(X=0;3>X;X++)_=Le[M][X],this._func[_]=typeof S[_]=="function"&&S[_.indexOf("set")||typeof S["get"+_.substr(3)]!="function"?_:"get"+_.substr(3)];_=Le[M][2],this._initialRotations[M]=(this._func[_]?this._func[_].call(this._target):this._target[_])||0,this._overwriteProps.push(_)}return this._startRatio=d.vars.runBackwards?1:0,!0},set:function(S){var z,d,_,j,M,X,w,ge,pe,ye,Le,Y=this._segCount,ne=this._func,at=this._target,ve=S!==this._startRatio;if(this._timeRes){if(pe=this._lengths,ye=this._curSeg,Le=S*this._length,_=this._li,Le>this._l2&&Y-1>_){for(ge=Y-1;ge>_&&(this._l2=pe[++_])<=Le;);this._l1=pe[_-1],this._li=_,this._curSeg=ye=this._segments[_],this._s2=ye[this._s1=this._si=0]}else if(Le<this._l1&&_>0){for(;_>0&&(this._l1=pe[--_])>=Le;);_===0&&Le<this._l1?this._l1=0:_++,this._l2=pe[_],this._li=_,this._curSeg=ye=this._segments[_],this._s1=ye[(this._si=ye.length-1)-1]||0,this._s2=ye[this._si]}if(z=_,Le-=this._l1,_=this._si,Le>this._s2&&_<ye.length-1){for(ge=ye.length-1;ge>_&&(this._s2=ye[++_])<=Le;);this._s1=ye[_-1],this._si=_}else if(Le<this._s1&&_>0){for(;_>0&&(this._s1=ye[--_])>=Le;);_===0&&Le<this._s1?this._s1=0:_++,this._s2=ye[_],this._si=_}X=S===1?1:(_+(Le-this._s1)/(this._s2-this._s1))*this._prec||0}else X=(S-(z=0>S?0:S>=1?Y-1:Y*S>>0)*(1/Y))*Y;for(d=1-X,_=this._props.length;--_>-1;)j=this._props[_],w=(X*X*(M=this._beziers[j][z]).da+3*d*(X*M.ca+d*M.ba))*X+M.a,this._mod[j]&&(w=this._mod[j](w,at)),ne[j]?at[j](w):at[j]=w;if(this._autoRotate){var $e,Ze,Lt,ze,st,Tt,It,ht=this._autoRotate;for(_=ht.length;--_>-1;)j=ht[_][2],Tt=ht[_][3]||0,It=ht[_][4]===!0?1:u,M=this._beziers[ht[_][0]],$e=this._beziers[ht[_][1]],M&&$e&&(M=M[z],$e=$e[z],Ze=M.a+(M.b-M.a)*X,Ze+=((ze=M.b+(M.c-M.b)*X)-Ze)*X,ze+=(M.c+(M.d-M.c)*X-ze)*X,Lt=$e.a+($e.b-$e.a)*X,Lt+=((st=$e.b+($e.c-$e.b)*X)-Lt)*X,st+=($e.c+($e.d-$e.c)*X-st)*X,w=ve?Math.atan2(st-Lt,ze-Ze)*It+Tt:this._initialRotations[_],this._mod[j]&&(w=this._mod[j](w,at)),ne[j]?at[j](w):at[j]=w)}}}),Ie=se.prototype;se.bezierThrough=Pe,se.cubicToQuadratic=_e,se._autoCSS=!0,se.quadraticToCubic=function(S,z,d){return new G(S,(2*z+S)/3,(2*z+d)/3,d)},se._cssRegister=function(){var S=Z.CSSPlugin;if(S){var z=S._internals,d=z._parseToProxy,_=z._setPluginRatio,j=z.CSSPropTween;z._registerComplexSpecialProp("bezier",{parser:function(M,X,w,ge,pe,ye){X instanceof Array&&(X={values:X}),ye=new se;var Le,Y,ne,at=X.values,ve=at.length-1,$e=[],Ze={};if(0>ve)return pe;for(Le=0;ve>=Le;Le++)ne=d(M,at[Le],ge,pe,ye,ve!==Le),$e[Le]=ne.end;for(Y in X)Ze[Y]=X[Y];return Ze.values=$e,(pe=new j(M,"bezier",0,0,ne.pt,2)).data=ne,pe.plugin=ye,pe.setRatio=_,Ze.autoRotate===0&&(Ze.autoRotate=!0),!Ze.autoRotate||Ze.autoRotate instanceof Array||(Le=Ze.autoRotate===!0?0:Number(Ze.autoRotate),Ze.autoRotate=ne.end.left!=null?[["left","top","rotation",Le,!1]]:ne.end.x!=null&&[["x","y","rotation",Le,!1]]),Ze.autoRotate&&(ge._transform||ge._enableTransforms(!1),ne.autoRotate=ge._target._gsTransform,ne.proxy.rotation=ne.autoRotate.rotation||0,ge._overwriteProps.push("rotation")),ye._onInitTween(ne.proxy,Ze,ge._tween),pe}})}},Ie._mod=function(S){for(var z,d=this._overwriteProps,_=d.length;--_>-1;)(z=S[d[_]])&&typeof z=="function"&&(this._mod[d[_]]=z)},Ie._kill=function(S){var z,d,_=this._props;for(z in this._beziers)if(z in S)for(delete this._beziers[z],delete this._func[z],d=_.length;--d>-1;)_[d]===z&&_.splice(d,1);if(_=this._autoRotate)for(d=_.length;--d>-1;)S[_[d][2]]&&_.splice(d,1);return this._super._kill.call(this,S)}}(),Pi._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(u,E){var F,R,A,Z,G=function(){u.call(this,"css"),this._overwriteProps.length=0,this.setRatio=G.prototype.setRatio},_e=Pi._gsDefine.globals,be={},Q=G.prototype=new u("css");Q.constructor=G,G.version="2.1.3",G.API=2,G.defaultTransformPerspective=0,G.defaultSkewType="compensated",G.defaultSmoothOrigin=!0,Q="px",G.suffixMap={top:Q,right:Q,bottom:Q,left:Q,width:Q,height:Q,fontSize:Q,padding:Q,margin:Q,perspective:Q,lineHeight:""};var Pe,ee,Fe,Ye,se,Ie,S,z,d=/(?:\-|\.|\b)(\d|\.|e\-)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,j=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,M=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,X=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,ge=/opacity *= *([^)]*)/i,pe=/opacity:([^;]*)/i,ye=/alpha\(opacity *=.+?\)/i,Le=/^(rgb|hsl)/,Y=/([A-Z])/g,ne=/-([a-z])/gi,at=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,ve=function(x,O){return O.toUpperCase()},$e=/(?:Left|Right|Width)/i,Ze=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,Lt=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,ze=/,(?=[^\)]*(?:\(|$))/gi,st=/[\s,\(]/i,Tt=Math.PI/180,It=180/Math.PI,ht={},li={style:{}},K=Pi.document||{createElement:function(){return li}},ue=function(x,O){var N=K.createElementNS?K.createElementNS(O||"http://www.w3.org/1999/xhtml",x):K.createElement(x);return N.style?N:K.createElement(x)},Te=ue("div"),Ge=ue("img"),Oe=G._internals={_specialProps:be},Se=(Pi.navigator||{}).userAgent||"",nt=function(){var x=Se.indexOf("Android"),O=ue("a");return Fe=Se.indexOf("Safari")!==-1&&Se.indexOf("Chrome")===-1&&(x===-1||parseFloat(Se.substr(x+8,2))>3),se=Fe&&parseFloat(Se.substr(Se.indexOf("Version/")+8,2))<6,Ye=Se.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Se)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Se))&&(Ie=parseFloat(RegExp.$1)),!!O&&(O.style.cssText="top:1px;opacity:.55;",/^0.55/.test(O.style.opacity))}(),He=function(x){return ge.test(typeof x=="string"?x:(x.currentStyle?x.currentStyle.filter:x.style.filter)||"")?parseFloat(RegExp.$1)/100:1},ke=function(x){Pi.console},Ae="",rt="",it=function(x,O){var N,D,b=(O=O||Te).style;if(b[x]!==void 0)return x;for(x=x.charAt(0).toUpperCase()+x.substr(1),N=["O","Moz","ms","Ms","Webkit"],D=5;--D>-1&&b[N[D]+x]===void 0;);return D>=0?(Ae="-"+(rt=D===3?"ms":N[D]).toLowerCase()+"-",rt+x):null},pt=typeof window<"u"?window:K.defaultView||{getComputedStyle:function(){}},v=function(x){return pt.getComputedStyle(x)},P=G.getStyle=function(x,O,N,D,b){var te;return nt||O!=="opacity"?(!D&&x.style[O]?te=x.style[O]:(N=N||v(x))?te=N[O]||N.getPropertyValue(O)||N.getPropertyValue(O.replace(Y,"-$1").toLowerCase()):x.currentStyle&&(te=x.currentStyle[O]),b==null||te&&te!=="none"&&te!=="auto"&&te!=="auto auto"?te:b):He(x)},U=Oe.convertToPixels=function(x,O,N,D,b){if(D==="px"||!D&&O!=="lineHeight")return N;if(D==="auto"||!N)return 0;var te,k,he,ce=$e.test(O),we=x,oe=Te.style,Xe=0>N,Je=N===1;if(Xe&&(N=-N),Je&&(N*=100),O!=="lineHeight"||D)if(D==="%"&&O.indexOf("border")!==-1)te=N/100*(ce?x.clientWidth:x.clientHeight);else{if(oe.cssText="border:0 solid red;position:"+P(x,"position")+";line-height:0;",D!=="%"&&we.appendChild&&D.charAt(0)!=="v"&&D!=="rem")oe[ce?"borderLeftWidth":"borderTopWidth"]=N+D;else{if(we=x.parentNode||K.body,P(we,"display").indexOf("flex")!==-1&&(oe.position="absolute"),k=we._gsCache,he=E.ticker.frame,k&&ce&&k.time===he)return k.width*N/100;oe[ce?"width":"height"]=N+D}we.appendChild(Te),te=parseFloat(Te[ce?"offsetWidth":"offsetHeight"]),we.removeChild(Te),ce&&D==="%"&&G.cacheWidths!==!1&&((k=we._gsCache=we._gsCache||{}).time=he,k.width=te/N*100),te!==0||b||(te=U(x,O,N,D,!0))}else k=v(x).lineHeight,x.style.lineHeight=N,te=parseFloat(v(x).lineHeight),x.style.lineHeight=k;return Je&&(te/=100),Xe?-te:te},H=Oe.calculateOffset=function(x,O,N){if(P(x,"position",N)!=="absolute")return 0;var D=O==="left"?"Left":"Top",b=P(x,"margin"+D,N);return x["offset"+D]-(U(x,O,parseFloat(b),b.replace(w,""))||0)},re=function(x,O){var N,D,b,te={};if(O=O||v(x))if(N=O.length)for(;--N>-1;)((b=O[N]).indexOf("-transform")===-1||Qo===b)&&(te[b.replace(ne,ve)]=O.getPropertyValue(b));else for(N in O)(N.indexOf("Transform")===-1||Bi===N)&&(te[N]=O[N]);else if(O=x.currentStyle||x.style)for(N in O)typeof N=="string"&&te[N]===void 0&&(te[N.replace(ne,ve)]=O[N]);return nt||(te.opacity=He(x)),D=Jr(x,O,!1),te.rotation=D.rotation,te.skewX=D.skewX,te.scaleX=D.scaleX,te.scaleY=D.scaleY,te.x=D.x,te.y=D.y,mn&&(te.z=D.z,te.rotationX=D.rotationX,te.rotationY=D.rotationY,te.scaleZ=D.scaleZ),te.filters&&delete te.filters,te},Ce=function(x,O,N,D,b){var te,k,he,ce={},we=x.style;for(k in N)k!=="cssText"&&k!=="length"&&isNaN(k)&&(O[k]!==(te=N[k])||b&&b[k])&&k.indexOf("Origin")===-1&&(typeof te=="number"||typeof te=="string")&&(ce[k]=te!=="auto"||k!=="left"&&k!=="top"?te!==""&&te!=="auto"&&te!=="none"||typeof O[k]!="string"||O[k].replace(X,"")===""?te:0:H(x,k),we[k]!==void 0&&(he=new Jo(we,k,we[k],he)));if(D)for(k in D)k!=="className"&&(ce[k]=D[k]);return{difs:ce,firstMPT:he}},Re={width:["Left","Right"],height:["Top","Bottom"]},$=["marginLeft","marginRight","marginTop","marginBottom"],At=function(x,O,N){if((x.nodeName+"").toLowerCase()==="svg")return(N||v(x))[O]||0;if(x.getCTM&&es(x))return x.getBBox()[O]||0;var D=parseFloat(O==="width"?x.offsetWidth:x.offsetHeight),b=Re[O],te=b.length;for(N=N||v(x);--te>-1;)D-=parseFloat(P(x,"padding"+b[te],N,!0))||0,D-=parseFloat(P(x,"border"+b[te]+"Width",N,!0))||0;return D},_t=function(x,O){if(x==="contain"||x==="auto"||x==="auto auto")return x+" ";(x==null||x==="")&&(x="0 0");var N,D=x.split(" "),b=x.indexOf("left")!==-1?"0%":x.indexOf("right")!==-1?"100%":D[0],te=x.indexOf("top")!==-1?"0%":x.indexOf("bottom")!==-1?"100%":D[1];if(D.length>3&&!O){for(D=x.split(", ").join(",").split(","),x=[],N=0;N<D.length;N++)x.push(_t(D[N]));return x.join(",")}return te==null?te=b==="center"?"50%":"0":te==="center"&&(te="50%"),(b==="center"||isNaN(parseFloat(b))&&(b+"").indexOf("=")===-1)&&(b="50%"),x=b+" "+te+(D.length>2?" "+D[2]:""),O&&(O.oxp=b.indexOf("%")!==-1,O.oyp=te.indexOf("%")!==-1,O.oxr=b.charAt(1)==="=",O.oyr=te.charAt(1)==="=",O.ox=parseFloat(b.replace(X,"")),O.oy=parseFloat(te.replace(X,"")),O.v=x),O||x},et=function(x,O){return typeof x=="function"&&(x=x(z,S)),typeof x=="string"&&x.charAt(1)==="="?parseInt(x.charAt(0)+"1",10)*parseFloat(x.substr(2)):parseFloat(x)-parseFloat(O)||0},qe=function(x,O){typeof x=="function"&&(x=x(z,S));var N=typeof x=="string"&&x.charAt(1)==="=";return typeof x=="string"&&x.charAt(x.length-2)==="v"&&(x=(N?x.substr(0,2):0)+window["inner"+(x.substr(-2)==="vh"?"Height":"Width")]*(parseFloat(N?x.substr(2):x)/100)),x==null?O:N?parseInt(x.charAt(0)+"1",10)*parseFloat(x.substr(2))+O:parseFloat(x)||0},Rt=function(x,O,N,D){var b,te,k,he,ce,we=1e-6;return typeof x=="function"&&(x=x(z,S)),x==null?he=O:typeof x=="number"?he=x:(b=360,te=x.split("_"),k=((ce=x.charAt(1)==="=")?parseInt(x.charAt(0)+"1",10)*parseFloat(te[0].substr(2)):parseFloat(te[0]))*(x.indexOf("rad")===-1?1:It)-(ce?0:O),te.length&&(D&&(D[N]=O+k),x.indexOf("short")!==-1&&(k%=b)!=k%180&&(k=0>k?k+b:k-b),x.indexOf("_cw")!==-1&&0>k?k=(k+9999999999*b)%b-(k/b|0)*b:x.indexOf("ccw")!==-1&&k>0&&(k=(k-9999999999*b)%b-(k/b|0)*b)),he=O+k),we>he&&he>-we&&(he=0),he},ut={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ni=function(x,O,N){return 255*(1>6*(x=0>x?x+1:x>1?x-1:x)?O+(N-O)*x*6:.5>x?N:2>3*x?O+(N-O)*(2/3-x)*6:O)+.5|0},xi=G.parseColor=function(x,O){var N,D,b,te,k,he,ce,we,oe,Xe,Je;if(x)if(typeof x=="number")N=[x>>16,x>>8&255,255&x];else{if(x.charAt(x.length-1)===","&&(x=x.substr(0,x.length-1)),ut[x])N=ut[x];else if(x.charAt(0)==="#")x.length===4&&(D=x.charAt(1),b=x.charAt(2),te=x.charAt(3),x="#"+D+D+b+b+te+te),N=[(x=parseInt(x.substr(1),16))>>16,x>>8&255,255&x];else if(x.substr(0,3)==="hsl")if(N=Je=x.match(d),O){if(x.indexOf("=")!==-1)return x.match(_)}else k=Number(N[0])%360/360,he=Number(N[1])/100,D=2*(ce=Number(N[2])/100)-(b=.5>=ce?ce*(he+1):ce+he-ce*he),N.length>3&&(N[3]=Number(N[3])),N[0]=ni(k+1/3,D,b),N[1]=ni(k,D,b),N[2]=ni(k-1/3,D,b);else N=x.match(d)||ut.transparent;N[0]=Number(N[0]),N[1]=Number(N[1]),N[2]=Number(N[2]),N.length>3&&(N[3]=Number(N[3]))}else N=ut.black;return O&&!Je&&(D=N[0]/255,b=N[1]/255,te=N[2]/255,ce=((we=Math.max(D,b,te))+(oe=Math.min(D,b,te)))/2,we===oe?k=he=0:(Xe=we-oe,he=ce>.5?Xe/(2-we-oe):Xe/(we+oe),k=we===D?(b-te)/Xe+(te>b?6:0):we===b?(te-D)/Xe+2:(D-b)/Xe+4,k*=60),N[0]=k+.5|0,N[1]=100*he+.5|0,N[2]=100*ce+.5|0),N},Oi=function(x,O){var N,D,b,te=x.match(ci)||[],k=0,he="";if(!te.length)return x;for(N=0;N<te.length;N++)D=te[N],k+=(b=x.substr(k,x.indexOf(D,k)-k)).length+D.length,(D=xi(D,O)).length===3&&D.push(1),he+=b+(O?"hsla("+D[0]+","+D[1]+"%,"+D[2]+"%,"+D[3]:"rgba("+D.join(","))+")";return he+x.substr(k)},ci="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(Q in ut)ci+="|"+Q+"\\b";ci=new RegExp(ci+")","gi"),G.colorStringFilter=function(x){var O,N=x[0]+" "+x[1];ci.test(N)&&(O=N.indexOf("hsl(")!==-1||N.indexOf("hsla(")!==-1,x[0]=Oi(x[0],O),x[1]=Oi(x[1],O)),ci.lastIndex=0},E.defaultStringFilter||(E.defaultStringFilter=G.colorStringFilter);var Fi=function(x,O,N,D){if(x==null)return function(Je){return Je};var b,te=O?(x.match(ci)||[""])[0]:"",k=x.split(te).join("").match(j)||[],he=x.substr(0,x.indexOf(k[0])),ce=x.charAt(x.length-1)===")"?")":"",we=x.indexOf(" ")!==-1?" ":",",oe=k.length,Xe=oe>0?k[0].replace(d,""):"";return oe?b=O?function(Je){var We,lt,Ke,wt;if(typeof Je=="number")Je+=Xe;else if(D&&ze.test(Je)){for(wt=Je.replace(ze,"|").split("|"),Ke=0;Ke<wt.length;Ke++)wt[Ke]=b(wt[Ke]);return wt.join(",")}if(We=(Je.match(ci)||[te])[0],Ke=(lt=Je.split(We).join("").match(j)||[]).length,oe>Ke--)for(;++Ke<oe;)lt[Ke]=N?lt[(Ke-1)/2|0]:k[Ke];return he+lt.join(we)+we+We+ce+(Je.indexOf("inset")!==-1?" inset":"")}:function(Je){var We,lt,Ke;if(typeof Je=="number")Je+=Xe;else if(D&&ze.test(Je)){for(lt=Je.replace(ze,"|").split("|"),Ke=0;Ke<lt.length;Ke++)lt[Ke]=b(lt[Ke]);return lt.join(",")}if(Ke=(We=Je.match(we===","?j:M)||[]).length,oe>Ke--)for(;++Ke<oe;)We[Ke]=N?We[(Ke-1)/2|0]:k[Ke];return(he&&Je!=="none"&&Je.substr(0,Je.indexOf(We[0]))||he)+We.join(we)+ce}:function(Je){return Je}},Tn=function(x){return x=x.split(","),function(O,N,D,b,te,k,he){var ce,we=(N+"").split(" ");for(he={},ce=0;4>ce;ce++)he[x[ce]]=we[ce]=we[ce]||we[(ce-1)/2>>0];return b.parse(O,he,te,k)}},Jo=(Oe._setPluginRatio=function(x){this.plugin.setRatio(x);for(var O,N,D,b,te,k=this.data,he=k.proxy,ce=k.firstMPT,we=1e-6;ce;)O=he[ce.v],ce.r?O=ce.r(O):we>O&&O>-we&&(O=0),ce.t[ce.p]=O,ce=ce._next;if(k.autoRotate&&(k.autoRotate.rotation=k.mod?k.mod.call(this._tween,he.rotation,this.t,this._tween):he.rotation),x===1||x===0)for(ce=k.firstMPT,te=x===1?"e":"b";ce;){if((N=ce.t).type){if(N.type===1){for(b=N.xs0+N.s+N.xs1,D=1;D<N.l;D++)b+=N["xn"+D]+N["xs"+(D+1)];N[te]=b}}else N[te]=N.s+N.xs0;ce=ce._next}},function(x,O,N,D,b){this.t=x,this.p=O,this.v=N,this.r=b,D&&(D._prev=this,this._next=D)}),Ni=(Oe._parseToProxy=function(x,O,N,D,b,te){var k,he,ce,we,oe,Xe=D,Je={},We={},lt=N._transform,Ke=ht;for(N._transform=null,ht=O,D=oe=N.parse(x,O,D,b),ht=Ke,te&&(N._transform=lt,Xe&&(Xe._prev=null,Xe._prev&&(Xe._prev._next=null)));D&&D!==Xe;){if(D.type<=1&&(We[he=D.p]=D.s+D.c,Je[he]=D.s,te||(we=new Jo(D,"s",he,we,D.r),D.c=0),D.type===1))for(k=D.l;--k>0;)ce="xn"+k,We[he=D.p+"_"+ce]=D.data[ce],Je[he]=D[ce],te||(we=new Jo(D,ce,he,we,D.rxp[ce]));D=D._next}return{proxy:Je,end:We,firstMPT:we,pt:oe}},Oe.CSSPropTween=function(x,O,N,D,b,te,k,he,ce,we,oe){this.t=x,this.p=O,this.s=N,this.c=D,this.n=k||O,x instanceof Ni||Z.push(this.n),this.r=he&&(typeof he=="function"?he:Math.round),this.type=te||0,ce&&(this.pr=ce,F=!0),this.b=we===void 0?N:we,this.e=oe===void 0?N+D:oe,b&&(this._next=b,b._prev=this)}),Ba=function(x,O,N,D,b,te){var k=new Ni(x,O,N,D-N,b,-1,te);return k.b=N,k.e=k.xs0=D,k},qr=G.parseComplex=function(x,O,N,D,b,te,k,he,ce,we){N=N||te||"",typeof D=="function"&&(D=D(z,S)),k=new Ni(x,O,0,0,k,we?2:1,null,!1,he,N,D),D+="",b&&ci.test(D+N)&&(D=[N,D],G.colorStringFilter(D),N=D[0],D=D[1]);var oe,Xe,Je,We,lt,Ke,wt,kt,ai,Ot,xt,Be,Gt,Vt=N.split(", ").join(",").split(" "),Ee=D.split(", ").join(",").split(" "),zt=Vt.length,Kt=Pe!==!1;for((D.indexOf(",")!==-1||N.indexOf(",")!==-1)&&((D+N).indexOf("rgb")!==-1||(D+N).indexOf("hsl")!==-1?(Vt=Vt.join(" ").replace(ze,", ").split(" "),Ee=Ee.join(" ").replace(ze,", ").split(" ")):(Vt=Vt.join(" ").split(",").join(", ").split(" "),Ee=Ee.join(" ").split(",").join(", ").split(" ")),zt=Vt.length),zt!==Ee.length&&(zt=(Vt=(te||"").split(" ")).length),k.plugin=ce,k.setRatio=we,ci.lastIndex=0,oe=0;zt>oe;oe++)if(We=Vt[oe],lt=Ee[oe]+"",(kt=parseFloat(We))||kt===0)k.appendXtra("",kt,et(lt,kt),lt.replace(_,""),!(!Kt||lt.indexOf("px")===-1)&&Math.round,!0);else if(b&&ci.test(We))Be=")"+((Be=lt.indexOf(")")+1)?lt.substr(Be):""),Gt=lt.indexOf("hsl")!==-1&&nt,Ot=lt,We=xi(We,Gt),lt=xi(lt,Gt),(ai=We.length+lt.length>6)&&!nt&&lt[3]===0?(k["xs"+k.l]+=k.l?" transparent":"transparent",k.e=k.e.split(Ee[oe]).join("transparent")):(nt||(ai=!1),Gt?k.appendXtra(Ot.substr(0,Ot.indexOf("hsl"))+(ai?"hsla(":"hsl("),We[0],et(lt[0],We[0]),",",!1,!0).appendXtra("",We[1],et(lt[1],We[1]),"%,",!1).appendXtra("",We[2],et(lt[2],We[2]),ai?"%,":"%"+Be,!1):k.appendXtra(Ot.substr(0,Ot.indexOf("rgb"))+(ai?"rgba(":"rgb("),We[0],lt[0]-We[0],",",Math.round,!0).appendXtra("",We[1],lt[1]-We[1],",",Math.round).appendXtra("",We[2],lt[2]-We[2],ai?",":Be,Math.round),ai&&(We=We.length<4?1:We[3],k.appendXtra("",We,(lt.length<4?1:lt[3])-We,Be,!1))),ci.lastIndex=0;else if(Ke=We.match(d)){if(!(wt=lt.match(_))||wt.length!==Ke.length)return k;for(Je=0,Xe=0;Xe<Ke.length;Xe++)xt=Ke[Xe],Ot=We.indexOf(xt,Je),k.appendXtra(We.substr(Je,Ot-Je),Number(xt),et(wt[Xe],xt),"",!(!Kt||We.substr(Ot+xt.length,2)!=="px")&&Math.round,Xe===0),Je=Ot+xt.length;k["xs"+k.l]+=We.substr(Je)}else k["xs"+k.l]+=k.l||k["xs"+k.l]?" "+lt:lt;if(D.indexOf("=")!==-1&&k.data){for(Be=k.xs0+k.data.s,oe=1;oe<k.l;oe++)Be+=k["xs"+oe]+k.data["xn"+oe];k.e=Be+k["xs"+oe]}return k.l||(k.type=-1,k.xs0=k.e),k.xfirst||k},ki=9;for((Q=Ni.prototype).l=Q.pr=0;--ki>0;)Q["xn"+ki]=0,Q["xs"+ki]="";Q.xs0="",Q._next=Q._prev=Q.xfirst=Q.data=Q.plugin=Q.setRatio=Q.rxp=null,Q.appendXtra=function(x,O,N,D,b,te){var k=this,he=k.l;return k["xs"+he]+=te&&(he||k["xs"+he])?" "+x:x||"",N||he===0||k.plugin?(k.l++,k.type=k.setRatio?2:1,k["xs"+k.l]=D||"",he>0?(k.data["xn"+he]=O+N,k.rxp["xn"+he]=b,k["xn"+he]=O,k.plugin||(k.xfirst=new Ni(k,"xn"+he,O,N,k.xfirst||k,0,k.n,b,k.pr),k.xfirst.xs0=0),k):(k.data={s:O+N},k.rxp={},k.s=O,k.c=N,k.r=b,k)):(k["xs"+he]+=O+(D||""),k)};var rl=function(x,O){O=O||{},this.p=O.prefix&&it(x)||x,be[x]=be[this.p]=this,this.format=O.formatter||Fi(O.defaultValue,O.color,O.collapsible,O.multi),O.parser&&(this.parse=O.parser),this.clrs=O.color,this.multi=O.multi,this.keyword=O.keyword,this.dflt=O.defaultValue,this.allowFunc=O.allowFunc,this.pr=O.priority||0},bi=Oe._registerComplexSpecialProp=function(x,O,N){typeof O!="object"&&(O={parser:N});var D,b=x.split(","),te=O.defaultValue;for(N=N||[te],D=0;D<b.length;D++)O.prefix=D===0&&O.prefix,O.defaultValue=N[D]||te,new rl(b[D],O)},Xc=Oe._registerPluginProp=function(x){if(!be[x]){var O=x.charAt(0).toUpperCase()+x.substr(1)+"Plugin";bi(x,{parser:function(N,D,b,te,k,he,ce){var we=_e.com.greensock.plugins[O];return we?(we._cssRegister(),be[b].parse(N,D,b,te,k,he,ce)):(ke(),k)}})}};(Q=rl.prototype).parseComplex=function(x,O,N,D,b,te){var k,he,ce,we,oe,Xe,Je=this.keyword;if(this.multi&&(ze.test(N)||ze.test(O)?(he=O.replace(ze,"|").split("|"),ce=N.replace(ze,"|").split("|")):Je&&(he=[O],ce=[N])),ce){for(we=ce.length>he.length?ce.length:he.length,k=0;we>k;k++)O=he[k]=he[k]||this.dflt,N=ce[k]=ce[k]||this.dflt,Je&&(oe=O.indexOf(Je))!==(Xe=N.indexOf(Je))&&(Xe===-1?he[k]=he[k].split(Je).join(""):oe===-1&&(he[k]+=" "+Je));O=he.join(", "),N=ce.join(", ")}return qr(x,this.p,O,N,this.clrs,this.dflt,D,this.pr,b,te)},Q.parse=function(x,O,N,D,b,te,k){return this.parseComplex(x.style,this.format(P(x,this.p,A,!1,this.dflt)),this.format(O),b,te)},G.registerSpecialProp=function(x,O,N){bi(x,{parser:function(D,b,te,k,he,ce,we){var oe=new Ni(D,te,0,0,he,2,te,!1,N);return oe.plugin=ce,oe.setRatio=O(D,b,k._tween,te),oe},priority:N})},G.useSVGTransformAttr=!0;var Yn,al="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Bi=it("transform"),Qo=Ae+"transform",Zr=it("transformOrigin"),mn=it("perspective")!==null,$o=Oe.Transform=function(){this.perspective=parseFloat(G.defaultTransformPerspective)||0,this.force3D=!(G.defaultForce3D===!1||!mn)&&(G.defaultForce3D||"auto")},Yc=Pi.SVGElement,ol=function(x,O,N){var D,b=K.createElementNS("http://www.w3.org/2000/svg",x),te=/([a-z])([A-Z])/g;for(D in N)b.setAttributeNS(null,D.replace(te,"$1-$2").toLowerCase(),N[D]);return O.appendChild(b),b},qn=K.documentElement||{},qc=function(){var x,O,N,D=Ie||/Android/i.test(Se)&&!Pi.chrome;return K.createElementNS&&qn.appendChild&&!D&&(x=ol("svg",qn),N=(O=ol("rect",x,{width:100,height:50,x:100})).getBoundingClientRect().width,O.style[Zr]="50% 50%",O.style[Bi]="scaleX(0.5)",D=N===O.getBoundingClientRect().width&&!(Ye&&mn),qn.removeChild(x)),D}(),Ko=function(x,O,N,D,b,te){var k,he,ce,we,oe,Xe,Je,We,lt,Ke,wt,kt,ai,Ot,xt=x._gsTransform,Be=is(x,!0);xt&&(ai=xt.xOrigin,Ot=xt.yOrigin),(!D||(k=D.split(" ")).length<2)&&((Je=x.getBBox()).x===0&&Je.y===0&&Je.width+Je.height===0&&(Je={x:parseFloat(x.hasAttribute("x")?x.getAttribute("x"):x.hasAttribute("cx")?x.getAttribute("cx"):0)||0,y:parseFloat(x.hasAttribute("y")?x.getAttribute("y"):x.hasAttribute("cy")?x.getAttribute("cy"):0)||0,width:0,height:0}),k=[((O=_t(O).split(" "))[0].indexOf("%")!==-1?parseFloat(O[0])/100*Je.width:parseFloat(O[0]))+Je.x,(O[1].indexOf("%")!==-1?parseFloat(O[1])/100*Je.height:parseFloat(O[1]))+Je.y]),N.xOrigin=we=parseFloat(k[0]),N.yOrigin=oe=parseFloat(k[1]),D&&Be!==ts&&(Xe=Be[0],Je=Be[1],We=Be[2],lt=Be[3],Ke=Be[4],wt=Be[5],(kt=Xe*lt-Je*We)&&(he=we*(lt/kt)+oe*(-We/kt)+(We*wt-lt*Ke)/kt,ce=we*(-Je/kt)+oe*(Xe/kt)-(Xe*wt-Je*Ke)/kt,we=N.xOrigin=k[0]=he,oe=N.yOrigin=k[1]=ce)),xt&&(te&&(N.xOffset=xt.xOffset,N.yOffset=xt.yOffset,xt=N),b||b!==!1&&G.defaultSmoothOrigin!==!1?(he=we-ai,ce=oe-Ot,xt.xOffset+=he*Be[0]+ce*Be[2]-he,xt.yOffset+=he*Be[1]+ce*Be[3]-ce):xt.xOffset=xt.yOffset=0),te||x.setAttribute("data-svg-origin",k.join(" "))},sl=function(x){var O,N=ue("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),D=this.parentNode,b=this.nextSibling,te=this.style.cssText;if(qn.appendChild(N),N.appendChild(this),this.style.display="block",x)try{O=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=sl}catch{}else this._originalGetBBox&&(O=this._originalGetBBox());return b?D.insertBefore(this,b):D.appendChild(this),qn.removeChild(N),this.style.cssText=te,O},es=function(x){return!(!Yc||!x.getCTM||x.parentNode&&!x.ownerSVGElement||!function(O){try{return O.getBBox()}catch{return sl.call(O,!0)}}(x))},ts=[1,0,0,1,0,0],is=function(x,O){var N,D,b,te,k,he,ce,we=x._gsTransform||new $o,oe=1e5,Xe=x.style;if(Bi?D=P(x,Qo,null,!0):x.currentStyle&&(D=(D=x.currentStyle.filter.match(Ze))&&D.length===4?[D[0].substr(4),Number(D[2].substr(4)),Number(D[1].substr(4)),D[3].substr(4),we.x||0,we.y||0].join(","):""),N=!D||D==="none"||D==="matrix(1, 0, 0, 1, 0, 0)",Bi&&N&&!x.offsetParent&&x!==qn&&(te=Xe.display,Xe.display="block",(ce=x.parentNode)&&x.offsetParent||(k=1,he=x.nextSibling,qn.appendChild(x)),N=!(D=P(x,Qo,null,!0))||D==="none"||D==="matrix(1, 0, 0, 1, 0, 0)",te?Xe.display=te:Qr(Xe,"display"),k&&(he?ce.insertBefore(x,he):ce?ce.appendChild(x):qn.removeChild(x))),(we.svg||x.getCTM&&es(x))&&(N&&(Xe[Bi]+"").indexOf("matrix")!==-1&&(D=Xe[Bi],N=0),b=x.getAttribute("transform"),N&&b&&(D="matrix("+(b=x.transform.baseVal.consolidate().matrix).a+","+b.b+","+b.c+","+b.d+","+b.e+","+b.f+")",N=0)),N)return ts;for(b=(D||"").match(d)||[],ki=b.length;--ki>-1;)te=Number(b[ki]),b[ki]=(k=te-(te|=0))?(k*oe+(0>k?-.5:.5)|0)/oe+te:te;return O&&b.length>6?[b[0],b[1],b[4],b[5],b[12],b[13]]:b},Jr=Oe.getTransform=function(x,O,N,D){if(x._gsTransform&&N&&!D)return x._gsTransform;var b,te,k,he,ce,we,oe=N&&x._gsTransform||new $o,Xe=oe.scaleX<0,Je=2e-5,We=1e5,lt=mn&&(parseFloat(P(x,Zr,O,!1,"0 0 0").split(" ")[2])||oe.zOrigin)||0,Ke=parseFloat(G.defaultTransformPerspective)||0;if(oe.svg=!(!x.getCTM||!es(x)),oe.svg&&(Ko(x,P(x,Zr,O,!1,"50% 50%")+"",oe,x.getAttribute("data-svg-origin")),Yn=G.useSVGTransformAttr||qc),(b=is(x))!==ts){if(b.length===16){var wt,kt,ai,Ot,xt,Be=b[0],Gt=b[1],Vt=b[2],Ee=b[3],zt=b[4],Kt=b[5],hn=b[6],gn=b[7],pi=b[8],mi=b[9],Mi=b[10],Ui=b[12],Ii=b[13],Vi=b[14],Ri=b[11],ii=Math.atan2(hn,Mi);oe.zOrigin&&(Ui=pi*(Vi=-oe.zOrigin)-b[12],Ii=mi*Vi-b[13],Vi=Mi*Vi+oe.zOrigin-b[14]),oe.rotationX=ii*It,ii&&(wt=zt*(Ot=Math.cos(-ii))+pi*(xt=Math.sin(-ii)),kt=Kt*Ot+mi*xt,ai=hn*Ot+Mi*xt,pi=zt*-xt+pi*Ot,mi=Kt*-xt+mi*Ot,Mi=hn*-xt+Mi*Ot,Ri=gn*-xt+Ri*Ot,zt=wt,Kt=kt,hn=ai),ii=Math.atan2(-Vt,Mi),oe.rotationY=ii*It,ii&&(kt=Gt*(Ot=Math.cos(-ii))-mi*(xt=Math.sin(-ii)),ai=Vt*Ot-Mi*xt,mi=Gt*xt+mi*Ot,Mi=Vt*xt+Mi*Ot,Ri=Ee*xt+Ri*Ot,Be=wt=Be*Ot-pi*xt,Gt=kt,Vt=ai),ii=Math.atan2(Gt,Be),oe.rotation=ii*It,ii&&(wt=Be*(Ot=Math.cos(ii))+Gt*(xt=Math.sin(ii)),kt=zt*Ot+Kt*xt,ai=pi*Ot+mi*xt,Gt=Gt*Ot-Be*xt,Kt=Kt*Ot-zt*xt,mi=mi*Ot-pi*xt,Be=wt,zt=kt,pi=ai),oe.rotationX&&Math.abs(oe.rotationX)+Math.abs(oe.rotation)>359.9&&(oe.rotationX=oe.rotation=0,oe.rotationY=180-oe.rotationY),ii=Math.atan2(zt,Kt),oe.scaleX=(Math.sqrt(Be*Be+Gt*Gt+Vt*Vt)*We+.5|0)/We,oe.scaleY=(Math.sqrt(Kt*Kt+hn*hn)*We+.5|0)/We,oe.scaleZ=(Math.sqrt(pi*pi+mi*mi+Mi*Mi)*We+.5|0)/We,Be/=oe.scaleX,zt/=oe.scaleY,Gt/=oe.scaleX,Kt/=oe.scaleY,Math.abs(ii)>Je?(oe.skewX=ii*It,zt=0,oe.skewType!=="simple"&&(oe.scaleY*=1/Math.cos(ii))):oe.skewX=0,oe.perspective=Ri?1/(0>Ri?-Ri:Ri):0,oe.x=Ui,oe.y=Ii,oe.z=Vi,oe.svg&&(oe.x-=oe.xOrigin-(oe.xOrigin*Be-oe.yOrigin*zt),oe.y-=oe.yOrigin-(oe.yOrigin*Gt-oe.xOrigin*Kt))}else if(!mn||D||!b.length||oe.x!==b[4]||oe.y!==b[5]||!oe.rotationX&&!oe.rotationY){var An=b.length>=6,Li=An?b[0]:1,ji=b[1]||0,Jn=b[2]||0,Pn=An?b[3]:1;oe.x=b[4]||0,oe.y=b[5]||0,k=Math.sqrt(Li*Li+ji*ji),he=Math.sqrt(Pn*Pn+Jn*Jn),ce=Li||ji?Math.atan2(ji,Li)*It:oe.rotation||0,we=Jn||Pn?Math.atan2(Jn,Pn)*It+ce:oe.skewX||0,oe.scaleX=k,oe.scaleY=he,oe.rotation=ce,oe.skewX=we,mn&&(oe.rotationX=oe.rotationY=oe.z=0,oe.perspective=Ke,oe.scaleZ=1),oe.svg&&(oe.x-=oe.xOrigin-(oe.xOrigin*Li+oe.yOrigin*Jn),oe.y-=oe.yOrigin-(oe.xOrigin*ji+oe.yOrigin*Pn))}for(te in Math.abs(oe.skewX)>90&&Math.abs(oe.skewX)<270&&(Xe?(oe.scaleX*=-1,oe.skewX+=oe.rotation<=0?180:-180,oe.rotation+=oe.rotation<=0?180:-180):(oe.scaleY*=-1,oe.skewX+=oe.skewX<=0?180:-180)),oe.zOrigin=lt,oe)oe[te]<Je&&oe[te]>-Je&&(oe[te]=0)}return N&&(x._gsTransform=oe,oe.svg&&(Yn&&x.style[Bi]?E.delayedCall(.001,function(){Qr(x.style,Bi)}):!Yn&&x.getAttribute("transform")&&E.delayedCall(.001,function(){x.removeAttribute("transform")}))),oe},Zc=function(x){var O,N,D=this.data,b=-D.rotation*Tt,te=b+D.skewX*Tt,k=1e5,he=(Math.cos(b)*D.scaleX*k|0)/k,ce=(Math.sin(b)*D.scaleX*k|0)/k,we=(Math.sin(te)*-D.scaleY*k|0)/k,oe=(Math.cos(te)*D.scaleY*k|0)/k,Xe=this.t.style,Je=this.t.currentStyle;if(Je){N=ce,ce=-we,we=-N,O=Je.filter,Xe.filter="";var We,lt,Ke=this.t.offsetWidth,wt=this.t.offsetHeight,kt=Je.position!=="absolute",ai="progid:DXImageTransform.Microsoft.Matrix(M11="+he+", M12="+ce+", M21="+we+", M22="+oe,Ot=D.x+Ke*D.xPercent/100,xt=D.y+wt*D.yPercent/100;if(D.ox!=null&&(Ot+=(We=(D.oxp?Ke*D.ox*.01:D.ox)-Ke/2)-(We*he+(lt=(D.oyp?wt*D.oy*.01:D.oy)-wt/2)*ce),xt+=lt-(We*we+lt*oe)),ai+=kt?", Dx="+((We=Ke/2)-(We*he+(lt=wt/2)*ce)+Ot)+", Dy="+(lt-(We*we+lt*oe)+xt)+")":", sizingMethod='auto expand')",O.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?Xe.filter=O.replace(Lt,ai):Xe.filter=ai+" "+O,(x===0||x===1)&&he===1&&ce===0&&we===0&&oe===1&&(kt&&ai.indexOf("Dx=0, Dy=0")===-1||ge.test(O)&&parseFloat(RegExp.$1)!==100||O.indexOf(O.indexOf("Alpha"))===-1&&Xe.removeAttribute("filter")),!kt){var Be,Gt,Vt,Ee=8>Ie?1:-1;for(We=D.ieOffsetX||0,lt=D.ieOffsetY||0,D.ieOffsetX=Math.round((Ke-((0>he?-he:he)*Ke+(0>ce?-ce:ce)*wt))/2+Ot),D.ieOffsetY=Math.round((wt-((0>oe?-oe:oe)*wt+(0>we?-we:we)*Ke))/2+xt),ki=0;4>ki;ki++)Vt=(N=(Be=Je[Gt=$[ki]]).indexOf("px")!==-1?parseFloat(Be):U(this.t,Gt,parseFloat(Be),Be.replace(w,""))||0)!==D[Gt]?2>ki?-D.ieOffsetX:-D.ieOffsetY:2>ki?We-D.ieOffsetX:lt-D.ieOffsetY,Xe[Gt]=(D[Gt]=Math.round(N-Vt*(ki===0||ki===2?1:Ee)))+"px"}}},Jc=Oe.set3DTransformRatio=Oe.setTransformRatio=function(x){var O,N,D,b,te,k,he,ce,we,oe,Xe,Je,We,lt,Ke,wt,kt,ai,Ot,xt,Be,Gt,Vt,Ee=this.data,zt=this.t.style,Kt=Ee.rotation,hn=Ee.rotationX,gn=Ee.rotationY,pi=Ee.scaleX,mi=Ee.scaleY,Mi=Ee.scaleZ,Ui=Ee.x,Ii=Ee.y,Vi=Ee.z,Ri=Ee.svg,ii=Ee.perspective,An=Ee.force3D,Li=Ee.skewY,ji=Ee.skewX;if(Li&&(ji+=Li,Kt+=Li),!((x!==1&&x!==0||An!=="auto"||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&An||Vi||ii||gn||hn||Mi!==1)||Yn&&Ri||!mn)Kt||ji||Ri?(Kt*=Tt,Gt=ji*Tt,Vt=1e5,N=Math.cos(Kt)*pi,te=Math.sin(Kt)*pi,D=Math.sin(Kt-Gt)*-mi,k=Math.cos(Kt-Gt)*mi,Gt&&Ee.skewType==="simple"&&(O=Math.tan(Gt-Li*Tt),D*=O=Math.sqrt(1+O*O),k*=O,Li&&(O=Math.tan(Li*Tt),N*=O=Math.sqrt(1+O*O),te*=O)),Ri&&(Ui+=Ee.xOrigin-(Ee.xOrigin*N+Ee.yOrigin*D)+Ee.xOffset,Ii+=Ee.yOrigin-(Ee.xOrigin*te+Ee.yOrigin*k)+Ee.yOffset,Yn&&(Ee.xPercent||Ee.yPercent)&&(Ke=this.t.getBBox(),Ui+=.01*Ee.xPercent*Ke.width,Ii+=.01*Ee.yPercent*Ke.height),(Ke=1e-6)>Ui&&Ui>-Ke&&(Ui=0),Ke>Ii&&Ii>-Ke&&(Ii=0)),Ot=(N*Vt|0)/Vt+","+(te*Vt|0)/Vt+","+(D*Vt|0)/Vt+","+(k*Vt|0)/Vt+","+Ui+","+Ii+")",Ri&&Yn?this.t.setAttribute("transform","matrix("+Ot):zt[Bi]=(Ee.xPercent||Ee.yPercent?"translate("+Ee.xPercent+"%,"+Ee.yPercent+"%) matrix(":"matrix(")+Ot):zt[Bi]=(Ee.xPercent||Ee.yPercent?"translate("+Ee.xPercent+"%,"+Ee.yPercent+"%) matrix(":"matrix(")+pi+",0,0,"+mi+","+Ui+","+Ii+")";else{if(Ye&&((Ke=1e-4)>pi&&pi>-Ke&&(pi=Mi=2e-5),Ke>mi&&mi>-Ke&&(mi=Mi=2e-5),!ii||Ee.z||Ee.rotationX||Ee.rotationY||(ii=0)),Kt||ji)Kt*=Tt,wt=N=Math.cos(Kt),kt=te=Math.sin(Kt),ji&&(Kt-=ji*Tt,wt=Math.cos(Kt),kt=Math.sin(Kt),Ee.skewType==="simple"&&(O=Math.tan((ji-Li)*Tt),wt*=O=Math.sqrt(1+O*O),kt*=O,Ee.skewY&&(O=Math.tan(Li*Tt),N*=O=Math.sqrt(1+O*O),te*=O))),D=-kt,k=wt;else{if(!(gn||hn||Mi!==1||ii||Ri))return void(zt[Bi]=(Ee.xPercent||Ee.yPercent?"translate("+Ee.xPercent+"%,"+Ee.yPercent+"%) translate3d(":"translate3d(")+Ui+"px,"+Ii+"px,"+Vi+"px)"+(pi!==1||mi!==1?" scale("+pi+","+mi+")":""));N=k=1,D=te=0}oe=1,b=he=ce=we=Xe=Je=0,We=ii?-1/ii:0,lt=Ee.zOrigin,Ke=1e-6,xt=",",Be="0",(Kt=gn*Tt)&&(wt=Math.cos(Kt),ce=-(kt=Math.sin(Kt)),Xe=We*-kt,b=N*kt,he=te*kt,oe=wt,We*=wt,N*=wt,te*=wt),(Kt=hn*Tt)&&(O=D*(wt=Math.cos(Kt))+b*(kt=Math.sin(Kt)),ai=k*wt+he*kt,we=oe*kt,Je=We*kt,b=D*-kt+b*wt,he=k*-kt+he*wt,oe*=wt,We*=wt,D=O,k=ai),Mi!==1&&(b*=Mi,he*=Mi,oe*=Mi,We*=Mi),mi!==1&&(D*=mi,k*=mi,we*=mi,Je*=mi),pi!==1&&(N*=pi,te*=pi,ce*=pi,Xe*=pi),(lt||Ri)&&(lt&&(Ui+=b*-lt,Ii+=he*-lt,Vi+=oe*-lt+lt),Ri&&(Ui+=Ee.xOrigin-(Ee.xOrigin*N+Ee.yOrigin*D)+Ee.xOffset,Ii+=Ee.yOrigin-(Ee.xOrigin*te+Ee.yOrigin*k)+Ee.yOffset),Ke>Ui&&Ui>-Ke&&(Ui=Be),Ke>Ii&&Ii>-Ke&&(Ii=Be),Ke>Vi&&Vi>-Ke&&(Vi=0)),Ot=Ee.xPercent||Ee.yPercent?"translate("+Ee.xPercent+"%,"+Ee.yPercent+"%) matrix3d(":"matrix3d(",Ot+=(Ke>N&&N>-Ke?Be:N)+xt+(Ke>te&&te>-Ke?Be:te)+xt+(Ke>ce&&ce>-Ke?Be:ce),Ot+=xt+(Ke>Xe&&Xe>-Ke?Be:Xe)+xt+(Ke>D&&D>-Ke?Be:D)+xt+(Ke>k&&k>-Ke?Be:k),hn||gn||Mi!==1?(Ot+=xt+(Ke>we&&we>-Ke?Be:we)+xt+(Ke>Je&&Je>-Ke?Be:Je)+xt+(Ke>b&&b>-Ke?Be:b),Ot+=xt+(Ke>he&&he>-Ke?Be:he)+xt+(Ke>oe&&oe>-Ke?Be:oe)+xt+(Ke>We&&We>-Ke?Be:We)+xt):Ot+=",0,0,0,0,1,0,",Ot+=Ui+xt+Ii+xt+Vi+xt+(ii?1+-Vi/ii:1)+")",zt[Bi]=Ot}};(Q=$o.prototype).x=Q.y=Q.z=Q.skewX=Q.skewY=Q.rotation=Q.rotationX=Q.rotationY=Q.zOrigin=Q.xPercent=Q.yPercent=Q.xOffset=Q.yOffset=0,Q.scaleX=Q.scaleY=Q.scaleZ=1,bi("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(x,O,N,D,b,te,k){if(D._lastParsedTransform===k)return b;D._lastParsedTransform=k;var he=k.scale&&typeof k.scale=="function"?k.scale:0;he&&(k.scale=he(z,x));var ce,we,oe,Xe,Je,We,lt,Ke,wt,kt=x._gsTransform,ai=x.style,Ot=1e-6,xt=al.length,Be=k,Gt={},Vt="transformOrigin",Ee=Jr(x,A,!0,Be.parseTransform),zt=Be.transform&&(typeof Be.transform=="function"?Be.transform(z,S):Be.transform);if(Ee.skewType=Be.skewType||Ee.skewType||G.defaultSkewType,D._transform=Ee,"rotationZ"in Be&&(Be.rotation=Be.rotationZ),zt&&typeof zt=="string"&&Bi)(we=Te.style)[Bi]=zt,we.display="block",we.position="absolute",zt.indexOf("%")!==-1&&(we.width=P(x,"width"),we.height=P(x,"height")),K.body.appendChild(Te),ce=Jr(Te,null,!1),Ee.skewType==="simple"&&(ce.scaleY*=Math.cos(ce.skewX*Tt)),Ee.svg&&(We=Ee.xOrigin,lt=Ee.yOrigin,ce.x-=Ee.xOffset,ce.y-=Ee.yOffset,(Be.transformOrigin||Be.svgOrigin)&&(zt={},Ko(x,_t(Be.transformOrigin),zt,Be.svgOrigin,Be.smoothOrigin,!0),We=zt.xOrigin,lt=zt.yOrigin,ce.x-=zt.xOffset-Ee.xOffset,ce.y-=zt.yOffset-Ee.yOffset),(We||lt)&&(Ke=is(Te,!0),ce.x-=We-(We*Ke[0]+lt*Ke[2]),ce.y-=lt-(We*Ke[1]+lt*Ke[3]))),K.body.removeChild(Te),ce.perspective||(ce.perspective=Ee.perspective),Be.xPercent!=null&&(ce.xPercent=qe(Be.xPercent,Ee.xPercent)),Be.yPercent!=null&&(ce.yPercent=qe(Be.yPercent,Ee.yPercent));else if(typeof Be=="object"){if(ce={scaleX:qe(Be.scaleX!=null?Be.scaleX:Be.scale,Ee.scaleX),scaleY:qe(Be.scaleY!=null?Be.scaleY:Be.scale,Ee.scaleY),scaleZ:qe(Be.scaleZ,Ee.scaleZ),x:qe(Be.x,Ee.x),y:qe(Be.y,Ee.y),z:qe(Be.z,Ee.z),xPercent:qe(Be.xPercent,Ee.xPercent),yPercent:qe(Be.yPercent,Ee.yPercent),perspective:qe(Be.transformPerspective,Ee.perspective)},(Je=Be.directionalRotation)!=null)if(typeof Je=="object")for(we in Je)Be[we]=Je[we];else Be.rotation=Je;typeof Be.x=="string"&&Be.x.indexOf("%")!==-1&&(ce.x=0,ce.xPercent=qe(Be.x,Ee.xPercent)),typeof Be.y=="string"&&Be.y.indexOf("%")!==-1&&(ce.y=0,ce.yPercent=qe(Be.y,Ee.yPercent)),ce.rotation=Rt("rotation"in Be?Be.rotation:"shortRotation"in Be?Be.shortRotation+"_short":Ee.rotation,Ee.rotation,"rotation",Gt),mn&&(ce.rotationX=Rt("rotationX"in Be?Be.rotationX:"shortRotationX"in Be?Be.shortRotationX+"_short":Ee.rotationX||0,Ee.rotationX,"rotationX",Gt),ce.rotationY=Rt("rotationY"in Be?Be.rotationY:"shortRotationY"in Be?Be.shortRotationY+"_short":Ee.rotationY||0,Ee.rotationY,"rotationY",Gt)),ce.skewX=Rt(Be.skewX,Ee.skewX),ce.skewY=Rt(Be.skewY,Ee.skewY)}for(mn&&Be.force3D!=null&&(Ee.force3D=Be.force3D,Xe=!0),(oe=Ee.force3D||Ee.z||Ee.rotationX||Ee.rotationY||ce.z||ce.rotationX||ce.rotationY||ce.perspective)||Be.scale==null||(ce.scaleZ=1);--xt>-1;)((zt=ce[wt=al[xt]]-Ee[wt])>Ot||-Ot>zt||Be[wt]!=null||ht[wt]!=null)&&(Xe=!0,b=new Ni(Ee,wt,Ee[wt],zt,b),wt in Gt&&(b.e=Gt[wt]),b.xs0=0,b.plugin=te,D._overwriteProps.push(b.n));return zt=typeof Be.transformOrigin=="function"?Be.transformOrigin(z,S):Be.transformOrigin,Ee.svg&&(zt||Be.svgOrigin)&&(We=Ee.xOffset,lt=Ee.yOffset,Ko(x,_t(zt),ce,Be.svgOrigin,Be.smoothOrigin),b=Ba(Ee,"xOrigin",(kt?Ee:ce).xOrigin,ce.xOrigin,b,Vt),b=Ba(Ee,"yOrigin",(kt?Ee:ce).yOrigin,ce.yOrigin,b,Vt),(We!==Ee.xOffset||lt!==Ee.yOffset)&&(b=Ba(Ee,"xOffset",kt?We:Ee.xOffset,Ee.xOffset,b,Vt),b=Ba(Ee,"yOffset",kt?lt:Ee.yOffset,Ee.yOffset,b,Vt)),zt="0px 0px"),(zt||mn&&oe&&Ee.zOrigin)&&(Bi?(Xe=!0,wt=Zr,zt||(zt=(zt=(P(x,wt,A,!1,"50% 50%")+"").split(" "))[0]+" "+zt[1]+" "+Ee.zOrigin+"px"),zt+="",(b=new Ni(ai,wt,0,0,b,-1,Vt)).b=ai[wt],b.plugin=te,mn?(we=Ee.zOrigin,zt=zt.split(" "),Ee.zOrigin=(zt.length>2?parseFloat(zt[2]):we)||0,b.xs0=b.e=zt[0]+" "+(zt[1]||"50%")+" 0px",(b=new Ni(Ee,"zOrigin",0,0,b,-1,b.n)).b=we,b.xs0=b.e=Ee.zOrigin):b.xs0=b.e=zt):_t(zt+"",Ee)),Xe&&(D._transformType=Ee.svg&&Yn||!oe&&this._transformType!==3?2:3),he&&(k.scale=he),b},allowFunc:!0,prefix:!0}),bi("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),bi("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:Fi("inset(0% 0% 0% 0%)",!1,!0)}),bi("borderRadius",{defaultValue:"0px",parser:function(x,O,N,D,b,te){O=this.format(O);var k,he,ce,we,oe,Xe,Je,We,lt,Ke,wt,kt,ai,Ot,xt,Be,Gt=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],Vt=x.style;for(lt=parseFloat(x.offsetWidth),Ke=parseFloat(x.offsetHeight),k=O.split(" "),he=0;he<Gt.length;he++)this.p.indexOf("border")&&(Gt[he]=it(Gt[he])),(oe=we=P(x,Gt[he],A,!1,"0px")).indexOf(" ")!==-1&&(we=oe.split(" "),oe=we[0],we=we[1]),Xe=ce=k[he],Je=parseFloat(oe),kt=oe.substr((Je+"").length),(ai=Xe.charAt(1)==="=")?(We=parseInt(Xe.charAt(0)+"1",10),Xe=Xe.substr(2),We*=parseFloat(Xe),wt=Xe.substr((We+"").length-(0>We?1:0))||""):(We=parseFloat(Xe),wt=Xe.substr((We+"").length)),wt===""&&(wt=R[N]||kt),wt!==kt&&(Ot=U(x,"borderLeft",Je,kt),xt=U(x,"borderTop",Je,kt),wt==="%"?(oe=Ot/lt*100+"%",we=xt/Ke*100+"%"):wt==="em"?(oe=Ot/(Be=U(x,"borderLeft",1,"em"))+"em",we=xt/Be+"em"):(oe=Ot+"px",we=xt+"px"),ai&&(Xe=parseFloat(oe)+We+wt,ce=parseFloat(we)+We+wt)),b=qr(Vt,Gt[he],oe+" "+we,Xe+" "+ce,!1,"0px",b);return b},prefix:!0,formatter:Fi("0px 0px 0px 0px",!1,!0)}),bi("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(x,O,N,D,b,te){return qr(x.style,N,this.format(P(x,N,A,!1,"0px 0px")),this.format(O),!1,"0px",b)},prefix:!0,formatter:Fi("0px 0px",!1,!0)}),bi("backgroundPosition",{defaultValue:"0 0",parser:function(x,O,N,D,b,te){var k,he,ce,we,oe,Xe,Je="background-position",We=A||v(x),lt=this.format((We?Ie?We.getPropertyValue(Je+"-x")+" "+We.getPropertyValue(Je+"-y"):We.getPropertyValue(Je):x.currentStyle.backgroundPositionX+" "+x.currentStyle.backgroundPositionY)||"0 0"),Ke=this.format(O);if(lt.indexOf("%")!==-1!=(Ke.indexOf("%")!==-1)&&Ke.split(",").length<2&&(Xe=P(x,"backgroundImage").replace(at,""))&&Xe!=="none"){for(k=lt.split(" "),he=Ke.split(" "),Ge.setAttribute("src",Xe),ce=2;--ce>-1;)(we=(lt=k[ce]).indexOf("%")!==-1)!=(he[ce].indexOf("%")!==-1)&&(oe=ce===0?x.offsetWidth-Ge.width:x.offsetHeight-Ge.height,k[ce]=we?parseFloat(lt)/100*oe+"px":parseFloat(lt)/oe*100+"%");lt=k.join(" ")}return this.parseComplex(x.style,lt,Ke,b,te)},formatter:_t}),bi("backgroundSize",{defaultValue:"0 0",formatter:function(x){return(x+="").substr(0,2)==="co"?x:_t(x.indexOf(" ")===-1?x+" "+x:x)}}),bi("perspective",{defaultValue:"0px",prefix:!0}),bi("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),bi("transformStyle",{prefix:!0}),bi("backfaceVisibility",{prefix:!0}),bi("userSelect",{prefix:!0}),bi("margin",{parser:Tn("marginTop,marginRight,marginBottom,marginLeft")}),bi("padding",{parser:Tn("paddingTop,paddingRight,paddingBottom,paddingLeft")}),bi("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(x,O,N,D,b,te){var k,he,ce;return 9>Ie?(he=x.currentStyle,ce=8>Ie?" ":",",k="rect("+he.clipTop+ce+he.clipRight+ce+he.clipBottom+ce+he.clipLeft+")",O=this.format(O).split(",").join(ce)):(k=this.format(P(x,this.p,A,!1,this.dflt)),O=this.format(O)),this.parseComplex(x.style,k,O,b,te)}}),bi("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),bi("autoRound,strictUnits",{parser:function(x,O,N,D,b){return b}}),bi("border",{defaultValue:"0px solid #000",parser:function(x,O,N,D,b,te){var k=P(x,"borderTopWidth",A,!1,"0px"),he=this.format(O).split(" "),ce=he[0].replace(w,"");return ce!=="px"&&(k=parseFloat(k)/U(x,"borderTopWidth",1,ce)+ce),this.parseComplex(x.style,this.format(k+" "+P(x,"borderTopStyle",A,!1,"solid")+" "+P(x,"borderTopColor",A,!1,"#000")),he.join(" "),b,te)},color:!0,formatter:function(x){var O=x.split(" ");return O[0]+" "+(O[1]||"solid")+" "+(x.match(ci)||["#000"])[0]}}),bi("borderWidth",{parser:Tn("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),bi("float,cssFloat,styleFloat",{parser:function(x,O,N,D,b,te){var k=x.style,he="cssFloat"in k?"cssFloat":"styleFloat";return new Ni(k,he,0,0,b,-1,N,!1,0,k[he],O)}});var Qc=function(x){var O,N=this.t,D=N.filter||P(this.data,"filter")||"",b=this.s+this.c*x|0;b===100&&(D.indexOf("atrix(")===-1&&D.indexOf("radient(")===-1&&D.indexOf("oader(")===-1?(N.removeAttribute("filter"),O=!P(this.data,"filter")):(N.filter=D.replace(ye,""),O=!0)),O||(this.xn1&&(N.filter=D=D||"alpha(opacity="+b+")"),D.indexOf("pacity")===-1?b===0&&this.xn1||(N.filter=D+" alpha(opacity="+b+")"):N.filter=D.replace(ge,"opacity="+b))};bi("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(x,O,N,D,b,te){var k=parseFloat(P(x,"opacity",A,!1,"1")),he=x.style,ce=N==="autoAlpha";return typeof O=="string"&&O.charAt(1)==="="&&(O=(O.charAt(0)==="-"?-1:1)*parseFloat(O.substr(2))+k),ce&&k===1&&P(x,"visibility",A)==="hidden"&&O!==0&&(k=0),nt?b=new Ni(he,"opacity",k,O-k,b):((b=new Ni(he,"opacity",100*k,100*(O-k),b)).xn1=ce?1:0,he.zoom=1,b.type=2,b.b="alpha(opacity="+b.s+")",b.e="alpha(opacity="+(b.s+b.c)+")",b.data=x,b.plugin=te,b.setRatio=Qc),ce&&((b=new Ni(he,"visibility",0,0,b,-1,null,!1,0,k!==0?"inherit":"hidden",O===0?"hidden":"inherit")).xs0="inherit",D._overwriteProps.push(b.n),D._overwriteProps.push(N)),b}});var Qr=function(x,O){O&&(x.removeProperty?((O.substr(0,2)==="ms"||O.substr(0,6)==="webkit")&&(O="-"+O),x.removeProperty(O.replace(Y,"-$1").toLowerCase())):x.removeAttribute(O))},ll=function(x){if(this.t._gsClassPT=this,x===1||x===0){this.t.setAttribute("class",x===0?this.b:this.e);for(var O=this.data,N=this.t.style;O;)O.v?N[O.p]=O.v:Qr(N,O.p),O=O._next;x===1&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};bi("className",{parser:function(x,O,N,D,b,te,k){var he,ce,we,oe,Xe,Je=x.getAttribute("class")||"",We=x.style.cssText;if((b=D._classNamePT=new Ni(x,N,0,0,b,2)).setRatio=ll,b.pr=-11,F=!0,b.b=Je,ce=re(x,A),we=x._gsClassPT){for(oe={},Xe=we.data;Xe;)oe[Xe.p]=1,Xe=Xe._next;we.setRatio(1)}return x._gsClassPT=b,b.e=O.charAt(1)!=="="?O:Je.replace(new RegExp("(?:\\s|^)"+O.substr(2)+"(?![\\w-])"),"")+(O.charAt(0)==="+"?" "+O.substr(2):""),x.setAttribute("class",b.e),he=Ce(x,ce,re(x),k,oe),x.setAttribute("class",Je),b.data=he.firstMPT,x.style.cssText!==We&&(x.style.cssText=We),b.xfirst=D.parse(x,he.difs,b,te)}});var cl=function(x){if((x===1||x===0)&&this.data._totalTime===this.data._totalDuration&&this.data.data!=="isFromStart"){var O,N,D,b,te,k=this.t.style,he=be.transform.parse;if(this.e==="all")k.cssText="",b=!0;else for(D=(O=this.e.split(" ").join("").split(",")).length;--D>-1;)N=O[D],be[N]&&(be[N].parse===he?b=!0:N=N==="transformOrigin"?Zr:be[N].p),Qr(k,N);b&&(Qr(k,Bi),(te=this.t._gsTransform)&&(te.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(bi("clearProps",{parser:function(x,O,N,D,b){return(b=new Ni(x,N,0,0,b,2)).setRatio=cl,b.e=O,b.pr=-10,b.data=D._tween,F=!0,b}}),Q="bezier,throwProps,physicsProps,physics2D".split(","),ki=Q.length;ki--;)Xc(Q[ki]);(Q=G.prototype)._firstPT=Q._lastParsedTransform=Q._transform=null,Q._onInitTween=function(x,O,N,D){if(!x.nodeType)return!1;this._target=S=x,this._tween=N,this._vars=O,z=D,Pe=O.autoRound,F=!1,R=O.suffixMap||G.suffixMap,A=v(x),Z=this._overwriteProps;var b,te,k,he,ce,we,oe,Xe,Je,We=x.style;if(ee&&We.zIndex===""&&((b=P(x,"zIndex",A))==="auto"||b==="")&&this._addLazySet(We,"zIndex",0),typeof O=="string"&&(he=We.cssText,b=re(x,A),We.cssText=he+";"+O,b=Ce(x,b,re(x)).difs,!nt&&pe.test(O)&&(b.opacity=parseFloat(RegExp.$1)),O=b,We.cssText=he),O.className?this._firstPT=te=be.className.parse(x,O.className,"className",this,null,null,O):this._firstPT=te=this.parse(x,O,null),this._transformType){for(Je=this._transformType===3,Bi?Fe&&(ee=!0,We.zIndex===""&&((oe=P(x,"zIndex",A))==="auto"||oe==="")&&this._addLazySet(We,"zIndex",0),se&&this._addLazySet(We,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(Je?"visible":"hidden"))):We.zoom=1,k=te;k&&k._next;)k=k._next;Xe=new Ni(x,"transform",0,0,null,2),this._linkCSSP(Xe,null,k),Xe.setRatio=Bi?Jc:Zc,Xe.data=this._transform||Jr(x,A,!0),Xe.tween=N,Xe.pr=-1,Z.pop()}if(F){for(;te;){for(we=te._next,k=he;k&&k.pr>te.pr;)k=k._next;(te._prev=k?k._prev:ce)?te._prev._next=te:he=te,(te._next=k)?k._prev=te:ce=te,te=we}this._firstPT=he}return!0},Q.parse=function(x,O,N,D){var b,te,k,he,ce,we,oe,Xe,Je,We,lt=x.style;for(b in O){if(we=O[b],te=be[b],typeof we!="function"||te&&te.allowFunc||(we=we(z,S)),te)N=te.parse(x,we,b,this,N,D,O);else{if(b.substr(0,2)==="--"){this._tween._propLookup[b]=this._addTween.call(this._tween,x.style,"setProperty",v(x).getPropertyValue(b)+"",we+"",b,!1,b);continue}ce=P(x,b,A)+"",Je=typeof we=="string",b==="color"||b==="fill"||b==="stroke"||b.indexOf("Color")!==-1||Je&&Le.test(we)?(Je||(we=((we=xi(we)).length>3?"rgba(":"rgb(")+we.join(",")+")"),N=qr(lt,b,ce,we,!0,"transparent",N,0,D)):Je&&st.test(we)?N=qr(lt,b,ce,we,!0,null,N,0,D):(oe=(k=parseFloat(ce))||k===0?ce.substr((k+"").length):"",(ce===""||ce==="auto")&&(b==="width"||b==="height"?(k=At(x,b,A),oe="px"):b==="left"||b==="top"?(k=H(x,b,A),oe="px"):(k=b!=="opacity"?0:1,oe="")),(We=Je&&we.charAt(1)==="=")?(he=parseInt(we.charAt(0)+"1",10),we=we.substr(2),he*=parseFloat(we),Xe=we.replace(w,"")):(he=parseFloat(we),Xe=Je?we.replace(w,""):""),Xe===""&&(Xe=b in R?R[b]:oe),we=he||he===0?(We?he+k:he)+Xe:O[b],oe!==Xe&&(Xe!==""||b==="lineHeight")&&(he||he===0)&&k&&(k=U(x,b,k,oe),Xe==="%"?(k/=U(x,b,100,"%")/100,O.strictUnits!==!0&&(ce=k+"%")):Xe==="em"||Xe==="rem"||Xe==="vw"||Xe==="vh"?k/=U(x,b,1,Xe):Xe!=="px"&&(he=U(x,b,he,Xe),Xe="px"),We&&(he||he===0)&&(we=he+k+Xe)),We&&(he+=k),!k&&k!==0||!he&&he!==0?lt[b]!==void 0&&(we||we+""!="NaN"&&we!=null)?(N=new Ni(lt,b,he||k||0,0,N,-1,b,!1,0,ce,we)).xs0=we!=="none"||b!=="display"&&b.indexOf("Style")===-1?we:ce:ke(O[b]):(N=new Ni(lt,b,k,he-k,N,0,b,Pe!==!1&&(Xe==="px"||b==="zIndex"),0,ce,we)).xs0=Xe)}D&&N&&!N.plugin&&(N.plugin=D)}return N},Q.setRatio=function(x){var O,N,D,b=this._firstPT,te=1e-6;if(x!==1||this._tween._time!==this._tween._duration&&this._tween._time!==0)if(x||this._tween._time!==this._tween._duration&&this._tween._time!==0||this._tween._rawPrevTime===-1e-6)for(;b;){if(O=b.c*x+b.s,b.r?O=b.r(O):te>O&&O>-te&&(O=0),b.type)if(b.type===1)if((D=b.l)===2)b.t[b.p]=b.xs0+O+b.xs1+b.xn1+b.xs2;else if(D===3)b.t[b.p]=b.xs0+O+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3;else if(D===4)b.t[b.p]=b.xs0+O+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3+b.xn3+b.xs4;else if(D===5)b.t[b.p]=b.xs0+O+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3+b.xn3+b.xs4+b.xn4+b.xs5;else{for(N=b.xs0+O+b.xs1,D=1;D<b.l;D++)N+=b["xn"+D]+b["xs"+(D+1)];b.t[b.p]=N}else b.type===-1?b.t[b.p]=b.xs0:b.setRatio&&b.setRatio(x);else b.t[b.p]=O+b.xs0;b=b._next}else for(;b;)b.type!==2?b.t[b.p]=b.b:b.setRatio(x),b=b._next;else for(;b;){if(b.type!==2)if(b.r&&b.type!==-1)if(O=b.r(b.s+b.c),b.type){if(b.type===1){for(D=b.l,N=b.xs0+O+b.xs1,D=1;D<b.l;D++)N+=b["xn"+D]+b["xs"+(D+1)];b.t[b.p]=N}}else b.t[b.p]=O+b.xs0;else b.t[b.p]=b.e;else b.setRatio(x);b=b._next}},Q._enableTransforms=function(x){this._transform=this._transform||Jr(this._target,A,!0),this._transformType=this._transform.svg&&Yn||!x&&this._transformType!==3?2:3};var Zn=function(x){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};Q._addLazySet=function(x,O,N){var D=this._firstPT=new Ni(x,O,0,0,this._firstPT,2);D.e=N,D.setRatio=Zn,D.data=this},Q._linkCSSP=function(x,O,N,D){return x&&(O&&(O._prev=x),x._next&&(x._next._prev=x._prev),x._prev?x._prev._next=x._next:this._firstPT===x&&(this._firstPT=x._next,D=!0),N?N._next=x:D||this._firstPT!==null||(this._firstPT=x),x._next=O,x._prev=N),x},Q._mod=function(x){for(var O=this._firstPT;O;)typeof x[O.p]=="function"&&(O.r=x[O.p]),O=O._next},Q._kill=function(x){var O,N,D,b=x;if(x.autoAlpha||x.alpha){for(N in b={},x)b[N]=x[N];b.opacity=1,b.autoAlpha&&(b.visibility=1)}for(x.className&&(O=this._classNamePT)&&((D=O.xfirst)&&D._prev?this._linkCSSP(D._prev,O._next,D._prev._prev):D===this._firstPT&&(this._firstPT=O._next),O._next&&this._linkCSSP(O._next,O._next._next,D._prev),this._classNamePT=null),O=this._firstPT;O;)O.plugin&&O.plugin!==N&&O.plugin._kill&&(O.plugin._kill(x),N=O.plugin),O=O._next;return u.prototype._kill.call(this,b)};var $r=function(x,O,N){var D,b,te,k;if(x.slice)for(b=x.length;--b>-1;)$r(x[b],O,N);else for(b=(D=x.childNodes).length;--b>-1;)k=(te=D[b]).type,te.style&&(O.push(re(te)),N&&N.push(te)),k!==1&&k!==9&&k!==11||!te.childNodes.length||$r(te,O,N)};return G.cascadeTo=function(x,O,N){var D,b,te,k,he=E.to(x,O,N),ce=[he],we=[],oe=[],Xe=[],Je=E._internals.reservedProps;for(x=he._targets||he.target,$r(x,we,Xe),he.render(O,!0,!0),$r(x,oe),he.render(0,!0,!0),he._enabled(!0),D=Xe.length;--D>-1;)if((b=Ce(Xe[D],we[D],oe[D])).firstMPT){for(te in b=b.difs,N)Je[te]&&(b[te]=N[te]);for(te in k={},b)k[te]=we[D][te];ce.push(E.fromTo(Xe[D],O,k,b))}return ce},u.activate([G]),G},!0),o=Pi._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(u,E,F){return this._tween=F,!0}}),p=function(u){var E=1>u?Math.pow(10,(u+"").length-2):1;return function(F){return(Math.round(F/u)*u*E|0)/E}},m=function(u,E){for(;u;)u.f||u.blob||(u.m=E||Math.round),u=u._next},(T=o.prototype)._onInitAllProps=function(){var u,E,F,R,A=this._tween,Z=A.vars.roundProps,G={},_e=A._propLookup.roundProps;if(typeof Z!="object"||Z.push)for(typeof Z=="string"&&(Z=Z.split(",")),F=Z.length;--F>-1;)G[Z[F]]=Math.round;else for(R in Z)G[R]=p(Z[R]);for(R in G)for(u=A._firstPT;u;)E=u._next,u.pg?u.t._mod(G):u.n===R&&(u.f===2&&u.t?m(u.t._firstPT,G[R]):(this._add(u.t,R,u.s,u.c,G[R]),E&&(E._prev=u._prev),u._prev?u._prev._next=E:A._firstPT===u&&(A._firstPT=E),u._next=u._prev=null,A._propLookup[R]=_e)),u=E;return!1},T._add=function(u,E,F,R,A){this._addTween(u,E,F,F+R,E,A||Math.round),this._overwriteProps.push(E)},Pi._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(u,E,F,R){var A,Z;if(typeof u.setAttribute!="function")return!1;for(A in E)typeof(Z=E[A])=="function"&&(Z=Z(R,u)),this._addTween(u,"setAttribute",u.getAttribute(A)+"",Z+"",A,!1,A),this._overwriteProps.push(A);return!0}}),Pi._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(u,E,F,R){typeof E!="object"&&(E={rotation:E}),this.finals={};var A,Z,G,_e,be,Q,Pe=E.useRadians===!0?2*Math.PI:360,ee=1e-6;for(A in E)A!=="useRadians"&&(typeof(_e=E[A])=="function"&&(_e=_e(R,u)),Z=(Q=(_e+"").split("_"))[0],G=parseFloat(typeof u[A]!="function"?u[A]:u[A.indexOf("set")||typeof u["get"+A.substr(3)]!="function"?A:"get"+A.substr(3)]()),be=(_e=this.finals[A]=typeof Z=="string"&&Z.charAt(1)==="="?G+parseInt(Z.charAt(0)+"1",10)*Number(Z.substr(2)):Number(Z)||0)-G,Q.length&&((Z=Q.join("_")).indexOf("short")!==-1&&(be%=Pe)!=be%(Pe/2)&&(be=0>be?be+Pe:be-Pe),Z.indexOf("_cw")!==-1&&0>be?be=(be+9999999999*Pe)%Pe-(be/Pe|0)*Pe:Z.indexOf("ccw")!==-1&&be>0&&(be=(be-9999999999*Pe)%Pe-(be/Pe|0)*Pe)),(be>ee||-ee>be)&&(this._addTween(u,A,G,G+be,A),this._overwriteProps.push(A)));return!0},set:function(u){var E;if(u!==1)this._super.setRatio.call(this,u);else for(E=this._firstPT;E;)E.f?E.t[E.p](this.finals[E.p]):E.t[E.p]=this.finals[E.p],E=E._next}})._autoCSS=!0,Pi._gsDefine("easing.Back",["easing.Ease"],function(u){var E,F,R,A,Z=Pi.GreenSockGlobals||Pi,G=Z.com.greensock,_e=2*Math.PI,be=Math.PI/2,Q=G._class,Pe=function(d,_){var j=Q("easing."+d,function(){},!0),M=j.prototype=new u;return M.constructor=j,M.getRatio=_,j},ee=u.register||function(){},Fe=function(d,_,j,M,X){var w=Q("easing."+d,{easeOut:new _,easeIn:new j,easeInOut:new M},!0);return ee(w,d),w},Ye=function(d,_,j){this.t=d,this.v=_,j&&(this.next=j,j.prev=this,this.c=j.v-_,this.gap=j.t-d)},se=function(d,_){var j=Q("easing."+d,function(X){this._p1=X||X===0?X:1.70158,this._p2=1.525*this._p1},!0),M=j.prototype=new u;return M.constructor=j,M.getRatio=_,M.config=function(X){return new j(X)},j},Ie=Fe("Back",se("BackOut",function(d){return(d-=1)*d*((this._p1+1)*d+this._p1)+1}),se("BackIn",function(d){return d*d*((this._p1+1)*d-this._p1)}),se("BackInOut",function(d){return(d*=2)<1?.5*d*d*((this._p2+1)*d-this._p2):.5*((d-=2)*d*((this._p2+1)*d+this._p2)+2)})),S=Q("easing.SlowMo",function(d,_,j){_=_||_===0?_:.7,d==null?d=.7:d>1&&(d=1),this._p=d!==1?_:0,this._p1=(1-d)/2,this._p2=d,this._p3=this._p1+this._p2,this._calcEnd=j===!0},!0),z=S.prototype=new u;return z.constructor=S,z.getRatio=function(d){var _=d+(.5-d)*this._p;return d<this._p1?this._calcEnd?1-(d=1-d/this._p1)*d:_-(d=1-d/this._p1)*d*d*d*_:d>this._p3?this._calcEnd?d===1?0:1-(d=(d-this._p3)/this._p1)*d:_+(d-_)*(d=(d-this._p3)/this._p1)*d*d*d:this._calcEnd?1:_},S.ease=new S(.7,.7),z.config=S.config=function(d,_,j){return new S(d,_,j)},E=Q("easing.SteppedEase",function(d,_){d=d||1,this._p1=1/d,this._p2=d+(_?0:1),this._p3=_?1:0},!0),(z=E.prototype=new u).constructor=E,z.getRatio=function(d){return 0>d?d=0:d>=1&&(d=.999999999),((this._p2*d|0)+this._p3)*this._p1},z.config=E.config=function(d,_){return new E(d,_)},F=Q("easing.ExpoScaleEase",function(d,_,j){this._p1=Math.log(_/d),this._p2=_-d,this._p3=d,this._ease=j},!0),(z=F.prototype=new u).constructor=F,z.getRatio=function(d){return this._ease&&(d=this._ease.getRatio(d)),(this._p3*Math.exp(this._p1*d)-this._p3)/this._p2},z.config=F.config=function(d,_,j){return new F(d,_,j)},R=Q("easing.RoughEase",function(d){for(var _,j,M,X,w,ge,pe=(d=d||{}).taper||"none",ye=[],Le=0,Y=0|(d.points||20),ne=Y,at=d.randomize!==!1,ve=d.clamp===!0,$e=d.template instanceof u?d.template:null,Ze=typeof d.strength=="number"?.4*d.strength:.4;--ne>-1;)_=at?Math.random():1/Y*ne,j=$e?$e.getRatio(_):_,M=pe==="none"?Ze:pe==="out"?(X=1-_)*X*Ze:pe==="in"?_*_*Ze:.5>_?(X=2*_)*X*.5*Ze:(X=2*(1-_))*X*.5*Ze,at?j+=Math.random()*M-.5*M:ne%2?j+=.5*M:j-=.5*M,ve&&(j>1?j=1:0>j&&(j=0)),ye[Le++]={x:_,y:j};for(ye.sort(function(Lt,ze){return Lt.x-ze.x}),ge=new Ye(1,1,null),ne=Y;--ne>-1;)w=ye[ne],ge=new Ye(w.x,w.y,ge);this._prev=new Ye(0,0,ge.t!==0?ge:ge.next)},!0),(z=R.prototype=new u).constructor=R,z.getRatio=function(d){var _=this._prev;if(d>_.t){for(;_.next&&d>=_.t;)_=_.next;_=_.prev}else for(;_.prev&&d<=_.t;)_=_.prev;return this._prev=_,_.v+(d-_.t)/_.gap*_.c},z.config=function(d){return new R(d)},R.ease=new R,Fe("Bounce",Pe("BounceOut",function(d){return 1/2.75>d?7.5625*d*d:2/2.75>d?7.5625*(d-=1.5/2.75)*d+.75:2.5/2.75>d?7.5625*(d-=2.25/2.75)*d+.9375:7.5625*(d-=2.625/2.75)*d+.984375}),Pe("BounceIn",function(d){return(d=1-d)<1/2.75?1-7.5625*d*d:2/2.75>d?1-(7.5625*(d-=1.5/2.75)*d+.75):2.5/2.75>d?1-(7.5625*(d-=2.25/2.75)*d+.9375):1-(7.5625*(d-=2.625/2.75)*d+.984375)}),Pe("BounceInOut",function(d){var _=.5>d;return d=1/2.75>(d=_?1-2*d:2*d-1)?7.5625*d*d:2/2.75>d?7.5625*(d-=1.5/2.75)*d+.75:2.5/2.75>d?7.5625*(d-=2.25/2.75)*d+.9375:7.5625*(d-=2.625/2.75)*d+.984375,_?.5*(1-d):.5*d+.5})),Fe("Circ",Pe("CircOut",function(d){return Math.sqrt(1-(d-=1)*d)}),Pe("CircIn",function(d){return-(Math.sqrt(1-d*d)-1)}),Pe("CircInOut",function(d){return(d*=2)<1?-.5*(Math.sqrt(1-d*d)-1):.5*(Math.sqrt(1-(d-=2)*d)+1)})),A=function(d,_,j){var M=Q("easing."+d,function(w,ge){this._p1=w>=1?w:1,this._p2=(ge||j)/(1>w?w:1),this._p3=this._p2/_e*(Math.asin(1/this._p1)||0),this._p2=_e/this._p2},!0),X=M.prototype=new u;return X.constructor=M,X.getRatio=_,X.config=function(w,ge){return new M(w,ge)},M},Fe("Elastic",A("ElasticOut",function(d){return this._p1*Math.pow(2,-10*d)*Math.sin((d-this._p3)*this._p2)+1},.3),A("ElasticIn",function(d){return-this._p1*Math.pow(2,10*(d-=1))*Math.sin((d-this._p3)*this._p2)},.3),A("ElasticInOut",function(d){return(d*=2)<1?this._p1*Math.pow(2,10*(d-=1))*Math.sin((d-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(d-=1))*Math.sin((d-this._p3)*this._p2)*.5+1},.45)),Fe("Expo",Pe("ExpoOut",function(d){return 1-Math.pow(2,-10*d)}),Pe("ExpoIn",function(d){return Math.pow(2,10*(d-1))-.001}),Pe("ExpoInOut",function(d){return(d*=2)<1?.5*Math.pow(2,10*(d-1)):.5*(2-Math.pow(2,-10*(d-1)))})),Fe("Sine",Pe("SineOut",function(d){return Math.sin(d*be)}),Pe("SineIn",function(d){return 1-Math.cos(d*be)}),Pe("SineInOut",function(d){return-.5*(Math.cos(Math.PI*d)-1)})),Q("easing.EaseLookup",{find:function(d){return u.map[d]}},!0),ee(Z.SlowMo,"SlowMo","ease,"),ee(R,"RoughEase","ease,"),ee(E,"SteppedEase","ease,"),Ie},!0)}),Pi._gsDefine&&Pi._gsQueue.pop()(),function(o,p){var m={},T=o.document,u=o.GreenSockGlobals=o.GreenSockGlobals||o,E=u[p];if(E)return typeof Sn<"u"&&Sn.exports&&(Sn.exports=E),E;var F,R,A,Z,G,_e=function(v){var P,U=v.split("."),H=u;for(P=0;P<U.length;P++)H[U[P]]=H=H[U[P]]||{};return H},be=_e("com.greensock"),Q=1e-8,Pe=function(v){var P,U=[],H=v.length;for(P=0;P!==H;U.push(v[P++]));return U},ee=function(){},Fe=function(){var v=Object.prototype.toString,P=v.call([]);return function(U){return U!=null&&(U instanceof Array||typeof U=="object"&&!!U.push&&v.call(U)===P)}}(),Ye={},se=function(v,P,U,H){this.sc=Ye[v]?Ye[v].sc:[],Ye[v]=this,this.gsClass=null,this.func=U;var re=[];this.check=function(Ce){for(var Re,$,At,_t,et=P.length,qe=et;--et>-1;)(Re=Ye[P[et]]||new se(P[et],[])).gsClass?(re[et]=Re.gsClass,qe--):Ce&&Re.sc.push(this);if(qe===0&&U){if(At=($=("com.greensock."+v).split(".")).pop(),_t=_e($.join("."))[At]=this.gsClass=U.apply(U,re),H)if(u[At]=m[At]=_t,typeof Sn<"u"&&Sn.exports)if(v===p)for(et in Sn.exports=m[p]=_t,m)_t[et]=m[et];else m[p]&&(m[p][At]=_t);else typeof define=="function"&&define.amd&&define((o.GreenSockAMDPath?o.GreenSockAMDPath+"/":"")+v.split(".").pop(),[],function(){return _t});for(et=0;et<this.sc.length;et++)this.sc[et].check()}},this.check(!0)},Ie=o._gsDefine=function(v,P,U,H){return new se(v,P,U,H)},S=be._class=function(v,P,U){return P=P||function(){},Ie(v,[],function(){return P},U),P};Ie.globals=u;var z=[0,0,1,1],d=S("easing.Ease",function(v,P,U,H){this._func=v,this._type=U||0,this._power=H||0,this._params=P?z.concat(P):z},!0),_=d.map={},j=d.register=function(v,P,U,H){for(var re,Ce,Re,$,At=P.split(","),_t=At.length,et=(U||"easeIn,easeOut,easeInOut").split(",");--_t>-1;)for(Ce=At[_t],re=H?S("easing."+Ce,null,!0):be.easing[Ce]||{},Re=et.length;--Re>-1;)$=et[Re],_[Ce+"."+$]=_[$+Ce]=re[$]=v.getRatio?v:v[$]||new v};for((A=d.prototype)._calcEnd=!1,A.getRatio=function(v){if(this._func)return this._params[0]=v,this._func.apply(null,this._params);var P=this._type,U=this._power,H=P===1?1-v:P===2?v:.5>v?2*v:2*(1-v);return U===1?H*=H:U===2?H*=H*H:U===3?H*=H*H*H:U===4&&(H*=H*H*H*H),P===1?1-H:P===2?H:.5>v?H/2:1-H/2},R=(F=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--R>-1;)A=F[R]+",Power"+R,j(new d(null,null,1,R),A,"easeOut",!0),j(new d(null,null,2,R),A,"easeIn"+(R===0?",easeNone":"")),j(new d(null,null,3,R),A,"easeInOut");_.linear=be.easing.Linear.easeIn,_.swing=be.easing.Quad.easeInOut;var M=S("events.EventDispatcher",function(v){this._listeners={},this._eventTarget=v||this});(A=M.prototype).addEventListener=function(v,P,U,H,re){re=re||0;var Ce,Re,$=this._listeners[v],At=0;for(this!==Z||G||Z.wake(),$==null&&(this._listeners[v]=$=[]),Re=$.length;--Re>-1;)(Ce=$[Re]).c===P&&Ce.s===U?$.splice(Re,1):At===0&&Ce.pr<re&&(At=Re+1);$.splice(At,0,{c:P,s:U,up:H,pr:re})},A.removeEventListener=function(v,P){var U,H=this._listeners[v];if(H){for(U=H.length;--U>-1;)if(H[U].c===P)return void H.splice(U,1)}},A.dispatchEvent=function(v){var P,U,H,re=this._listeners[v];if(re)for((P=re.length)>1&&(re=re.slice(0)),U=this._eventTarget;--P>-1;)(H=re[P])&&(H.up?H.c.call(H.s||U,{type:v,target:U}):H.c.call(H.s||U))};var X=o.requestAnimationFrame,w=o.cancelAnimationFrame,ge=Date.now||function(){return new Date().getTime()},pe=ge();for(R=(F=["ms","moz","webkit","o"]).length;--R>-1&&!X;)X=o[F[R]+"RequestAnimationFrame"],w=o[F[R]+"CancelAnimationFrame"]||o[F[R]+"CancelRequestAnimationFrame"];S("Ticker",function(v,P){var U,H,re,Ce,Re,$=this,At=ge(),_t=!(P===!1||!X)&&"auto",et=500,qe=33,Rt=function(ut){var ni,xi,Oi=ge()-pe;Oi>et&&(At+=Oi-qe),pe+=Oi,$.time=(pe-At)/1e3,ni=$.time-Re,(!U||ni>0||ut===!0)&&($.frame++,Re+=ni+(ni>=Ce?.004:Ce-ni),xi=!0),ut!==!0&&(re=H(Rt)),xi&&$.dispatchEvent("tick")};M.call($),$.time=$.frame=0,$.tick=function(){Rt(!0)},$.lagSmoothing=function(ut,ni){return arguments.length?(et=ut||1/Q,void(qe=Math.min(ni,et,0))):1/Q>et},$.sleep=function(){re!=null&&(_t&&w?w(re):clearTimeout(re),H=ee,re=null,$===Z&&(G=!1))},$.wake=function(ut){re!==null?$.sleep():ut?At+=-pe+(pe=ge()):$.frame>10&&(pe=ge()-et+5),H=U===0?ee:_t&&X?X:function(ni){return setTimeout(ni,1e3*(Re-$.time)+1|0)},$===Z&&(G=!0),Rt(2)},$.fps=function(ut){return arguments.length?(Ce=1/((U=ut)||60),Re=this.time+Ce,void $.wake()):U},$.useRAF=function(ut){return arguments.length?($.sleep(),_t=ut,void $.fps(U)):_t},$.fps(v),setTimeout(function(){_t==="auto"&&$.frame<5&&(T||{}).visibilityState!=="hidden"&&$.useRAF(!1)},1500)}),(A=be.Ticker.prototype=new be.events.EventDispatcher).constructor=be.Ticker;var ye=S("core.Animation",function(v,P){if(this.vars=P=P||{},this._duration=this._totalDuration=v||0,this._delay=Number(P.delay)||0,this._timeScale=1,this._active=!!P.immediateRender,this.data=P.data,this._reversed=!!P.reversed,Se){G||Z.wake();var U=this.vars.useFrames?Oe:Se;U.add(this,U._time),this.vars.paused&&this.paused(!0)}});Z=ye.ticker=new be.Ticker,(A=ye.prototype)._dirty=A._gc=A._initted=A._paused=!1,A._totalTime=A._time=0,A._rawPrevTime=-1,A._next=A._last=A._onUpdate=A._timeline=A.timeline=null,A._paused=!1;var Le=function(){G&&ge()-pe>2e3&&((T||{}).visibilityState!=="hidden"||!Z.lagSmoothing())&&Z.wake();var v=setTimeout(Le,2e3);v.unref&&v.unref()};Le(),A.play=function(v,P){return v!=null&&this.seek(v,P),this.reversed(!1).paused(!1)},A.pause=function(v,P){return v!=null&&this.seek(v,P),this.paused(!0)},A.resume=function(v,P){return v!=null&&this.seek(v,P),this.paused(!1)},A.seek=function(v,P){return this.totalTime(Number(v),P!==!1)},A.restart=function(v,P){return this.reversed(!1).paused(!1).totalTime(v?-this._delay:0,P!==!1,!0)},A.reverse=function(v,P){return v!=null&&this.seek(v||this.totalDuration(),P),this.reversed(!0).paused(!1)},A.render=function(v,P,U){},A.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},A.isActive=function(){var v,P=this._timeline,U=this._startTime;return!P||!this._gc&&!this._paused&&P.isActive()&&(v=P.rawTime(!0))>=U&&v<U+this.totalDuration()/this._timeScale-Q},A._enabled=function(v,P){return G||Z.wake(),this._gc=!v,this._active=this.isActive(),P!==!0&&(v&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!v&&this.timeline&&this._timeline._remove(this,!0)),!1},A._kill=function(v,P){return this._enabled(!1,!1)},A.kill=function(v,P){return this._kill(v,P),this},A._uncache=function(v){for(var P=v?this:this.timeline;P;)P._dirty=!0,P=P.timeline;return this},A._swapSelfInParams=function(v){for(var P=v.length,U=v.concat();--P>-1;)v[P]==="{self}"&&(U[P]=this);return U},A._callback=function(v){var P=this.vars,U=P[v],H=P[v+"Params"],re=P[v+"Scope"]||P.callbackScope||this;switch(H?H.length:0){case 0:U.call(re);break;case 1:U.call(re,H[0]);break;case 2:U.call(re,H[0],H[1]);break;default:U.apply(re,H)}},A.eventCallback=function(v,P,U,H){if((v||"").substr(0,2)==="on"){var re=this.vars;if(arguments.length===1)return re[v];P==null?delete re[v]:(re[v]=P,re[v+"Params"]=Fe(U)&&U.join("").indexOf("{self}")!==-1?this._swapSelfInParams(U):U,re[v+"Scope"]=H),v==="onUpdate"&&(this._onUpdate=P)}return this},A.delay=function(v){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+v-this._delay),this._delay=v,this):this._delay},A.duration=function(v){return arguments.length?(this._duration=this._totalDuration=v,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&v!==0&&this.totalTime(this._totalTime*(v/this._duration),!0),this):(this._dirty=!1,this._duration)},A.totalDuration=function(v){return this._dirty=!1,arguments.length?this.duration(v):this._totalDuration},A.time=function(v,P){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(v>this._duration?this._duration:v,P)):this._time},A.totalTime=function(v,P,U){if(G||Z.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>v&&!U&&(v+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var H=this._totalDuration,re=this._timeline;if(v>H&&!U&&(v=H),this._startTime=(this._paused?this._pauseTime:re._time)-(this._reversed?H-v:v)/this._timeScale,re._dirty||this._uncache(!1),re._timeline)for(;re._timeline;)re._timeline._time!==(re._startTime+re._totalTime)/re._timeScale&&re.totalTime(re._totalTime,!0),re=re._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==v||this._duration===0)&&(ve.length&&He(),this.render(v,P,!1),ve.length&&He())}return this},A.progress=A.totalProgress=function(v,P){var U=this.duration();return arguments.length?this.totalTime(U*v,P):U?this._time/U:this.ratio},A.startTime=function(v){return arguments.length?(v!==this._startTime&&(this._startTime=v,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,v-this._delay)),this):this._startTime},A.endTime=function(v){return this._startTime+(v!=0?this.totalDuration():this.duration())/this._timeScale},A.timeScale=function(v){if(!arguments.length)return this._timeScale;var P,U;for(v=v||Q,this._timeline&&this._timeline.smoothChildTiming&&(U=(P=this._pauseTime)||P===0?P:this._timeline.totalTime(),this._startTime=U-(U-this._startTime)*this._timeScale/v),this._timeScale=v,U=this.timeline;U&&U.timeline;)U._dirty=!0,U.totalDuration(),U=U.timeline;return this},A.reversed=function(v){return arguments.length?(v!=this._reversed&&(this._reversed=v,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},A.paused=function(v){if(!arguments.length)return this._paused;var P,U,H=this._timeline;return v!=this._paused&&H&&(G||v||Z.wake(),U=(P=H.rawTime())-this._pauseTime,!v&&H.smoothChildTiming&&(this._startTime+=U,this._uncache(!1)),this._pauseTime=v?P:null,this._paused=v,this._active=this.isActive(),!v&&U!==0&&this._initted&&this.duration()&&(P=H.smoothChildTiming?this._totalTime:(P-this._startTime)/this._timeScale,this.render(P,P===this._totalTime,!0))),this._gc&&!v&&this._enabled(!0,!1),this};var Y=S("core.SimpleTimeline",function(v){ye.call(this,0,v),this.autoRemoveChildren=this.smoothChildTiming=!0});(A=Y.prototype=new ye).constructor=Y,A.kill()._gc=!1,A._first=A._last=A._recent=null,A._sortChildren=!1,A.add=A.insert=function(v,P,U,H){var re,Ce;if(v._startTime=Number(P||0)+v._delay,v._paused&&this!==v._timeline&&(v._pauseTime=this.rawTime()-(v._timeline.rawTime()-v._pauseTime)),v.timeline&&v.timeline._remove(v,!0),v.timeline=v._timeline=this,v._gc&&v._enabled(!0,!0),re=this._last,this._sortChildren)for(Ce=v._startTime;re&&re._startTime>Ce;)re=re._prev;return re?(v._next=re._next,re._next=v):(v._next=this._first,this._first=v),v._next?v._next._prev=v:this._last=v,v._prev=re,this._recent=v,this._timeline&&this._uncache(!0),this},A._remove=function(v,P){return v.timeline===this&&(P||v._enabled(!1,!0),v._prev?v._prev._next=v._next:this._first===v&&(this._first=v._next),v._next?v._next._prev=v._prev:this._last===v&&(this._last=v._prev),v._next=v._prev=v.timeline=null,v===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},A.render=function(v,P,U){var H,re=this._first;for(this._totalTime=this._time=this._rawPrevTime=v;re;)H=re._next,(re._active||v>=re._startTime&&!re._paused&&!re._gc)&&(re._reversed?re.render((re._dirty?re.totalDuration():re._totalDuration)-(v-re._startTime)*re._timeScale,P,U):re.render((v-re._startTime)*re._timeScale,P,U)),re=H},A.rawTime=function(){return G||Z.wake(),this._totalTime};var ne=S("TweenLite",function(v,P,U){if(ye.call(this,P,U),this.render=ne.prototype.render,v==null)throw"Cannot tween a null target.";this.target=v=typeof v!="string"?v:ne.selector(v)||v;var H,re,Ce,Re=v.jquery||v.length&&v!==o&&v[0]&&(v[0]===o||v[0].nodeType&&v[0].style&&!v.nodeType),$=this.vars.overwrite;if(this._overwrite=$=$==null?Ge[ne.defaultOverwrite]:typeof $=="number"?$>>0:Ge[$],(Re||v instanceof Array||v.push&&Fe(v))&&typeof v[0]!="number")for(this._targets=Ce=Pe(v),this._propLookup=[],this._siblings=[],H=0;H<Ce.length;H++)(re=Ce[H])?typeof re!="string"?re.length&&re!==o&&re[0]&&(re[0]===o||re[0].nodeType&&re[0].style&&!re.nodeType)?(Ce.splice(H--,1),this._targets=Ce=Ce.concat(Pe(re))):(this._siblings[H]=ke(re,this,!1),$===1&&this._siblings[H].length>1&&rt(re,this,null,1,this._siblings[H])):typeof(re=Ce[H--]=ne.selector(re))=="string"&&Ce.splice(H+1,1):Ce.splice(H--,1);else this._propLookup={},this._siblings=ke(v,this,!1),$===1&&this._siblings.length>1&&rt(v,this,null,1,this._siblings);(this.vars.immediateRender||P===0&&this._delay===0&&this.vars.immediateRender!==!1)&&(this._time=-Q,this.render(Math.min(0,-this._delay)))},!0),at=function(v){return v&&v.length&&v!==o&&v[0]&&(v[0]===o||v[0].nodeType&&v[0].style&&!v.nodeType)};(A=ne.prototype=new ye).constructor=ne,A.kill()._gc=!1,A.ratio=0,A._firstPT=A._targets=A._overwrittenProps=A._startAt=null,A._notifyPluginsOfEnabled=A._lazy=!1,ne.version="2.1.3",ne.defaultEase=A._ease=new d(null,null,1,1),ne.defaultOverwrite="auto",ne.ticker=Z,ne.autoSleep=120,ne.lagSmoothing=function(v,P){Z.lagSmoothing(v,P)},ne.selector=o.$||o.jQuery||function(v){var P=o.$||o.jQuery;return P?(ne.selector=P,P(v)):(T||(T=o.document),T?T.querySelectorAll?T.querySelectorAll(v):T.getElementById(v.charAt(0)==="#"?v.substr(1):v):v)};var ve=[],$e={},Ze=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,Lt=/[\+-]=-?[\.\d]/,ze=function(v){for(var P,U=this._firstPT,H=1e-6;U;)P=U.blob?v===1&&this.end!=null?this.end:v?this.join(""):this.start:U.c*v+U.s,U.m?P=U.m.call(this._tween,P,this._target||U.t,this._tween):H>P&&P>-H&&!U.blob&&(P=0),U.f?U.fp?U.t[U.p](U.fp,P):U.t[U.p](P):U.t[U.p]=P,U=U._next},st=function(v){return(1e3*v|0)/1e3+""},Tt=function(v,P,U,H){var re,Ce,Re,$,At,_t,et,qe=[],Rt=0,ut="",ni=0;for(qe.start=v,qe.end=P,v=qe[0]=v+"",P=qe[1]=P+"",U&&(U(qe),v=qe[0],P=qe[1]),qe.length=0,re=v.match(Ze)||[],Ce=P.match(Ze)||[],H&&(H._next=null,H.blob=1,qe._firstPT=qe._applyPT=H),At=Ce.length,$=0;At>$;$++)et=Ce[$],ut+=(_t=P.substr(Rt,P.indexOf(et,Rt)-Rt))||!$?_t:",",Rt+=_t.length,ni?ni=(ni+1)%5:_t.substr(-5)==="rgba("&&(ni=1),et===re[$]||re.length<=$?ut+=et:(ut&&(qe.push(ut),ut=""),Re=parseFloat(re[$]),qe.push(Re),qe._firstPT={_next:qe._firstPT,t:qe,p:qe.length-1,s:Re,c:(et.charAt(1)==="="?parseInt(et.charAt(0)+"1",10)*parseFloat(et.substr(2)):parseFloat(et)-Re)||0,f:0,m:ni&&4>ni?Math.round:st}),Rt+=et.length;return(ut+=P.substr(Rt))&&qe.push(ut),qe.setRatio=ze,Lt.test(P)&&(qe.end=null),qe},It=function(v,P,U,H,re,Ce,Re,$,At){typeof H=="function"&&(H=H(At||0,v));var _t=typeof v[P],et=_t!=="function"?"":P.indexOf("set")||typeof v["get"+P.substr(3)]!="function"?P:"get"+P.substr(3),qe=U!=="get"?U:et?Re?v[et](Re):v[et]():v[P],Rt=typeof H=="string"&&H.charAt(1)==="=",ut={t:v,p:P,s:qe,f:_t==="function",pg:0,n:re||P,m:Ce?typeof Ce=="function"?Ce:Math.round:0,pr:0,c:Rt?parseInt(H.charAt(0)+"1",10)*parseFloat(H.substr(2)):parseFloat(H)-qe||0};return(typeof qe!="number"||typeof H!="number"&&!Rt)&&(Re||isNaN(qe)||!Rt&&isNaN(H)||typeof qe=="boolean"||typeof H=="boolean"?(ut.fp=Re,ut={t:Tt(qe,Rt?parseFloat(ut.s)+ut.c+(ut.s+"").replace(/[0-9\-\.]/g,""):H,$||ne.defaultStringFilter,ut),p:"setRatio",s:0,c:1,f:2,pg:0,n:re||P,pr:0,m:0}):(ut.s=parseFloat(qe),Rt||(ut.c=parseFloat(H)-ut.s||0))),ut.c?((ut._next=this._firstPT)&&(ut._next._prev=ut),this._firstPT=ut,ut):void 0},ht=ne._internals={isArray:Fe,isSelector:at,lazyTweens:ve,blobDif:Tt},li=ne._plugins={},K=ht.tweenLookup={},ue=0,Te=ht.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},Ge={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Oe=ye._rootFramesTimeline=new Y,Se=ye._rootTimeline=new Y,nt=30,He=ht.lazyRender=function(){var v,P,U=ve.length;for($e={},v=0;U>v;v++)(P=ve[v])&&P._lazy!==!1&&(P.render(P._lazy[0],P._lazy[1],!0),P._lazy=!1);ve.length=0};Se._startTime=Z.time,Oe._startTime=Z.frame,Se._active=Oe._active=!0,setTimeout(He,1),ye._updateRoot=ne.render=function(){var v,P,U;if(ve.length&&He(),Se.render((Z.time-Se._startTime)*Se._timeScale,!1,!1),Oe.render((Z.frame-Oe._startTime)*Oe._timeScale,!1,!1),ve.length&&He(),Z.frame>=nt){for(U in nt=Z.frame+(parseInt(ne.autoSleep,10)||120),K){for(v=(P=K[U].tweens).length;--v>-1;)P[v]._gc&&P.splice(v,1);P.length===0&&delete K[U]}if((!(U=Se._first)||U._paused)&&ne.autoSleep&&!Oe._first&&Z._listeners.tick.length===1){for(;U&&U._paused;)U=U._next;U||Z.sleep()}}},Z.addEventListener("tick",ye._updateRoot);var ke=function(v,P,U){var H,re,Ce=v._gsTweenID;if(K[Ce||(v._gsTweenID=Ce="t"+ue++)]||(K[Ce]={target:v,tweens:[]}),P&&((H=K[Ce].tweens)[re=H.length]=P,U))for(;--re>-1;)H[re]===P&&H.splice(re,1);return K[Ce].tweens},Ae=function(v,P,U,H){var re,Ce,Re=v.vars.onOverwrite;return Re&&(re=Re(v,P,U,H)),(Re=ne.onOverwrite)&&(Ce=Re(v,P,U,H)),re!==!1&&Ce!==!1},rt=function(v,P,U,H,re){var Ce,Re,$,At;if(H===1||H>=4){for(At=re.length,Ce=0;At>Ce;Ce++)if(($=re[Ce])!==P)$._gc||$._kill(null,v,P)&&(Re=!0);else if(H===5)break;return Re}var _t,et=P._startTime+Q,qe=[],Rt=0,ut=P._duration===0;for(Ce=re.length;--Ce>-1;)($=re[Ce])===P||$._gc||$._paused||($._timeline!==P._timeline?(_t=_t||it(P,0,ut),it($,_t,ut)===0&&(qe[Rt++]=$)):$._startTime<=et&&$._startTime+$.totalDuration()/$._timeScale>et&&((ut||!$._initted)&&et-$._startTime<=2*Q||(qe[Rt++]=$)));for(Ce=Rt;--Ce>-1;)if(At=($=qe[Ce])._firstPT,H===2&&$._kill(U,v,P)&&(Re=!0),H!==2||!$._firstPT&&$._initted&&At){if(H!==2&&!Ae($,P))continue;$._enabled(!1,!1)&&(Re=!0)}return Re},it=function(v,P,U){for(var H=v._timeline,re=H._timeScale,Ce=v._startTime;H._timeline;){if(Ce+=H._startTime,re*=H._timeScale,H._paused)return-100;H=H._timeline}return(Ce/=re)>P?Ce-P:U&&Ce===P||!v._initted&&2*Q>Ce-P?Q:(Ce+=v.totalDuration()/v._timeScale/re)>P+Q?0:Ce-P-Q};A._init=function(){var v,P,U,H,re,Ce,Re=this.vars,$=this._overwrittenProps,At=this._duration,_t=!!Re.immediateRender,et=Re.ease,qe=this._startAt;if(Re.startAt){for(H in qe&&(qe.render(-1,!0),qe.kill()),re={},Re.startAt)re[H]=Re.startAt[H];if(re.data="isStart",re.overwrite=!1,re.immediateRender=!0,re.lazy=_t&&Re.lazy!==!1,re.startAt=re.delay=null,re.onUpdate=Re.onUpdate,re.onUpdateParams=Re.onUpdateParams,re.onUpdateScope=Re.onUpdateScope||Re.callbackScope||this,this._startAt=ne.to(this.target||{},0,re),_t){if(this._time>0)this._startAt=null;else if(At!==0)return}}else if(Re.runBackwards&&At!==0)if(qe)qe.render(-1,!0),qe.kill(),this._startAt=null;else{for(H in this._time!==0&&(_t=!1),U={},Re)Te[H]&&H!=="autoCSS"||(U[H]=Re[H]);if(U.overwrite=0,U.data="isFromStart",U.lazy=_t&&Re.lazy!==!1,U.immediateRender=_t,this._startAt=ne.to(this.target,0,U),_t){if(this._time===0)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=et=et?et instanceof d?et:typeof et=="function"?new d(et,Re.easeParams):_[et]||ne.defaultEase:ne.defaultEase,Re.easeParams instanceof Array&&et.config&&(this._ease=et.config.apply(et,Re.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(Ce=this._targets.length,v=0;Ce>v;v++)this._initProps(this._targets[v],this._propLookup[v]={},this._siblings[v],$?$[v]:null,v)&&(P=!0);else P=this._initProps(this.target,this._propLookup,this._siblings,$,0);if(P&&ne._onPluginEvent("_onInitAllProps",this),$&&(this._firstPT||typeof this.target!="function"&&this._enabled(!1,!1)),Re.runBackwards)for(U=this._firstPT;U;)U.s+=U.c,U.c=-U.c,U=U._next;this._onUpdate=Re.onUpdate,this._initted=!0},A._initProps=function(v,P,U,H,re){var Ce,Re,$,At,_t,et;if(v==null)return!1;for(Ce in $e[v._gsTweenID]&&He(),this.vars.css||v.style&&v!==o&&v.nodeType&&li.css&&this.vars.autoCSS!==!1&&function(qe,Rt){var ut,ni={};for(ut in qe)Te[ut]||ut in Rt&&ut!=="transform"&&ut!=="x"&&ut!=="y"&&ut!=="width"&&ut!=="height"&&ut!=="className"&&ut!=="border"||!(!li[ut]||li[ut]&&li[ut]._autoCSS)||(ni[ut]=qe[ut],delete qe[ut]);qe.css=ni}(this.vars,v),this.vars)if(et=this.vars[Ce],Te[Ce])et&&(et instanceof Array||et.push&&Fe(et))&&et.join("").indexOf("{self}")!==-1&&(this.vars[Ce]=et=this._swapSelfInParams(et,this));else if(li[Ce]&&(At=new li[Ce])._onInitTween(v,this.vars[Ce],this,re)){for(this._firstPT=_t={_next:this._firstPT,t:At,p:"setRatio",s:0,c:1,f:1,n:Ce,pg:1,pr:At._priority,m:0},Re=At._overwriteProps.length;--Re>-1;)P[At._overwriteProps[Re]]=this._firstPT;(At._priority||At._onInitAllProps)&&($=!0),(At._onDisable||At._onEnable)&&(this._notifyPluginsOfEnabled=!0),_t._next&&(_t._next._prev=_t)}else P[Ce]=It.call(this,v,Ce,"get",et,Ce,0,null,this.vars.stringFilter,re);return H&&this._kill(H,v)?this._initProps(v,P,U,H,re):this._overwrite>1&&this._firstPT&&U.length>1&&rt(v,this,P,this._overwrite,U)?(this._kill(P,v),this._initProps(v,P,U,H,re)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&($e[v._gsTweenID]=!0),$)},A.render=function(v,P,U){var H,re,Ce,Re,$=this,At=$._time,_t=$._duration,et=$._rawPrevTime;if(v>=_t-Q&&v>=0)$._totalTime=$._time=_t,$.ratio=$._ease._calcEnd?$._ease.getRatio(1):1,$._reversed||(H=!0,re="onComplete",U=U||$._timeline.autoRemoveChildren),_t===0&&($._initted||!$.vars.lazy||U)&&($._startTime===$._timeline._duration&&(v=0),(0>et||0>=v&&v>=-Q||et===Q&&$.data!=="isPause")&&et!==v&&(U=!0,et>Q&&(re="onReverseComplete")),$._rawPrevTime=Re=!P||v||et===v?v:Q);else if(Q>v)$._totalTime=$._time=0,$.ratio=$._ease._calcEnd?$._ease.getRatio(0):0,(At!==0||_t===0&&et>0)&&(re="onReverseComplete",H=$._reversed),v>-Q?v=0:0>v&&($._active=!1,_t===0&&($._initted||!$.vars.lazy||U)&&(et>=0&&(et!==Q||$.data!=="isPause")&&(U=!0),$._rawPrevTime=Re=!P||v||et===v?v:Q)),(!$._initted||$._startAt&&$._startAt.progress())&&(U=!0);else if($._totalTime=$._time=v,$._easeType){var qe=v/_t,Rt=$._easeType,ut=$._easePower;(Rt===1||Rt===3&&qe>=.5)&&(qe=1-qe),Rt===3&&(qe*=2),ut===1?qe*=qe:ut===2?qe*=qe*qe:ut===3?qe*=qe*qe*qe:ut===4&&(qe*=qe*qe*qe*qe),$.ratio=Rt===1?1-qe:Rt===2?qe:.5>v/_t?qe/2:1-qe/2}else $.ratio=$._ease.getRatio(v/_t);if($._time!==At||U){if(!$._initted){if($._init(),!$._initted||$._gc)return;if(!U&&$._firstPT&&($.vars.lazy!==!1&&$._duration||$.vars.lazy&&!$._duration))return $._time=$._totalTime=At,$._rawPrevTime=et,ve.push($),void($._lazy=[v,P]);$._time&&!H?$.ratio=$._ease.getRatio($._time/_t):H&&$._ease._calcEnd&&($.ratio=$._ease.getRatio($._time===0?0:1))}for($._lazy!==!1&&($._lazy=!1),$._active||!$._paused&&$._time!==At&&v>=0&&($._active=!0),At===0&&($._startAt&&(v>=0?$._startAt.render(v,!0,U):re||(re="_dummyGS")),$.vars.onStart&&($._time!==0||_t===0)&&(P||$._callback("onStart"))),Ce=$._firstPT;Ce;)Ce.f?Ce.t[Ce.p](Ce.c*$.ratio+Ce.s):Ce.t[Ce.p]=Ce.c*$.ratio+Ce.s,Ce=Ce._next;$._onUpdate&&(0>v&&$._startAt&&v!==-1e-4&&$._startAt.render(v,!0,U),P||($._time!==At||H||U)&&$._callback("onUpdate")),re&&(!$._gc||U)&&(0>v&&$._startAt&&!$._onUpdate&&v!==-1e-4&&$._startAt.render(v,!0,U),H&&($._timeline.autoRemoveChildren&&$._enabled(!1,!1),$._active=!1),!P&&$.vars[re]&&$._callback(re),_t===0&&$._rawPrevTime===Q&&Re!==Q&&($._rawPrevTime=0))}},A._kill=function(v,P,U){if(v==="all"&&(v=null),v==null&&(P==null||P===this.target))return this._lazy=!1,this._enabled(!1,!1);P=typeof P!="string"?P||this._targets||this.target:ne.selector(P)||P;var H,re,Ce,Re,$,At,_t,et,qe,Rt=U&&this._time&&U._startTime===this._startTime&&this._timeline===U._timeline,ut=this._firstPT;if((Fe(P)||at(P))&&typeof P[0]!="number")for(H=P.length;--H>-1;)this._kill(v,P[H],U)&&(At=!0);else{if(this._targets){for(H=this._targets.length;--H>-1;)if(P===this._targets[H]){$=this._propLookup[H]||{},this._overwrittenProps=this._overwrittenProps||[],re=this._overwrittenProps[H]=v?this._overwrittenProps[H]||{}:"all";break}}else{if(P!==this.target)return!1;$=this._propLookup,re=this._overwrittenProps=v?this._overwrittenProps||{}:"all"}if($){if(_t=v||$,et=v!==re&&re!=="all"&&v!==$&&(typeof v!="object"||!v._tempKill),U&&(ne.onOverwrite||this.vars.onOverwrite)){for(Ce in _t)$[Ce]&&(qe||(qe=[]),qe.push(Ce));if((qe||!v)&&!Ae(this,U,P,qe))return!1}for(Ce in _t)(Re=$[Ce])&&(Rt&&(Re.f?Re.t[Re.p](Re.s):Re.t[Re.p]=Re.s,At=!0),Re.pg&&Re.t._kill(_t)&&(At=!0),Re.pg&&Re.t._overwriteProps.length!==0||(Re._prev?Re._prev._next=Re._next:Re===this._firstPT&&(this._firstPT=Re._next),Re._next&&(Re._next._prev=Re._prev),Re._next=Re._prev=null),delete $[Ce]),et&&(re[Ce]=1);!this._firstPT&&this._initted&&ut&&this._enabled(!1,!1)}}return At},A.invalidate=function(){this._notifyPluginsOfEnabled&&ne._onPluginEvent("_onDisable",this);var v=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],ye.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-Q,this.render(v,!1,this.vars.lazy!==!1)),this},A._enabled=function(v,P){if(G||Z.wake(),v&&this._gc){var U,H=this._targets;if(H)for(U=H.length;--U>-1;)this._siblings[U]=ke(H[U],this,!0);else this._siblings=ke(this.target,this,!0)}return ye.prototype._enabled.call(this,v,P),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&ne._onPluginEvent(v?"_onEnable":"_onDisable",this)},ne.to=function(v,P,U){return new ne(v,P,U)},ne.from=function(v,P,U){return U.runBackwards=!0,U.immediateRender=U.immediateRender!=0,new ne(v,P,U)},ne.fromTo=function(v,P,U,H){return H.startAt=U,H.immediateRender=H.immediateRender!=0&&U.immediateRender!=0,new ne(v,P,H)},ne.delayedCall=function(v,P,U,H,re){return new ne(P,0,{delay:v,onComplete:P,onCompleteParams:U,callbackScope:H,onReverseComplete:P,onReverseCompleteParams:U,immediateRender:!1,lazy:!1,useFrames:re,overwrite:0})},ne.set=function(v,P){return new ne(v,0,P)},ne.getTweensOf=function(v,P){if(v==null)return[];var U,H,re,Ce;if(v=typeof v!="string"?v:ne.selector(v)||v,(Fe(v)||at(v))&&typeof v[0]!="number"){for(U=v.length,H=[];--U>-1;)H=H.concat(ne.getTweensOf(v[U],P));for(U=H.length;--U>-1;)for(Ce=H[U],re=U;--re>-1;)Ce===H[re]&&H.splice(U,1)}else if(v._gsTweenID)for(U=(H=ke(v).concat()).length;--U>-1;)(H[U]._gc||P&&!H[U].isActive())&&H.splice(U,1);return H||[]},ne.killTweensOf=ne.killDelayedCallsTo=function(v,P,U){typeof P=="object"&&(U=P,P=!1);for(var H=ne.getTweensOf(v,P),re=H.length;--re>-1;)H[re]._kill(U,v)};var pt=S("plugins.TweenPlugin",function(v,P){this._overwriteProps=(v||"").split(","),this._propName=this._overwriteProps[0],this._priority=P||0,this._super=pt.prototype},!0);if(A=pt.prototype,pt.version="1.19.0",pt.API=2,A._firstPT=null,A._addTween=It,A.setRatio=ze,A._kill=function(v){var P,U=this._overwriteProps,H=this._firstPT;if(v[this._propName]!=null)this._overwriteProps=[];else for(P=U.length;--P>-1;)v[U[P]]!=null&&U.splice(P,1);for(;H;)v[H.n]!=null&&(H._next&&(H._next._prev=H._prev),H._prev?(H._prev._next=H._next,H._prev=null):this._firstPT===H&&(this._firstPT=H._next)),H=H._next;return!1},A._mod=A._roundProps=function(v){for(var P,U=this._firstPT;U;)(P=v[this._propName]||U.n!=null&&v[U.n.split(this._propName+"_").join("")])&&typeof P=="function"&&(U.f===2?U.t._applyPT.m=P:U.m=P),U=U._next},ne._onPluginEvent=function(v,P){var U,H,re,Ce,Re,$=P._firstPT;if(v==="_onInitAllProps"){for(;$;){for(Re=$._next,H=re;H&&H.pr>$.pr;)H=H._next;($._prev=H?H._prev:Ce)?$._prev._next=$:re=$,($._next=H)?H._prev=$:Ce=$,$=Re}$=P._firstPT=re}for(;$;)$.pg&&typeof $.t[v]=="function"&&$.t[v]()&&(U=!0),$=$._next;return U},pt.activate=function(v){for(var P=v.length;--P>-1;)v[P].API===pt.API&&(li[new v[P]()._propName]=v[P]);return!0},Ie.plugin=function(v){if(!(v&&v.propName&&v.init&&v.API))throw"illegal plugin definition.";var P,U=v.propName,H=v.priority||0,re=v.overwriteProps,Ce={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},Re=S("plugins."+U.charAt(0).toUpperCase()+U.substr(1)+"Plugin",function(){pt.call(this,U,H),this._overwriteProps=re||[]},v.global===!0),$=Re.prototype=new pt(U);for(P in $.constructor=Re,Re.API=v.API,Ce)typeof v[P]=="function"&&($[Ce[P]]=v[P]);return Re.version=v.version,pt.activate([Re]),Re},F=o._gsQueue){for(R=0;R<F.length;R++)F[R]();for(A in Ye)Ye[A].func||o.console.log("GSAP encountered missing dependency: "+A)}G=!1}(typeof Sn<"u"&&Sn.exports&&typeof global<"u"?global:globalThis||window,"TweenMax");const rv={class:"ConfessionSuccess"},av=[(o=>(qo("data-v-11120d51"),o=o(),Zo(),o))(()=>$t("div",{id:"canvas-wrapper","aria-label":""},null,-1))],ov={__name:"ConfessionSuccess",setup:o=>(Wc(()=>{(()=>{const p=new THREE.Scene,m=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e4);m.position.x=-4e5,m.position.z=500;const T=new THREE.WebGLRenderer({antialias:!0});T.setClearColor("#4DD0E1"),T.setPixelRatio(window.devicePixelRatio),T.setSize(window.innerWidth,window.innerHeight),document.querySelector("#canvas-wrapper").appendChild(T.domElement);const u=120,E=new THREE.BoxBufferGeometry(u,u,u),F=new THREE.MeshNormalMaterial,R=new THREE.Group;for(let Pe=0;Pe<350;Pe++){const ee=new THREE.Mesh(E,F),Fe=1e4/3,Ye=2*Fe,se=2*Math.PI;ee.position.x=Math.random()*Ye-Fe,ee.position.y=Math.random()*Ye-Fe,ee.position.z=Math.random()*Ye-Fe,ee.rotation.x=Math.random()*se,ee.rotation.y=Math.random()*se,ee.rotation.z=Math.random()*se,ee.matrixAutoUpdate=!1,ee.updateMatrix(),R.add(ee)}p.add(R);const A=new THREE.FontLoader,Z=new THREE.Mesh;A.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",Pe=>{const ee={font:Pe,size:u,height:60,curveSegments:12,bevelEnabled:!0,bevelThickness:10,bevelSize:6,bevelOffset:1,bevelSegments:8},Fe=new THREE.TextGeometry("LXZ&&QPY",ee);Z.geometry=Fe,Z.material=F,Z.position.x=-240,Z.position.z=-120,p.add(Z)});let G=0,_e=0;const be={windowHalfX:window.innerWidth/2,windowHalfY:window.innerHeight/2,coordinates:function(Pe,ee){G=1*(Pe-be.windowHalfX),_e=1*(ee-be.windowHalfY)},onMouseMove:function(Pe){be.coordinates(Pe.clientX,Pe.clientY)},onTouchMove:function(Pe){be.coordinates(Pe.changedTouches[0].clientX,Pe.changedTouches[0].clientY)}};document.addEventListener("mousemove",be.onMouseMove,!1),document.addEventListener("touchmove",be.onTouchMove,!1);const Q=()=>{requestAnimationFrame(Q),m.position.x+=.5*(G-m.position.x),m.position.y+=.05*(-1*_e-m.position.y),m.lookAt(p.position);const Pe=1e-5*Date.now(),ee=.05*Math.sin(.7*Pe),Fe=.5*Math.sin(.3*Pe),Ye=.05*Math.sin(.2*Pe);R.rotation.x=ee,R.rotation.y=Fe,R.rotation.z=Ye,Z.rotation.x=ee,Z.rotation.y=Fe,Z.rotation.z=ee,T.render(p,m)};Q()})()}),(p,m)=>(cn(),Yr("div",rv,av)))},sv=ka(ov,[["__scopeId","data-v-11120d51"]]),lv=["src"];((...o)=>{const p=(Vd||(Vd=wg(Rg))).createApp(...o),{mount:m}=p;return p.mount=T=>{const u=function(R){return Yi(R)?document.querySelector(R):R}(T);if(!u)return;const E=p._component;Jt(E)||E.render||E.template||(E.template=u.innerHTML),u.innerHTML="";const F=m(u,!1,u instanceof SVGElement);return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),F},p})({__name:"App",setup(o){const p=fi(!1),m=fi(!0),T=fi(null),u=fi(!1),E=fi(null),F=fi(!1);Wc(()=>{zg()});const R=Z=>{p.value=!p.value,setTimeout(()=>{m.value=Z},1e3)},A=Z=>Z?(musicUrl.value="/Vindicate/assets/transitionmusic-a526cfff.mp3",T.value.load(),T.value.play(),setTimeout(()=>{u.value=Z},1e3)):setTimeout(()=>{p.value=!1,F.value=!Z},1e3);return(Z,G)=>(cn(),Yr("div",{onClick:G[0]||(G[0]=_e=>T.value.play())},[p.value?(cn(),Na(ev,{key:0,onDialogue:A})):zo("",!0),m.value?(cn(),Na(jg,{key:1,onDestroyed:R})):zo("",!0),u.value?(cn(),Na(nv,{key:2,ref_key:"failureAnimation",ref:E},null,512)):zo("",!0),F.value?(cn(),Na(sv,{key:3})):zo("",!0),$t("audio",{id:"backgroundMusic",autoplay:"",loop:"",ref_key:"backgroundMusic",ref:T},[$t("source",{src:Z.musicUrl,type:"audio/mpeg"},null,8,lv)],512)]))}}).mount("#app")});export default cv();
